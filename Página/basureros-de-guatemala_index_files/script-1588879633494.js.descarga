function checkNested(a){for(var b=Array.prototype.slice.call(arguments,1),c=0;c<b.length;c++){if(!a||!a.hasOwnProperty(b[c]))return!1;a=a[b[c]]}return!0}function getNestedPath(a,b,c){for(var d=b.split("."),e=0;e<d.length;e++){if(!a||!a.hasOwnProperty(d[e]))return c;a=a[d[e]]}return a}function isNestedPathExist(a,b){return void 0!==getNestedPath(a,b)}function jQueryPluginLoaded(a){return!("undefined"==typeof jQuery||!checkNested(jQuery,"fn",a))}function countTotalKeys(a){return angular.isObject(a)?Object.keys(a).length:angular.isArray(a)?a.length:0}function getRandomInt(a,b){return Math.floor(Math.random()*(b-a+1))+a}function convertMS(a,b){var c,d,e,f;return f=Math.floor(a/1e3),e=Math.floor(f/60),!angular.isUndefined(b)&&b||(f%=60),d=Math.floor(e/60),!angular.isUndefined(b)&&b||(e%=60),c=Math.floor(d/24),!angular.isUndefined(b)&&b||(d%=24),{d:c,h:d,m:e,s:f}}function isNullValue(a){return"null"==a||null==a||""==a||!a}function isEmail(a){return/^[a-z0-9][a-z0-9-_\.]+@[a-z0-9][a-z0-9-]+[a-z0-9]\.[a-z0-9]{2,10}(?:\.[a-z]{2,10})?$/.test(a)}function findMinMaxAvgSum(a,b){var c="";if(angular.isArray(a)&&a.length>0){for(var d=a[0],e=a[0],f=a[0],g=1;g<a.length;g++)a[g]<d&&(d=a[g]),a[g]>e&&(e=a[g]),f+=a[g];"Sum"==b?c=f:"Min"==b?c=d:"Max"==b?c=e:"Average"==b&&(c=f/a.length,c=c.toFixed(2))}return c}function findCurlyBracketStr(a){var b,c=[],d=/{([^}]+)}/g;if(angular.isDefined(a)&&""!=a)for(;b=d.exec(a);)c.push(b[1]);return c}function getLocalStorageVal(a){window.localStorage.getItem(a)}function getParamsToRoot(a,b){}function omit(a,b){var c={};for(var d in a)b.indexOf(d)===-1&&(c[d]=a[d]);return c}function signedUrl(a){var b=jQuery.get(a);b.done(function(a){window.open(a)}).fail(function(a){console.log(a)})}var _tb={trackMixPanel:function(a,b){"undefined"!=typeof mixpanel&&"undefined"!=typeof mixpanel.track&&mixpanel.track(a,b)},strDt:function(a){return angular.isDefined(a)&&angular.isString(a)&&(a=a.split("-").join("/")),a},removeIndexArrObj:function(a,b){checkNested(a,b)&&(angular.isArray(a)?a.splice(b,1):angular.isObject(a)&&delete a[b])},push:function(a,b,c){angular.isObject(a)||(a={}),checkNested(a,b)&&angular.isArray(a[b])||(a[b]=[]),a[b].push(c)},objToArr:function(a){return angular.isObject(a)?Object.keys(a).map(function(b){return a[b]}):a},startsWith:function(a,b){return new RegExp("^"+b.toLowerCase()).test(a.toLowerCase())},slugify:function(a){var b=a.toLowerCase().trim();return b=b.replace(/[^a-z0-9\s-]/g," "),b=b.replace(/[\s-]+/g,"-")},nullToEmpty:function(a){return(angular.isArray(a)||angular.isObject(a))&&angular.forEach(a,function(b,c){angular.isArray(b)||angular.isObject(b)?a[c]=_tb.nullToEmpty(a[c]):0!==b&&_tb.is("null",b)&&(a[c]="")}),a},valAt:function(a,b){return angular.isUndefined(b)&&(b=0),angular.isObject(a)&&(a=_tb.objToArr(a)),angular.isArray(a)&&checkNested(a,b)?a[b]:""},joinBy:function(a,b){return angular.isUndefined(b)&&(b=", "),angular.isObject(a)&&(a=_tb.objToArr(a)),angular.isArray(a)?a.join(b):""},removeTooltip:function(){jQuery("[uib-tooltip-popup]").remove()},set:function(a,b,c){angular.isObject(a)||(a={}),setNestedVar(a,b,c,!0)},uniqueId:function(){return Math.random().toString(36).substr(2)},randomNumber:function(a,b){return Math.random()*(b-a)+a},randomNum:function(a,b){"undefined"==typeof a&&(a=1),"undefined"==typeof b&&(b=!1),a*=10;var c=Math.random()*a;return c=b?parseFloat(c.toFixed(b)):Math.floor(c)},randomStr:function(a){("undefined"==typeof a||a<1)&&(a=10);for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=c.length,e=0;e<a;e++)b+=c.charAt(Math.floor(Math.random()*d));return b},roundNum:function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},kMark:function(a,b){switch(b="undefined"==typeof b?",":b){case"Comma":b=",";break;case"Period":b=".";break;case"Space":b=" "}var c=a.toString().split(".");return c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,b),c.join(".")},removeEndsWith:function(a,b){return a.indexOf(b)>-1?a.substr(0,a.indexOf(b)):a},endsWith:function(a,b){return a.indexOf(b,a.length-b.length)!==-1},countAge:function(a){a=moment(a);var b={y:0,m:0,d:0};if(a.isValid()){var c=moment();b.y=c.diff(a,"year"),a.add(b.y,"years"),b.m=c.diff(a,"months"),a.add(b.m,"months"),b.d=c.diff(a,"days")}return b},countHourDaySeconds:function(a){var b={s:a,m:0,h:0,d:0};return _tb.is("null",b.s)||"0"==b.s||(b.m=_tb.roundNum(b.s/60,2),b.h=_tb.roundNum(b.s/60/60,2),b.d=_tb.roundNum(b.s/60/60/24,2),b.m1=_tb.roundNum(b.s/60/60/24/30,2),b.y=_tb.roundNum(b.s/60/60/24/365,2)),b},countHourMinSecFromSeconds:function(a){var b={s:0,m:0,h:0};return _tb.is("null",a)||"0"==a||(a=Number(a),b.h=Math.floor(a/3600),b.m=Math.floor(a%3600/60),b.s=Math.floor(a%3600%60)),b},countTotalKeys:function(a){return angular.isObject(a)?Object.keys(a).length:angular.isArray(a)?a.length:0},clearAllSelect2:function(a,b){angular.isUndefined(b)&&(b="ctrl-ui-select2"),jQuery(b+" select",a).val(""),jQuery(b+" select",a).trigger("change"),jQuery(b+" select",a).trigger("select2:select")},escapeHTML:function(a){if(angular.isString(a)){var b={"<":"&lt;",">":"&gt;"};return a.replace(/[<>]/g,function(a){return b[a]})}return a},escapeAttrs:function(a){return _.escape(a)},stripScriptTag:function(a){if(angular.isString(a))for(var b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;b.test(a);)a=a.replace(b,"");return a},getUniqueIdInSet:function(a,b){angular.isUndefined(b)&&(b="id");var c,d,e;e=0;do c=!0,d=_tb.uniqueId(),countTotalKeys(a)>0&&angular.forEach(a,function(a){checkNested(a,b)&&a[b]==d&&(c=!1)}),e++;while(!c&&e<1e4);return d},currencySymbol:function(a){var b="$";if(angular.isDefined(a))switch(a){case"Euro":b="€";break;case"Pound":b="£";break;case"JPY":b="¥";break;case"CHF":b="Fr.";break;case"ZAR":b="R";break;case"INR":b="₹";break;case"NIS":b="₪";break;case"AED":b="د.";break;case"GHS":b="GH₵"}return b},getFontAwesomeSvgUrl:function(a,b){if(ret="",css=a.split(" "),2==css.length){switch(ret="vendor/fontawesome5.3.1/svgs/",css[0]){case"far":ret+="regular/";break;case"fab":ret+="brands/";break;case"fal":ret+="light/";break;case"fa":case"fas":ret+="solid/"}ret+=css[1].split("fa-").join("")+".svg"}return""==ret?b:ret},fieldValueFormat:function(a,b,c,d){var e=b;if(checkNested(a,"type"))switch(a.type){case"Date":var f="MM/DD/YYYY";if(checkNested(c,"format"))switch(c.format){case"short2":case"chart":f="M/D/YY"}e=moment(b).format(f);break;case"Date/Time":var f="M/D/YY";if(checkNested(c,"format"))switch(c.format){case"onlyDateShort2":case"chart":f="M/D/YY"}e=moment(b).format(f);break;case"Time":var f="HH:mm A";if(checkNested(c,"format"))switch(c.format){case"short2":case"chart":f="h:ma"}e=moment(moment().format("Y-MM-D")+" "+b).format(f);break;case"Currency":e=checkNested(a,"currencyFormat")&&"Suffix"===a.currencyFormat?b+d.apply("currencySymbol",{val:a.currencyType}):d.apply("currencySymbol",{val:a.currencyType})+b;break;case"Basic Formula":e=checkNested(a,"currencyFormat")&&"Suffix"===a.currencyFormat?b+d.apply("currencySymbol",{val:a.currencyType}):d.apply("currencySymbol",{val:a.currencyType})+b}return e},checkRuleItem:function(a,b){},fix:function(a,b,c){var d=b;switch(a){case"url":/^(f|ht)tps?:\/\//i.test(b)||(d="http://"+b,d=d.split("////").join("//"))}return d},is:function(a,b,c){var d=!1;switch(a){case"signatureEmpty":return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAB4CAYAAABIFc8gAAADjElEQVR4Xu3UgQkAMAwCwXb/oS10i4fLBHIG77YdR4AAgYDANViBlkQkQOALGCyPQIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQe7cneqEkNS/MAAAAASUVORK5CYII="==b;case"fileObj":return window.File&&window.FileReader&&window.FileList&&window.Blob&&"object"==typeof b;case"validDate":return"object"==typeof b&&"function"==typeof b.getTime&&!isNaN(b.getTime());case"null":return angular.isUndefined(b)||"null"==b||null==b||""==b;case"objNull":if(angular.isObject(b)){for(var e in b)if(!_tb.is("null",b[e]))return!1;return!0}return!0;case"contains":angular.isObject(c)&&angular.forEach(c,function(a){angular.isString(a)&&a.toLowerCase().indexOf(b.toLowerCase())>-1&&(d=!0)})}return d},submitForm:function(a,b,c){c=c||"GET";var d=document.createElement("form");d.setAttribute("method",c),d.setAttribute("action",a);for(var e in b)if(b.hasOwnProperty(e)){var f=document.createElement("input");f.setAttribute("type","hidden"),f.setAttribute("name",e),f.setAttribute("value",b[e]),d.appendChild(f)}document.body.appendChild(d),d.submit()},decode3:function(a){return!angular.isUndefined(a)&&angular.isString(a)?a.split("<<#@#>>"):a},encode3:function(a){return!angular.isUndefined(a)&&angular.isArray(a)?a.join("<<#@#>>"):a},checkFieldConditionOnly:function(a,b){isTrue=0;var c,d;switch(a.operator){case"contains":checkNested(b,a.fieldId)&&b[a.fieldId].toLowerCase().indexOf(a.val.toLowerCase())>-1&&isTrue++;break;case"does not contain":(!checkNested(b,a.fieldId)||b[a.fieldId].toLowerCase().indexOf(a.val.toLowerCase())==-1)&&isTrue++;break;case"is":"Date"==$scope.fieldType[a.fieldId]?checkNested(b,a.fieldId)&&moment(a.val).isSame(b[a.fieldId],"day")&&isTrue++:checkNested(b,a.fieldId)&&b[a.fieldId].toLowerCase()==a.val.toLowerCase()&&isTrue++;break;case"is not":"Date"==$scope.fieldType[a.fieldId]?(!checkNested(b,a.fieldId)||!moment(a.val).isSame(b[a.fieldId],"day"))&&isTrue++:(!checkNested(b,a.fieldId)||b[a.fieldId].toLowerCase()!=a.val.toLowerCase())&&isTrue++;break;case"starts with":checkNested(b,a.fieldId)&&new RegExp("^"+a.val.toLowerCase()).test(b[a.fieldId].toLowerCase())&&isTrue++;break;case"ends with":checkNested(b,a.fieldId)&&new RegExp(a.val.toLowerCase()+"$").test(b[a.fieldId].toLowerCase())&&isTrue++;break;case"is blank":(!checkNested(b,a.fieldId)||/^\s*$/.test(b[a.fieldId])||null==b[a.fieldId])&&isTrue++;break;case"is not blank":checkNested(b,a.fieldId)&&!/^\s*$/.test(b[a.fieldId])&&null!=b[a.fieldId]&&isTrue++;break;case"higher than":checkNested(b,a.fieldId)&&b[a.fieldId]>parseInt(a.val)&&isTrue++;break;case"lower than":checkNested(b,a.fieldId)&&b[a.fieldId]<parseInt(a.val)&&isTrue++;break;case"is during the current":switch(c=checkNested(a,"val2")?a.val2:"week"){case"month":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":checkNested(b,a.fieldId)&&moment().format("YY-Q")==moment(b[a.fieldId]).format("YY-Q")&&isTrue++;break;case"year":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:checkNested(b,a.fieldId)&&moment().week()==moment(b[a.fieldId]).week()&&isTrue++}break;case"is during the previous":c=checkNested(a,"val3")?a.val3:"days",d=parseInt(checkNested(a,"val2")?a.val2:0),checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBetween(moment().subtract(d,c).startOf(c),moment().endOf(c),null,"[]")&&isTrue++;break;case"is during the next":c=checkNested(a,"val3")?a.val3:"days",d=parseInt(checkNested(a,"val2")?a.val2:0),checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBetween(moment().startOf(c),moment().add(d,c).endOf(c),null,"[]")&&isTrue++;break;case"is before the previous":c=checkNested(a,"val3")?a.val3:"days",d=parseInt(checkNested(a,"val2")?a.val2:0),checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBefore(moment().subtract(d,c).endOf(c),null,"[]")&&isTrue++;break;case"is before the next":c=checkNested(a,"val3")?a.val3:"days",d=parseInt(checkNested(a,"val2")?a.val2:0),checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBefore(moment().subtract(d,c).endOf(c),null,"[]")&&isTrue++;break;case"is before":checkNested(b,a.fieldId)&&checkNested(a,"val")&&moment(b[a.fieldId]).isBefore(moment(a.val).startOf("day"))&&isTrue++;break;case"is after":checkNested(b,a.fieldId)&&checkNested(a,"val")&&moment(b[a.fieldId]).isAfter(moment(a.val).endOf("day"))&&isTrue++;break;case"is today":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue},parseStrForGraph:function(a){return a=a.split('"').join(""),a='"'+a+'"'},getTimeRemaining:function(a,b,c){var d=b-a;t1=Math.abs(d);var e=Math.floor(t1/1e3%60),f=Math.floor(t1/1e3/60%60),g=Math.floor(t1/36e5%24),h=Math.floor(t1/864e5);return c===!0?{total:d,days:Math.abs(h),hours:Math.abs(g),minutes:Math.abs(f),seconds:Math.abs(e)}:{total:d,days:h,hours:g,minutes:f,seconds:e}},windowVisibilityChange:function(a){function b(){d||a(d=!0)}function c(){d&&a(d=!1)}var d=!0;if(!a)throw new Error("no callback given");"hidden"in document?document.addEventListener("visibilitychange",function(){(document.hidden?c:b)()}):"mozHidden"in document?document.addEventListener("mozvisibilitychange",function(){(document.mozHidden?c:b)()}):"webkitHidden"in document?document.addEventListener("webkitvisibilitychange",function(){(document.webkitHidden?c:b)()}):"msHidden"in document?document.addEventListener("msvisibilitychange",function(){(document.msHidden?c:b)()}):"onfocusin"in document?(document.onfocusin=b,document.onfocusout=c):(window.onpageshow=window.onfocus=b,window.onpagehide=window.onblur=c)},mapOrder:function(a,b,c){return a=_tb.objToArr(a),a.sort(function(a,d){var e=a[c],f=d[c];return b.indexOf(e)>b.indexOf(f)?1:-1}),a}};!function(a){a.fn.hitStopWatchParent=function(){a("[hit-start-watch]",this).hitStopWatch()},a.fn.hitStopWatch=function(){function b(){h=_tb.getTimeRemaining(new Date,g,!0),i.parentElement.className=h.total>0?"hide":"",j.parentElement.className=h.days?"":"hide",k.parentElement.className=h.hours||h.days?"":"hide",l.parentElement.className=h.minutes||h.hours||h.days?"":"hide",j.innerHTML=h.days,k.innerHTML=h.hours,l.innerHTML=h.minutes,m.innerHTML=h.seconds}var c=this;if(!(c.length<1)){var d=a(this);if(""!=d.attr("d1")&&!_tb.is("null",d.attr("d1"))){var e,f=moment().toDate(),g=moment(d.attr("d1"),"YYYY-MM-DD HH:mm:ss").toDate(),h=_tb.getTimeRemaining(f,g,!0);c.html(""),c.append('<span><span class="hsw-minus">-</span></span>'),c.append('<span><span class="hsw-days">'+h.days+"</span> days</span>"),c.append('<span><span class="hsw-hours">'+h.hours+"</span> hours</span>"),c.append('<span><span class="hsw-minutes">'+h.minutes+"</span> minutes</span>"),c.append('<span><span class="hsw-seconds">'+h.seconds+"</span> seconds</span>");var i=c[0].querySelector(".hsw-minus"),j=c[0].querySelector(".hsw-days"),k=c[0].querySelector(".hsw-hours"),l=c[0].querySelector(".hsw-minutes"),m=c[0].querySelector(".hsw-seconds");b(),e=setInterval(b,1e3)}}}}(jQuery),angular.module("app",["ngAnimate","ngCookies","ngStorage","ngSanitize","ui.router","ui.router.metatags","ui.bootstrap","ui.jq","ui.load","ui.bootstrap.datetimepicker","ui.tinymce","oc.lazyLoad","toaster","cloudinary","ngFileUpload","ui.mask","ngRateIt","rzModule","angular.filter"]),angular.module("app").component("showAppName",{template:'<div class="tb-app-name"><span ng-bind-html="$ctrl.name"></span></div>',controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onInit=function(){e.name=d.App.get("appName")}}]}),angular.module("app").component("countBadge",{bindings:{type:"<?",subType:"<?",itemId:"<?"},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;n.isExist=!1,n.total="",n.$onChanges=function(a){var b=getNestedPath(a,"type.currentValue",n.type),c=getNestedPath(a,"subType.currentValue",n.subType),d=getNestedPath(a,"itemId.currentValue",n.itemId);switch(b){case"formC":case"detailC":switch(c){case"displayRules":case"submitRules":case"validationRules":case"recordRules":case"emails":case"texts":n.total=_tb.countTotalKeys(getNestedPath(d,c,0)),n.isExist=!0}break;case"dataTable":switch(c){case"fields":n.total=k.App.get("totalVisibleFields",d),n.isExist=!0;break;case"rules":var e=k.App.get("dataTables",d);n.total=_tb.countTotalKeys(getNestedPath(e,"metas.tableRules",0)),n.isExist=!0;break;case"imports":n.total=_tb.countTotalKeys(k.App.get("importsForDataTable",d)),n.isExist=!0;break;case"exports":n.total=_tb.countTotalKeys(k.App.get("exportsForDataTable",d)),n.isExist=!0;break;case"tasks":n.total=_tb.countTotalKeys(k.App.get("tasksForDataTable",d)),n.isExist=!0}}n.isExist&&_tb.is("null",n.total)&&(n.total=0),n.total<1&&(n.isExist=!1)}}],template:'<span ng-if="$ctrl.isExist"><span class="badge tb-badge badge-danger1">{{$ctrl.total}}</span></span>'}),angular.module("app").component("ctrlActionRules",{bindings:{ngModel:"=",element:"=",tableId:"<?",type:"<?",formFields:"<?",index:"<?"},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","DataAPI","$stateParams","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;p.App=m.App,p.joinTablesInfo=[],p.dataTables=[],p.fields=[],p.emailFields=[],p.phoneFields=[],p.allowEmail=!1,p.allowText=!1,p.allowSetVal=!0;var q=function(){switch(p.type){case"actionRules":case"taskActionRules":p.allowEmail=!0,p.allowText=!0;break;case"tableRules":p.element={},p.element.dataTableId=p.tableId,p.formFields=m.App.get("dataFields",p.tableId)}checkNested(p.element,"dataTableId")&&(p.dataTableId=p.element.dataTableId,p.joinTablesInfo=m.App.get("connectedTableSelectList",p.dataTableId),p.dataTables=angular.copy(m.App.get("dataTables")),p.fields=angular.copy(m.App.get("dataFields",p.dataTableId)),angular.forEach(p.fields,function(a){"Email"==a.type&&p.emailFields.push({text:a.name,val:a.slug,name:a.name,id:a.id}),"Phone"==a.type&&p.phoneFields.push({text:a.name,val:a.slug,name:a.name,id:a.id})}),""!=p.dataTableId&&checkNested(p.dataTables,p.dataTableId,"joins")&&angular.forEach(p.dataTables[p.dataTableId].joins,function(a){var b=checkNested(p.dataTables,a.id)?p.dataTables[a.id].name:"";if(""!=b){var c=angular.copy(m.App.get("dataFields",a.id));angular.forEach(c,function(c){"Email"==c.type&&p.emailFields.push({val:a.fieldId+"-"+c.slug,text:b+" > "+c.name,name:c.name,id:c.id}),"Phone"==c.type&&p.phoneFields.push({val:a.fieldId+"-"+c.slug,text:b+" > "+c.name,name:c.name,id:c.id})})}}),p.connectedDataTables=m.App.get("connectedTableSelectList",p.dataTableId),p.connectedDataTableFields=[],p.connectedDataTableFieldGroups={},angular.forEach(p.connectedDataTables,function(a){var b=angular.copy(m.App.get("dataFields",a.tableId));angular.isArray(b)&&angular.forEach(b,function(b){if("Basic Formula"!=b.type||"Text Formula"!=b.type||"Complex Formula"!=b.type||"Date Formula"!=b.type||"Auto Increment"!=b.type)if(checkNested(b,"hidden")&&1==b.hidden);else{var c=a.fieldId+"_"+a.tableId;checkNested(p.connectedDataTableFieldGroups,c)||(p.connectedDataTableFieldGroups[c]={},p.connectedDataTableFieldGroups[c].title=m.App.get("fieldName",a.fieldId)+" > "+p.dataTables[a.tableId].name,p.connectedDataTableFieldGroups[c].fields=[]),p.connectedDataTableFieldGroups[c].fields.push({fieldId:a.fieldId+"_"+a.tableId+"_"+b.id,name:b.name}),p.connectedDataTableFields.push({fieldId:a.fieldId+"_"+a.tableId+"_"+b.id,name:p.dataTables[a.tableId].name+" > "+b.name})}})}))};p.$onChanges=function(a){q()},p.$onInit=function(){},p.removeRuleItem=function(a){p.ngModel.splice(a,1)},p.addCondition=function(a){_tb.push(a,"conditions",{items:[]})},p.removeCondition=function(a,b){b.conditions.splice(a,1)},p.getRecordRuleValueFields=function(a){var b;if(b=[],"update"==a.action)return p.fields;if(checkNested(a,"joinTable")&&""!=a.joinTable&&!_tb.is("null",a.joinTable)){var c=a.joinTable.split("-");return m.App.get("dataFields",c[0])}return b},p.getUserTableFields=function(a){var b;if(b=[],checkNested(a,"fieldId")&&!_tb.is("null",a.fieldId)){b=m.App.get("userDataTableFields");var c=[];angular.forEach(b,function(b){var d=m.App.get("fieldFromFieldSlug",a.fieldId);"api_token"!=b.slug&&"password"!=b.slug&&(jQuery.inArray(d.type,["Text","Rich Text","Long Text"])>-1||d.type==b.type)&&c.push(b)}),b=c}return b},p.addRuleValue=function(a){_tb.push(a,"values",{fieldId:"",type:"custom_val",customVal:"",fieldVal:""})},p.removeRuleValue=function(a,b){b.values.length>1&&b.values.splice(a,1)},p.addSubjectField=function(a,b){a.subject+="{"+b.name+"}"},p.addEmailSends=function(a){a.push({type:"to",etype:"custom"})},p.removeEmailSends=function(a,b){b.splice(a,1)},p.addMessageField=function(a,b){a.message+="{"+b.name+"}"},p.addTextMsgSends=function(a){var b="";a.push({etype:"custom",field:b})},p.removeTextMsgSends=function(a,b){b.splice(a,1)},p.changeRuleItem=function(a){switch(a.action){case"send_email":checkNested(a,"emails")||(a.email={sends:[{type:"to",etype:"custom",field:""}],subject:"",message:""});break;case"send_text":checkNested(a,"text")||(a.text={sends:[{type:"to",etype:"custom",field:""}],message:""})}}}],templateUrl:"assets/common/ctrls/ctrl-actions-rules.html"}),angular.module("app").component("ctrlAllowInlineEditing",{bindings:{item:"=",field:"="},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;n.template="assets/common/ctrls/ctrl-allow-inline-editing.html",n.isOpen=!1,n.close=function(){n.isOpen=!1},n.open=function(){n.isOpen||(n.isOpen=!0)},n.$init=function(){}}],template:'<div uib-popover-template="$ctrl.template" popover-trigger="\'outsideClick\'" popover-is-open="$ctrl.isOpen"><af-data-table-field item="$ctrl.item" column="$ctrl.field"></af-data-table-field></div>'}),angular.module("app").component("ctrlCheckboxes",{bindings:{ngModel:"=",field:"=",disabled:"="},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this,o=function(a){return checkNested(n.field,"options","allowDiffVal")&&"1"==n.field.options.allowDiffVal?a.val:a.text};n.isChecked=function(a){return angular.isArray(n.ngModel)&&n.ngModel.indexOf(o(a))>-1},n.toggleCheck=function(a){angular.isArray(n.ngModel)||(n.ngModel=[]);var b=o(a),c=n.ngModel.indexOf(b);return c>-1?n.ngModel.splice(c,1):n.ngModel.push(b),!0},n.$onInit=function(){if(angular.isDefined(n.ngModel)&&angular.isArray(n.ngModel)&&checkNested(n.field,"options","options")){var a=[];angular.forEach(n.ngModel,function(b,c){angular.forEach(n.field.options.options,function(c){o(c)==b&&a.push(b)})}),n.ngModel=a}},n.isLblTop=function(a){return a?"Top"==n.field.optionLblPosition:(!checkNested(n.field,"optionLblPosition")||"Hide"!=n.field.optionLblPosition)&&(checkNested(n.field,"optionLblPosition")&&("Top"==n.field.optionLblPosition||"Left"==n.field.optionLblPosition))},n.isLblBottom=function(a){return a?"Bottom"==n.field.optionLblPosition:(!checkNested(n.field,"optionLblPosition")||"Hide"!=n.field.optionLblPosition)&&(!checkNested(n.field,"optionLblPosition")||"Bottom"==n.field.optionLblPosition||"Right"==n.field.optionLblPosition)}}],template:'<label class="text-center tb-checkbox" ng-repeat="(index, option) in $ctrl.field.options.options"><span ng-if="$ctrl.isLblTop(false)">{{option.text}}</span> <br ng-if="$ctrl.isLblTop(true)"/> <input type="checkbox" ng-checked="$ctrl.isChecked(option)" ng-click="$ctrl.toggleCheck(option)" ng-disabled="$ctrl.disabled"><i class="fal fa-{{option.iconClass}} fa-{{$ctrl.field.iconSize}} font-dark" ng-if="option.iconClass && $ctrl.field.showIcon == \'Yes\'"></i><br ng-if="$ctrl.isLblBottom(true)"/>  <span ng-if="$ctrl.isLblBottom(false)">{{option.text}}</span></label>'}),angular.module("app").directive("ctrlDbFieldInput",["$parse","$timeout","$rootScope","$compile","$uibTooltip","$uibModal","MsgBox",function(a,b,c,d,e,f,g){return{restrict:"A",scope:{fields:"="},require:"ngModel",link:function(a,b,c,d){console.log("testing"),console.log(a.fields),d.$parsers.unshift(function(b){return console.log("parser"),console.log(b),angular.isArray(a.fields)&&angular.forEach(a.fields,function(a){b=b.split("{"+a.name+"}").join("{"+a.slug+"}")}),console.log(b),b}),d.$formatters.push(function(b){return angular.isArray(a.fields)&&angular.forEach(a.fields,function(a){b=b.split("{"+a.slug+"}").join("{"+a.name+"}")}),console.log(b),b})}}}]),angular.module("app").component("ctrlDescriptionViewBox",{bindings:{ngModel:"="},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;n.mode=0,n.text="",n.$onInit=function(){},n.changeMode=function(a,b){n.mode=a,1===b?n.ngModel=n.text:a&&(n.text=n.ngModel)}}],template:'<div class="view-box" ng-class="{\'edit-mode\': $ctrl.mode}"><div class="text d-i-b" ng-click="$ctrl.changeMode(1)">{{$ctrl.ngModel || \'add a description\'}} <i class="fa fa-pencil"></i></div><div class="input-box"><textarea class="form-control input-large m-b-5" type="text" ng-model="$ctrl.text" placeholder="Enter"/><button class="btn btn-two btn-sm" ng-click="$ctrl.changeMode(0, 1)">Update</button> <button class="btn btn-three btn-sm" ng-click="$ctrl.changeMode(0)">Close</button></div></div>'}),angular.module("app").component("ctrlFieldInput",{bindings:{fieldId:"<?",fieldSlug:"<?",ngModel:"=",params:"<?",index:"<?"},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","DataAPI","$stateParams","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=this;p.field=!1,p.fieldType="",p.selectOptions=[];var q=function(){return angular.isUndefined(p.field)||0==p.field};p.getInputCtrl=function(){if(!q()){var a=!1,b=checkNested(p.field,"type")?p.field.type:"";return jQuery.inArray(b,["Text","Number","Rich Text","Long Text","Currency","Email","Phone"])!=-1?a="text":jQuery.inArray(b,["Select","Decision Box","Join","Rating","Slider"])!=-1?(a="select",p.ngModel&&(p.ngModel+="")):a=b,a}},p.loadJoinData=function(a){var b=checkNested(p.field,"type")?p.field.type:"";"Join"==b&&j.save("apps."+k.appId+".joinTableOptions",{field:p.field},function(a){p.field.options=a.items,angular.forEach(p.field.options,function(a){p.selectOptions.push({val:a.val,text:a.text})})},function(a,b){j.handleErrors(b,!0),p.field.options=[]})},p.loadJoinOtherField=function(){checkNested(p.field,"type")&&"Join"==p.field.type&&(p.field.userOptions=m.App.get("userDataTableFieldsWithSameJoinField",p.field.id))},p.readyControl=function(a){p.selectOptions=[],q();var b=checkNested(p.field,"type")?p.field.type:"";switch(b){case"Select":case"Multi-Select":case"Checkbox":case"Radio":p.selectOptions=[],angular.forEach(p.field.options,function(a){var b=1==p.field.allowDiffVal?a.val:a.text;p.selectOptions.push({val:b,text:a.text})}),a||(p.ngModel="Multi-Select"==b||"Checkbox"==b?[p.selectOptions[0].val]:p.selectOptions[0].val),angular.isObject(p.ngModel)&&angular.forEach(p.ngModel,function(a,b){p.ngModel[b]=a+""});break;case"Decision Box":p.selectOptions=[{val:0,text:"No"},{val:1,text:"Yes"}],a||(p.ngModel="0"),angular.isNumber(p.ngModel)&&(p.ngModel+="");break;case"Address":case"Name":a&&!angular.isString(p.ngModel)||(p.ngModel={});break;case"Join":!a||angular.isString(p.ngModel);break;case"Link":a&&!angular.isString(p.ngModel)||(p.ngModel={});break;case"Rating":p.selectOptions=[];for(var c=0;c<=p.field.numberOfStar;c++)p.selectOptions.push({val:c,text:c+" Star"});a||(p.ngModel="0");break;case"Slider":var d=0,e=100;for(checkNested(p.field,"minVal")&&checkNested(p.field,"maxVal")&&(d=parseInt(p.field.minVal),e=parseInt(p.field.maxVal)),c=d;c<=e;c++)p.selectOptions.push({val:c,text:c});a||(p.ngModel="0");break;default:a||(p.ngModel="")}p.loadJoinData()},p.$onChanges=function(a){var b=angular.isUndefined(p.ngModel);checkNested(a,"fieldSlug")&&(angular.isUndefined(p.field)||p.field===!1||checkNested(p.field,"id")&&p.field.id!=a.fieldSlug.currentValue)&&(p.field=m.App.get("fieldFromFieldSlug",a.fieldSlug.currentValue),b=a.fieldSlug.isFirstChange()),(angular.isUndefined(p.field)||p.field===!1)&&checkNested(a,"fieldId")&&(angular.isUndefined(p.field)||p.field===!1||checkNested(p.field,"id")&&p.field.id!=a.fieldId.currentValue)&&(p.field=m.App.get("field",a.fieldId.currentValue),b=a.fieldId.isFirstChange()),p.readyControl(b),p.fieldType=p.getInputCtrl()},p.$onInit=function(a){var b=(new Date).getTime()+"_"+(new Date).getMilliseconds();for(p.index.toString().indexOf("_")<0&&(p.index+="_"+b);;){if(!angular.element("[name=field"+p.index+"]").length)break;p.index+="_"+(new Date).getMilliseconds()}}}],templateUrl:"assets/common/ctrls/ctrl-field-input.html"}),angular.module("app").component("ctrlHighchartElement",{bindings:{element:"=",data:"=",preview:"=",showTabs:"="},controller:["$scope","$rootScope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$http","$timeout","$stateParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this;o.loading=!1,o.chartErr="",o.tabIndex="-1",o.chartOptions={credits:{enabled:!1}},o.chartStyle={},o.drawChart=function(){m(function(){Highcharts.chart(angular.element(".chart",c)[0],o.chartOptions)},10)},o.initDrawChart=function(){o.chartErr="";var a=0,b=0;if(o.chartOptions.chart={type:o.element.chartType.toLowerCase()},checkNested(o.element,"chart")){switch(checkNested(o.element.chart,"title")&&""!=o.element.chart.title?(o.chartOptions.title={text:o.element.chart.title},a+=80):o.chartOptions.title={text:""},checkNested(o.element.chart,"legend","pos")&&"None"!=o.element.chart.legend.pos?(o.chartOptions.legend={title:{text:(checkNested(o.element.chart,"group","title")&&""!=o.element.chart.group.title?o.element.chart.group.title+"<br/>":"")+'<span style="font-size: 9px; color: #666; font-weight: normal">(Click to hide)</span>'},align:"center",verticalAlign:"bottom",floating:!1,enabled:!0,layout:"horizontal"},"Right"==o.element.chart.legend.pos?(o.chartOptions.legend.align="right",o.chartOptions.legend.verticalAlign="top",o.chartOptions.legend.layout="vertical",o.chartOptions.legend.y=40,o.chartOptions.legend.x=0,a+=200):b+=150):o.chartOptions.legend={enabled:!1},o.chartOptions.series=[{data:o.data}],o.element.chartType){case"Line":case"Area":case"Bar":checkNested(o.chartOptions,"legend","title")&&(o.chartOptions.legend.title=""),o.chartOptions.series=[{name:"_count_"==o.element.chart.calc.fieldId?"Total":o.element.chart.calc.title,data:[]}],o.chartOptions.xAxis={categories:[]},angular.forEach(o.data,function(a){o.chartOptions.xAxis.categories.push(a.name),o.chartOptions.series[0].data.push(a.y),"Line"==o.element.chartType&&checkNested(o.element.chart,"betweenLine")&&"Hide"==o.element.chart.betweenLine&&(o.chartOptions.series[0].lineWidth=0)}),o.chartOptions.xAxis.title={text:checkNested(o.element.chart,"group","title")&&""!=o.element.chart.group.title?o.element.chart.group.title:""
},o.chartOptions.yAxis={title:{text:null}},o.chartOptions.plotOptions={bar:{dataLabels:{enabled:!0}}};break;case"Pie":o.chartOptions.plotOptions={pie:{allowPointSelect:!1,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.percentage:.1f} %",distance:-40,color:"white"},showInLegend:!0},series:{animation:!0,dataLabels:{enabled:!0}}}}o.chartOptions.exporting={enabled:!0}}o.chartOptions.tooltip={headerFormat:'<span style="font-size: 10px">{point.key}</span> - '+("_count_"==o.element.chart.calc.fieldId?"Total":o.element.chart.calc.title)+"<br/>",pointFormat:"<b>{point.y}</b> - ({point.percentage:.1f}%)",enabled:!0},o.chartStyle={width:"500",height:"300"},checkNested(o.element.chart,"dimension")&&"Custom"==o.element.chart.dimension&&(o.chartStyle.width=checkNested(o.element.chart,"width")&&""!=o.element.chart.width?parseInt(o.element.chart.width):500,o.chartStyle.height=checkNested(o.element.chart,"height")&&""!=o.element.chart.height?parseInt(o.element.chart.height):300,o.chartOptions.legend.width=checkNested(o.element.chart,"legend","width")&&""!=o.element.chart.legend.width?parseInt(o.element.chart.legend.width):110),o.chartStyle.width=o.chartStyle.width?o.chartStyle.width+"px":"auto",o.chartStyle.height=o.chartStyle.height?o.chartStyle.height+"px":"auto",o.drawChart()},o.refreshChart=function(){if(!checkNested(o.element,"chartType"))return void(o.chartErr="Not enough data for chart");o.loading=!0;var a={chartType:o.element.chartType,dataTableId:o.element.dataTableId,groupBy:o.element.chart.group.fieldId,cal:o.element.chart.calc.fieldId};if(checkNested(o.element,"filters")&&(a.filters=o.element.filters),checkNested(o.element,"filterTabs",o.tabIndex)&&(a.filters2=o.element.filterTabs[o.tabIndex]),a.hideZero="No",checkNested(o.element.chart,"hideZero")&&"Yes"==o.element.chart.hideZero&&(a.hideZero="Yes"),checkNested(o.element,"settings","sortBy")&&angular.isArray(o.element.settings.sortBy)&&(a.sortBy=o.element.settings.sortBy),!o.preview&&(a.lastParam=o.element.lastParam,a.lastParam)){for(var c in n);a.joinRecord={recordId:n[c],fieldId:o.element.joinFieldId,tableId:o.element.joinTableId,slug:o.element.joinTableSlug,type:o.element.joinType,table:o.element.joinTable},checkNested(o.element,"joinLevel")&&(a.joinRecord.joinLevel=o.element.joinLevel),checkNested(o.element,"joinType2")&&(a.joinRecord.joinType2=o.element.joinType2),checkNested(o.element,"join2")&&(a.joinRecord.join2=o.element.join2),checkNested(o.element,"join")&&(a.joinRecord.join=o.element.join)}b.App.loadData("chartData",a,{},function(a){o.loading=!1,checkNested(a,"type")&&"success"==a.type?!angular.isArray(a.items)||a.items.length<1?o.chartErr="Not enough data for chart":(o.data=p(a.items),o.initDrawChart()):o.chartErr=checkNested(a,"msg")&&"success"!=a.msg?a.msg:"Error in loading data"})},checkNested(k,"registerDataChange")&&angular.isFunction(k.registerDataChange)&&k.registerDataChange("form_add_record",function(a,b){checkNested(b,"tableId")&&b.tableId==o.element.dataTableId&&o.refreshChart()}),o.$onChanges=function(a){o.refreshChart()},o.$onInit=function(a){},o.setFilterTab=function(a){o.tabIndex=a,o.refreshChart()};var p=function(a){var c=[];b.App.get("field",o.element.chart.group.fieldId);return angular.isObject(a)&&angular.forEach(a,function(a){if(angular.isObject(a.name))angular.forEach(a.name,function(b){var d=!1;angular.forEach(c,function(c){c.name==b&&(c.y+=a.y,d=!0)}),d||c.push({name:b,y:a.y})});else{var b=!1;angular.forEach(c,function(c){c.name==a.name&&(c.y+=a.y,b=!0)}),b||c.push({name:a.name,y:a.y})}}),c}}],template:'<div class="chart-wrap"><h3 ng-if="$ctrl.preview">Preview</h3><div ng-if="$ctrl.showTabs"><div class="filter-tabs" ng-if="$ctrl.element.filterType==\'Filter Tab\'"><ul class="nav nav-tabs"><li ng-repeat="tab in $ctrl.element.filterTabs" ng-class="{\'active\': $ctrl.tabIndex == $index}"><a ng-click="$ctrl.setFilterTab($index)">{{tab.title}}</a></li><li ng-if="$ctrl.element.settings.hideClearFilter != \'Yes\'"><a ng-click="$ctrl.setFilterTab(-1)">Clear Filter</a></li></ul></div></div><div class="m-b" ng-if="$ctrl.preview"><em>data is approximate <a ng-click="$ctrl.refreshChart()">refresh</a></em></div><div ng-show="$ctrl.loading"><i class="fa fa-spin fa-3x fa-circle-o-notch"></i> Loading...</div><div class="alert alert-danger" ng-show="$ctrl.chartErr != \'\'">{{$ctrl.chartErr}}</div><div ng-style="$ctrl.chartStyle" class="chart" ng-show="!$ctrl.loading && $ctrl.chartErr == \'\'"></div></div>'}),angular.module("app").component("ctrlIconPicker",{bindings:{ngModel:"="},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this,o=function(){jQuery(":text",b).iconpicker({templates:{popover:'<div class="iconpicker-popover popover"><div class="arrow"></div><div class="popover-title"></div><div class="popover-content"></div></div>',footer:'<div class="popover-footer"></div>',buttons:'<button class="iconpicker-btn iconpicker-btn-cancel btn btn-default btn-sm">Cancel</button> <button class="iconpicker-btn iconpicker-btn-accept btn btn-primary btn-sm">Accept</button>',search:'<input type="search" class="form-control iconpicker-search" placeholder="Type to filter" />',iconpicker:'<div class="iconpicker"><div class="iconpicker-items"></div></div>',iconpickerItem:'<a role="button" href="javascript:void(0)" class="iconpicker-item"><i></i></a>'}})};n.$onChanges=function(a){m(function(){o()},10)},n.$onInit=function(){}}],template:'<div class="tb-icon-picker-wrap"><div class="input-group"><input data-placement="bottomRight" class="form-control" value="fas fa-archive" type="text" ng-model="$ctrl.ngModel" placeholder="Type or select icon"/><span class="input-group-addon"></span></div></div>'}),angular.module("app").component("ctrlIconPicker2",{bindings:{ngModel:"="},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;n.template="assets/client/tpl/app-icon-picker-2.html",n.isOpen=!1,n.ic={activeTab:"fal",search:""},n.selectTab=function(a){n.limitTo=n.totalLimit,"fab"!=n.ic.activeTab&&jQuery.inArray(a,["fa","fal","far"])>-1||(n.icons="fab"==a?n.allIcons.fab:n.allIcons.fa),n.ic.activeTab=a},n.selectIcon=function(a){n.ngModel=n.ic.activeTab+" fa-"+a.i,n.close()},n.close=function(){n.isOpen=!1},n.open=function(){n.isOpen||(n.isOpen=!0)},n.clear=function(){n.ic.search=""},n.allIcons={fa:[{i:"abacus",s:"",l:"Abacus"},{i:"ad",s:"",l:"Ad"},{i:"address-book",s:"",l:"Address Book"},{i:"address-card",s:"",l:"Address Card"},{i:"adjust",s:"contrast",l:"adjust"},{i:"air-freshener",s:"",l:"Air Freshener"},{i:"alarm-clock",s:"date late timer timestamp watch",l:"Alarm Clock"},{i:"align-center",s:"middle text",l:"align-center"},{i:"align-justify",s:"text",l:"align-justify"},{i:"align-left",s:"text",l:"align-left"},{i:"align-right",s:"text",l:"align-right"},{i:"allergies",s:"freckles hand intolerances pox spots",l:"Allergies"},{i:"ambulance",s:"help machine support vehicle",l:"ambulance"},{i:"american-sign-language-interpreting",s:"",l:"American Sign Language Interpreting"},{i:"analytics",s:"",l:"Analytics"},{i:"anchor",s:"link",l:"Anchor"},{i:"angle-double-down",s:"arrows",l:"Angle Double Down"},{i:"angle-double-left",s:"arrows back laquo previous quote",l:"Angle Double Left"},{i:"angle-double-right",s:"arrows forward next quote raquo",l:"Angle Double Right"},{i:"angle-double-up",s:"arrows",l:"Angle Double Up"},{i:"angle-down",s:"arrow",l:"angle-down"},{i:"angle-left",s:"arrow back previous",l:"angle-left"},{i:"angle-right",s:"arrow forward next",l:"angle-right"},{i:"angle-up",s:"arrow",l:"angle-up"},{i:"angry",s:"disapprove emoticon face mad upset",l:"Angry Face"},{i:"ankh",s:"amulet copper coptic christianity copts crux ansata egyptian venus",l:"Ankh"},{i:"apple-alt",s:"",l:"Fruit Apple"},{i:"archive",s:"box package storage",l:"Archive"},{i:"archway",s:"arc monument road street",l:"Archway"},{i:"arrow-alt-circle-down",s:"arrow-circle-o-down download",l:"Alternate Arrow Circle Down"},{i:"arrow-alt-circle-left",s:"arrow-circle-o-left back previous",l:"Alternate Arrow Circle Left"},{i:"arrow-alt-circle-right",s:"arrow-circle-o-right forward next",l:"Alternate Arrow Circle Right"},{i:"arrow-alt-circle-up",s:"arrow-circle-o-up",l:"Alternate Arrow Circle Up"},{i:"arrow-alt-down",s:"",l:"Alternate Arrow Down"},{i:"arrow-alt-from-bottom",s:"download",l:"Alternate Arrow from Bottom"},{i:"arrow-alt-from-left",s:"back previous",l:"Alternate Arrow from Left"},{i:"arrow-alt-from-right",s:"forward next",l:"Alternate Arrow from Right"},{i:"arrow-alt-from-top",s:"",l:"Alternate Arrow from Top"},{i:"arrow-alt-left",s:"back previous",l:"Alternate Arrow Left"},{i:"arrow-alt-right",s:"forward next",l:"Alternate Arrow Right"},{i:"arrow-alt-square-down",s:"",l:"Alternate Arrow Square Down"},{i:"arrow-alt-square-left",s:"back previous",l:"Alternate Arrow Square Left"},{i:"arrow-alt-square-right",s:"forward next",l:"Alternate Arrow Square Right"},{i:"arrow-alt-square-up",s:"",l:"Alternate Arrow Square Up"},{i:"arrow-alt-to-bottom",s:"download",l:"Alternate Arrow to Bottom"},{i:"arrow-alt-to-left",s:"back previous",l:"Alternate Arrow to Left"},{i:"arrow-alt-to-right",s:"forward next",l:"Alternate Arrow to Right"},{i:"arrow-alt-to-top",s:"",l:"Alternate Arrow to Top"},{i:"arrow-alt-up",s:"",l:"Alternate Arrow Up"},{i:"arrow-circle-down",s:"download",l:"Arrow Circle Down"},{i:"arrow-circle-left",s:"back previous",l:"Arrow Circle Left"},{i:"arrow-circle-right",s:"forward next",l:"Arrow Circle Right"},{i:"arrow-circle-up",s:"",l:"Arrow Circle Up"},{i:"arrow-down",s:"download",l:"arrow-down"},{i:"arrow-from-bottom",s:"download",l:"Arrow from Bottom"},{i:"arrow-from-left",s:"back previous",l:"Arrow from Left"},{i:"arrow-from-right",s:"forward next",l:"Arrow from Right"},{i:"arrow-from-top",s:"",l:"Arrow from Top"},{i:"arrow-left",s:"back previous",l:"arrow-left"},{i:"arrow-right",s:"forward next",l:"arrow-right"},{i:"arrow-square-down",s:"",l:"Arrow Square Down"},{i:"arrow-square-left",s:"back previous",l:"Arrow Square Left"},{i:"arrow-square-right",s:"forward next",l:"Arrow Square Right"},{i:"arrow-square-up",s:"",l:"Arrow Square Up"},{i:"arrow-to-bottom",s:"download",l:"Arrow to Bottom"},{i:"arrow-to-left",s:"back previous",l:"Arrow to Left"},{i:"arrow-to-right",s:"forward next",l:"Arrow to Right"},{i:"arrow-to-top",s:"",l:"Arrow to Top"},{i:"arrow-up",s:"",l:"arrow-up"},{i:"arrows",s:"move position reorder resize",l:"Arrows"},{i:"arrows-alt",s:"arrow arrows bigger enlarge expand fullscreen move position reorder resize",l:"Alternate Arrows"},{i:"arrows-alt-h",s:"arrows-h resize",l:"Alternate Arrows Horizontal"},{i:"arrows-alt-v",s:"arrows-v resize",l:"Alternate Arrows Vertical"},{i:"arrows-h",s:"resize",l:"Arrows Horizontal"},{i:"arrows-v",s:"resize",l:"Arrows Vertical"},{i:"assistive-listening-systems",s:"",l:"Assistive Listening Systems"},{i:"asterisk",s:"details",l:"asterisk"},{i:"at",s:"e-mail email",l:"At"},{i:"atlas",s:"book directions geography map wayfinding",l:"Atlas"},{i:"atom",s:"atheism chemistry science",l:"Atom"},{i:"atom-alt",s:"",l:"Atom Alt"},{i:"audio-description",s:"",l:"Audio Description"},{i:"award",s:"honor praise prize recognition ribbon",l:"Award"},{i:"backpack",s:"",l:"Backpack"},{i:"backspace",s:"command delete keyboard undo",l:"Backspace"},{i:"backward",s:"previous rewind",l:"backward"},{i:"badge",s:"",l:"Badge"},{i:"badge-check",s:"accept achievement agree award confirm correct done ok security select success winner yes",l:"Check Badge"},{i:"badge-dollar",s:"",l:"Badge Dollar"},{i:"badge-percent",s:"",l:"Badge Percent"},{i:"balance-scale",s:"balanced justice legal measure weight",l:"Balance Scale"},{i:"balance-scale-left",s:"justice legal measure unbalanced weight",l:"Balance Scale (Left-Weighted)"},{i:"balance-scale-right",s:"justice legal measure unbalanced weight",l:"Balance Scale (Right-Weighted)"},{i:"ban",s:"abort ban block cancel delete hide prohibit remove stop trash",l:"ban"},{i:"band-aid",s:"bandage boo boo ouch",l:"Band-Aid"},{i:"barcode",s:"scan",l:"barcode"},{i:"barcode-alt",s:"",l:"Alternate Barcode"},{i:"barcode-read",s:"",l:"Barcode Read"},{i:"barcode-scan",s:"",l:"Barcode Scan"},{i:"bars",s:"checklist drag hamburger list menu nav navigation ol reorder settings todo ul",l:"Bars"},{i:"baseball",s:"",l:"Baseball"},{i:"baseball-ball",s:"",l:"Baseball Ball"},{i:"basketball-ball",s:"",l:"Basketball Ball"},{i:"basketball-hoop",s:"",l:"Basketball Hoop"},{i:"bath",s:"",l:"Bath"},{i:"battery-bolt",s:"power status",l:"Battery Bolt"},{i:"battery-empty",s:"power status",l:"Battery Empty"},{i:"battery-full",s:"power status",l:"Battery Full"},{i:"battery-half",s:"power status",l:"Battery 1/2 Full"},{i:"battery-quarter",s:"power status",l:"Battery 1/4 Full"},{i:"battery-slash",s:"power status",l:"Battery Slash"},{i:"battery-three-quarters",s:"power status",l:"Battery 3/4 Full"},{i:"bed",s:"lodging sleep travel",l:"Bed"},{i:"beer",s:"alcohol bar drink liquor mug stein",l:"beer"},{i:"bell",s:"alert notification reminder",l:"bell"},{i:"bell-school",s:"",l:"Bell School"},{i:"bell-school-slash",s:"",l:"Bell School-slash"},{i:"bell-slash",s:"",l:"Bell Slash"},{i:"bezier-curve",s:"curves illustrator lines path vector",l:"Bezier Curve"},{i:"bible",s:"book catholicism christianity",l:"Bible"},{i:"bicycle",s:"bike gears transportation vehicle",l:"Bicycle"},{i:"binoculars",s:"",l:"Binoculars"},{i:"birthday-cake",s:"",l:"Birthday Cake"},{i:"blanket",s:"",l:"Blanket"},{i:"blender",s:"",l:"Blender"},{i:"blind",s:"",l:"Blind"},{i:"bold",s:"",l:"bold"},{i:"bolt",s:"electricity lightning weather zap",l:"Lightning Bolt"},{i:"bomb",s:"",l:"Bomb"},{i:"bone",s:"",l:"Bone"},{i:"bone-break",s:"",l:"Bone Break"},{i:"bong",s:"aparatus cannabis marijuana pipe smoke smoking",l:"Bong"},{i:"book",s:"documentation read",l:"book"},{i:"book-alt",s:"",l:"Book Alt"},{i:"book-heart",s:"",l:"Book with Heart"},{i:"book-open",s:"flyer notebook open book pamphlet reading",l:"Book Open"},{i:"book-reader",s:"library",l:"Book Reader"},{i:"bookmark",s:"save",l:"bookmark"},{i:"books",s:"",l:"Books"},{i:"bowling-ball",s:"",l:"Bowling Ball"},{i:"bowling-pins",s:"",l:"Bowling Pins"},{i:"box",s:"package",l:"Box"},{i:"box-alt",s:"",l:"Alternate Box"},{i:"box-check",s:"accept ackage agree confirm correct done ok select success todo yes",l:"Box Check"},{i:"box-fragile",s:"package",l:"Box Fragile"},{i:"box-full",s:"package packed",l:"Box Full"},{i:"box-heart",s:"care package",l:"Box with Heart"},{i:"box-open",s:"",l:"Box Open"},{i:"box-up",s:"",l:"Box Up"},{i:"box-usd",s:"$ dollar-sign money usd",l:"Box with US Dollar"},{i:"boxes",s:"",l:"Boxes"},{i:"boxes-alt",s:"",l:"Alternate Boxes"},{i:"boxing-glove",s:"",l:"Boxing Glove"},{i:"braille",s:"",l:"Braille"},{i:"brain",s:"cerebellum gray matter intellect medulla oblongata mind noodle wit",l:"Brain"},{i:"briefcase",s:"bag business luggage office work",l:"Briefcase"},{i:"briefcase-medical",s:"health briefcase",l:"Medical Briefcase"},{i:"broadcast-tower",s:"airwaves radio waves",l:"Broadcast Tower"},{i:"broom",s:"",l:"Broom"},{i:"browser",s:"website",l:"Browser"},{i:"brush",s:"bristles color handle painting",l:"Brush"},{i:"bug",s:"insect report",l:"Bug"},{i:"building",s:"apartment business company office work",l:"Building"},{i:"bullhorn",s:"announcement broadcast louder megaphone share",l:"bullhorn"},{i:"bullseye",s:"target",l:"Bullseye"},{i:"bullseye-arrow",s:"archery target",l:"Bullseye Arrow"},{i:"bullseye-pointer",s:"target",l:"Bullseye Pointer"},{i:"burn",s:"energy",l:"Burn"},{i:"bus",s:"machine public transportation transportation vehicle",l:"Bus"},{i:"bus-alt",s:"machine public transportation transportation vehicle",l:"Bus Alt"},{i:"bus-school",s:"",l:"Bus School"},{i:"business-time",s:"briefcase business socks clock flight of the conchords wednesday",l:"Business Time"},{i:"cabinet-filing",s:"",l:"Filing Cabinet"},{i:"calculator",s:"",l:"Calculator"},{i:"calculator-alt",s:"",l:"Calculator Alt"},{i:"calendar",s:"calendar-o date event schedule time when",l:"Calendar"},{i:"calendar-alt",s:"calendar date event schedule time when",l:"Alternate Calendar"},{i:"calendar-check",s:"accept agree appointment confirm correct done ok select success todo",l:"Calendar Check"},{i:"calendar-edit",s:"",l:"Calendar Edit"},{i:"calendar-exclamation",s:"important",l:"Calendar Exclamation"},{i:"calendar-minus",s:"delete remove",l:"Calendar Minus"},{i:"calendar-plus",s:"add create new",l:"Calendar Plus"},{i:"calendar-times",s:"archive delete remove x",l:"Calendar Times"},{i:"camera",s:"photo picture record",l:"camera"},{i:"camera-alt",s:"photo picture record",l:"Alternate Camera"},{i:"camera-retro",s:"photo picture record",l:"Retro Camera"},{i:"cannabis",s:"bud chronic drugs endica endo ganja marijuana mary jane pot reefer sativa spliff weed whacky-tabacky",l:"Cannabis"},{i:"capsules",s:"drugs medicine",l:"Capsules"},{i:"car",s:"machine transportation vehicle",l:"Car"},{i:"car-alt",s:"",l:"Car Alt"},{i:"car-battery",s:"",l:"Car Battery"},{i:"car-bump",s:"",l:"Car Bump"},{i:"car-crash",s:"",l:"Car Crash"},{i:"car-garage",s:"",l:"Car Garage"},{i:"car-mechanic",s:"",l:"Car Mechanic"},{i:"car-side",s:"",l:"Car Side"},{i:"car-tilt",s:"",l:"Car Tilt"},{i:"car-wash",s:"",l:"Car Wash"},{i:"caret-circle-down",s:"dropdown menu more",l:"Caret Circle Down"},{i:"caret-circle-left",s:"back previous",l:"Caret Circle Left"},{i:"caret-circle-right",s:"forward next",l:"Caret Circle Right"},{i:"caret-circle-up",s:"",l:"Caret Circle Up"},{i:"caret-down",s:"arrow dropdown menu more triangle down",l:"Caret Down"},{i:"caret-left",s:"arrow back previous triangle left",l:"Caret Left"},{i:"caret-right",s:"arrow forward next triangle right",l:"Caret Right"},{i:"caret-square-down",s:"caret-square-o-down dropdown menu more",l:"Caret Square Down"},{i:"caret-square-left",s:"back caret-square-o-left previous",l:"Caret Square Left"},{i:"caret-square-right",s:"caret-square-o-right forward next",l:"Caret Square Right"},{i:"caret-square-up",s:"caret-square-o-up",l:"Caret Square Up"},{i:"caret-up",s:"arrow triangle up",l:"Caret Up"},{i:"cart-arrow-down",s:"shopping",l:"Shopping Cart Arrow Down"},{i:"cart-plus",s:"add create new shopping",l:"Add to Shopping Cart"},{i:"certificate",s:"badge star",l:"certificate"},{i:"chalkboard",s:"blackboard learning school teaching whiteboard writing",l:"Chalkboard"},{i:"chalkboard-teacher",s:"blackboard instructor learning professor school whiteboard writing",l:"Chalkboard Teacher"},{i:"charging-station",s:"",l:"Charging Station"},{i:"chart-area",s:"analytics area-chart graph",l:"Area Chart"},{i:"chart-bar",s:"analytics bar-chart graph",l:"Bar Chart"},{i:"chart-line",s:"activity analytics dashboard graph line-chart",l:"Line Chart"},{i:"chart-line-down",s:"",l:"Line Chart in Down Direction"},{i:"chart-pie",s:"analytics graph pie-chart",l:"Pie Chart"},{i:"chart-pie-alt",s:"",l:"Pie Chart Alternate"},{i:"check",s:"accept agree checkmark confirm correct done notice notification notify ok select success tick todo yes",l:"Check"},{i:"check-circle",s:"accept agree confirm correct done ok select success todo yes",l:"Check Circle"},{i:"check-double",s:"accept agree checkmark confirm correct done notice notification notify ok select success tick todo",l:"Check Double"},{i:"check-square",s:"accept agree checkmark confirm correct done ok select success todo yes",l:"Check Square"},{i:"chess",s:"",l:"Chess"},{i:"chess-bishop",s:"",l:"Chess Bishop"},{i:"chess-bishop-alt",s:"",l:"Alternate Chess Bishop"},{i:"chess-board",s:"",l:"Chess Board"},{i:"chess-clock",s:"",l:"Chess Clock"},{i:"chess-clock-alt",s:"",l:"Alternate Chess Clock"},{i:"chess-king",s:"",l:"Chess King"},{i:"chess-king-alt",s:"",l:"Alternate Chess King"},{i:"chess-knight",s:"",l:"Chess Knight"},{i:"chess-knight-alt",s:"",l:"Alternate Chess Knight"},{i:"chess-pawn",s:"",l:"Chess Pawn"},{i:"chess-pawn-alt",s:"",l:"Alternate Chess Pawn"},{i:"chess-queen",s:"",l:"Chess Queen"},{i:"chess-queen-alt",s:"",l:"Alternate Chess Queen"},{i:"chess-rook",s:"",l:"Chess Rook"},{i:"chess-rook-alt",s:"",l:"Alternate Chess Rook"},{i:"chevron-circle-down",s:"arrow dropdown menu more",l:"Chevron Circle Down"},{i:"chevron-circle-left",s:"arrow back previous",l:"Chevron Circle Left"},{i:"chevron-circle-right",s:"arrow forward next",l:"Chevron Circle Right"},{i:"chevron-circle-up",s:"arrow",l:"Chevron Circle Up"},{i:"chevron-double-down",s:"",l:"Chevron Double Down"},{i:"chevron-double-left",s:"back bracket previous",l:"Chevron Double Left"},{i:"chevron-double-right",s:"bracket forward next",l:"Chevron Double Right"},{i:"chevron-double-up",s:"",l:"Chevron Double Up"},{i:"chevron-down",s:"",l:"chevron-down"},{i:"chevron-left",s:"back bracket previous",l:"chevron-left"},{i:"chevron-right",s:"bracket forward next",l:"chevron-right"},{i:"chevron-square-down",s:"arrow dropdown menu more",l:"Chevron Square Down"},{i:"chevron-square-left",s:"arrow back previous",l:"Chevron Square Left"},{i:"chevron-square-right",s:"arrow forward next",l:"Chevron Square Right"},{i:"chevron-square-up",s:"arrow",l:"Chevron Square Up"},{i:"chevron-up",s:"",l:"chevron-up"},{i:"child",s:"",l:"Child"},{i:"church",s:"building community religion",l:"Church"},{i:"circle",s:"circle-thin dot notification",l:"Circle"},{i:"circle-notch",s:"circle-o-notch",l:"Circle Notched"},{i:"city",s:"buildings busy skyscrapers urban windows",l:"City"},{i:"clipboard",s:"paste",l:"Clipboard"},{i:"clipboard-check",s:"accept agree confirm done ok select success todo yes",l:"Clipboard Check"},{i:"clipboard-list",s:"checklist completed done finished intinerary ol schedule todo ul",l:"Clipboard List"},{i:"clipboard-prescription",s:"",l:"Clipboard Prescription"},{i:"clock",s:"date late schedule timer timestamp watch",l:"Clock"},{i:"clone",s:"copy duplicate",l:"Clone"},{i:"closed-captioning",s:"cc",l:"Closed Captioning"},{i:"cloud",s:"save",l:"Cloud"},{i:"cloud-download",s:"import",l:"Cloud Download"},{i:"cloud-download-alt",s:"cloud-download",l:"Alternate Cloud Download"},{i:"cloud-upload",s:"import",l:"Cloud Upload"},{i:"cloud-upload-alt",s:"cloud-upload",l:"Alternate Cloud Upload"},{i:"club",s:"card suit",l:"Club"},{i:"cocktail",s:"alcohol drink",l:"Cocktail"},{i:"code",s:"brackets html",l:"Code"},{i:"code-branch",s:"branch code-fork fork git github rebase svn vcs version",l:"Code Branch"},{i:"code-commit",s:"commit git github hash rebase svn vcs version",l:"Code Commit"},{i:"code-merge",s:"git github merge pr rebase svn vcs version",l:"Code Merge"},{i:"coffee",s:"breakfast cafe drink morning mug tea",l:"Coffee"},{i:"cog",s:"settings",l:"cog"},{i:"cogs",s:"gears settings",l:"cogs"},{i:"coins",s:"",l:"Coins"},{i:"columns",s:"dashboard panes split",l:"Columns"},{i:"comment",s:"bubble chat conversation feedback message note notification sms speech texting",l:"comment"},{i:"comment-alt",s:"bubble chat commenting commenting conversation feedback message note notification sms speech texting",l:"Alternate Comment"},{i:"comment-alt-check",s:"",l:"Alternate Comment Check"},{i:"comment-alt-dollar",s:"",l:"Comment Alt-dollar"},{i:"comment-alt-dots",s:"",l:"Alternate Comment Dots"},{i:"comment-alt-edit",s:"",l:"Alternate Comment Edit"},{i:"comment-alt-exclamation",s:"important",l:"Alternate Comment Exclamation"},{i:"comment-alt-lines",s:"",l:"Alternate Comment Lines"},{i:"comment-alt-minus",s:"delete remove",l:"Alternate Comment Minus"},{i:"comment-alt-plus",s:"add create new",l:"Alternate Comment Plus"},{i:"comment-alt-slash",s:"",l:"Alternate Comment Slash"},{i:"comment-alt-smile",s:"happy",l:"Alternate Comment Smile"},{i:"comment-alt-times",s:"archive delete remove x",l:"Alternate Comment Times"},{i:"comment-check",s:"",l:"Comment Check"},{i:"comment-dollar",s:"",l:"Comment Dollar"},{i:"comment-dots",s:"",l:"Comment Dots"},{i:"comment-edit",s:"",l:"Comment Edit"},{i:"comment-exclamation",s:"important",l:"Comment Exclamation"},{i:"comment-lines",s:"",l:"Comment Lines"},{i:"comment-minus",s:"delete remove",l:"Comment Minus"},{i:"comment-plus",s:"add create new",l:"Comment Plus"},{i:"comment-slash",s:"",l:"Comment Slash"},{i:"comment-smile",s:"",l:"Comment Smile"},{i:"comment-times",s:"archive delete remove x",l:"Comment Times"},{i:"comments",s:"bubble chat conversation feedback message note notification sms speech texting",l:"comments"},{i:"comments-alt",s:"",l:"Comments Alt"},{i:"comments-alt-dollar",s:"",l:"Comments Alt-dollar"},{i:"comments-dollar",s:"",l:"Comments Dollar"},{i:"compact-disc",s:"bluray cd disc media",l:"Compact Disc"},{i:"compass",s:"directory location menu safari",l:"Compass"},{i:"compass-slash",s:"",l:"Compass Slash"},{i:"compress",s:"collapse combine contract merge smaller",l:"Compress"},{i:"compress-alt",s:"collapse combine contract merge smaller",l:"Alternate Compress"},{i:"compress-wide",s:"collapse combine contract merge smaller",l:"Compress Wide"},{i:"concierge-bell",s:"attention hotel service support",l:"Concierge Bell"},{i:"container-storage",s:"",l:"Container Storage"},{i:"conveyor-belt",s:"",l:"Conveyor Belt"},{i:"conveyor-belt-alt",s:"",l:"Alternate Conveyor Belt"},{i:"cookie",s:"baked good chips food snack sweet treat",l:"Cookie"},{i:"cookie-bite",s:"baked good bitten chips eating food snack sweet treat",l:"Cookie Bite"},{i:"copy",s:"clone duplicate file files-o",l:"Copy"},{i:"copyright",s:"",l:"Copyright"},{i:"couch",s:"",l:"Couch"},{i:"credit-card",s:"buy checkout credit-card-alt debit money payment purchase",l:"Credit Card"},{i:"credit-card-blank",s:"buy checkout debit money payment purchase",l:"Credit Card Blank"},{i:"credit-card-front",s:"buy checkout chip debit money payment purchase",l:"Credit Card Front"},{i:"cricket",s:"",l:"Cricket"},{i:"crop",s:"design",l:"crop"},{i:"crop-alt",s:"",l:"Alternate Crop"},{i:"cross",s:"catholicism christianity",l:"Cross"},{i:"crosshairs",s:"gpd picker position",l:"Crosshairs"},{i:"crow",s:"bird bullfrog toad",l:"Crow"},{i:"crown",s:"",l:"Crown"},{i:"cube",s:"package",l:"Cube"},{i:"cubes",s:"packages",l:"Cubes"},{i:"curling",s:"",l:"Curling"},{i:"cut",s:"scissors scissors",l:"Cut"},{i:"database",s:"",l:"Database"},{i:"deaf",s:"",l:"Deaf"},{i:"desktop",s:"computer cpu demo desktop device machine monitor pc screen",l:"Desktop"},{i:"desktop-alt",s:"apple computer cpu demo desktop device imac machine monitor screen",l:"Alternate Desktop"},{i:"dharmachakra",s:"buddhism buddhist wheel of dharma",l:"Dharmachakra"},{i:"diagnoses",s:"",l:"Diagnoses"},{i:"diamond",s:"gem gemstone",l:"Diamond"},{i:"dice",s:"chance gambling game roll",l:"Dice"},{i:"dice-five",s:"chance gambling game roll",l:"Dice Five"},{i:"dice-four",s:"chance gambling game roll",l:"Dice Four"},{i:"dice-one",s:"chance gambling game roll",l:"Dice One"},{i:"dice-six",s:"chance gambling game roll",l:"Dice Six"},{i:"dice-three",s:"chance gambling game roll",l:"Dice Three"},{i:"dice-two",s:"chance gambling game roll",l:"Dice Two"},{i:"digital-tachograph",s:"",l:"Digital Tachograph"},{i:"diploma",s:"",l:"Diploma"},{i:"directions",s:"",l:"Directions"},{i:"divide",s:"",l:"Divide"},{i:"dizzy",s:"dazed disapprove emoticon face",l:"Dizzy Face"},{i:"dna",s:"double helix helix",l:"DNA"},{i:"do-not-enter",s:"",l:"Do Not-enter"},{i:"dollar-sign",s:"$ dollar-sign money price usd",l:"Dollar Sign"},{i:"dolly",s:"",l:"Dolly"},{i:"dolly-empty",s:"",l:"Dolly Empty"},{i:"dolly-flatbed",s:"",l:"Dolly Flatbed"},{i:"dolly-flatbed-alt",s:"",l:"Alternate Dolly Flatbed"},{i:"dolly-flatbed-empty",s:"",l:"Dolly Flatbed-empty"},{i:"donate",s:"generosity give",l:"Donate"},{i:"door-closed",s:"",l:"Door Closed"},{i:"door-open",s:"",l:"Door Open"},{i:"dot-circle",s:"bullseye notification target",l:"Dot Circle"},{i:"dove",s:"animal bird flying peace",l:"Dove"},{i:"download",s:"import",l:"Download"},{i:"drafting-compass",s:"mechanical drawing plot plotting",l:"Drafting Compass"},{i:"draw-circle",s:"",l:"Draw Circle"},{i:"draw-polygon",s:"",l:"Draw Polygon"},{i:"draw-square",s:"",l:"Draw Square"},{i:"drum",s:"instrument music percussion snare sound",l:"Drum"},{i:"drum-steelpan",s:"calypso instrument music percussion reggae snare sound steel tropical",l:"Drum Steelpan"},{i:"dumbbell",s:"exercise gym strength weight weight-lifting",l:"Dumbbell"},{i:"ear",s:"",l:"Ear"},{i:"edit",s:"edit pen pencil update write",l:"Edit"},{i:"eject",s:"",l:"eject"},{i:"ellipsis-h",s:"dots drag kebab list menu nav navigation ol reorder settings ul",l:"Horizontal Ellipsis"},{i:"ellipsis-h-alt",s:"dots drag kebab list menu nav navigation ol reorder settings ul",l:"Alternate Horizontal Ellipsis"},{i:"ellipsis-v",s:"dots drag kebab list menu nav navigation ol reorder settings ul",l:"Vertical Ellipsis"},{i:"ellipsis-v-alt",s:"dots drag kebab list menu nav navigation ol reorder settings ul",l:"Alternate Vertical Ellipsis"},{i:"empty-set",s:"",l:"Empty Set"},{i:"engine-warning",s:"",l:"Engine Warning"},{i:"envelope",s:"e-mail email letter mail message notification support",l:"Envelope"},{i:"envelope-open",s:"e-mail email letter mail message notification support",l:"Envelope Open"},{i:"envelope-open-dollar",s:"",l:"Envelope Open-dollar"},{i:"envelope-open-text",s:"",l:"Envelope Open-text"},{i:"envelope-square",s:"e-mail email letter mail message notification support",l:"Envelope Square"},{i:"equals",s:"",l:"Equals"},{i:"eraser",s:"delete remove",l:"eraser"},{i:"euro-sign",s:"eur eur",l:"Euro Sign"},{i:"exchange",s:"arrow arrows reciprocate return swap transfer",l:"Exchange"},{i:"exchange-alt",s:"arrow arrows exchange reciprocate return swap transfer",l:"Alternate Exchange"},{i:"exclamation",s:"alert danger error important notice notification notify problem warning",l:"exclamation"},{i:"exclamation-circle",s:"alert danger error important notice notification notify problem warning",l:"Exclamation Circle"},{i:"exclamation-square",s:"alert danger error important notice notification notify problem warning",l:"Exclamation Square"},{i:"exclamation-triangle",s:"alert danger error important notice notification notify problem warning",l:"Exclamation Triangle"},{i:"expand",s:"bigger enlarge resize",l:"Expand"},{i:"expand-alt",s:"bigger enlarge resize",l:"Alternate Expand"},{i:"expand-arrows",s:"bigger enlarge move resize",l:"Expand Arrows"},{i:"expand-arrows-alt",s:"arrows-alt bigger enlarge move resize",l:"Alternate Expand Arrows"},{i:"expand-wide",s:"bigger enlarge resize",l:"Expand Wide"},{i:"external-link",s:"new open",l:"External Link"},{i:"external-link-alt",s:"external-link new open",l:"Alternate External Link"},{i:"external-link-square",s:"new open",l:"External Link Square"},{i:"external-link-square-alt",s:"external-link-square new open",l:"Alternate External Link Square"},{i:"eye",s:"optic see seen show sight views visible",l:"Eye"},{i:"eye-dropper",s:"eyedropper",l:"Eye Dropper"},{i:"eye-slash",s:"blind hide show toggle unseen views visible visiblity",l:"Eye Slash"},{i:"fast-backward",s:"beginning first previous rewind start",l:"fast-backward"},{i:"fast-forward",s:"end last next",l:"fast-forward"},{i:"fax",s:"",l:"Fax"},{i:"feather",s:"bird light plucked quill",l:"Feather"},{i:"feather-alt",s:"bird light plucked quill",l:"Feather Alt"},{i:"female",s:"human person profile user woman",l:"Female"},{i:"field-hockey",s:"",l:"Field Hockey"},{i:"fighter-jet",s:"airplane fast fly goose maverick plane quick top gun transportation travel",l:"fighter-jet"},{i:"file",s:"document new page pdf resume",l:"File"},{i:"file-alt",s:"document file-text invoice new page pdf",l:"Alternate File"},{i:"file-archive",s:".zip bundle compress compression download zip",l:"Archive File"},{i:"file-audio",s:"",l:"Audio File"},{i:"file-certificate",s:"",l:"File Certificate"},{i:"file-chart-line",s:"analytics data projection report",l:"Chart Line File"},{i:"file-chart-pie",s:"analytics data projection report",l:"Pie Chart File"},{i:"file-check",s:"accept agree confirm done ok select success synced todo",
l:"Check File"},{i:"file-code",s:"",l:"Code File"},{i:"file-contract",s:"agreement binding document legal signature",l:"File Contract"},{i:"file-download",s:"",l:"File Download"},{i:"file-edit",s:"pen",l:"Edit File"},{i:"file-excel",s:"",l:"Excel File"},{i:"file-exclamation",s:"important",l:"Exclamation File"},{i:"file-export",s:"",l:"File Export"},{i:"file-image",s:"",l:"Image File"},{i:"file-import",s:"",l:"File Import"},{i:"file-invoice",s:"bill document receipt",l:"File Invoice"},{i:"file-invoice-dollar",s:"$ bill document dollar-sign money receipt usd",l:"File Invoice with US Dollar"},{i:"file-medical",s:"",l:"Medical File"},{i:"file-medical-alt",s:"",l:"Alternate Medical File"},{i:"file-minus",s:"delete remove",l:"Minus File"},{i:"file-pdf",s:"",l:"PDF File"},{i:"file-plus",s:"add create new",l:"Plus File"},{i:"file-powerpoint",s:"",l:"Powerpoint File"},{i:"file-prescription",s:"drugs medical medicine rx",l:"File Prescription"},{i:"file-signature",s:"John Hancock contract document name",l:"File Signature"},{i:"file-spreadsheet",s:"excel numbers sheets xls",l:"Spreadsheet File"},{i:"file-times",s:"archive delete remove x",l:"Times File"},{i:"file-upload",s:"",l:"File Upload"},{i:"file-user",s:"account personnel profile",l:"User File"},{i:"file-video",s:"",l:"Video File"},{i:"file-word",s:"",l:"Word File"},{i:"fill",s:"bucket color paint paint bucket",l:"Fill"},{i:"fill-drip",s:"bucket color drop paint paint bucket spill",l:"Fill Drip"},{i:"film",s:"movie",l:"Film"},{i:"film-alt",s:"",l:"Alternate Film"},{i:"filter",s:"funnel options",l:"Filter"},{i:"fingerprint",s:"human id identification lock smudge touch unique unlock",l:"Fingerprint"},{i:"fire",s:"flame hot popular",l:"fire"},{i:"fire-extinguisher",s:"",l:"fire-extinguisher"},{i:"first-aid",s:"",l:"First Aid"},{i:"fish",s:"",l:"Fish"},{i:"flag",s:"notice notification notify report",l:"flag"},{i:"flag-checkered",s:"notice notification notify report",l:"flag-checkered"},{i:"flask",s:"beaker experimental labs science",l:"Flask"},{i:"flushed",s:"embarrassed emoticon face",l:"Flushed Face"},{i:"folder",s:"",l:"Folder"},{i:"folder-minus",s:"archive delete remove",l:"Folder Minus"},{i:"folder-open",s:"",l:"Folder Open"},{i:"folder-plus",s:"add create new",l:"Folder Plus"},{i:"folder-times",s:"archive delete remove x",l:"Folder Times"},{i:"folders",s:"",l:"Folders"},{i:"font",s:"text",l:"font"},{i:"font-awesome-logo-full",s:"",l:"Font Awesome Full Logo"},{i:"football-ball",s:"",l:"Football Ball"},{i:"football-helmet",s:"",l:"Football Helmet"},{i:"forklift",s:"",l:"Forklift"},{i:"forward",s:"forward next",l:"forward"},{i:"fragile",s:"",l:"Fragile"},{i:"frog",s:"bullfrog kermit kiss prince toad wart",l:"Frog"},{i:"frown",s:"disapprove emoticon face rating sad",l:"Frowning Face"},{i:"frown-open",s:"disapprove emoticon face rating sad",l:"Frowning Face With Open Mouth"},{i:"function",s:"",l:"Function"},{i:"funnel-dollar",s:"",l:"Funnel Dollar"},{i:"futbol",s:"ball football soccer",l:"Futbol"},{i:"gamepad",s:"controller",l:"Gamepad"},{i:"gas-pump",s:"",l:"Gas Pump"},{i:"gas-pump-slash",s:"",l:"Gas Pump-slash"},{i:"gavel",s:"hammer judge lawyer opinion",l:"Gavel"},{i:"gem",s:"diamond",l:"Gem"},{i:"genderless",s:"",l:"Genderless"},{i:"gift",s:"generosity giving party present wrapped",l:"gift"},{i:"gift-card",s:"",l:"Gift Card"},{i:"glass-martini",s:"alcohol bar drink glass liquor martini",l:"Martini Glass"},{i:"glass-martini-alt",s:"",l:"Glass Martini-alt"},{i:"glasses",s:"foureyes hipster nerd reading sight spectacles",l:"Glasses"},{i:"glasses-alt",s:"",l:"Glasses Alt"},{i:"globe",s:"all coordinates country earth global gps language localize location map online place planet translate travel world",l:"Globe"},{i:"globe-africa",s:"all country earth global gps language localize location map online place planet translate travel world",l:"Globe with Africa shown"},{i:"globe-americas",s:"all country earth global gps language localize location map online place planet translate travel world",l:"Globe with Americas shown"},{i:"globe-asia",s:"all country earth global gps language localize location map online place planet translate travel world",l:"Globe with Asia shown"},{i:"globe-stand",s:"",l:"Globe Stand"},{i:"golf-ball",s:"",l:"Golf Ball"},{i:"golf-club",s:"",l:"Golf Club"},{i:"gopuram",s:"building entrance hinduism temple tower",l:"Gopuram"},{i:"graduation-cap",s:"learning school student",l:"Graduation Cap"},{i:"greater-than",s:"",l:"Greater Than"},{i:"greater-than-equal",s:"",l:"Greater Than Equal To"},{i:"grimace",s:"cringe emoticon face",l:"Grimacing Face"},{i:"grin",s:"emoticon face laugh smile",l:"Grinning Face"},{i:"grin-alt",s:"emoticon face laugh smile",l:"Alternate Grinning Face"},{i:"grin-beam",s:"emoticon face laugh smile",l:"Grinning Face With Smiling Eyes"},{i:"grin-beam-sweat",s:"emoticon face smile",l:"Grinning Face With Sweat"},{i:"grin-hearts",s:"emoticon face love smile",l:"Smiling Face With Heart-Eyes"},{i:"grin-squint",s:"emoticon face laugh smile",l:"Grinning Squinting Face"},{i:"grin-squint-tears",s:"emoticon face happy smile",l:"Rolling on the Floor Laughing"},{i:"grin-stars",s:"emoticon face star-struck",l:"Star-Struck"},{i:"grin-tears",s:"LOL emoticon face",l:"Face With Tears of Joy"},{i:"grin-tongue",s:"LOL emoticon face",l:"Face With Tongue"},{i:"grin-tongue-squint",s:"LOL emoticon face",l:"Squinting Face With Tongue"},{i:"grin-tongue-wink",s:"LOL emoticon face",l:"Winking Face With Tongue"},{i:"grin-wink",s:"emoticon face flirt laugh smile",l:"Grinning Winking Face"},{i:"grip-horizontal",s:"affordance drag drop grab handle",l:"Grip Horizontal"},{i:"grip-vertical",s:"affordance drag drop grab handle",l:"Grip Vertical"},{i:"h-square",s:"hospital hotel",l:"H Square"},{i:"h1",s:"header",l:"H1 Heading"},{i:"h2",s:"header",l:"H2 Heading"},{i:"h3",s:"header",l:"H3 Heading"},{i:"hamsa",s:"amulet christianity islam jewish judaism muslim protection",l:"Hamsa"},{i:"hand-heart",s:"",l:"Hand with Heart"},{i:"hand-holding",s:"",l:"Hand Holding"},{i:"hand-holding-box",s:"",l:"Hand Holding Box"},{i:"hand-holding-heart",s:"",l:"Hand Holding Heart"},{i:"hand-holding-seedling",s:"",l:"Hand Holding Seedling"},{i:"hand-holding-usd",s:"$ dollar sign donation giving money price",l:"Hand Holding US Dollar"},{i:"hand-holding-water",s:"",l:"Hand Holding Water"},{i:"hand-lizard",s:"",l:"Lizard (Hand)"},{i:"hand-paper",s:"stop",l:"Paper (Hand)"},{i:"hand-peace",s:"",l:"Peace (Hand)"},{i:"hand-point-down",s:"finger hand-o-down point",l:"Hand Pointing Down"},{i:"hand-point-left",s:"back finger hand-o-left left point previous",l:"Hand Pointing Left"},{i:"hand-point-right",s:"finger forward hand-o-right next point right",l:"Hand Pointing Right"},{i:"hand-point-up",s:"finger hand-o-up point",l:"Hand Pointing Up"},{i:"hand-pointer",s:"select",l:"Pointer (Hand)"},{i:"hand-receiving",s:"",l:"Hand Receiving"},{i:"hand-rock",s:"",l:"Rock (Hand)"},{i:"hand-scissors",s:"",l:"Scissors (Hand)"},{i:"hand-spock",s:"",l:"Spock (Hand)"},{i:"hands",s:"",l:"Hands"},{i:"hands-heart",s:"",l:"Hands Heart"},{i:"hands-helping",s:"aid assistance partnership volunteering",l:"Helping Hands"},{i:"hands-usd",s:"$ dollar sign donation giving money price usd",l:"Hands with US Dollar"},{i:"handshake",s:"greeting partnership",l:"Handshake"},{i:"handshake-alt",s:"greeting partnership",l:"Alternate Handshake"},{i:"hashtag",s:"",l:"Hashtag"},{i:"haykal",s:"bahai bahá'í star",l:"Haykal"},{i:"hdd",s:"cpu hard drive harddrive machine save storage",l:"HDD"},{i:"heading",s:"header header",l:"heading"},{i:"headphones",s:"audio listen music sound speaker",l:"headphones"},{i:"headphones-alt",s:"audio listen music sound speaker",l:"Headphones Alt"},{i:"headset",s:"audio gamer gaming listen live chat microphone shot caller sound support telemarketer",l:"Headset"},{i:"heart",s:"favorite like love",l:"Heart"},{i:"heart-circle",s:"favorite like love",l:"Heart Circle"},{i:"heart-rate",s:"",l:"Heart Rate"},{i:"heart-square",s:"favorite like love",l:"Heart Square"},{i:"heartbeat",s:"ekg lifeline vital signs",l:"Heartbeat"},{i:"helicopter",s:"airwolf apache chopper flight fly",l:"Helicopter"},{i:"hexagon",s:"",l:"Hexagon"},{i:"highlighter",s:"edit marker sharpie update write",l:"Highlighter"},{i:"history",s:"",l:"History"},{i:"hockey-puck",s:"",l:"Hockey Puck"},{i:"hockey-sticks",s:"",l:"Hockey Sticks"},{i:"home",s:"house main",l:"home"},{i:"home-heart",s:"",l:"Home Heart"},{i:"hospital",s:"building emergency room medical center",l:"hospital"},{i:"hospital-alt",s:"building emergency room medical center",l:"Alternate Hospital"},{i:"hospital-symbol",s:"",l:"Hospital Symbol"},{i:"hot-tub",s:"",l:"Hot Tub"},{i:"hotel",s:"building lodging",l:"Hotel"},{i:"hourglass",s:"",l:"Hourglass"},{i:"hourglass-end",s:"",l:"Hourglass End"},{i:"hourglass-half",s:"",l:"Hourglass Half"},{i:"hourglass-start",s:"",l:"Hourglass Start"},{i:"i-cursor",s:"",l:"I Beam Cursor"},{i:"id-badge",s:"",l:"Identification Badge"},{i:"id-card",s:"document identification issued",l:"Identification Card"},{i:"id-card-alt",s:"demographics",l:"Alternate Identification Card"},{i:"image",s:"album photo picture picture",l:"Image"},{i:"images",s:"album photo picture",l:"Images"},{i:"inbox",s:"",l:"inbox"},{i:"inbox-in",s:"",l:"Inbox In"},{i:"inbox-out",s:"",l:"Inbox Out"},{i:"indent",s:"",l:"Indent"},{i:"industry",s:"factory manufacturing",l:"Industry"},{i:"industry-alt",s:"factory manufacturing",l:"Alternate Industry"},{i:"infinity",s:"",l:"Infinity"},{i:"info",s:"details help information more",l:"Info"},{i:"info-circle",s:"details help information more",l:"Info Circle"},{i:"info-square",s:"details help information more",l:"Info Square"},{i:"inhaler",s:"",l:"Inhaler"},{i:"integral",s:"",l:"Integral"},{i:"intersection",s:"",l:"Intersection"},{i:"inventory",s:"",l:"Inventory"},{i:"italic",s:"italics",l:"italic"},{i:"jack-o-lantern",s:"",l:"Jack-o'-lantern"},{i:"jedi",s:"star wars",l:"Jedi"},{i:"joint",s:"blunt cannabis doobie drugs marijuana roach smoke smoking spliff",l:"Joint"},{i:"journal-whills",s:"book jedi star wars the force",l:"Journal of the Whills"},{i:"kaaba",s:"building cube islam muslim",l:"Kaaba"},{i:"key",s:"password unlock",l:"key"},{i:"keyboard",s:"input type",l:"Keyboard"},{i:"keynote",s:"lecture panel seminar speak speaker talk",l:"Keynote"},{i:"khanda",s:"chakkar sikh sikhism sword",l:"Khanda"},{i:"kidneys",s:"",l:"Kidneys"},{i:"kiss",s:"beso emoticon face love smooch",l:"Kissing Face"},{i:"kiss-beam",s:"beso emoticon face love smooch",l:"Kissing Face With Smiling Eyes"},{i:"kiss-wink-heart",s:"beso emoticon face love smooch",l:"Face Blowing a Kiss"},{i:"kiwi-bird",s:"",l:"Kiwi Bird"},{i:"lambda",s:"",l:"Lambda"},{i:"lamp",s:"",l:"Lamp"},{i:"landmark",s:"building historic memoroable",l:"Landmark"},{i:"language",s:"dialect idiom localize speech translate vernacular",l:"Language"},{i:"laptop",s:"computer cpu dell demo device dude you're getting mac macbook machine pc pc",l:"Laptop"},{i:"laptop-code",s:"",l:"Laptop Code"},{i:"laugh",s:"LOL emoticon face laugh",l:"Grinning Face With Big Eyes"},{i:"laugh-beam",s:"LOL emoticon face",l:"Laugh Face with Beaming Eyes"},{i:"laugh-squint",s:"LOL emoticon face",l:"Laughing Squinting Face"},{i:"laugh-wink",s:"LOL emoticon face",l:"Laughing Winking Face"},{i:"layer-group",s:"layers",l:"Layer Group"},{i:"layer-minus",s:"delete remove",l:"Layer Minus"},{i:"layer-plus",s:"add create new",l:"Layer Plus"},{i:"leaf",s:"eco nature plant",l:"leaf"},{i:"leaf-heart",s:"",l:"Leaf Heart"},{i:"lemon",s:"food",l:"Lemon"},{i:"less-than",s:"",l:"Less Than"},{i:"less-than-equal",s:"",l:"Less Than Equal To"},{i:"level-down",s:"arrow",l:"Level Down"},{i:"level-down-alt",s:"level-down",l:"Alternate Level Down"},{i:"level-up",s:"arrow",l:"Level Up"},{i:"level-up-alt",s:"level-up",l:"Alternate Level Up"},{i:"life-ring",s:"support",l:"Life Ring"},{i:"lightbulb",s:"idea inspiration",l:"Lightbulb"},{i:"lightbulb-dollar",s:"",l:"Lightbulb Dollar"},{i:"lightbulb-exclamation",s:"",l:"Lightbulb Exclamation"},{i:"lightbulb-on",s:"",l:"Lightbulb On"},{i:"lightbulb-slash",s:"",l:"Lightbulb Slash"},{i:"link",s:"chain",l:"Link"},{i:"lips",s:"",l:"Lips"},{i:"lira-sign",s:"try try turkish",l:"Turkish Lira Sign"},{i:"list",s:"checklist completed done finished ol todo ul",l:"List"},{i:"list-alt",s:"checklist completed done finished ol todo ul",l:"Alternate List"},{i:"list-ol",s:"checklist list list numbers ol todo ul",l:"list-ol"},{i:"list-ul",s:"checklist list ol todo ul",l:"list-ul"},{i:"location",s:"",l:"Location"},{i:"location-arrow",s:"address coordinates gps location map place where",l:"location-arrow"},{i:"location-circle",s:"",l:"Location Circle"},{i:"location-slash",s:"",l:"Location Slash"},{i:"lock",s:"admin protect security",l:"lock"},{i:"lock-alt",s:"admin protect security",l:"Alternate Lock"},{i:"lock-open",s:"admin lock open password protect",l:"Lock Open"},{i:"lock-open-alt",s:"admin lock password protect",l:"Alternate Lock Open"},{i:"long-arrow-alt-down",s:"long-arrow-down",l:"Alternate Long Arrow Down"},{i:"long-arrow-alt-left",s:"back long-arrow-left previous",l:"Alternate Long Arrow Left"},{i:"long-arrow-alt-right",s:"long-arrow-right",l:"Alternate Long Arrow Right"},{i:"long-arrow-alt-up",s:"long-arrow-up",l:"Alternate Long Arrow Up"},{i:"long-arrow-down",s:"",l:"Long Arrow Down"},{i:"long-arrow-left",s:"back previous",l:"Long Arrow Left"},{i:"long-arrow-right",s:"",l:"Long Arrow Right"},{i:"long-arrow-up",s:"",l:"Long Arrow Up"},{i:"loveseat",s:"",l:"Loveseat"},{i:"low-vision",s:"",l:"Low Vision"},{i:"luchador",s:"",l:"Luchador"},{i:"luggage-cart",s:"",l:"Luggage Cart"},{i:"lungs",s:"",l:"Lungs"},{i:"magic",s:"autocomplete automatic wizard",l:"magic"},{i:"magnet",s:"",l:"magnet"},{i:"mail-bulk",s:"",l:"Mail Bulk"},{i:"male",s:"human man person profile user",l:"Male"},{i:"map",s:"coordinates location paper place travel",l:"Map"},{i:"map-marked",s:"address coordinates destination gps localize location map paper pin place point of interest position route travel where",l:"Map Marked"},{i:"map-marked-alt",s:"address coordinates destination gps localize location map paper pin place point of interest position route travel where",l:"Map Marked-alt"},{i:"map-marker",s:"address coordinates gps localize location map pin place position travel where",l:"map-marker"},{i:"map-marker-alt",s:"address coordinates gps localize location map pin place position travel where",l:"Alternate Map Marker"},{i:"map-marker-alt-slash",s:"",l:"Map Marker-alt-slash"},{i:"map-marker-check",s:"",l:"Map Marker-check"},{i:"map-marker-edit",s:"",l:"Map Marker Edit"},{i:"map-marker-exclamation",s:"",l:"Map Marker Exclamation"},{i:"map-marker-minus",s:"delete remove",l:"Map Marker Minus"},{i:"map-marker-plus",s:"add create new",l:"Map Marker Plus"},{i:"map-marker-question",s:"",l:"Map Marker Question"},{i:"map-marker-slash",s:"",l:"Map Marker Slash"},{i:"map-marker-smile",s:"",l:"Map Marker Smile"},{i:"map-marker-times",s:"archive delete remove x",l:"Map Marker Times"},{i:"map-pin",s:"address coordinates gps localize location map marker place position travel where",l:"Map Pin"},{i:"map-signs",s:"",l:"Map Signs"},{i:"marker",s:"edit sharpie update write",l:"Marker"},{i:"mars",s:"male",l:"Mars"},{i:"mars-double",s:"",l:"Mars Double"},{i:"mars-stroke",s:"",l:"Mars Stroke"},{i:"mars-stroke-h",s:"",l:"Mars Stroke Horizontal"},{i:"mars-stroke-v",s:"",l:"Mars Stroke Vertical"},{i:"medal",s:"",l:"Medal"},{i:"medkit",s:"first aid firstaid health help support",l:"medkit"},{i:"megaphone",s:"announcement broadcast bullhorn louder share",l:"Megaphone"},{i:"meh",s:"emoticon face neutral rating",l:"Neutral Face"},{i:"meh-blank",s:"emoticon face neutral rating",l:"Face Without Mouth"},{i:"meh-rolling-eyes",s:"emoticon face neutral rating",l:"Face With Rolling Eyes"},{i:"memory",s:"DIMM RAM",l:"Memory"},{i:"menorah",s:"candle jewish judaism light",l:"Menorah"},{i:"mercury",s:"transgender",l:"Mercury"},{i:"microchip",s:"cpu processor",l:"Microchip"},{i:"microphone",s:"record sound voice",l:"microphone"},{i:"microphone-alt",s:"record sound voice",l:"Alternate Microphone"},{i:"microphone-alt-slash",s:"disable mute record sound voice",l:"Alternate Microphone Slash"},{i:"microphone-slash",s:"disable mute record sound voice",l:"Microphone Slash"},{i:"microscope",s:"",l:"Microscope"},{i:"mind-share",s:"brain brainstorming meeting planning",l:"Mind Share"},{i:"minus",s:"collapse delete hide hide minify remove trash",l:"minus"},{i:"minus-circle",s:"delete hide remove trash",l:"Minus Circle"},{i:"minus-hexagon",s:"delete hide remove trash",l:"Minus Hexagon"},{i:"minus-octagon",s:"delete hide remove trash",l:"Minus Octagon"},{i:"minus-square",s:"collapse delete hide hide minify remove trash",l:"Minus Square"},{i:"mobile",s:"apple call cell phone cellphone device iphone number screen telephone text",l:"Mobile Phone"},{i:"mobile-alt",s:"apple call cell phone cellphone device iphone number screen telephone text",l:"Alternate Mobile"},{i:"mobile-android",s:"android call cell phone cellphone device number screen telephone text",l:"Mobile Android"},{i:"mobile-android-alt",s:"android call cell phone cellphone device number screen telephone text",l:"Alternate Mobile Android"},{i:"money-bill",s:"buy cash checkout money payment price purchase",l:"Money Bill"},{i:"money-bill-alt",s:"buy cash checkout money payment price purchase",l:"Alternate Money Bill"},{i:"money-bill-wave",s:"",l:"Wavy Money Bill"},{i:"money-bill-wave-alt",s:"",l:"Alternate Wavy Money Bill"},{i:"money-check",s:"bank check cheque",l:"Money Check"},{i:"money-check-alt",s:"bank check cheque",l:"Alternate Money Check"},{i:"monitor-heart-rate",s:"",l:"Monitor Heart Rate"},{i:"monument",s:"building historic memoroable",l:"Monument"},{i:"moon",s:"contrast darker night",l:"Moon"},{i:"mortar-pestle",s:"crush culinary grind medical mix spices",l:"Mortar Pestle"},{i:"mosque",s:"building islam muslim",l:"Mosque"},{i:"motorcycle",s:"bike machine transportation vehicle",l:"Motorcycle"},{i:"mouse-pointer",s:"select",l:"Mouse Pointer"},{i:"music",s:"note sound",l:"Music"},{i:"neuter",s:"",l:"Neuter"},{i:"newspaper",s:"article press",l:"Newspaper"},{i:"not-equal",s:"",l:"Not Equal"},{i:"notes-medical",s:"",l:"Medical Notes"},{i:"object-group",s:"design",l:"Object Group"},{i:"object-ungroup",s:"design",l:"Object Ungroup"},{i:"octagon",s:"",l:"Octagon"},{i:"oil-can",s:"",l:"Oil Can"},{i:"oil-temp",s:"",l:"Oil Temp"},{i:"om",s:"buddhism hinduism jainism mantra",l:"Om"},{i:"omega",s:"",l:"Omega"},{i:"outdent",s:"",l:"Outdent"},{i:"paint-brush",s:"",l:"Paint Brush"},{i:"paint-brush-alt",s:"",l:"Alternate Paint Brush"},{i:"paint-roller",s:"brush painting tool",l:"Paint Roller"},{i:"palette",s:"colors painting",l:"Palette"},{i:"pallet",s:"",l:"Pallet"},{i:"pallet-alt",s:"",l:"Alternate Pallet"},{i:"paper-plane",s:"",l:"Paper Plane"},{i:"paperclip",s:"attachment",l:"Paperclip"},{i:"parachute-box",s:"aid assistance rescue supplies",l:"Parachute Box"},{i:"paragraph",s:"",l:"paragraph"},{i:"parking",s:"",l:"Parking"},{i:"parking-circle",s:"",l:"Parking Circle"},{i:"parking-circle-slash",s:"",l:"Parking Circle-slash"},{i:"parking-slash",s:"",l:"Parking Slash"},{i:"passport",s:"document identification issued",l:"Passport"},{i:"pastafarianism",s:"agnosticism atheism flying spaghetti monster fsm",l:"Pastafarianism"},{i:"paste",s:"clipboard copy",l:"Paste"},{i:"pause",s:"wait",l:"pause"},{i:"pause-circle",s:"",l:"Pause Circle"},{i:"paw",s:"pet",l:"Paw"},{i:"peace",s:"",l:"Peace"},{i:"pen",s:"design edit update write",l:"Pen"},{i:"pen-alt",s:"design edit update write",l:"Alternate Pen"},{i:"pen-fancy",s:"design edit fountain pen update write",l:"Pen Fancy"},{i:"pen-nib",s:"design edit fountain pen update write",l:"Pen Nib"},{i:"pen-square",s:"edit pencil-square update write",l:"Pen Square"},{i:"pencil",s:"design edit update write",l:"pencil"},{i:"pencil-alt",s:"design edit pencil update write",l:"Alternate Pencil"},{i:"pencil-paintbrush",s:"",l:"Pencil Paintbrush"},{i:"pencil-ruler",s:"",l:"Pencil Ruler"},{i:"pennant",s:"",l:"Pennant"},{i:"people-carry",s:"movers",l:"People Carry"},{i:"percent",s:"",l:"Percent"},{i:"percentage",s:"",l:"Percentage"},{i:"person-carry",s:"mover",l:"Person Carry"},{i:"person-dolly",s:"mover dolly",l:"Person and Dolly"},{i:"person-dolly-empty",s:"mover",l:"Person and Empty Dolly"},{i:"phone",s:"call earphone number support telephone voice",l:"Phone"},{i:"phone-office",s:"",l:"Office Phone"},{i:"phone-plus",s:"",l:"Phone Plus"},{i:"phone-slash",s:"",l:"Phone Slash"},{i:"phone-square",s:"call number support telephone voice",l:"Phone Square"},{i:"phone-volume",s:"telephone volume-control-phone",l:"Phone Volume"},{i:"pi",s:"",l:"Pi"},{i:"piggy-bank",s:"save savings",l:"Piggy Bank"},{i:"pills",s:"drugs medicine",l:"Pills"},{i:"place-of-worship",s:"",l:"Place Of Worship"},{i:"plane",s:"airplane destination fly location mode travel trip",l:"plane"},{i:"plane-alt",s:"",l:"Alternate Plane"},{i:"plane-arrival",s:"airplane arriving destination fly land landing location mode travel trip",l:"Plane Arrival"},{i:"plane-departure",s:"airplane departing destination fly location mode take off taking off travel trip",l:"Plane Departure"},{i:"play",s:"music playing sound start",l:"play"},{i:"play-circle",s:"playing start",l:"Play Circle"},{i:"plug",s:"connect online power",l:"Plug"},{i:"plus",s:"add create expand new",l:"plus"},{i:"plus-circle",s:"add create expand new",l:"Plus Circle"},{i:"plus-hexagon",s:"add create expand new",l:"Plus Hexagon"},{i:"plus-octagon",s:"add create expand new",l:"Plus Octagon"},{i:"plus-square",s:"add create expand new",l:"Plus Square"},{i:"podcast",s:"",l:"Podcast"},{i:"podium",s:"lecture panel seminar speak speaker talk",l:"Podium"},{i:"poll",s:"",l:"Poll"},{i:"poll-h",s:"",l:"Poll H"},{i:"poo",s:"",l:"Poo"},{i:"poop",s:"",l:"Poop"},{i:"portrait",s:"",l:"Portrait"},{i:"pound-sign",s:"gbp gbp",l:"Pound Sign"},{i:"power-off",s:"on reboot restart",l:"Power Off"},{i:"pray",s:"",l:"Pray"},{i:"praying-hands",s:"",l:"Praying Hands"},{i:"prescription",s:"drugs medical medicine rx",l:"Prescription"},{i:"prescription-bottle",s:"drugs medical medicine rx",l:"Prescription Bottle"},{i:"prescription-bottle-alt",s:"drugs medical medicine rx",l:"Alternate Prescription Bottle"},{i:"presentation",s:"keynote lecture panel powerpoint ppt seminar slides speak speaker talk",l:"Presentation"},{i:"print",s:"",l:"print"},{i:"print-slash",s:"",l:"Print Slash"},{i:"procedures",s:"",l:"Procedures"},{i:"project-diagram",s:"",l:"Project Diagram"},{i:"puzzle-piece",s:"add-on addon section",l:"Puzzle Piece"},{i:"qrcode",s:"scan",l:"qrcode"},{i:"question",s:"help information support unknown",l:"Question"},{i:"question-circle",s:"help information support unknown",l:"Question Circle"},{i:"question-square",s:"help information support unknown",l:"Question Square"},{i:"quidditch",s:"",l:"Quidditch"},{i:"quote-left",s:"",l:"quote-left"},{i:"quote-right",s:"",l:"quote-right"},{i:"quran",s:"book islam muslim",l:"Quran"},{i:"racquet",s:"",l:"Racquet"},{i:"ramp-loading",s:"",l:"Ramp Loading"},{i:"random",s:"shuffle sort",l:"random"},{i:"receipt",s:"check invoice table",l:"Receipt"},{i:"rectangle-landscape",s:"",l:"Landscape Rectangle"},{i:"rectangle-portrait",s:"",l:"Portrait Rectangle"},{i:"rectangle-wide",s:"",l:"Wide Rectangle"},{i:"recycle",s:"",l:"Recycle"},{i:"redo",s:"forward refresh reload repeat",l:"Redo"},{i:"redo-alt",s:"forward refresh reload repeat",l:"Alternate Redo"},{i:"registered",s:"",l:"Registered Trademark"},{i:"repeat",s:"",l:"Repeat"},{i:"repeat-1",s:"",l:"Repeat 1"},{i:"repeat-1-alt",s:"",l:"Alternate Repeat 1"},{i:"repeat-alt",s:"",l:"Alternate Repeat"},{i:"reply",s:"",l:"Reply"},{i:"reply-all",s:"",l:"reply-all"},{i:"retweet",s:"refresh reload share swap",l:"Retweet"},{i:"retweet-alt",s:"refresh reload share swap",l:"Alternate Retweet"},{i:"ribbon",s:"badge cause lapel pin",l:"Ribbon"},{i:"road",s:"street",l:"road"},{i:"robot",s:"",l:"Robot"},{i:"rocket",s:"app",l:"rocket"},{i:"route",s:"",l:"Route"},{i:"route-highway",s:"",l:"Route Highway"},{i:"route-interstate",s:"",l:"Route Interstate"},{i:"rss",s:"blog",l:"rss"},{i:"rss-square",s:"blog feed",l:"RSS Square"},{i:"ruble-sign",s:"rub rub",l:"Ruble Sign"},{i:"ruler",s:"",l:"Ruler"},{i:"ruler-combined",s:"",l:"Ruler Combined"},{i:"ruler-horizontal",s:"",l:"Ruler Horizontal"},{i:"ruler-triangle",s:"",l:"Ruler Triangle"},{i:"ruler-vertical",s:"",l:"Ruler Vertical"},{i:"rupee-sign",s:"indian inr",l:"Indian Rupee Sign"},{i:"sad-cry",s:"emoticon face tear tears",l:"Crying Face"},{i:"sad-tear",s:"emoticon face tear tears",l:"Loudly Crying Face"},{i:"save",s:"floppy floppy-o",l:"Save"},{i:"scalpel",s:"",l:"Scalpel"},{i:"scalpel-path",s:"",l:"Scalpel Path"},{i:"scanner",s:"",l:"Scanner"},{i:"scanner-keyboard",s:"",l:"Scanner Keyboard"},{i:"scanner-touchscreen",s:"",l:"Scanner Touchscreen"},{i:"school",s:"",l:"School"},{i:"screwdriver",s:"admin container fix repair settings tool",l:"Screwdriver"},{i:"scrubber",s:"",l:"Scrubber"},{i:"search",s:"bigger enlarge magnify preview zoom",l:"Search"},{i:"search-dollar",s:"",l:"Search Dollar"},{i:"search-location",s:"",l:"Search Location"},{i:"search-minus",s:"minify smaller zoom zoom out",l:"Search Minus"},{i:"search-plus",s:"bigger enlarge magnify zoom zoom in",l:"Search Plus"},{i:"seedling",s:"",l:"Seedling"},{i:"server",s:"cpu",l:"Server"},{i:"shapes",s:"circle square triangle",l:"Shapes"},{i:"share",s:"",l:"Share"},{i:"share-all",s:"",l:"Share All"},{i:"share-alt",s:"",l:"Alternate Share"},{i:"share-alt-square",s:"",l:"Alternate Share Square"},{i:"share-square",s:"send social",l:"Share Square"},{i:"shekel-sign",s:"ils ils",l:"Shekel Sign"},{i:"shield",s:"achievement award security winner",l:"shield"},{i:"shield-alt",s:"shield",l:"Alternate Shield"},{i:"shield-check",s:"achievement award security success winner",l:"shield"},{i:"ship",s:"boat sea",l:"Ship"},{i:"shipping-fast",s:"",l:"Shipping Fast"},{i:"shipping-timed",s:"",l:"Shipping Timed"},{i:"shoe-prints",s:"feet footprints steps",l:"Shoe Prints"},{i:"shopping-bag",s:"",l:"Shopping Bag"},{i:"shopping-basket",s:"",l:"Shopping Basket"},{i:"shopping-cart",s:"buy checkout payment purchase",l:"shopping-cart"},{i:"shower",s:"",l:"Shower"},{i:"shredder",s:"",l:"Shredder"},{i:"shuttle-van",s:"machine public-transportation transportation vehicle",l:"Shuttle Van"},{i:"shuttlecock",s:"",l:"Shuttlecock"},{i:"sigma",s:"summation",l:"Sigma (Summation)"},{i:"sign",s:"",l:"Sign"},{i:"sign-in",s:"arrow enter join log in login sign in sign up signin signup",l:"Sign In"},{i:"sign-in-alt",s:"arrow enter join log in login sign in sign up sign-in signin signup",l:"Alternate Sign In"},{i:"sign-language",s:"",l:"Sign Language"},{i:"sign-out",s:"arrow exit leave log out logout",l:"Sign Out"},{i:"sign-out-alt",s:"arrow exit leave log out logout sign-out",l:"Alternate Sign Out"},{i:"signal",s:"bars graph online status",l:"signal"},{i:"signal-1",s:"bars graph online status",l:"Signal 1"},{i:"signal-2",s:"bars graph online status",l:"Signal 2"},{i:"signal-3",s:"bars graph online status",l:"Signal 3"},{i:"signal-4",s:"bars graph online status",l:"Signal 4"},{i:"signal-alt",s:"bars graph online status",l:"Signal Alternate"},{i:"signal-alt-1",s:"bars graph online status",l:"Signal Alternate 1"},{i:"signal-alt-2",s:"bars graph online status",l:"Signal Alternate 2"},{i:"signal-alt-3",s:"bars graph online status",l:"Signal Alternate 3"},{i:"signal-alt-slash",s:"bars graph online status",l:"Signal Alternate Slash"},{i:"signal-slash",s:"bars graph online status",l:"Signal Slash"},{i:"signature",s:"John Hancock cursive name writing",l:"Signature"},{i:"sitemap",s:"directory hierarchy ia information architecture organization",l:"Sitemap"},{i:"skeleton",s:"",l:"Skeleton"},{i:"skull",s:"bones skeleton yorick",l:"Skull"},{i:"sliders-h",s:"settings sliders",l:"Horizontal Sliders"},{i:"sliders-h-square",s:"",l:"Square Horizontal Sliders"},{i:"sliders-v",s:"",l:"Vertical Sliders"},{i:"sliders-v-square",s:"",l:"Square Vertical Sliders"},{i:"smile",s:"approve emoticon face happy rating satisfied",l:"Smiling Face"},{i:"smile-beam",s:"emoticon face happy",l:"Beaming Face With Smiling Eyes"},{i:"smile-plus",s:"emoticon face happy",l:"Smiling Face Plus"},{i:"smile-wink",s:"emoticon face happy",l:"Winking Face"},{i:"smoking",s:"cigarette nicotine smoking status",l:"Smoking"},{i:"smoking-ban",s:"no smoking non-smoking",l:"Smoking Ban"},{i:"snowflake",s:"",l:"Snowflake"},{i:"socks",s:"business socks business time flight of the conchords wednesday",l:"Socks"},{i:"solar-panel",s:"clean eco-friendly energy green sun",l:"Solar Panel"},{i:"sort",s:"order",l:"Sort"},{i:"sort-alpha-down",s:"sort-alpha-asc",l:"Sort Alpha Down"},{i:"sort-alpha-up",s:"sort-alpha-desc",l:"Sort Alpha Up"},{i:"sort-amount-down",s:"sort-amount-asc",l:"Sort Amount Down"},{i:"sort-amount-up",s:"sort-amount-desc",l:"Sort Amount Up"},{i:"sort-down",s:"arrow descending sort-desc",l:"Sort Down (Descending)"},{i:"sort-numeric-down",s:"numbers sort-numeric-asc",l:"Sort Numeric Down"},{i:"sort-numeric-up",s:"numbers sort-numeric-desc",l:"Sort Numeric Up"},{i:"sort-up",s:"arrow ascending sort-asc",l:"Sort Up (Ascending)"},{i:"spa",s:"mindfullness plant wellness",l:"Spa"},{i:"space-shuttle",s:"astronaut machine nasa rocket transportation",l:"Space Shuttle"},{i:"spade",s:"",l:"Spade"},{i:"spinner",s:"loading progress",l:"Spinner"},{i:"spinner-third",s:"",l:"Spinner Third"},{i:"splotch",s:"",l:"Splotch"},{i:"spray-can",s:"",l:"Spray Can"},{i:"square",s:"block box",l:"Square"},{i:"square-full",s:"",l:"Square Full"},{i:"square-root",s:"",l:"Square Root"},{i:"square-root-alt",s:"",l:"Square Root Alternate"},{i:"stamp",s:"",l:"Stamp"},{i:"star",s:"achievement award favorite important night rating score",l:"Star"},{i:"star-and-crescent",s:"islam muslim",l:"Star and Crescent"},{i:"star-exclamation",s:"achievement award favorite night rating score",l:"Exclamation Star"},{i:"star-half",s:"achievement award rating score star-half-empty star-half-full",l:"star-half"},{i:"star-half-alt",s:"achievement award rating score star-half-empty star-half-full",l:"Alternate Star Half"},{i:"star-of-david",s:"jewish judaism",l:"Star of David"},{i:"star-of-life",s:"",l:"Star of Life"},{i:"steering-wheel",s:"",l:"Wheel Steering"},{i:"step-backward",s:"beginning first previous rewind start",l:"step-backward"},{i:"step-forward",s:"end last next",l:"step-forward"},{i:"stethoscope",s:"",l:"Stethoscope"},{i:"sticky-note",s:"",l:"Sticky Note"},{i:"stomach",s:"",l:"Stomach"},{i:"stop",s:"block box square",l:"stop"},{i:"stop-circle",s:"",l:"Stop Circle"},{i:"stopwatch",s:"time",l:"Stopwatch"},{i:"store",s:"",l:"Store"},{i:"store-alt",s:"",l:"Alternate Store"},{i:"stream",s:"",l:"Stream"},{i:"street-view",s:"map",l:"Street View"},{i:"strikethrough",s:"",l:"Strikethrough"},{i:"stroopwafel",s:"dessert food sweets waffle",l:"Stroopwafel"},{i:"subscript",s:"",l:"subscript"},{i:"subway",s:"machine railway train transportation vehicle",l:"Subway"},{i:"suitcase",s:"baggage luggage move suitcase travel trip",l:"Suitcase"},{i:"suitcase-rolling",s:"",l:"Suitcase Rolling"},{i:"sun",s:"brighten contrast day lighter weather",l:"Sun"},{i:"superscript",s:"exponential",l:"superscript"},{i:"surprise",s:"emoticon face shocked",l:"Hushed Face"},{i:"swatchbook",s:"",l:"Swatchbook"},{i:"swimmer",s:"athlete head man person water",l:"Swimmer"},{i:"swimming-pool",s:"ladder recreation water",l:"Swimming Pool"},{i:"synagogue",s:"building jewish judaism star of david temple",l:"Synagogue"},{i:"sync",s:"exchange refresh reload rotate swap",l:"Sync"},{i:"sync-alt",s:"refresh reload rotate",l:"Alternate Sync"},{i:"syringe",s:"immunizations needle",l:"Syringe"},{i:"table",s:"data excel spreadsheet",l:"table"},{i:"table-tennis",s:"",l:"Table Tennis"},{i:"tablet",s:"apple device ipad kindle screen",l:"tablet"},{i:"tablet-alt",s:"apple device ipad kindle screen",l:"Alternate Tablet"},{i:"tablet-android",s:"device screen",l:"Tablet Android"},{i:"tablet-android-alt",
s:"device screen",l:"Alternate Tablet Android"},{i:"tablet-rugged",s:"device durable screen tough",l:"Rugged Tablet"},{i:"tablets",s:"drugs medicine",l:"Tablets"},{i:"tachometer",s:"dashboard fast speedometer",l:"Tachometer"},{i:"tachometer-alt",s:"dashboard tachometer",l:"Alternate Tachometer"},{i:"tachometer-alt-average",s:"",l:"Tachometer Alternate average"},{i:"tachometer-alt-fast",s:"",l:"Tachometer Alternate Fast"},{i:"tachometer-alt-fastest",s:"",l:"Tachometer Alternate Fastest"},{i:"tachometer-alt-slow",s:"",l:"Tachometer Alternate Slow"},{i:"tachometer-alt-slowest",s:"",l:"Tachometer Alternate Slowest"},{i:"tachometer-average",s:"",l:"Tachometer Average"},{i:"tachometer-fast",s:"",l:"Tachometer Fast"},{i:"tachometer-fastest",s:"",l:"Tachometer Fastest"},{i:"tachometer-slow",s:"",l:"Tachometer Slow"},{i:"tachometer-slowest",s:"",l:"Tachometer Slowest"},{i:"tag",s:"label",l:"tag"},{i:"tags",s:"labels",l:"tags"},{i:"tally",s:"",l:"Tally"},{i:"tape",s:"",l:"Tape"},{i:"tasks",s:"downloading downloads loading progress settings",l:"Tasks"},{i:"taxi",s:"cab cabbie car car service lyft machine transportation uber vehicle",l:"Taxi"},{i:"teeth",s:"",l:"Teeth"},{i:"teeth-open",s:"",l:"Teeth Open"},{i:"tennis-ball",s:"",l:"Tennis Ball"},{i:"terminal",s:"code command console prompt",l:"Terminal"},{i:"text-height",s:"",l:"text-height"},{i:"text-width",s:"",l:"text-width"},{i:"th",s:"blocks boxes grid squares",l:"th"},{i:"th-large",s:"blocks boxes grid squares",l:"th-large"},{i:"th-list",s:"checklist completed done finished ol todo ul",l:"th-list"},{i:"theater-masks",s:"",l:"Theater Masks"},{i:"thermometer",s:"fever temperature",l:"Thermometer"},{i:"thermometer-empty",s:"status",l:"Thermometer Empty"},{i:"thermometer-full",s:"status",l:"Thermometer Full"},{i:"thermometer-half",s:"status",l:"Thermometer 1/2 Full"},{i:"thermometer-quarter",s:"status",l:"Thermometer 1/4 Full"},{i:"thermometer-three-quarters",s:"status",l:"Thermometer 3/4 Full"},{i:"theta",s:"",l:"Theta"},{i:"thumbs-down",s:"disagree disapprove dislike hand thumbs-o-down",l:"thumbs-down"},{i:"thumbs-up",s:"agree approve favorite hand like ok okay success thumbs-o-up yes you got it dude",l:"thumbs-up"},{i:"thumbtack",s:"coordinates location marker pin thumb-tack",l:"Thumbtack"},{i:"ticket",s:"movie pass support",l:"Ticket"},{i:"ticket-alt",s:"ticket",l:"Alternate Ticket"},{i:"tilde",s:"",l:"Tilde"},{i:"times",s:"close cross error exit incorrect notice notification notify problem wrong x",l:"Times"},{i:"times-circle",s:"close cross exit incorrect notice notification notify problem wrong x",l:"Times Circle"},{i:"times-hexagon",s:"close cross exit incorrect notice notification notify problem wrong x",l:"Times Hexagon"},{i:"times-octagon",s:"close cross exit incorrect notice notification notify problem wrong x",l:"Times Octagon"},{i:"times-square",s:"close cross incorrect notice notification notify problem window wrong",l:"Times Square"},{i:"tint",s:"drop droplet raindrop waterdrop",l:"tint"},{i:"tint-slash",s:"",l:"Tint Slash"},{i:"tire",s:"wheel",l:"Tire"},{i:"tire-flat",s:"",l:"Tire Flat"},{i:"tire-pressure-warning",s:"",l:"Tire Pressure-warning"},{i:"tire-rugged",s:"",l:"Tire Rugged"},{i:"tired",s:"emoticon face grumpy",l:"Tired Face"},{i:"toggle-off",s:"switch",l:"Toggle Off"},{i:"toggle-on",s:"switch",l:"Toggle On"},{i:"toolbox",s:"admin container fix repair settings tools",l:"Toolbox"},{i:"tooth",s:"bicuspid dental molar mouth teeth",l:"Tooth"},{i:"toothbrush",s:"",l:"Toothbrush"},{i:"torah",s:"book jewish judaism",l:"Torah"},{i:"torii-gate",s:"building shintoism",l:"Torii Gate"},{i:"trademark",s:"",l:"Trademark"},{i:"traffic-cone",s:"",l:"Traffic Cone"},{i:"traffic-light",s:"",l:"Traffic Light"},{i:"traffic-light-go",s:"",l:"Traffic Light-go"},{i:"traffic-light-slow",s:"",l:"Traffic Light-slow"},{i:"traffic-light-stop",s:"",l:"Traffic Light-stop"},{i:"train",s:"bullet locomotive railway",l:"Train"},{i:"transgender",s:"intersex",l:"Transgender"},{i:"transgender-alt",s:"",l:"Alternate Transgender"},{i:"trash",s:"delete garbage hide remove",l:"Trash"},{i:"trash-alt",s:"delete garbage hide remove trash trash-o",l:"Alternate Trash"},{i:"tree",s:"",l:"Tree"},{i:"tree-alt",s:"",l:"Alternate Tree"},{i:"triangle",s:"",l:"Triangle"},{i:"trophy",s:"achievement award cup game winner",l:"trophy"},{i:"trophy-alt",s:"achievement award cup game star winner",l:"Alternate Trophy"},{i:"truck",s:"delivery shipping",l:"truck"},{i:"truck-container",s:"",l:"Truck Container"},{i:"truck-couch",s:"",l:"Truck Couch"},{i:"truck-loading",s:"",l:"Truck Loading"},{i:"truck-monster",s:"",l:"Truck Monster"},{i:"truck-moving",s:"",l:"Truck Moving"},{i:"truck-pickup",s:"",l:"Truck Side"},{i:"truck-ramp",s:"",l:"Truck Ramp"},{i:"tshirt",s:"cloth clothing",l:"T-Shirt"},{i:"tty",s:"",l:"TTY"},{i:"tv",s:"computer display monitor television",l:"Television"},{i:"tv-retro",s:"",l:"Retro Televison"},{i:"umbrella",s:"protection rain",l:"Umbrella"},{i:"umbrella-beach",s:"protection recreation sun",l:"Umbrella Beach"},{i:"underline",s:"",l:"Underline"},{i:"undo",s:"back control z exchange oops return rotate swap",l:"Undo"},{i:"undo-alt",s:"back control z exchange oops return swap",l:"Alternate Undo"},{i:"union",s:"",l:"Union"},{i:"universal-access",s:"",l:"Universal Access"},{i:"university",s:"bank institution",l:"University"},{i:"unlink",s:"chain chain-broken remove",l:"unlink"},{i:"unlock",s:"admin lock password protect",l:"unlock"},{i:"unlock-alt",s:"admin lock password protect",l:"Alternate Unlock"},{i:"upload",s:"export publish",l:"Upload"},{i:"usd-circle",s:"$ dollar-sign money price usd",l:"US Dollar Circle"},{i:"usd-square",s:"$ dollar-sign money price usd",l:"US Dollar Square"},{i:"user",s:"account avatar head man person profile",l:"User"},{i:"user-alt",s:"account avatar head man person profile",l:"Alternate User"},{i:"user-alt-slash",s:"",l:"Alternate User Slash"},{i:"user-astronaut",s:"avatar clothing cosmonaut space suit",l:"User Astronaut"},{i:"user-chart",s:"",l:"User Chart"},{i:"user-check",s:"",l:"User Check"},{i:"user-circle",s:"account avatar head man person profile",l:"User Circle"},{i:"user-clock",s:"",l:"User Clock"},{i:"user-cog",s:"",l:"User Cog"},{i:"user-crown",s:"",l:"User Crown"},{i:"user-edit",s:"",l:"User Edit"},{i:"user-friends",s:"",l:"User Friends"},{i:"user-graduate",s:"cap clothing commencement gown graduation student",l:"User Graduate"},{i:"user-lock",s:"",l:"User Lock"},{i:"user-md",s:"doctor job medical nurse occupation profile",l:"user-md"},{i:"user-minus",s:"delete remove",l:"User Minus"},{i:"user-ninja",s:"assassin avatar dangerous sneaky",l:"User Ninja"},{i:"user-plus",s:"sign up signup",l:"User Plus"},{i:"user-secret",s:"clothing coat hat incognito privacy spy whisper",l:"User Secret"},{i:"user-shield",s:"",l:"User Shield"},{i:"user-slash",s:"",l:"User Slash"},{i:"user-tag",s:"",l:"User Tag"},{i:"user-tie",s:"avatar business clothing formal",l:"User Tie"},{i:"user-times",s:"archive delete remove x",l:"Remove User"},{i:"users",s:"people persons profiles",l:"Users"},{i:"users-class",s:"",l:"Users Class"},{i:"users-cog",s:"",l:"Users Cog"},{i:"users-crown",s:"",l:"Users Crown"},{i:"utensil-fork",s:"",l:"Utensil Fork"},{i:"utensil-knife",s:"",l:"Utensil Knife"},{i:"utensil-spoon",s:"spoon",l:"Utensil Spoon"},{i:"utensils",s:"cutlery dinner eat food knife restaurant spoon",l:"Utensils"},{i:"utensils-alt",s:"",l:"Alternate Utensils"},{i:"value-absolute",s:"",l:"Value Absolute"},{i:"vector-square",s:"anchors lines object",l:"Vector Square"},{i:"venus",s:"female",l:"Venus"},{i:"venus-double",s:"",l:"Venus Double"},{i:"venus-mars",s:"",l:"Venus Mars"},{i:"vial",s:"test tube",l:"Vial"},{i:"vials",s:"lab results test tubes",l:"Vials"},{i:"video",s:"camera film movie record video-camera",l:"Video"},{i:"video-plus",s:"",l:"Video Plus"},{i:"video-slash",s:"",l:"Video Slash"},{i:"vihara",s:"buddhism buddhist building monastery",l:"Vihara"},{i:"volleyball-ball",s:"",l:"Volleyball Ball"},{i:"volume",s:"audio control music sound speaker",l:"Volume"},{i:"volume-down",s:"audio lower music quieter sound speaker",l:"Volume Down"},{i:"volume-mute",s:"",l:"Volume Mute"},{i:"volume-off",s:"audio music mute sound",l:"Volume Off"},{i:"volume-slash",s:"audio ban music mute slash sound",l:"Volume Slash"},{i:"volume-up",s:"audio higher louder music sound speaker",l:"Volume Up"},{i:"walking",s:"",l:"Walking"},{i:"wallet",s:"",l:"Wallet"},{i:"warehouse",s:"",l:"Warehouse"},{i:"warehouse-alt",s:"",l:"Alternate Warehouse"},{i:"watch",s:"",l:"Watch"},{i:"watch-fitness",s:"",l:"Watch Fitness"},{i:"weight",s:"measurement scale weight",l:"Weight"},{i:"weight-hanging",s:"anvil heavy measurement",l:"Hanging Weight"},{i:"wheelchair",s:"handicap person",l:"Wheelchair"},{i:"whistle",s:"",l:"Whistle"},{i:"wifi",s:"",l:"WiFi"},{i:"wifi-1",s:"",l:"Wifi 1"},{i:"wifi-2",s:"",l:"Wifi 2"},{i:"wifi-slash",s:"",l:"Wifi Slash"},{i:"window",s:"",l:"Window"},{i:"window-alt",s:"",l:"Alternate Window"},{i:"window-close",s:"",l:"Window Close"},{i:"window-maximize",s:"",l:"Window Maximize"},{i:"window-minimize",s:"",l:"Window Minimize"},{i:"window-restore",s:"",l:"Window Restore"},{i:"wine-glass",s:"",l:"Wine Glass"},{i:"wine-glass-alt",s:"",l:"Wine Glass-alt"},{i:"won-sign",s:"krw krw",l:"Won Sign"},{i:"wrench",s:"fix settings spanner tool update",l:"Wrench"},{i:"x-ray",s:"radiological images radiology",l:"X-Ray"},{i:"yen-sign",s:"jpy jpy",l:"Yen Sign"},{i:"yin-yang",s:"daoism opposites taoism",l:"Yin Yang"}],fab:[{i:"500px",s:"",l:"500px"},{i:"accessible-icon",s:"accessibility handicap person wheelchair wheelchair-alt",l:"Accessible Icon"},{i:"accusoft",s:"",l:"Accusoft"},{i:"adn",s:"",l:"App.net"},{i:"adversal",s:"",l:"Adversal"},{i:"affiliatetheme",s:"",l:"affiliatetheme"},{i:"algolia",s:"",l:"Algolia"},{i:"alipay",s:"",l:"Alipay"},{i:"amazon",s:"",l:"Amazon"},{i:"amazon-pay",s:"",l:"Amazon Pay"},{i:"amilia",s:"",l:"Amilia"},{i:"android",s:"robot",l:"Android"},{i:"angellist",s:"",l:"AngelList"},{i:"angrycreative",s:"",l:"Angry Creative"},{i:"angular",s:"",l:"Angular"},{i:"app-store",s:"",l:"App Store"},{i:"app-store-ios",s:"",l:"iOS App Store"},{i:"apper",s:"",l:"Apper Systems AB"},{i:"apple",s:"food fruit osx",l:"Apple"},{i:"apple-pay",s:"",l:"Apple Pay"},{i:"asymmetrik",s:"",l:"Asymmetrik, Ltd."},{i:"audible",s:"",l:"Audible"},{i:"autoprefixer",s:"",l:"Autoprefixer"},{i:"avianex",s:"",l:"avianex"},{i:"aviato",s:"",l:"Aviato"},{i:"aws",s:"",l:"Amazon Web Services (AWS)"},{i:"bandcamp",s:"",l:"Bandcamp"},{i:"behance",s:"",l:"Behance"},{i:"behance-square",s:"",l:"Behance Square"},{i:"bimobject",s:"",l:"BIMobject"},{i:"bitbucket",s:"bitbucket-square git",l:"Bitbucket"},{i:"bitcoin",s:"",l:"Bitcoin"},{i:"bity",s:"",l:"Bity"},{i:"black-tie",s:"",l:"Font Awesome Black Tie"},{i:"blackberry",s:"",l:"BlackBerry"},{i:"blogger",s:"",l:"Blogger"},{i:"blogger-b",s:"",l:"Blogger B"},{i:"bluetooth",s:"",l:"Bluetooth"},{i:"bluetooth-b",s:"",l:"Bluetooth"},{i:"btc",s:"",l:"BTC"},{i:"buromobelexperte",s:"",l:"Büromöbel-Experte GmbH & Co. KG."},{i:"buysellads",s:"",l:"BuySellAds"},{i:"cc-amazon-pay",s:"",l:"Amazon Pay Credit Card"},{i:"cc-amex",s:"amex",l:"American Express Credit Card"},{i:"cc-apple-pay",s:"",l:"Apple Pay Credit Card"},{i:"cc-diners-club",s:"",l:"Diner's Club Credit Card"},{i:"cc-discover",s:"",l:"Discover Credit Card"},{i:"cc-jcb",s:"",l:"JCB Credit Card"},{i:"cc-mastercard",s:"",l:"MasterCard Credit Card"},{i:"cc-paypal",s:"",l:"Paypal Credit Card"},{i:"cc-stripe",s:"",l:"Stripe Credit Card"},{i:"cc-visa",s:"",l:"Visa Credit Card"},{i:"centercode",s:"",l:"Centercode"},{i:"chrome",s:"browser",l:"Chrome"},{i:"cloudscale",s:"",l:"cloudscale.ch"},{i:"cloudsmith",s:"",l:"Cloudsmith"},{i:"cloudversify",s:"",l:"cloudversify"},{i:"codepen",s:"",l:"Codepen"},{i:"codiepie",s:"",l:"Codie Pie"},{i:"connectdevelop",s:"",l:"Connect Develop"},{i:"contao",s:"",l:"Contao"},{i:"cpanel",s:"",l:"cPanel"},{i:"creative-commons",s:"",l:"Creative Commons"},{i:"creative-commons-by",s:"",l:"Creative Commons Attribution"},{i:"creative-commons-nc",s:"",l:"Creative Commons Noncommercial"},{i:"creative-commons-nc-eu",s:"",l:"Creative Commons Noncommercial (Euro Sign)"},{i:"creative-commons-nc-jp",s:"",l:"Creative Commons Noncommercial (Yen Sign)"},{i:"creative-commons-nd",s:"",l:"Creative Commons No Derivative Works"},{i:"creative-commons-pd",s:"",l:"Creative Commons Public Domain"},{i:"creative-commons-pd-alt",s:"",l:"Creative Commons Public Domain Alternate"},{i:"creative-commons-remix",s:"",l:"Creative Commons Remix"},{i:"creative-commons-sa",s:"",l:"Creative Commons Share Alike"},{i:"creative-commons-sampling",s:"",l:"Creative Commons Sampling"},{i:"creative-commons-sampling-plus",s:"",l:"Creative Commons Sampling +"},{i:"creative-commons-share",s:"",l:"Creative Commons Share"},{i:"creative-commons-zero",s:"",l:"Creative Commons CC0"},{i:"css3",s:"code",l:"CSS 3 Logo"},{i:"css3-alt",s:"",l:"Alternate CSS3 Logo"},{i:"cuttlefish",s:"",l:"Cuttlefish"},{i:"d-and-d",s:"",l:"Dungeons & Dragons"},{i:"dashcube",s:"",l:"DashCube"},{i:"delicious",s:"",l:"Delicious Logo"},{i:"deploydog",s:"",l:"deploy.dog"},{i:"deskpro",s:"",l:"Deskpro"},{i:"deviantart",s:"",l:"deviantART"},{i:"digg",s:"",l:"Digg Logo"},{i:"digital-ocean",s:"",l:"Digital Ocean"},{i:"discord",s:"",l:"Discord"},{i:"discourse",s:"",l:"Discourse"},{i:"dochub",s:"",l:"DocHub"},{i:"docker",s:"",l:"Docker"},{i:"draft2digital",s:"",l:"Draft2digital"},{i:"dribbble",s:"",l:"Dribbble"},{i:"dribbble-square",s:"",l:"Dribbble Square"},{i:"dropbox",s:"",l:"Dropbox"},{i:"drupal",s:"",l:"Drupal Logo"},{i:"dyalog",s:"",l:"Dyalog"},{i:"earlybirds",s:"",l:"Earlybirds"},{i:"ebay",s:"",l:"eBay"},{i:"edge",s:"browser ie",l:"Edge Browser"},{i:"elementor",s:"",l:"Elementor"},{i:"ello",s:"",l:"Ello"},{i:"ember",s:"",l:"Ember"},{i:"empire",s:"",l:"Galactic Empire"},{i:"envira",s:"leaf",l:"Envira Gallery"},{i:"erlang",s:"",l:"Erlang"},{i:"ethereum",s:"",l:"Ethereum"},{i:"etsy",s:"",l:"Etsy"},{i:"expeditedssl",s:"",l:"ExpeditedSSL"},{i:"facebook",s:"facebook-official social network",l:"Facebook"},{i:"facebook-f",s:"facebook",l:"Facebook F"},{i:"facebook-messenger",s:"",l:"Facebook Messenger"},{i:"facebook-square",s:"social network",l:"Facebook Square"},{i:"firefox",s:"browser",l:"Firefox"},{i:"first-order",s:"",l:"First Order"},{i:"first-order-alt",s:"",l:"Alternate First Order"},{i:"firstdraft",s:"",l:"firstdraft"},{i:"flickr",s:"",l:"Flickr"},{i:"flipboard",s:"",l:"Flipboard"},{i:"fly",s:"",l:"Fly"},{i:"font-awesome",s:"meanpath",l:"Font Awesome"},{i:"font-awesome-alt",s:"",l:"Alternate Font Awesome"},{i:"font-awesome-flag",s:"",l:"Font Awesome Flag"},{i:"font-awesome-logo-full",s:"",l:"Font Awesome Full Logo"},{i:"fonticons",s:"",l:"Fonticons"},{i:"fonticons-fi",s:"",l:"Fonticons Fi"},{i:"fort-awesome",s:"castle",l:"Fort Awesome"},{i:"fort-awesome-alt",s:"castle",l:"Alternate Fort Awesome"},{i:"forumbee",s:"",l:"Forumbee"},{i:"foursquare",s:"",l:"Foursquare"},{i:"free-code-camp",s:"",l:"Free Code Camp"},{i:"freebsd",s:"",l:"FreeBSD"},{i:"fulcrum",s:"",l:"Fulcrum"},{i:"galactic-republic",s:"",l:"Galactic Republic"},{i:"galactic-senate",s:"",l:"Galactic Senate"},{i:"get-pocket",s:"",l:"Get Pocket"},{i:"gg",s:"",l:"GG Currency"},{i:"gg-circle",s:"",l:"GG Currency Circle"},{i:"git",s:"",l:"Git"},{i:"git-square",s:"",l:"Git Square"},{i:"github",s:"octocat",l:"GitHub"},{i:"github-alt",s:"octocat",l:"Alternate GitHub"},{i:"github-square",s:"octocat",l:"GitHub Square"},{i:"gitkraken",s:"",l:"GitKraken"},{i:"gitlab",s:"Axosoft",l:"GitLab"},{i:"gitter",s:"",l:"Gitter"},{i:"glide",s:"",l:"Glide"},{i:"glide-g",s:"",l:"Glide G"},{i:"gofore",s:"",l:"Gofore"},{i:"goodreads",s:"",l:"Goodreads"},{i:"goodreads-g",s:"",l:"Goodreads G"},{i:"google",s:"",l:"Google Logo"},{i:"google-drive",s:"",l:"Google Drive"},{i:"google-play",s:"",l:"Google Play"},{i:"google-plus",s:"google-plus-circle google-plus-official",l:"Google Plus"},{i:"google-plus-g",s:"google-plus social network",l:"Google Plus G"},{i:"google-plus-square",s:"social network",l:"Google Plus Square"},{i:"google-wallet",s:"",l:"Google Wallet"},{i:"gratipay",s:"favorite heart like love",l:"Gratipay (Gittip)"},{i:"grav",s:"",l:"Grav"},{i:"gripfire",s:"",l:"Gripfire, Inc."},{i:"grunt",s:"",l:"Grunt"},{i:"gulp",s:"",l:"Gulp"},{i:"hacker-news",s:"",l:"Hacker News"},{i:"hacker-news-square",s:"",l:"Hacker News Square"},{i:"hackerrank",s:"",l:"Hackerrank"},{i:"hips",s:"",l:"Hips"},{i:"hire-a-helper",s:"",l:"HireAHelper"},{i:"hooli",s:"",l:"Hooli"},{i:"hornbill",s:"",l:"Hornbill"},{i:"hotjar",s:"",l:"Hotjar"},{i:"houzz",s:"",l:"Houzz"},{i:"html5",s:"",l:"HTML 5 Logo"},{i:"hubspot",s:"",l:"HubSpot"},{i:"imdb",s:"",l:"IMDB"},{i:"instagram",s:"",l:"Instagram"},{i:"internet-explorer",s:"browser ie",l:"Internet-explorer"},{i:"ioxhost",s:"",l:"ioxhost"},{i:"itunes",s:"",l:"iTunes"},{i:"itunes-note",s:"",l:"Itunes Note"},{i:"java",s:"",l:"Java"},{i:"jedi-order",s:"star wars",l:"Jedi Order"},{i:"jenkins",s:"",l:"Jenkis"},{i:"joget",s:"",l:"Joget"},{i:"joomla",s:"",l:"Joomla Logo"},{i:"js",s:"",l:"JavaScript (JS)"},{i:"js-square",s:"",l:"JavaScript (JS) Square"},{i:"jsfiddle",s:"",l:"jsFiddle"},{i:"kaggle",s:"",l:"Kaggle"},{i:"keybase",s:"",l:"Keybase"},{i:"keycdn",s:"",l:"KeyCDN"},{i:"kickstarter",s:"",l:"Kickstarter"},{i:"kickstarter-k",s:"",l:"Kickstarter K"},{i:"korvue",s:"",l:"KORVUE"},{i:"laravel",s:"",l:"Laravel"},{i:"lastfm",s:"",l:"last.fm"},{i:"lastfm-square",s:"",l:"last.fm Square"},{i:"leanpub",s:"",l:"Leanpub"},{i:"less",s:"",l:"Less"},{i:"line",s:"",l:"Line"},{i:"linkedin",s:"linkedin-square",l:"LinkedIn"},{i:"linkedin-in",s:"linkedin",l:"LinkedIn In"},{i:"linode",s:"",l:"Linode"},{i:"linux",s:"tux",l:"Linux"},{i:"lyft",s:"",l:"lyft"},{i:"magento",s:"",l:"Magento"},{i:"mailchimp",s:"",l:"Mailchimp"},{i:"mandalorian",s:"",l:"Mandalorian"},{i:"markdown",s:"",l:"Markdown"},{i:"mastodon",s:"",l:"Mastodon"},{i:"maxcdn",s:"",l:"MaxCDN"},{i:"medapps",s:"",l:"MedApps"},{i:"medium",s:"",l:"Medium"},{i:"medium-m",s:"",l:"Medium M"},{i:"medrt",s:"",l:"MRT"},{i:"meetup",s:"",l:"Meetup"},{i:"megaport",s:"",l:"Megaport"},{i:"microsoft",s:"",l:"Microsoft"},{i:"mix",s:"",l:"Mix"},{i:"mixcloud",s:"",l:"Mixcloud"},{i:"mizuni",s:"",l:"Mizuni"},{i:"modx",s:"",l:"MODX"},{i:"monero",s:"",l:"Monero"},{i:"napster",s:"",l:"Napster"},{i:"neos",s:"",l:"Neos"},{i:"nimblr",s:"",l:"Nimblr"},{i:"nintendo-switch",s:"",l:"Nintendo Switch"},{i:"node",s:"",l:"Node.js"},{i:"node-js",s:"",l:"Node.js JS"},{i:"npm",s:"",l:"npm"},{i:"ns8",s:"",l:"NS8"},{i:"nutritionix",s:"",l:"Nutritionix"},{i:"odnoklassniki",s:"",l:"Odnoklassniki"},{i:"odnoklassniki-square",s:"",l:"Odnoklassniki Square"},{i:"old-republic",s:"",l:"Old Republic"},{i:"opencart",s:"",l:"OpenCart"},{i:"openid",s:"",l:"OpenID"},{i:"opera",s:"",l:"Opera"},{i:"optin-monster",s:"",l:"Optin Monster"},{i:"osi",s:"",l:"Open Source Initiative"},{i:"page4",s:"",l:"page4 Corporation"},{i:"pagelines",s:"eco leaf leaves nature plant tree",l:"Pagelines"},{i:"palfed",s:"",l:"Palfed"},{i:"patreon",s:"",l:"Patreon"},{i:"paypal",s:"",l:"Paypal"},{i:"periscope",s:"",l:"Periscope"},{i:"phabricator",s:"",l:"Phabricator"},{i:"phoenix-framework",s:"",l:"Phoenix Framework"},{i:"phoenix-squadron",s:"",l:"Phoenix Squadron"},{i:"php",s:"",l:"PHP"},{i:"pied-piper",s:"",l:"Pied Piper Logo"},{i:"pied-piper-alt",s:"",l:"Alternate Pied Piper Logo"},{i:"pied-piper-hat",s:"clothing",l:"Pied Piper-hat"},{i:"pied-piper-pp",s:"",l:"Pied Piper PP Logo (Old)"},{i:"pinterest",s:"",l:"Pinterest"},{i:"pinterest-p",s:"",l:"Pinterest P"},{i:"pinterest-square",s:"",l:"Pinterest Square"},{i:"playstation",s:"",l:"PlayStation"},{i:"product-hunt",s:"",l:"Product Hunt"},{i:"pushed",s:"",l:"Pushed"},{i:"python",s:"",l:"Python"},{i:"qq",s:"",l:"QQ"},{i:"quinscape",s:"",l:"QuinScape"},{i:"quora",s:"",l:"Quora"},{i:"r-project",s:"",l:"R Project"},{i:"ravelry",s:"",l:"Ravelry"},{i:"react",s:"",l:"React"},{i:"readme",s:"",l:"ReadMe"},{i:"rebel",s:"",l:"Rebel Alliance"},{i:"red-river",s:"",l:"red river"},{i:"reddit",s:"",l:"reddit Logo"},{i:"reddit-alien",s:"",l:"reddit Alien"},{i:"reddit-square",s:"",l:"reddit Square"},{i:"rendact",s:"",l:"Rendact"},{i:"renren",s:"",l:"Renren"},{i:"replyd",s:"",l:"replyd"},{i:"researchgate",s:"",l:"Researchgate"},{i:"resolving",s:"",l:"Resolving"},{i:"rev",s:"",l:"Rev.io"},{i:"rocketchat",s:"",l:"Rocket.Chat"},{i:"rockrms",s:"",l:"Rockrms"},{i:"safari",s:"browser",l:"Safari"},{i:"sass",s:"",l:"Sass"},{i:"schlix",s:"",l:"SCHLIX"},{i:"scribd",s:"",l:"Scribd"},{i:"searchengin",s:"",l:"Searchengin"},{i:"sellcast",s:"eercast",l:"Sellcast"},{i:"sellsy",s:"",l:"Sellsy"},{i:"servicestack",s:"",l:"Servicestack"},{i:"shirtsinbulk",s:"",l:"Shirts in Bulk"},{i:"shopware",s:"",l:"Shopware"},{i:"simplybuilt",s:"",l:"SimplyBuilt"},{i:"sistrix",s:"",l:"SISTRIX"},{i:"sith",s:"",l:"Sith"},{i:"skyatlas",s:"",l:"skyatlas"},{i:"skype",s:"",l:"Skype"},{i:"slack",s:"anchor hash hashtag",l:"Slack Logo"},{i:"slack-hash",s:"anchor hash hashtag",l:"Slack Hashtag"},{i:"slideshare",s:"",l:"Slideshare"},{i:"snapchat",s:"",l:"Snapchat"},{i:"snapchat-ghost",s:"",l:"Snapchat Ghost"},{i:"snapchat-square",s:"",l:"Snapchat Square"},{i:"soundcloud",s:"",l:"SoundCloud"},{i:"speakap",s:"",l:"Speakap"},{i:"spotify",s:"",l:"Spotify"},{i:"squarespace",s:"",l:"Squarespace"},{i:"stack-exchange",s:"",l:"Stack Exchange"},{i:"stack-overflow",s:"",l:"Stack Overflow"},{i:"staylinked",s:"",l:"StayLinked"},{i:"steam",s:"",l:"Steam"},{i:"steam-square",s:"",l:"Steam Square"},{i:"steam-symbol",s:"",l:"Steam Symbol"},{i:"sticker-mule",s:"",l:"Sticker Mule"},{i:"strava",s:"",l:"Strava"},{i:"stripe",s:"",l:"Stripe"},{i:"stripe-s",s:"",l:"Stripe S"},{i:"studiovinari",s:"",l:"Studio Vinari"},{i:"stumbleupon",s:"",l:"StumbleUpon Logo"},{i:"stumbleupon-circle",s:"",l:"StumbleUpon Circle"},{i:"superpowers",s:"",l:"Superpowers"},{i:"supple",s:"",l:"Supple"},{i:"teamspeak",s:"",l:"TeamSpeak"},{i:"telegram",s:"",l:"Telegram"},{i:"telegram-plane",s:"",l:"Telegram Plane"},{i:"tencent-weibo",s:"",l:"Tencent Weibo"},{i:"the-red-yeti",s:"",l:"The Red Yeti"},{i:"themeco",s:"",l:"Themeco"},{i:"themeisle",s:"",l:"ThemeIsle"},{i:"trade-federation",s:"",l:"Trade Federation"},{i:"trello",s:"",l:"Trello"},{i:"tripadvisor",s:"",l:"TripAdvisor"},{i:"tumblr",s:"",l:"Tumblr"},{i:"tumblr-square",s:"",l:"Tumblr Square"},{i:"twitch",s:"",l:"Twitch"},{i:"twitter",s:"social network tweet",l:"Twitter"},{i:"twitter-square",s:"social network tweet",l:"Twitter Square"},{i:"typo3",s:"",l:"Typo3"},{i:"uber",s:"",l:"Uber"},{i:"uikit",s:"",l:"UIkit"},{i:"uniregistry",s:"",l:"Uniregistry"},{i:"untappd",s:"",l:"Untappd"},{i:"usb",s:"",l:"USB"},{i:"ussunnah",s:"",l:"us-Sunnah Foundation"},{i:"vaadin",s:"",l:"Vaadin"},{i:"viacoin",s:"",l:"Viacoin"},{i:"viadeo",s:"",l:"Viadeo"},{i:"viadeo-square",s:"",l:"Viadeo Square"},{i:"viber",s:"",l:"Viber"},{i:"vimeo",s:"",l:"Vimeo"},{i:"vimeo-square",s:"",l:"Vimeo Square"},{i:"vimeo-v",s:"vimeo",l:"Vimeo"},{i:"vine",s:"",l:"Vine"},{i:"vk",s:"",l:"VK"},{i:"vnv",s:"",l:"VNV"},{i:"vuejs",s:"",l:"Vue.js"},{i:"weebly",s:"",l:"Weebly"},{i:"weibo",s:"",l:"Weibo"},{i:"weixin",s:"",l:"Weixin (WeChat)"},{i:"whatsapp",s:"",l:"What's App"},{i:"whatsapp-square",s:"",l:"What's App Square"},{i:"whmcs",s:"",l:"WHMCS"},{i:"wikipedia-w",s:"",l:"Wikipedia W"},{i:"windows",s:"microsoft",l:"Windows"},{i:"wix",s:"",l:"Wix"},{i:"wolf-pack-battalion",s:"",l:"Wolf Pack-battalion"},{i:"wordpress",s:"",l:"WordPress Logo"},{i:"wordpress-simple",s:"",l:"Wordpress Simple"},{i:"wpbeginner",s:"",l:"WPBeginner"},{i:"wpexplorer",s:"",l:"WPExplorer"},{i:"wpforms",s:"",l:"WPForms"},{i:"xbox",s:"",l:"Xbox"},{i:"xing",s:"",l:"Xing"},{i:"xing-square",s:"",l:"Xing Square"},{i:"y-combinator",s:"",l:"Y Combinator"},{i:"yahoo",s:"",l:"Yahoo Logo"},{i:"yandex",s:"",l:"Yandex"},{i:"yandex-international",s:"",l:"Yandex International"},{i:"yelp",s:"",l:"Yelp"},{i:"yoast",s:"",l:"Yoast"},{i:"youtube",s:"film video youtube-play youtube-square",l:"YouTube"},{i:"youtube-square",s:"",l:"YouTube Square"},{i:"zhihu",s:"",l:"Zhihu"}]},n.totalLimit=28,n.limitTo=n.totalLimit,n.icons=[],n.icons=n.allIcons.fa,n.filteredIcons=[],n.$init=function(){},n.loadMore=function(){n.limitTo+=n.totalLimit}}],template:'<div class="tb-icon-picker-wrap"><div class="input-group" uib-popover-template="$ctrl.template" popover-trigger="\'outsideClick\'" popover-placement="\'auto bottom\'" popover-class="tb-icon-picker" popover-is-open="$ctrl.isOpen" ng-click1="$event.preventdefault()"><input class="form-control" value="fas fa-archive" type="text" ng-model="$ctrl.ngModel" placeholder="Type or select icon" ng-keypress="$ctrl.open()"/><span class="input-group-addon"><i class="{{$ctrl.ngModel}}"></i></span></div></div>'}),angular.module("app").component("ctrlSign",{bindings:{record:"=",field:"=",disabled:"<?"},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;n.signPadMode=1,n.enableReset=!1,n.originalVal="",n.$onChanges=function(){0!=getNestedPath(n.record,"id")&&""!==getNestedPath(n.record,n.field.slug)&&(n.signPadMode=2,n.enableReset=!0,n.originalVal=n.record[n.field.slug])},n.changeSignMode=function(a){n.signPadMode=a,2==a&&(n.record[n.field.slug]=n.originalVal)},n.clearSign=function(a){jQuery(".signature-pad",b).length>0&&jQuery(".signature-pad",b).each(function(){var a=jQuery(this),b=a.data("field-id");if(angular.isDefined(b)&&""!=b){a.signaturePad().clearCanvas()}})}}],template:'<div class="ctrl-sign"><div ng-show="$ctrl.signPadMode == 1" class="signature-pad" ui-jq="signaturePad" data-field-id="{{$ctrl.field.slug}}" ui-options="{drawOnly:true, lineTop: \'119\'}"><canvas class="pad" height="120" ng-hide="$ctrl.disabled"></canvas><div class="btn-group btn-group-justified"><div class="btn-group" ng-show="$ctrl.enableReset"><button class="btn btn-xs btn-block btn-default"  ng-click="$ctrl.changeSignMode(2)">Reset</button></div><div class="btn-group"><button class="btn btn-xs btn-block btn-danger" ng-click="$ctrl.clearSign()">Clear</button></div></div></div><div ng-show="$ctrl.signPadMode == 2" class="signature-pad-viewer"><img ng-src="{{$ctrl.originalVal}}" /><button class="btn btn-xs btn-block btn-primary" ng-click="$ctrl.changeSignMode(1)">Change</button></div></div>'}),angular.module("app").component("ctrlStripeProductList",{bindings:{disabled:"<",params:"=",ngModel:"="},require1:{ngModel:"^ngModel"},controller:["$scope","$element","$attrs","$timeout","$rootScope",function(a,b,c,d,e){var f=this;f.products=[],f.$onChanges=function(a){},f.$onInit=function(){f.products=e.App.get("stripeProducts")},f.refresh=function(){f.products=e.App.get("stripeProducts")}}],template:'<div class="ctrl-stripe-product-list"><select class="form-control" ng-model="$ctrl.ngModel"><option value="">Select Any</option><optgroup ng-repeat="product in $ctrl.products" label="{{product.name}}"><option ng-repeat="plan in product.plans" value="{{plan.id}}">{{plan.nickname}}</option></optgroup></select></div>'}),angular.module("app").component("ctrlSwitch",{bindings:{disabled:"<",params:"="},require:{ngModel:"^ngModel"},controller:["$scope","$element","$attrs","$timeout",function(a,b,c,d){var e=this;e.trueVal=!0,e.falseVal=!0,e.trueText="",e.falseText="",e.defaultText="";var f,g,h;e.$onChanges=function(a){checkNested(a,"fieldSlug")&&(angular.isUndefined(e.field)||e.field===!1||checkNested(e.field,"id")&&e.field.id!=a.fieldSlug.currentValue)&&(e.field=$rootScope.App.get("fieldFromFieldSlug",a.fieldSlug.currentValue),firstTime=a.fieldSlug.isFirstChange())};var i=function(a){g.innerHTML=h.isChecked()?e.trueText:e.falseText},j=function(a){angular.isDefined(h)?angular.isDefined(f)&&(a==e.trueVal&&h.setPosition(!0),i(a)):setTimeout(function(){j(a)},5)},k=function(){f.checked?e.ngModel.$setViewValue(e.trueVal):e.ngModel.$setViewValue(e.falseVal),i()},l=function(){angular.isObject(e.params)||(e.params={}),checkNested(e.params,"size")||(e.params.size="small")};e.$onInit=function(){d(function(){checkNested(e.params,"trueVal")&&(e.trueVal=e.trueText=e.params.trueVal),checkNested(e.params,"falseVal")&&(e.falseVal=e.falseText=e.params.falseVal),checkNested(e.params,"trueText")&&(e.trueText=e.params.trueText),checkNested(e.params,"falseText")&&(e.falseText=e.params.falseText),checkNested(e.params,"falseText")&&(e.falseText=e.params.falseText),l(),f=angular.element("input",b)[0],g=angular.element("span",b)[0],f.onchange=k,h=new Switchery(f,e.params),checkNested(e.params,"defaultVal")&&angular.isUndefined(e.ngModel.$viewValue)&&j(e.params.defaultVal)},0),e.ngModel.$render=function(){angular.isDefined(e.ngModel.$viewValue)&&j(e.ngModel.$viewValue)}},e.toggle=function(){}}],template:'<div class="ctrl-switch"><label><input type="checkbox"/><span class="switch-lbl"></span></label></div>'}),angular.module("app").component("ctrlTitleViewBox",{bindings:{ngModel:"="},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this;n.mode=0,n.text="",n.$onInit=function(){},n.changeMode=function(a,b){n.mode=a,1===b?n.ngModel=n.text:a&&(n.text=n.ngModel)}}],template:'<div class="view-box" ng-class="{\'edit-mode\': $ctrl.mode}"><div class="text d-i-b" ng-click="$ctrl.changeMode(1)">{{$ctrl.ngModel || \'add a title\'}} <i class="fa fa-pencil"></i></div><div class="input-box"><input class="form-control input-large m-b-5" type="text" ng-model="$ctrl.text" placeholder="Enter"/><button class="btn btn-two btn-sm" ng-click="$ctrl.changeMode(0, 1)">Update</button> <button class="btn btn-three btn-sm" ng-click="$ctrl.changeMode(0)">Close</button></div></div>'}),angular.module("app").component("fieldFilters",{bindings:{options:"=",fields:"=",connectedFields:"=",element:"=",subType:"<",subTypeId:"<",onDelete:"&",onAction:"&",onlyAllow:"=",params:"="},template:'<div class="filters-box" ng-show="$ctrl.options.items.length > 0" ng-class="[{\'close-box\': $ctrl.close},$ctrl.filterTypeClass]"><div class="filter-header" ng-if="$ctrl.isHeader()"><div class="filter-tab-name"><div class="input-group input-group-xs" ng-show="$ctrl.type == \'dataTableTabFilter\' || $ctrl.type == \'chartTabFilter\'"><span class="input-group-addon">Tab Name</span><input type="text" ng-model="$ctrl.options.title" class="form-control"/></div></div><div class="btn-group"><button type="button"  class="btn btn-default btn-xs" uib-dropdown><span uib-dropdown-toggle>Match {{$ctrl.options.condition || \'All\'}} <span class="caret"></span></span><ul class="dropdown-menu" uib-dropdown-menu role="menu"><li><a ng-click="$ctrl.options.condition = \'All\'">Match All</a></li><li><a ng-click="$ctrl.options.condition = \'Any\'">Match Any</a></li></ul></button><button type="button" class="btn btn-default btn-xs" ng-click="$ctrl.addChildFilterGroup()" ng-show="$ctrl.type == \'dataTableFilter\' && $ctrl.allowChildFilter">Add Child Filter Group</button><button type="button" class="btn btn-default btn-xs" ng-click="$ctrl.onDelete()">Delete</button><button type="button" class="btn btn-default btn-xs" ng-click="$ctrl.toggleBox()"><i class="fa" ng-class="{\'fa-chevron-up\': $ctrl.close, \'fa-chevron-down\': !$ctrl.close}"></i></button></div><div class="pull-right" ng-if="$ctrl.allowSort"><div class="btn-group m-r" ng-show="$ctrl.type == \'dataTableTabFilter\'"><label class="btn btn-default btn-xs m-r-none" ng-class="{\'btn-primary\': !$ctrl.options.isColor || $ctrl.options.isColor==\'No\'}" ng-model="$ctrl.options.isColor" uib-btn-radio="\'No\'">No</label><label class="btn btn-default btn-xs" ng-class="{\'btn-primary\': $ctrl.options.isColor==\'Yes\'}" ng-model="$ctrl.options.isColor" uib-btn-radio="\'Yes\'">Yes</label><span class="input-group-btn" style="width: 50px; background-color: #ccc" ng-if="$ctrl.options.isColor==\'Yes\'"><div class="btn btn-xs btn-default" uib-dropdown dropdown-append-to-body><span uib-dropdown-toggle><span class="badge m-r {{$ctrl.options.badgeClass}}">label</span><span class="caret"></span></span><ul class="dropdown-menu badge-list-selector" uib-dropdown-menu><li ng-repeat="bClass in $ctrl.badgeClasses" ng-click="$ctrl.options.badgeClass = bClass"><span class="{{bClass}}"><i class="far fa-check font-white" ng-if="$ctrl.options.badgeClass == bClass"></i></span></li></ul></div></span></div><a class="btn btn-xs btn-default m-r-sm" uib-tooltip="Set Default Tab" ng-click="$ctrl.onAction({params: {type: \'setDefault\'}})" ng-class="{\'active btn-primary\': $ctrl.options.defaultFilter}">Set Default</a><a class="btn btn-xs btn-default field-filters-drag" uib-tooltip="Sort"><i class="far fa-arrows"></i></a></div></div><div class="filter-items" ng-class="{\'filter-match-any\': $ctrl.options.condition == \'Any\'}"><div class="filter-item" ng-repeat="(itemIndex, item) in $ctrl.options.items"><div class="col-md-3"><select ng-model="item.fieldId" class="form-control input-sm" ng-change="$ctrl.changeMainSelectField(item)"><option value="" class="blank-option">-- Select any option --</option><option ng-repeat="field in $ctrl.fields" value="{{field.slug}}" ng-if="!$ctrl.onlyAllow.fieldName && field.hidden != 1 && $ctrl.onlyAllowField(field)">{{field.name}}</option><option ng-repeat="field in $ctrl.fields" value="{{field.name}}" ng-if="$ctrl.onlyAllow.fieldName">{{field.name}}</option><option ng-repeat="field in $ctrl.fields" value="{{field.slug}}-start" ng-if="field.type ==  \'Calendar\'">{{field.name}} > Start Date</option><option ng-repeat="field in $ctrl.fields" value="{{field.slug}}-end" ng-if="field.type ==  \'Calendar\'">{{field.name}} > End Date</option><option ng-repeat="field in $ctrl.loggedInFields" value="{{field.slug}}">{{field.name}}</option><optgroup ng-repeat="fieldGroup in $ctrl.connectedFields" label="{{fieldGroup.title}}"><option value="{{field.slug}}" ng-repeat="field in fieldGroup.fields" ng-if="!$ctrl.onlyAllow.fieldName && field.hidden != 1 && $ctrl.onlyAllowField(field)">{{field.con.name}}</option></optgroup></select></div><div class="col-md-2"><select ng-model="item.operator" class="form-control input-sm"><option value="" class="blank-option">-- Select any option --</option><option ng-repeat="op in $ctrl.opType(item.fieldId)" value="{{op}}">{{op}}</option></select></div><div class="col-md-5"><div class="col-md-8" ng-if="$ctrl.allowExtraFields(item)"><div class="tb-checkbox-inline"><label class="tb-checkbox"><input type="checkbox" ng-model="item.allowExtraFields" ng-required="false" ng-true-value="\'Yes\'" ng-false-value="\'No\'"> Check Additional Fields <span></span></label></div><div ng-if="item.allowExtraFields == \'Yes\'"><ctrl-ui-select data="$ctrl.fields" key="\'id\'" val="\'name\'" ng-model="item.exFields" multiple="1"></ctrl-ui-select></div></div><div class="col-md-4" ng-if="$ctrl.params.chooseValType && $ctrl.showValType(item)"><select ng-model="item.valType" class="form-control input-sm col-md-4"><option value="">Custom</option><option value="Field" ng-if="$ctrl.showValTypeField(item)">Field</option></select></div><div class="col-md-8" ng-if="$ctrl.showValType(item) && item.valType == \'Field\'"><select ng-model="item.valFieldSlug" class="form-control input-sm "><option value="" class="blank-option">-- Select any option --</option><option ng-repeat="field in $ctrl.fields" value="{{field.slug}}" ng-if="!$ctrl.onlyAllow.fieldName && field.hidden != 1">{{field.name}}</option></select></div><div class="col-md-8" ng-if="!item.valType"><input ng-model="item.val" ng-if="$ctrl.showText(item)" class="form-control input-sm"><select ng-model="item.val" ng-if="$ctrl.showSelect(item)" class="form-control input-sm " number-to-string><option ng-repeat="opt in $ctrl.fieldItems[item.fieldId].options" ng-if="$ctrl.fieldItems[item.fieldId].allowDiffVal != \'1\'" value="{{opt.text}}">{{opt.text}}</option><option ng-repeat="opt in $ctrl.fieldItems[item.fieldId].options" ng-if="$ctrl.fieldItems[item.fieldId].allowDiffVal != \'0\'" value="{{opt.val}}">{{opt.text}}</option></select><div class="d-i-b" ng-if="$ctrl.showSelect2(item)"><div class="d-i-b" ng-if="!$ctrl.isOptionLoaded(item)">{{item._text}}<a ng-click="$ctrl.loadJoinData(false, item)" class="m-l-15">Change</a></div><select ng-model="item.val" ng-if="$ctrl.isOptionLoaded(item)" class="form-control input-sm " ng-change="$ctrl.updateTextVal(item, $ctrl.fieldItems[item.fieldId].options)"><option value="" class="blank-option">-- Select any option --</option><option ng-repeat="opt in $ctrl.fieldOptions(item)" value="{{opt.val}}" ng-bind-html="opt.text | unsafe"></option></select></div><input ng-model="item.val" ng-if="$ctrl.showSelect3(item)" class="form-control input-sm input-small d-i-b m-r"><select ng-model="item.val2" ng-if="$ctrl.showSelect3(item)" class="form-control input-sm  d-i-b" style="width:100px"><option value="">bytes</option><option value="kb">kilobytes</option><option value="mb">megabytes</option></select><select ng-model="item.val" ng-if="$ctrl.showUserSelect(item)" class="form-control input-sm "><option value="" class="blank-option">-- Select any option --</option><option ng-repeat="opt in $ctrl.fieldItems[item.fieldId].userOptions" value="{{opt.id}}">{{opt.name}}</option></select><div ng-if="$ctrl.getFieldType(item) == \'Date\'"><hit-date-time-picker ng-if="$ctrl.showDateText(item)" date-time="item.val" options=\'{"enableTime":false, "inputClass": "input-sm", "btnClass": "btn-sm"}\' type="\'Date\'"></hit-date-time-picker><select ng-if="$ctrl.showDateSelect(item)" ng-model="item.val2" class="form-control input-sm "><option value="week">week</option><option value="month">month</option><option value="quarter">quarter</option><option value="year">year</option></select><div ng-if="$ctrl.showDateSelect2(item)"><input type="number" ng-model="item.val2" class="form-control d-i-b input-sm m-r" style="width:75px" placeholder="Enter"><select ng-model="item.val3" class="form-control d-i-b input-sm " style="width:100px"><option value="days">days</option><option value="weeks">weeks</option><option value="months">months</option><option value="years">years</option></select></div></div><div ng-if="$ctrl.getFieldType(item) == \'Time\'"><hit-date-time-picker ng-if="$ctrl.showTimeText(item)" date-time="item.val" options=\'{"enableDate":false, "inputClass": "input-sm", "btnClass": "btn-sm"}\' type="\'Time\'"></hit-date-time-picker></div><div ng-if="$ctrl.getFieldType(item) == \'Date/Time\' || $ctrl.getFieldType(item) == \'Calendar\'" type="\'Date/Time\'"><hit-date-time-picker ng-if="$ctrl.showDateText(item)" date-time="item.val" options=\'{"inputClass": "input-sm", "btnClass": "btn-sm"}\'></hit-date-time-picker><select ng-if="$ctrl.showDateSelect(item)" ng-model="item.val2" class="form-control input-sm"><option value="week">week</option><option value="month">month</option><option value="quarter">quarter</option><option value="year">year</option></select><div ng-if="$ctrl.showDateSelect2(item)"><input type="number" ng-model="item.val2" class="form-control d-i-b input-sm m-r" style="width:75px" placeholder="Enter"><select ng-model="item.val3" class="form-control d-i-b input-sm" style="width:100px"><option value="days">days</option><option value="weeks">weeks</option><option value="months">months</option><option value="years">years</option></select></div></div><div class="help-block small-help-block">{{$ctrl.getValHelpBlock(item)}}</div></div></div><div class="col-md-2 text-right"><button type="button" class="btn btn-sm btn-default m-r-sm" ng-click="$ctrl.addNewConditionItem()"><i class="far fa-plus"></i></button><button type="button" class="btn btn-sm btn-default" ng-click="$ctrl.deleteConditionItem(itemIndex)"><i class="far fa-trash"></i></button></div><div class="clearfix"></div></div></div><field-filters only-allow="$ctrl.onlyAllow" options="childFilter" fields="$ctrl.fields" ng-repeat="childFilter in $ctrl.options.child" on-delete="$ctrl.removeChildFilterGroup($index)"></field-filters><div class="col-md-12" ng-if="$ctrl.params && $ctrl.params.allowHideColumns"><h5>Hide Columns</h5><ctrl-ui-select data="$ctrl.element.columns" key="\'id\'" val="\'title\'" ng-model="$ctrl.options.hideColumns" multiple="1"></ctrl-ui-select></div><div class="clearfix"></div><div class="filter-footer form-inline" ng-if="$ctrl.isFooter()"><div ng-if="$ctrl.type == \'calendarColorRules\'"><spectrum-colorpicker ng-model="$ctrl.options.color" format="\'hex\'" options="{showInput: true, preferredFormat: \'hex\', allowEmpty: true}"></spectrum-colorpicker></div><div ng-if="$ctrl.type == \'dataTableFieldDisplayRules\'"><strong class="m-r  m-r v-top">Action</strong><div class="d-i-b"><div class="m-b-2x" ng-repeat="(ruleIndex, rule) in $ctrl.options.displayRules"><select ng-model="rule.action" class="form-control input-sm m-r"><option value="" class="blank-option">-- Select any option --</option><option value="textColor">Set Text Color</option><option value="textStyle">Set Text Style</option><option value="bkColor">Set Background Color</option><option value="icon">Display Icon</option><option value="hideValue">Hide Value</option><option value="hideText">Hide Text Value</option><option value="changeText" ng-if="$ctrl.params.allowChangeText">Change Text</option><option value="disableEle" ng-if="$ctrl.params.disableEle">Disable</option></select><div class="input-group" ng-show="rule.action == \'changeText\'"><input type="text" class="form-control input-sm" ng-model="rule.text" /></div><div class="btn-group" ng-show="rule.action == \'textStyle\'"><button type="button"  class="btn btn-default btn-sm" ng-click="rule.textBold = !rule.textBold" ng-class="{\'btn-primary active\': rule.textBold}"><i class="fa fa-bold"></i></button><button type="button"  class="btn btn-default btn-sm" ng-click="rule.textItalic = !rule.textItalic" ng-class="{\'btn-primary active\': rule.textItalic}"><i class="fa fa-italic"></i></button><button type="button"  class="btn btn-default btn-sm" ng-click="rule.textStrikethrough = !rule.textStrikethrough" ng-class="{\'btn-primary active\': rule.textStrikethrough}"><i class="fa fa-strikethrough"></i></button></div><div class="input-group m-r" ng-if="rule.action == \'icon\'"><ctrl-icon-picker2 ng-model="rule.iconClass" class="m-t-xs"></ctrl-icon-picker2></div><spectrum-colorpicker ng-model="rule.color" options="{showInput: true, preferredFormat: \'hex\', allowEmpty: true}" format="\'hex\'" ng-show="rule.action == \'textColor\' || rule.action == \'icon\' || rule.action == \'bkColor\'"></spectrum-colorpicker><button type="button" class="btn btn-sm btn-default m-l-15 m-r-sm" ng-click="$ctrl.addItem(\'displayRule\')"><i class="fa fa-plus"></i></button><button type="button" class="btn btn-sm btn-default" ng-click="$ctrl.deleteItem(\'displayRule\', ruleIndex)"><i class="far fa-trash"></i></button></div></div></div><div ng-if="$ctrl.type == \'formDisplayRules\'"><div class="d-i-b m-r v-top"><strong>Then</strong></div><div class="d-i-b"><div class="m-b-2x" ng-repeat="(ruleIndex, rule) in $ctrl.options.displayRules"><select ng-model="rule.action" class="form-control input-sm m-r"><option value="" class="blank-option">-- Select any option --</option><option value="Show">Show</option><option value="Hide">Hide</option><option value="Rename">Rename Label</option><option value="Required">Require</option><option value="Unrequired">Do Not Require</option><option value="Enabled">Enable</option><option value="Disabled">Disable</option></select><select ng-model="rule.fieldId" class="form-control input-sm m-r"><option value="" class="blank-option">-- Select any option --</option><option ng-repeat="field in $ctrl.fields" value="{{field.slug}}">{{field.name}}</option></select><div class="d-i-b m-r" ng-if="rule.action != \'Rename\'"><strong>Otherwise</strong></div><select ng-model="rule.action2" class="form-control input-sm m-r" ng-if="rule.action != \'Rename\'" ><option value="" class="blank-option">-- Select any option --</option><option value="Show" ng-if="rule.action==\'Hide\'">Show</option><option value="Hide" ng-if="rule.action==\'Show\'">Hide</option><option value="Unrequired" ng-if="rule.action==\'Required\'">Do Not Require</option><option value="Required" ng-if="rule.action==\'Unrequired\'">Required</option><option value="Enabled" ng-if="rule.action==\'Disabled\'">Enable</option><option value="Disabled" ng-if="rule.action==\'Enabled\'">Disable</option><option value="Nothing">Do Nothing</option></select><div class="d-i-b m-r" ng-if="rule.action == \'Rename\'"><strong>To</strong></div><input type="text" class="form-control input-sm m-r" ng-if="rule.action == \'Rename\'" ng-model="rule.renameLabel" placeholder="New Label"><button type="button" class="btn btn-sm btn-default m-r-sm" ng-click="$ctrl.addItem(\'displayRule\')"><i class="fa fa-plus"></i></button><button type="button" class="btn btn-sm btn-default" ng-click="$ctrl.deleteItem(\'displayRule\', ruleIndex)"><i class="far fa-trash"></i></button></div></div></div><div ng-if="$ctrl.type == \'formValidationRules\'"><strong class="m-r">Message</strong><textarea type="text" class="form-control input-sm input-xlarge m-r" ng-model="$ctrl.options.errMsg" placeholder="Enter your message"></textarea><button type="button"  class="btn btn-default btn-sm h200" uib-dropdown><span uib-dropdown-toggle>Add Field <span class="caret"></span></span><ul class="dropdown-menu"><li ng-repeat="field in $ctrl.fields" ng-if="field.hidden != 1"><a ng-click="$ctrl.addFieldToErrMsg(field)">{{field.name}}</a></li></ul></button></div></div></div>',
controller:["$scope","$element","$attrs","$compile","DataAPI","$stateParams","$rootScope",function(a,b,c,d,e,f,g){var h=this;h.filterTypeClass="",h.fieldItems={},h.loggedInFields=[],h.allowTab=!1,h.badgeClasses=g.App.get("badgeClass"),h.type="dataTableFilter";var i=function(a){var b=checkNested(a,"fieldId")?a.fieldId.split("-"):[""];return b[0]},j=function(a){var b="",c=i(a);return checkNested(h.fieldItems,c,"type")&&(b=h.fieldItems[c].type,"Equation"==b&&(b="Text",checkNested(h.fieldItems[c],"outPutType")&&("Number"==h.fieldItems[c].outPutType?b="Number":"Date"==h.fieldItems[c].outPutType&&(b="Date")))),b},k={fieldName:!1,operator:!1};h.getFieldType=function(a){return j(a)},h.$onInit=function(){if(h.close=!1,(!checkNested(h.options,"items")||!angular.isArray(h.options.items)||countTotalKeys(h.options.items)<1)&&(h.options.items=[{}]),checkNested(c,"allowTab")&&(h.allowTab="true"==c.allowTab),checkNested(c,"allowSort")&&(h.allowSort="true"==c.allowSort),h.allowChildFilter=!checkNested(c,"allowChildFilter")||"true"==c.allowTab,angular.isDefined(h.onlyAllow)&&(checkNested(h,"onlyAllow","fieldName")&&angular.isDefined(h.onlyAllow.fieldName)&&(k.fieldName=h.onlyAllow.fieldName),checkNested(h,"onlyAllow","operator")&&angular.isDefined(h.onlyAllow.operator)&&(k.operator=h.onlyAllow.operator)),checkNested(c,"type")&&(h.type=jQuery.inArray(c.type,["dataTableFilter","dataTableFieldDisplayRules","formDisplayRules","formValidationRules","dataTableTabFilter","chartTabFilter","calendarColorRules","none"])>-1?c.type:"dataTableFilter"),h.filterTypeClass="filters-"+h.type,jQuery.inArray(h.type,["formDisplayRules","dataTableFieldDisplayRules"])>-1&&!checkNested(h.options,"displayRules")&&(h.options.displayRules=[{}]),angular.forEach(h.fields,function(a){h.fieldItems[a.slug]=a,"Join"==a.type&&(a._loadOptions=!1,h.loadJoinOtherField(h.fieldItems[a.slug])),"Calendar"==a.type&&(h.fieldItems[a.slug+"-start"]=a,h.fieldItems[a.slug+"-end"]=a)}),checkNested(h,"connectedFields")&&angular.forEach(h.connectedFields,function(a){checkNested(a,"fields")&&angular.forEach(a.fields,function(a){h.fieldItems[a.slug]=a,"Join"==a.type&&(h.loadJoinData(h.fieldItems[a.slug]),h.loadJoinOtherField(h.fieldItems[a.slug])),"Calendar"==a.type&&(h.fieldItems[a.slug+"-start"]=a,h.fieldItems[a.slug+"-end"]=a)})}),checkNested(h,"options","items")&&angular.forEach(h.options.items,function(a){if(checkNested(a,"fieldId"))switch(j(a)){case"Time":case"Date":case"Date/Time":a.val=moment(a.val).isValid()?moment(a.val).toDate():"";break;case"Join":""!=a.val&&h.loadJoinData(h.fieldItems[a.fieldId],a)}}),checkNested(h.params,"loggedUserField")&&"1"==h.params.loggedUserField){var a=g.App.get("userDataTableFields");h.loggedInFields=[],angular.isObject(h.fieldItems)||(h.fieldItems={}),angular.forEach(a,function(a){if(checkNested(a,"slug")&&"api_token"!=a.slug&&"password"!=a.slug&&checkNested(a,"type"))switch(a.type){case"Calendar":h.loggedInFields.push({name:"Logged In User's "+a.name,slug:a.slug+"-loggedin"}),h.loggedInFields.push({name:"Logged In User's "+a.name+" > Start Date",slug:a.slug+"-loggedin-start"}),h.loggedInFields.push({name:"Logged In User's "+a.name+" > End Date",slug:a.slug+"-loggedin-end"}),h.fieldItems[a.slug]=a,h.fieldItems[a.slug+"-loggedin-start"]=a,h.fieldItems[a.slug+"-loggedin-end"]=a;break;case"Join":h.fieldItems[a.slug]=a,h.fieldItems[a.slug+"-loggedin"]=a,h.loggedInFields.push({name:"Logged In User's "+a.name,slug:a.slug+"-loggedin"}),h.loadJoinData(h.fieldItems[a.slug]),h.loadJoinOtherField(h.fieldItems[a.slug]);break;default:h.fieldItems[a.slug]=a,h.fieldItems[a.slug+"-loggedin"]=a,h.loggedInFields.push({name:"Logged In User's "+a.name,slug:a.slug+"-loggedin"})}})}},h.fieldOptions=function(a){return checkNested(h.fieldItems,i(a),"options")?h.fieldItems[i(a)].options:[]},h.updateTextVal=function(a,b){angular.forEach(b,function(b){b.val==a.val&&(a._text=b.text)})},h.opType=function(a){if(angular.isUndefined(a))return[];var b=a.split("-"),c=[],d=!0,e="",f="";if(k.operator)c=["is","is not","higher than","lower than","starts with","ends with","contains","does not contain"];else if(checkNested(h.fieldItems,b[0],"type"))switch(f=h.fieldItems[b[0]],e=h.fieldItems[b[0]].type,"Equation"==e&&(e="Text",checkNested(h.fieldItems[b[0]],"outPutType")&&("Number"==h.fieldItems[b[0]].outPutType?e="Number":"Date"==h.fieldItems[b[0]].outPutType&&(e="Date"))),e){case"Text":case"Rich Text":case"Long Text":case"Name":case"Address":case"Email":case"Phone":c=["contains","does not contain","is","is not","starts with","ends with","is blank","is not blank"],jQuery.inArray(e,["Text","Rich Text","Email","Phone","Long Text"])>-1&&"formValidationRules"==h.type&&(c.push("character length is greater than"),c.push("character length is less than"));break;case"Rating":c=["is","is not","higher than","lower than","is blank","is not blank"],d=!1;break;case"Slider":c=["is","is not","higher than","lower than","is blank"];break;case"Number":case"Currency":case"Basic Formula":c=["is","is not","higher than","lower than","is blank","is not blank"];break;case"File":c=["is blank","is not blank","size is less than","size is greater than","file type is","file type is not"],d=!1;break;case"Image":case"Signature":c=["is blank","is not blank"],d=!1;break;case"Date":c=["is","is not","is during the current","is during the previous","is during the next","is before the previous","is after the next","is before","is after","is today","is today or before","is today or after","is before today","is after today","is blank","is not blank"],d=!1;break;case"Time":c=["is","is not","is before","is after","is before current time","is after current time","is blank","is not blank"],d=!1;break;case"Calendar":!checkNested(b,"1")||"start"!=b[1]&&"end"!=b[1]?(c=["is blank","is not blank"],"formValidationRules"==h.type&&(c.push("conflicts with existing records"),c.push("doesn't overlaps with existing records"))):c=["is","is not","is during the current","is during the previous","is during the next","is before the previous","is after the next","is before","is after","is today","is today or before","is today or after","is before today","is after today","is before current time","is after current time","is blank","is not blank"],d=!1;break;case"Date/Time":c=["is","is not","is during the current","is during the previous","is during the next","is before the previous","is after the next","is before","is after","is today","is today or before","is today or after","is before today","is after today","is before current time","is after current time","is blank","is not blank"],d=!1;break;case"Join":if(c=["is","is not","contains","does not contain","is blank","is not blank"],c=["is","is not","is blank","is not blank"],"editField"==h.subType){var i=g.App.get("objects",h.subTypeId);checkNested(i,"joinTableId")&&checkNested(h.fieldItems[a],"dataTableId")&&i.joinTableId==h.fieldItems[a].dataTableId&&c.push("is connected with current record")}"dataTableFieldDisplayRules"==h.type||"calendarColorRules"==h.type||checkNested(h,"params","notUserLoggedOperator")&&1==h.params.notUserLoggedOperator||checkNested(h.fieldItems[a],"joinTableSlug")&&"_users"==h.fieldItems[a].joinTableSlug.substr(-6)&&(c.push("is logged in user"),c.push("is not logged in user"),checkNested(h,"params","isLoggedInRolesOperator")&&h.params.isLoggedInRolesOperator&&c.push("is connected to any logged in user's roles")),checkNested(h,"params","isLoggedInLevel2")&&h.params.isLoggedInLevel2&&checkNested(h.fieldItems[a],"userOptions")&&angular.isArray(h.fieldItems[a].userOptions)&&h.fieldItems[a].userOptions.length>0&&c.push("is connected to logged in user");break;case"Decision Box":c=["is checked","is unchecked"],d=!1;break;case"Checkbox":case"Multi-Select":c=["is","is not","contains","does not contain","is blank","is not blank"];break;default:c=["is","is not","is blank","is not blank"]}return 1==d&&checkNested(h,"params","isNotUnique")&&h.params.isNotUnique&&("Join"==e&&checkNested(f,"joinType")&&"One-to-Many"==f.joinType?(c.push("all values are not unique"),c.push("any value is not unique")):c.push("is not unique")),c},h.allowExtraFields=function(a){return checkNested(a,"operator")&&jQuery.inArray(a.operator,["is logged in user","is not logged in user","is not unique","all values are not unique","any value is not unique"])>-1},h.onlyAllowField=function(a){return!checkNested(h.params,"onlyFormEditable")||!h.params.onlyFormEditable||g.App.is("isFieldEditable",{field:a})},h.changeMainSelectField=function(a){a.val="",a.valType="",checkNested(a,"fieldId")&&""!=a.fieldId&&checkNested(h.fieldItems,a.fieldId,"_loadOptions")&&!h.fieldItems[a.fieldId]._loadOptions&&h.loadJoinData(h.fieldItems[a.fieldId])},h.showText=function(a){return k.operator||checkNested(a,"fieldId")&&jQuery.inArray(j(a),["Date","Time","Date/Time","Calendar","Radio","Checkbox","Select","Multi-Select","Join","Decision Box"])===-1&&angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["","is blank","is not blank","is not unique","is connected to logged in user","is connected to any logged in user's roles","size is less than","size is greater than"])===-1};h.showSelect=function(a){return checkNested(a,"fieldId")&&jQuery.inArray(j(a),["Radio","Checkbox","Select","Multi-Select"])>-1&&angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["","is blank","is not blank","is not unique"])===-1},h.showSelect2=function(a){return checkNested(a,"fieldId")&&jQuery.inArray(j(a),["Join"])>-1&&angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["","is blank","is not blank","is logged in user","is not logged in user","is connected with current record","is connected to logged in user","is not unique","all values are not unique","any value is not unique","is connected to any logged in user's roles"])===-1},h.showUserSelect=function(a){return checkNested(a,"operator")&&jQuery.inArray(a.operator,["is connected to logged in user"])>-1},h.isOptionLoaded=function(a){var b=!1;return checkNested(a,"fieldId")&&(b=!!checkNested(h.fieldItems,a.fieldId,"_loadOptions")&&h.fieldItems[a.fieldId]._loadOptions),b},h.loadJoinData=function(a,b){if(0==a&&checkNested(b,"fieldId")&&(a=h.fieldItems[b.fieldId],b=!1),"Join"==a.type){var c=0;angular.isDefined(b)&&b&&checkNested(b,"val")&&""!=b.val&&(c=b.val),e.save("apps."+f.appId+".joinTableOptions",{field:a,recordId:c},function(d){angular.isDefined(c)&&c?checkNested(d,"items","0","val")&&(b._text=d.items[0].text):(a.options=d.items,a._loadOptions=!0)},function(c,d){angular.isDefined(id)?checkNested(a,"_text")||(b._text="(No Value)"):a.options=[]})}},h.loadJoinOtherField=function(a){"Join"==a.type&&(a.userOptions=g.App.get("userDataTableFieldsWithSameJoinField",a.id))},h.showDateText=function(a){return checkNested(a,"operator")&&jQuery.inArray(a.operator,["is","is not","is before","is after"])>-1},h.showValType=function(a){return checkNested(a,"fieldId")&&jQuery.inArray(j(a),["Decision Box"])==-1&&jQuery.inArray(a.operator,["is blank","is not blank","is logged in user","is not logged in user","is connected to logged in user","is connected with current record","is not unique","is today","is today or before","is today or after","is before today","is after today","size is less than","size is greater than","file type is","file type is not","is during the current","is during the previous","is during the next","is before the previous","is after the next","is before current time","is after current time","conflicts with existing records","doesn't overlaps with existing records","any value is not unique","all values are not unique","character length is greater than","character length is less than"])==-1},h.showValTypeField=function(a){return checkNested(a,"operator")&&jQuery.inArray(a.operator,["is during the current","is during the previous","is during the next","is before the previous","is after the next","character length is greater than","character length is less than"])==-1},h.showDateSelect=function(a){return checkNested(a,"operator")&&angular.isDefined(a.operator)&&"is during the current"===a.operator},h.showDateSelect2=function(a){return checkNested(a,"operator")&&angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["is during the previous","is during the next","is before the previous","is after the next"])>-1},h.showSelect3=function(a){return checkNested(a,"operator")&&angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["size is less than","size is greater than"])>-1},h.showTimeText=function(a){return angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["is","is not","is before","is after"])>-1},h.deleteConditionItem=function(a){h.options.items.splice(a,1),0===h.options.items.length&&h.onDelete()},h.addNewConditionItem=function(){h.options.items.push({})},h.getValHelpBlock=function(a){var b="";if(checkNested(a,"operator")&&angular.isDefined(a.operator))switch(a.operator){case"file type is":case"file type is not":b="Note: Add comma seperate file extension"}return b},h.addItem=function(a){switch(a){case"displayRule":h.options.displayRules.push({})}},h.deleteItem=function(a,b){switch(a){case"displayRule":h.options.displayRules.length>1&&h.options.displayRules.splice(b,1)}},h.addChildFilterGroup=function(){h.options.child.push({items:[],child:[]})},h.removeChildFilterGroup=function(a){h.options.child.splice(a,1)},h.toggleBox=function(){h.close=!h.close},h.isHeader=function(){return jQuery.inArray(h.type,["dataTableFilter","dataTableTabFilter","chartTabFilter","formDisplayRules"])>-1},h.isFooter=function(){return jQuery.inArray(h.type,["dataTableFieldDisplayRules","calendarColorRules","formDisplayRules","formValidationRules"])>-1},h.addFieldToErrMsg=function(a){checkNested(h.options,"errMsg")&&!angular.isUndefined(h.options.errMsg)||(h.options.errMsg=""),h.options.errMsg+="{"+a.name+"}"}}]}),angular.module("app").component("helpSection",{bindings:{extraSlug:"<"},controller:["$scope","$element","$attrs","$stateParams","$state","$rootScope","$uibModal",function(a,b,c,d,e,f,g){var h=this;h.showHelp=!0,h.isHideHelp=!1,h.helpUrl="";var i=["new/help/page-","new/help/data-table-"],j=function(){h.isHideHelp=f.App.get("hideHelpWindow"),angular.isDefined(h.extraSlug)?h.helpUrl=f.App.get("helpSectionUrl",[e.current.name,h.extraSlug],d):h.helpUrl=f.App.get("helpSectionUrl",e.current.name,d),angular.forEach(i,function(a){_tb.startsWith(h.helpUrl,a)&&(h.helpUrl="")}),h.showHelp=""!=h.helpUrl,h.showHelp?angular.element(b).parent().removeClass("has-no-right"):angular.element(b).parent().addClass("has-no-right")};h.onLoadTemp=function(){if(h.showHelp){angular.element(".help-section-video-wrap > a",b).each(function(a,b){if(a>0){var c=angular.element(this);c.addClass("animate-show-hide ng-hide")}});var a=angular.element(".help-section-video-wrap > a",b).length;if(a>1){for(var c='<div class="help-section-help-tips">',d=0;d<a;d++)c+='<span data-s-index="animate-show-hide  '+d+'" class="'+(0==d?"active":"")+'"></span>';c+="</div>",angular.element(".help-section-video-wrap",b).append(c)}angular.element(".help-section-help-tips span",b).click(function(a){var c=angular.element(this),d=c.data("s-index");c.addClass("active"),c.siblings().removeClass("active"),angular.element(".help-section-video-wrap > a",b).addClass("ng-hide"),angular.element(".help-section-video-wrap > a:eq("+d+")",b).removeClass("ng-hide")}),angular.element(".help-section-video-wrap a, .help-section a.youtube-pop",b).click(function(a){a.preventDefault(),a.stopPropagation();var b=angular.element(this),c=angular.element(".help-section-video-thumb",b).data("video-id");(angular.isUndefined(c)||""==c)&&(c=b.data("video-id")),console.log(c),(angular.isUndefined(c)||""==c)&&(c=angular.element(".help-section-video-thumb img",b).attr("src"),""!==c&&(c=c.split("/"),c=c[c.length-2]));g.open({animation:!0,backdrop:"static",keyboard:!1,template:'<div class="tb-video-section"><div class="con-box"><h3 class="t1 text-center">{{item.title}}<button ng-click="close()" class="btn btn-danger btn-circle model-close"><i class="fal fa-times"></i></button></h3><div class="con-wrap no-border"><iframe width="560" height="315" ng-src="{{item.vidHref}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div></div>',controller:["$scope","$uibModalInstance","$sce","hrefVid","titleVid",function(a,b,d,e,f){a.saving=!1,a.item={href:d.trustAsResourceUrl(e),title:f,vidId:c},a.item.vidHref=d.trustAsResourceUrl("https://www.youtube.com/embed/"+c+"?autoplay=1"),a.close=function(){b.close()}}],openedClass:"modal-open tb-full-popup-1",resolve:{hrefVid:function(){return b.attr("href")},titleVid:function(){return angular.element(".help-section-video-thumb",b).attr("uib-tooltip")},idVid:function(){return c}}})})}},h.$onInit=function(){j()},f.$on("$stateChangeSuccess",function(a,b,c,d,e){j()})}],template:'<div class="help-section-wrap hp100" ng-class="{\'has-float\': $ctrl.isHideHelp}"><div ng-include="$ctrl.helpUrl" class="hp100" ng-if="$ctrl.showHelp" onload="$ctrl.onLoadTemp()"></div></div> '}),angular.module("app").component("hitPagination2",{bindings:{page:"=",refreshData:"=",totalItems:"=",limit:"="},controller:["$scope","$element","$attrs","$stateParams","$state","$rootScope","$uibModal",function(a,b,c,d,e,f,g){var h=this;h.isShow=!0,h.toPage="",h.totalPage=0;var i=function(){h.limit&&h.totalItems&&(h.totalPage=Math.ceil(h.totalItems/h.limit))};h.$onInit=function(){i()},h.goToPage=function(){h.toPage>0&&h.toPage<=h.totalPage&&h.toPage!=h.page&&(h.page=h.toPage,h.refreshData(h.page))}}],template:'<div class="hit-pagination2 d-i-b v-mid" ng-if1="$ctrl.isShow"><div class="d-i-b" style="width: 70px" ng-if="$ctrl.totalPage > 1"><input type="number" ng-model="$ctrl.toPage" min="1" max="{{$ctrl.totalPage}}" class="form-control input-sm" placeholder="Page..." ng-enter="$ctrl.goToPage()"/></div><ul class="pagination-sm pull-right" uib-pagination max-size="5" rotate="true" force-ellipses1="true" total-items="$ctrl.totalItems" ng-model="$ctrl.page" items-per-page="$ctrl.limit" ng-change="$ctrl.refreshData($ctrl.page)" boundary-links="true" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></ul></div> '}),angular.module("app").component("showElementDataSource",{bindings:{element:"<",parentDataTableId:"<"},template:'<div class="element-data-source"><span ng-bind-html="$ctrl.name"></span></div>',controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onChanges=function(a){var b=e.element.dataTableId;switch(e.element.type){case"form":e.name='<div class="t">This form:</div>',e.name+="<br>",e.name+='<div class="con">',checkNested(e.element,"lastParam2")&&e.element.lastParam2?(e.name+="Add a new <strong>",e.name+=d.App.get("dataTableName",b),e.name+="</strong> connected to this ",e.name+=d.App.get("dataTableName",e.parentDataTableId),e.name+=".<br/>",e.name+='<i>Connected using "',e.name+=d.App.get("fieldName",e.element.connectedTo.fieldId),e.name+='" field in the "',e.name+=d.App.get("dataTableNameFromFieldId",e.element.connectedTo.fieldId),e.name+='" table.</i>'):checkNested(e.element,"lastParam")&&e.element.lastParam?(e.name+="Edit this pages's <strong>",e.name+=d.App.get("dataTableName",b),e.name+="</strong>"):checkNested(e.element,"recordRules","0","values","0","type")&&"logged_user"==e.element.recordRules[0].values[0].type?(e.name+="Add a new <strong>",e.name+=d.App.get("dataTableName",b),e.name+='</strong> Connected using "',e.name+=d.App.get("fieldNameFromFieldSlug",e.element.recordRules[0].values[0].fieldId),e.name+='" field in the logged in "User" table.'):(e.name+="Add a new <strong>",e.name+=d.App.get("dataTableName",b),e.name+="</strong>."),e.name+="</div>";break;default:if(e.name='<div class="t">This ',e.name+=("dataTable"==e.element.type?"data table":e.element.type)+" shows:</div>",e.name+="<br>",checkNested(e.element,"joinLevel")&&"3"==e.element.joinLevel){var c=e.element.join.fieldId,f="joinTo"==e.element.joinType?e.element.join.id:b;e.name+='<div class="con">',e.name+="<strong>",e.name+=d.App.get("dataTableName",b),e.name+="</strong>",e.name+=' Connected using "',e.name+=d.App.get("fieldName",c),e.name+='" field in the "',e.name+=d.App.get("dataTableName",f),e.name+='" table.',e.name+="</div>"}else if(checkNested(e.element,"joinLevel")&&"2"==e.element.joinLevel){var c=e.element.join2.fieldId,f=e.element.join.id;e.name+='<div class="con">',e.name+="<strong>",e.name+=d.App.get("dataTableName",b),e.name+="</strong>",e.name+=' Connected using "',e.name+=d.App.get("fieldName",c),e.name+='" field in the "',e.name+=d.App.get("dataTableName",f),e.name+='" table.',e.name+="</div>"}else checkNested(e.element,"joinType")&&""!=e.element.joinType?(e.name+='<div class="con">',e.name+="<strong>",e.name+=d.App.get("dataTableName",b),e.name+="</strong>",e.name+=' Connected using "',e.name+=d.App.get("fieldName",e.element.joinFieldId),e.name+='" field in the "',e.name+=d.App.get("dataTableName",e.element.joinTableId),e.name+='" table.',e.name+="</div>"):checkNested(e.element,"filters","0","items","0","operator")&&"is logged in user"==e.element.filters[0].items[0].operator?(e.name+='<div class="con">',e.name+=d.App.get("dataTableName",b),e.name+=' Connected using "',e.name+=d.App.get("fieldNameFromFieldSlug",e.element.filters[0].items[0].fieldId),e.name+='" field in the logged in "User" table.',e.name+="</div>"):(e.name+='<div class="con">',e.name+=d.App.get("dataTableName",b),e.name+="</div>")}}}]}),angular.module("app").component("tbAppBreadcrumb",{bindings:{dynamic:"=",element:"="},controller:["$scope","$element","$attrs","$rootScope","$state","$stateParams","$uibModal","$uibModalStack","$location",function(a,b,c,d,e,f,g,h,i){var j=this;j.appList=[],j.showBreadcrumb=!0,j.isAppName=!1,j.appSearch="",j.totalApp=0,j.breadCrumbs=[],j.totalBreadCrumbs=0;var k={records:"Records",fields:"Fields",rules:"Rules",webHooks:"Webhooks",settings:"Settings",imports:"Imports",exports:"Exports",tasks:"Tasks",roles:"Roles",loginLogs:"Login Logs",content:"Content",pdf:"PDF",css:"CSS",js:"JavaScript",seo:"SEO"};j.settingList=!1;var l=function(){if(d.changeBreadCrumb>0){if(j.appId=d.App.get("appId"),j.appName=d.App.get("appName"),j.appIcon=d.App.get("appIcon",1),""!=j.appName&&(j.isAppName=!0,j.settingList||(j.settingList=[{id:"app",name:"General Settings",tab:""},{id:"layout-formatting",name:"Layout & Format Settings",tab:""},{id:"domain",name:"Domain Settings",tab:""},{id:"security",name:"Security Settings",tab:"general"},{id:"seo",name:"SEO Settings",tab:"",isAlpha:!0,iTag:"alpha"},{id:"themes",name:"Themes",tab:""},{id:"error-404",name:"404 Error Page",tab:""},{id:"google-analytics",name:"Custom Header Code",tab:""},{id:"email",name:"Email Settings",tab:"general"},{id:"app-variables",name:"App Variables",tab:""},{id:"assets-settings",name:"File Storage Settings",isAlpha:!0,iTag:"alpha",tab:""},{id:"text-message-settings",name:"Text Message Settings",isAlpha:!0,iTag:"alpha",tab:""},{id:"tb-support",name:"Support",tab:"general"}],d.App.is("subscriptionEnable")&&j.settingList.splice(j.settingList.length-1,0,{id:"subscription",name:"Subscription",tab:""}),d.App.is("allowedAPI")&&j.settingList.splice(j.settingList.length-1,0,{id:"apis",name:"API Keys",tab:""}))),j.appList=d.App.getAppList(),_tb.countTotalKeys(j.appList)&&(j.totalApp=_tb.countTotalKeys(j.appList),j.totalApp<2&&(j.totalApp=0)),j.breadCrumbs=[],checkNested(f,"typeId")&&checkNested(f,"type")){var a={};switch(f.type){case"settings":a.id=f.typeId,a.type="settings",a.icon='<i class="fal fa-cogs"></i>',a.name="Settings",a.list=j.settingList,a.hasDropDown=_tb.countTotalKeys(a.list),a.hasSep=!0,a.search="",j.breadCrumbs.push(a),checkNested(f,"typeId")&&(a={},a.hasDropDown=0,a.hasSep=0,a.icon="",angular.forEach(j.settingList,function(b){b.id==f.typeId&&(a.name=b.name)}),j.breadCrumbs.push(a));break;case"layouts":a.id=f.typeId,a.type="layouts",a.icon='<i class="fas fa-columns"></i>',a.name=d.App.get("layoutName",a.id),a.list=d.App.get("layouts"),a.hasDropDown=_tb.countTotalKeys(a.list),a.hasDropDown<2&&(a.hasDropDown=0),a.hasSep=checkNested(f,"tab"),a.search="",j.breadCrumbs.push(a),checkNested(f,"tab")&&(a={},a.hasDropDown=0,a.hasSep=checkNested(j.element,"type"),a.icon="",a.name=k[f.tab],j.breadCrumbs.push(a));break;case"pages":a.id=f.typeId,a.type="pages",a.icon='<i class="fas fa-columns"></i>',a.name=d.App.get("pageName",a.id),a.list=d.App.get("pages"),a.hasDropDown=_tb.countTotalKeys(a.list),a.hasDropDown<2&&(a.hasDropDown=0),a.hasSep=checkNested(f,"tab"),a.search="",j.breadCrumbs.push(a);var b=i.search();if(checkNested(b,"child")){b=b.child.split(".");var c=[f.typeId],e=[];angular.forEach(b,function(b){a={},e.push(b);var g=d.App.get("childIndexPage",c);c.push(b);var h=d.App.get("childIndexPage",c);a.id=b,a.type="pages",a.childSlug=e.join("."),a.parentId=f.typeId,a.icon='<i class="fas fa-columns"></i>',a.name=h.name,a.hasDropDown=0,a.list=[],checkNested(g,"childPages")&&_tb.countTotalKeys(g.childPages)>1&&(a.list=angular.copy(g.childPages),delete a.list[a.id],a.hasDropDown=_tb.countTotalKeys(a.list)),a.hasSep=checkNested(f,"tab"),a.search="",j.breadCrumbs.push(a)})}checkNested(f,"tab")&&(a={},a.hasDropDown=0,a.hasSep=checkNested(j.element,"type"),a.icon="",a.name=k[f.tab],j.breadCrumbs.push(a)),checkNested(j.element,"type")&&(a={},a.hasDropDown=0,a.hasSep=0,a.icon=d.App.getObjIcon(j.element),getNestedPath(j.element,"id",0)?a.name=d.App.getObjUniqueName(j.element):a.name="Add New "+d.App.getXObjNameByType(j.element),j.breadCrumbs.push(a));break;case"dataTables":a.id=f.typeId,a.type="dataTables",a.icon=d.App.get("dataTableIcon",a.id,{html:1}),a.name=d.App.get("dataTableIfSingularName",a.id),a.list=angular.copy(d.App.get("onlyVisibleTables")),angular.forEach(a.list,function(a){a.icon=d.App.get("dataTableIcon",a.id,{html:1})}),a.hasDropDown=_tb.countTotalKeys(a.list),a.hasDropDown<2&&(a.hasDropDown=0),a.hasSep=checkNested(f,"tab"),a.search="",j.breadCrumbs.push(a),checkNested(f,"tab")&&(a={},a.hasDropDown=0,a.hasSep=0,a.icon="",a.name=k[f.tab],j.breadCrumbs.push(a))}}j.totalBreadCrumbs=_tb.countTotalKeys(j.breadCrumbs),j.showBreadcrumb=!0}};j.breadHide=function(a,b){return!(!checkNested(a,"name")||""==b||a.name.toLowerCase().indexOf(b.toLowerCase())!=-1)},j.breadClick=function(a,b){h.dismissAll();var c=f.tab;"dataTables"==b.type?""!=c&&"loginLogs"!=c&&"roles"!=c||(c="records"):"pages"==b.type&&""==c&&(c="content");var d="app.appsManage.typeEdit.tabs",g={appId:j.appId,type:b.type,typeId:a.id,tab:c};checkNested(b,"childSlug")&&(g.child=b.childSlug.split(b.id).join(a.id),g.typeId=b.parentId,d="app.appsManage.typeEdit.tabs.childPage"),e.go(d,g)};var m;getNestedPath(j,"dynamic",1)&&(m=d.$watch("changeBreadCrumb",function(a,b){l()})),j.$onInit=function(){l()},j.$onDestroy=function(){m()}}],templateUrl:"assets/common/ctrls/tb-app-breadcrumb.html"}),angular.module("app").component("tbTableGroup",{bindings:{items:"<?",columns:"<?",chkInput:"=",groupBy:"<?",isChild:"<?",opt:"<?",tabIndex:"<?",rowSummaries:"<?",tableId:"<?",pageId:"<?",doSort:"&",doItemClick:"&",parentCollapsed1:"<?"},controller:["$scope","$element","$attrs",function(a,b,c){var d=this;d.$onChanges=function(a){checkNested(a,"parentCollapsed1")&&angular.forEach(d.collapsed,function(b,c){d.collapsed[c]=a.parentCollapsed1.currentValue})},d.$onInit=function(){d.parentCollapsed={},d.collapsed={}},d.doToggle2=function(a){d.parentCollapsed[a]=!checkNested(d.parentCollapsed,a)||!d.parentCollapsed[a]},d.assignToggle=function(a,b){d.collapsed[a]=!(!checkNested(b,"collapsed")||!b.collapsed)},d.doToggle=function(a){d.collapsed[a]=!checkNested(d.collapsed,a)||!d.collapsed[a]}}],template:'<div class="group-wrap {{$ctrl.groupBy.colorClass}}" ng-class="{\'child-group\': $ctrl.isChild == \'1\', \'with-group\': $ctrl.groupBy}"><div ng-if="!$ctrl.groupBy"><tb-table chk-input="$ctrl.chkInput" columns="$ctrl.columns" items="$ctrl.items" opt="$ctrl.opt" tab-index="$ctrl.tabIndex" table-id="$ctrl.tableId" row-summaries="$ctrl.rowSummaries" do-sort="$ctrl.doSort({item: item, event: event})" do-item-click="$ctrl.doItemClick({column: column, item: item, event: event, colIndex: colIndex})" page-id="$ctrl.pageId"></tb-table></div><div ng-if="$ctrl.groupBy"><div ng-if="$ctrl.groupBy.child"><div ng-repeat="(key, items) in $ctrl.items | orderBy: $ctrl.groupBy.order | groupBy: $ctrl.groupBy.slug"><div class="group-title {{$ctrl.groupBy.colorClass}}" ng-init="$ctrl.assignToggle(key, $ctrl.groupBy)"><span class="collapsed-icon" ng-click="$ctrl.doToggle(key)"><i class="fa" ng-class="{\'fa-caret-down\': !$ctrl.collapsed[key], \'fa-caret-right\': $ctrl.collapsed[key]}"></i></span><span class="count-title"> Count: {{items.length}}</span><span class="parent-collapse" ng-click="$ctrl.doToggle2(key)"><span ng-show="!$ctrl.parentCollapsed[key]"><i class="fal fa-minus-square"></i></span><span ng-show="$ctrl.parentCollapsed[key]"><i class="fal fa-plus-square"></i></span></span><div class="field-title">{{$ctrl.groupBy.name}}</div><div class="val-title"><af-data-table-field item-val="key" column-slug="$ctrl.groupBy.slug" blank-val="\'(Empty)\'" columns="$ctrl.columns"></af-data-table-field></div></div><div class="group-wrapper" ng-show="!$ctrl.collapsed[key]"><tb-table-group chk-input="$ctrl.chkInput" columns="$ctrl.columns" items="items" opt="$ctrl.opt" tab-index="$ctrl.tabIndex" table-id="$ctrl.tableId" row-summaries="$ctrl.rowSummaries" do-sort="$ctrl.doSort({item: item, event: event})" do-item-click="$ctrl.doItemClick({column: column, item: item, event: event, colIndex: colIndex})" group-by="$ctrl.groupBy.child" is-child="1" parent-collapsed1="$ctrl.parentCollapsed[key]" page-id="$ctrl.pageId"></tb-table-group></div></div></div><div ng-if="!$ctrl.groupBy.child" ng-repeat="(key, items) in $ctrl.items | orderBy: $ctrl.groupBy.order | groupBy: $ctrl.groupBy.slug"><div class="group-title {{$ctrl.groupBy.colorClass}}" ng-init="$ctrl.assignToggle(key, $ctrl.groupBy)"><span class="collapsed-icon" ng-click="$ctrl.doToggle(key)"><i class="fa" ng-class="{\'fa-caret-down\': !$ctrl.collapsed[key], \'fa-caret-right\': $ctrl.collapsed[key]}"></i></span><span class="count-title"> Count: {{items.length}}</span><div class="field-title">{{$ctrl.groupBy.name}}</div><div class="val-title"><af-data-table-field item-val="key" column-slug="$ctrl.groupBy.slug" blank-val="\'(Empty)\'" columns="$ctrl.columns"></af-data-table-field></div></div><div class="group-wrapper" ng-show="!$ctrl.collapsed[key]"><tb-table chk-input="$ctrl.chkInput" columns="$ctrl.columns" items="items" opt="$ctrl.opt" tab-index="$ctrl.tabIndex" table-id="$ctrl.tableId" row-summaries="$ctrl.rowSummaries" do-sort="$ctrl.doSort({item: item, event: event})" do-item-click="$ctrl.doItemClick({column: column, item: item, event: event, colIndex: colIndex})" is-child="1" page-id="$ctrl.pageId"></tb-table></div></div></div></div>'}),angular.module("app").component("tbTable",{bindings:{items:"<?",columns:"<?",opt:"<?",tabIndex:"<?",chkInput:"=",tableId:"<?",pageId:"<?",doSort:"&",doItemClick:"&"},controller:["$scope","$element","$attrs",function(a,b,c){var d=this;d.chkAll=!1,d.setupRowSummaries=function(){d.rowSummaries=[],checkNested(d.opt,"settings","rowSummaries")&&angular.isArray(d.opt.settings.rowSummaries)&&angular.forEach(d.opt.settings.rowSummaries,function(a){var b={},c=!1;angular.forEach(d.columns,function(e,f){if(jQuery.inArray(e.type,["Number","Currency","Basic Formula","Complex Formula"])>-1){var g=[];angular.forEach(d.items,function(a){checkNested(a,e.slug)&&a[e.slug]&&g.push(a[e.slug])}),b[e.slug]=findMinMaxAvgSum(g,a.type)}else c||(b.lbl=a.lbl,c=!0)}),d.rowSummaries.push(b)})},d.$onChanges=function(a){checkNested(a,"items")&&(d.chkAll=!1,d.setupRowSummaries())},d.orderBy="",d.$onInit=function(){},d.doSortOnly=function(a){""==a?d.orderBy="":d.orderBy=d.orderBy==a.slug?"-"+a.slug:a.slug},d.setupColumn=function(a){var b={};return checkNested(a,"widthType")&&checkNested(a,"widthUnit")&&"custom"==a.widthType&&(b.width=a.widthUnit+(checkNested(a,"widthUnitType")&&"percent"==a.widthUnitType?"%":"px"),
b.minWidth=b.width),checkNested(a,"align")&&(b.textAlign=a.align),b},d.onClick=function(a,b,c){},d.doColumnAction=function(a,b,c){},d.checkAll=function(a){angular.forEach(d.items,function(a,b){d.chkInput[a.id]=d.chkAll})},d.checkHideColumn=function(a){var b=!1;return checkNested(d,"opt","filterTabs",d.tabIndex,"hideColumns")&&angular.forEach(d.opt.filterTabs[d.tabIndex].hideColumns,function(c){a.id==c&&(b=!0)}),checkNested(d,"opt","hideColumns")&&angular.isArray(d.opt.hideColumns)&&jQuery.inArray(a.slug,d.opt.hideColumns)>-1&&(b=!0),b}}],template:'<div class="table-wrap"><table class="table table-striped table-bordered table-hover table-checkable1 no-footer data-table"><thead><tr><th class="tb-select-row" ng-if="$ctrl.opt.settings.enableCheckbox == \'Yes\'"><input type="checkbox" ng-model="$ctrl.chkAll" ng-change="$ctrl.checkAll($event);"/></th><th ng-repeat="column in $ctrl.columns" ng-style="$ctrl.setupColumn(column)" ng-class="{sortable: column.sorting == 1}" ng-click="$ctrl.doSortOnly(\'\');$ctrl.doSort({item: column, event: $event})" ng-hide="$ctrl.checkHideColumn(column)"> <span ng-if="column.hideTitle != \'Yes\'">{{column.title}}</span><span class="table-only-sort" ng-click="$ctrl.doSortOnly(column);$event.stopPropagation();"><i class="fa" ng-class="{\'fa-caret-down\': $ctrl.orderBy != column.slug, \'fa-caret-up\': $ctrl.orderBy == column.slug}"></i></span></th></tr></thead><tbody><tr ng-repeat="(itemIndex, item) in $ctrl.items | orderBy : $ctrl.orderBy"><td class="tb-select-row" ng-if="$ctrl.opt.settings.enableCheckbox == \'Yes\'"><input type="checkbox" ng-model="$ctrl.chkInput[item.id]" data-value="{{item.id}}"/></td><td ng-repeat="(colIndex, column) in $ctrl.columns" ng-style="$ctrl.setupColumn(column)" ng-hide="$ctrl.checkHideColumn(column)" allow-inline-editing-for-app item="item" field="column" allow-edit="$ctrl.opt.settings.allowInlineEdit == \'Yes\' && (!column.allowInlineEdit || column.allowInlineEdit==\'Yes\')" table-id="$ctrl.tableId" page-id="$ctrl.pageId"><af-data-table-field item="item" column="column" columns="$ctrl.columns" update-val="item.__changed" ng-click="$ctrl.doItemClick({column: column, item: item, event: $event, colIndex: colIndex})"></af-data-table-field></td></tr><tr ng-if="$ctrl.items.length >= 1" ng-repeat="(itemIndex, item) in $ctrl.rowSummaries" class="table-row-summery" ng-class="{\'row-summery-first\':itemIndex == 0}"><td class="tb-select-row" ng-if="$ctrl.opt.settings.enableCheckbox == \'Yes\'"></td><td ng-repeat="column in $ctrl.columns" ng-style="$ctrl.setupColumn(column)" ng-hide="$ctrl.checkHideColumn(column)"><af-data-table-field item="item" column="column" columns="$ctrl.columns" row-summary="1"></af-data-table-field></td></tr><tr ng-if="$ctrl.items.length == 0"><td colspan="{{$ctrl.columns.length}}">{{$ctrl.opt.settings.noDataText || \'No record found\'}}</td></tr></tbody></table></div>'}),angular.module("app").component("ctrlTypeHead",{bindings:{field:"=",ngModel:"=",opt:"="},controller:["$scope","$element","$attrs","$compile","$filter","Config","AppURL","App","$rootScope",function(a,b,c,d,e,f,g,h,i){var j=this,k={type:"single"};j.ngModel=[],j.$onInit=function(){j.opt=angular.extend(j.opt,k)},j.getFieldValue=function(a){return[{id:"1",text:"one"},{id:"2",text:"two"},{id:"4",text:"four"}]},j.select=function(a){angular.isUndefined(j.ngModel)&&(j.ngModel=[]),"single"==j.opt.type?j.ngModel[0]=a.id:j.ngModel.push(a.id)}}],template:'<div class="ctrl-field-wrap">{{$ctrl.ngModel}}<input type="text" ng-model="$ctrl.val" placeholder="Please type" uib-typeahead="item as item.text for item in $ctrl.getFieldValue($viewValue)" typeahead-loading="joinLoading" typeahead-no-results="noResults" class="form-control" typeahead-on-select="$ctrl.select($item)"/></div>'}),angular.module("app").component("ctrlUiSelect2",{bindings:{ngModel:"=",field:"=",params:"<?",multiple:"<?",changes:"<?",ngDisabled:"=",onChangeVal:"&"},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this,o={remote:0,theme:"classic",placeholder:"Please type",width:"100%",multiple:!1,disabled:!1,allowClear:!0,hideSelected:!0};n.multiple=!1;var p=!1,q={};n.options=[],n.selectVal=function(b){(angular.isUndefined(n.ngModel)||angular.isUndefined(b)||null==b||""==b)&&(n.ngModel=[]),angular.isArray(n.ngModel)&&n.multiple||(n.ngModel=[]);var c=checkNested(b,"id")?b.id:b.text;n.ngModel.indexOf(c)==-1&&n.ngModel.push(c),a.$apply()},n.unSelectVal=function(a){(angular.isUndefined(n.ngModel)||angular.isUndefined(a)||null==a)&&(n.ngModel=[]);var b=checkNested(a,"id")?a.id:a.text;n.ngModel.indexOf(b)>-1&&n.ngModel.splice(n.ngModel.indexOf(b),1)},n.clearVal=function(){n.ngModel=[]};var r=function(){p.on("select2:select",function(a){checkNested(a,"params","data")?angular.isDefined(a.params.data)&&n.selectVal(a.params.data):n.clearVal()}).on("select2:unselect",function(a){checkNested(a,"params","data")?n.unSelectVal(a.params.data):n.clearVal()}).on("change",function(a){}),m(function(){angular.isDefined(n.ngModel)?n.multiple?p.val(n.ngModel).trigger("change"):p.val(n.ngModel[0]).trigger("change"):(angular.isUndefined(n.ngModel)&&(n.ngModel=[]),angular.isArray(n.ngModel)&&n.multiple||(n.ngModel=[]))},1)},s=function(){p?p.trigger("change"):(angular.isUndefined(n.ngModel)&&(n.ngModel=[]),p=jQuery(".select2",b),q.templateSelection=function(a){return jQuery("<span>"+a.text+"</span>")},q.placeholder=n.multiple?"Please type":"Select any",p.select2(q),angular.isFunction(n.onChangeVal)&&p.on("change",function(a){n.onChangeVal({val:angular.element(a.target).val()})})),r()},t=function(){q.minimumInputLength=1,q.defaultResults={items:n.options},q.ajax={cache:!0,url:h.API+"joinOptions",dataType:"json",method:"POST",headers:{"X-CSRF-TOKEN":i,"X-TB-TOKEN":k.App.get("appUserToken")},data:function(a){var b={k:a.term,fieldId:n.field.id};return checkNested(n.field,"joinFilters")&&(b.filters=n.field.joinFilters),checkNested(n.field,"loggedInJoinField")&&(b.loggedInJoinField=n.field.loggedInJoinField),b},processResults:function(a,b){return{results:a.items}}}};n.$onChanges=function(a){q=angular.extend({},o,n.params),checkNested(n.field,"type")&&"Join"==n.field.type&&(q.remote=checkNested(n.field.options,"remote")&&n.field.options.remote,checkNested(n.field,"options","joinType")&&"One-to-Many"==n.field.options.joinType),checkNested(a,"multiple")&&"1"==a.multiple.currentValue&&(q.multiple=!0,n.multiple=!0),n.options=checkNested(n.field,"options","options")?n.field.options.options:[],q.remote&&t(),s()},n.$onInit=function(){a.$watch("$ctrl.field",function(a){n.options=checkNested(a,"options","options")?a.options.options:[],s()},!0)}}],template:'<div class="ctrl-field-wrap ctrl-ui-select2"><select class="select2" ng-disabled="$ctrl.ngDisabled"><option ng-if1="!$ctrl.multiple"></option><option ng-repeat="option in $ctrl.options" value="{{option.val}}">{{option.text}}</option></select></div>'}),angular.module("app").component("ctrlUiSelect3",{bindings:{ngModel:"=",field:"=",params:"<?"},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout","$stateParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this,p={remote:0,theme:"classic",placeholder:"Select any",width:"100%",multiple:!1,disabled:!1,allowClear:!0};o.multiple=!1;var q=!1,r={multiple:!1};o.options=[],o.selectVal=function(b){(angular.isUndefined(o.ngModel)||angular.isUndefined(b)||null==b||""==b)&&(o.ngModel=[]),angular.isArray(o.ngModel)&&o.multiple||(o.ngModel=[]);var c=checkNested(b,"id")?b.id:b.text;o.ngModel.indexOf(c)==-1&&o.ngModel.push(c),a.$apply()},o.unSelectVal=function(a){(angular.isUndefined(o.ngModel)||angular.isUndefined(a)||null==a)&&(o.ngModel=[]);var b=checkNested(a,"id")?a.id:a.text;o.ngModel.indexOf(b)>-1&&o.ngModel.splice(o.ngModel.indexOf(b),1)};var s=function(){q.on("select2:select",function(a){o.selectVal(a.params.data)}).on("select2:unselect",function(a){o.unSelectVal(a.params.data)}),m(function(){angular.isDefined(o.ngModel)&&(o.multiple?q.val(o.ngModel).trigger("change"):q.val(o.ngModel[0]).trigger("change"))},1)},t=function(){q?q.trigger("change"):(q=jQuery(".select2",b),r.templateSelection=function(a){return jQuery("<span>"+a.text+"</span>")},r.placeholder=o.multiple?"Please type":"Select any",q.select2(r)),s()},u=function(){r.minimumInputLength=1,r.defaultResults={items:o.options};var a=h.API;a+=checkNested(o.params,"appSide")&&1==o.params.appSide?"joinOptions":"apps/"+n.appId+"/joinOptions",r.ajax={cache:!0,url:a,dataType:"json",method:"POST",headers:{"X-CSRF-TOKEN":i},data:function(a){var b={k:a.term,fieldId:o.field.id};return checkNested(o.field,"joinFilters")&&(b.filters=o.field.joinFilters),b},processResults:function(a,b){return{results:a.items}}}};o.$onChanges=function(a){r=angular.extend({},p,o.params),checkNested(o.field,"type")&&"Join"==o.field.type&&(r.remote=checkNested(o.field.options,"remote")&&o.field.options.remote,checkNested(o.field,"options","joinType")&&"One-to-Many"==o.field.options.joinType),checkNested(a,"multiple")&&"1"==a.multiple.currentValue,o.options=checkNested(o.field,"options","options")?o.field.options.options:[],r.remote&&u(),t()},o.$onInit=function(){a.$watch("$ctrl.field",function(a){o.options=checkNested(a,"options","options")?a.options.options:[],q.select2(r)},!0)}}],template:'<div class="ctrl-field-wrap ctrl-ui-select2"><select class="select2"><option value="">Select Any</option><option ng-repeat="option in $ctrl.options" value="{{option.val}}">{{option.text}}</option></select></div>'}),angular.module("app").component("ctrlUiSelect4",{bindings:{ngModel:"=",field:"<",params:"<?"},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout","$stateParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this,p={remote:0,theme:"classic",placeholder:"Please type",width:"100%",multiple:!0,disabled:!1,allowClear:!0};o.multiple=!0;var q=!1,r={multiple:!0,templateResult:function(a){return jQuery(a.text)},templateSelection:function(a){return jQuery(a.text)}};o.options=[],o.selectVal=function(b){(angular.isUndefined(o.ngModel)||angular.isUndefined(b)||null==b||""==b)&&(o.ngModel=[]),angular.isArray(o.ngModel)&&o.multiple||(o.ngModel=[]);var c=checkNested(b,"id")?b.id:b.text;o.ngModel.indexOf(c)==-1&&o.ngModel.push(c),a.$apply()},o.unSelectVal=function(a){(angular.isUndefined(o.ngModel)||angular.isUndefined(a)||null==a)&&(o.ngModel=[]);var b=checkNested(a,"id")?a.id:a.text;o.ngModel.indexOf(b)>-1&&o.ngModel.splice(o.ngModel.indexOf(b),1)};var s=function(){q.on("select2:select",function(a){o.selectVal(a.params.data)}).on("select2:unselect",function(a){o.unSelectVal(a.params.data)}),m(function(){angular.isDefined(o.ngModel)&&(o.multiple?q.val(o.ngModel).trigger("change"):q.val(o.ngModel[0]).trigger("change"))},1)},t=function(){q?q.trigger("change"):(q=jQuery(".select2",b),r.templateSelection=function(a){return jQuery("<span>"+a.text+"</span>")},r.placeholder=o.multiple?"Please type":"Select any",q.select2(r)),s()},u=function(){r.minimumInputLength=1,r.defaultResults={items:o.options};var a=h.API;a+=checkNested(o.params,"appSide")&&1==o.params.appSide?"joinOptions":"apps/"+n.appId+"/joinOptions",r.ajax={cache:!0,url:a,dataType:"json",method:"POST",headers:{"X-CSRF-TOKEN":i},data:function(a){var b={k:a.term,fieldId:o.field.id};return checkNested(o.field,"joinFilters")&&(b.filters=o.field.joinFilters),b},processResults:function(a,b){return{results:a.items}}}};o.$onChanges=function(a){r=angular.extend({},p,o.params),checkNested(o.field,"type")&&"Join"==o.field.type&&(r.remote=checkNested(o.field.options,"remote")&&o.field.options.remote,checkNested(o.field,"options","joinType")&&"One-to-Many"==o.field.options.joinType),checkNested(a,"multiple")&&"1"==a.multiple.currentValue,o.options=checkNested(o.field,"options","options")?o.field.options.options:[],r.remote&&u(),t()},o.$onInit=function(){a.$watch("$ctrl.field",function(a){o.options=checkNested(a,"options","options")?a.options.options:[]},!0)}}],template:'<div class="ctrl-field-wrap ctrl-ui-select2"><select class="select2"><option ng-if1="!$ctrl.multiple"></option><option ng-repeat="option in $ctrl.options" value="{{option.val}}">{{option.text}}</option></select></div>'}),angular.module("app").component("ctrlUiSelect",{bindings:{data:"<?",key:"<?",val:"<?",multiple:"<?",ngModel:"="},controller:["$scope","$element","$attrs","$compile","$filter","filterFilter","Config","AppURL","CSRF_TOKEN","App","$rootScope","$http","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=this,o={remote:0,theme:"classic",placeholder:"Please type",width:"100%",multiple:!1,disabled:!1,allowClear:!0};n.multiple=!1;var p=!1,q={};n.options=[],n.selectVal=function(a){(angular.isUndefined(n.ngModel)||angular.isUndefined(a)||null==a||""==a)&&(n.ngModel=[]),angular.isArray(n.ngModel)&&n.multiple||(n.ngModel=[]);var b=checkNested(a,"id")?a.id:a.text;n.ngModel.indexOf(b)==-1&&n.ngModel.push(b)},n.unSelectVal=function(a){(angular.isUndefined(n.ngModel)||angular.isUndefined(a)||null==a)&&(n.ngModel=[]);var b=checkNested(a,"id")?a.id:a.text;n.ngModel.indexOf(b)>-1&&n.ngModel.splice(n.ngModel.indexOf(b),1)};var r=function(){p.on("select2:select",function(a){n.selectVal(a.params.data)}).on("select2:unselect",function(a){n.unSelectVal(a.params.data)}),m(function(){angular.isDefined(n.ngModel)&&(n.multiple?p.val(n.ngModel).trigger("change"):p.val(n.ngModel[0]).trigger("change"))},1)},s=function(){p?p.trigger("change"):(p=jQuery(".select2",b),q.templateSelection=function(a){return jQuery("<span>"+a.text+"</span>")},q.placeholder=n.multiple?"Please type":"Select any",p.select2(q)),r()};n.$onChanges=function(a){q=angular.extend({},o,n.params),checkNested(a,"multiple")&&"1"==a.multiple.currentValue&&(q.multiple=!0,n.multiple=!0),n.options=[],countTotalKeys(n.data)>0&&angular.forEach(n.data,function(a,b){angular.isDefined(n.key)&&angular.isDefined(n.val)&&!angular.isObject(n.key)&&!angular.isObject(n.val)?n.options.push({val:a[n.key],text:a[n.val]}):angular.isDefined(a)&&!angular.isObject(a)&&n.options.push({val:b,text:a})}),angular.isUndefined(n.ngModel)&&(n.ngModel=n.multiple?[]:""),s()},n.$onInit=function(){}}],template:'<div class="ctrl-field-wrap ctrl-ui-select2"><select class="select2"><option ng-if1="!$ctrl.multiple"></option><option ng-repeat="option in $ctrl.options" value="{{option.val}}">{{option.text}}</option></select></div>'}),angular.module("app").component("userNavSection",{controller:["$scope","$element","$attrs","$stateParams","$state","$rootScope",function(a,b,c,d,e,f){var g=this;g.currentUser=f.currentUser,g.$onInit=function(){}}],bindings:{cssClass:"="},template:'<div id="tb-user-nav" uib-dropdown uib-dropdown-toggle dropdown-append-to-body><img alt="." class="avatar" ng-src="{{$ctrl.currentUser.avatar}}" ng-show="$ctrl.currentUser.avatar != \'\'"/><img alt="." class="avatar" src="/assets/images/default-avatar.png" ng-show="$ctrl.currentUser.avatar == \'\' || $ctrl.currentUser.avatar == null"/><span class="text-e">{{$ctrl.currentUser.name}}</span><ul class="dropdown-menu user-nav-menu {{$ctrl.cssClass}}" uib-dropdown-menu><li><a ui-sref="app.billing.general"> <i class="far fa-dollar-sign"></i> Subscriptions </a></li><li><a ui-sref="app.profile.edit"> <i class="far fa-user"></i> Edit Profile </a></li><li><a ui-sref="app.profile.changePassword"> <i class="far fa-key"></i> Change Password </a></li><li><a href="/logout" onclick="return confirm(\'Are you sure?\');"> <i class="far fa-sign-out"></i> Log Out </a></li></ul></div>'}),angular.module("app").controller("deleteBatchRecordModalCtrl",["$scope","$rootScope","Http","$timeout","$state","MsgBox","$stateParams","$uibModal","CommonFactory","$uibModalInstance","dataTableId",function(a,b,c,d,e,f,g,h,i,j,k){a.updated=!0,a.closeModal=function(b){j.close(a.updated)},a.page=-1,angular.isUndefined(k)?a.page=0:(a.settings={},a.settings.dataTableId=k,a.settings.dataTable=angular.copy(b.App.get("dataTables",k)),a.settings.dataTable?(a.page=1,a.settings.fields=angular.copy(b.App.get("dataFieldsWithKey",k))):a.page=0,a.item={conditions:[]},a.addCondition=function(b){a.item.conditions.push({items:[]})},a.removeCondition=function(b,c){a.item.conditions.splice(b,1)},a.btnAction='Next <i class="fa fa-arrow-right"></i> ',a.loading=0,a.totalRecords=0,a.totalFinalRecords=0,a.goFirstPage=function(){a.page=1,a.btnAction='Next <i class="fa fa-arrow-right"></i> '},a.updateAction=function(){1!=a.loading&&(1==a.page?(a.loading=1,a.btnAction='<i class="fa fa-spin fa-spinner"></i> Checking...',c.postWithUpload("data-table."+k+".batchAction.updateCheck",a.item,function(b){a.loading=0,a.btnAction='Next <i class="fa fa-arrow-right"></i> ',"success"==b.type?(a.btnAction='<i class="far fa-trash"></i> Delete',a.totalRecords=b.total,a.page=2):f.show(b.msg,b.type)},function(b,d){a.btnAction='Next <i class="fa fa-arrow-left"></i> ',a.loading=0,c.handleErrors(d,!0)})):2==a.page&&(a.loading=1,a.btnAction='<i class="fa fa-spin fa-spinner"></i> Deleting...',c.postWithUpload("data-table."+k+".batchAction.deleteDo",a.item,function(b){a.updated=!0,a.loading=0,a.btnAction='Next <i class="fa fa-arrow-right"></i> ',"success"==b.type?(a.totalFinalRecords=b.total,a.page=3):f.show(b.msg,b.type)},function(b,d){a.btnAction='Next <i class="fa fa-arrow-left"></i> ',a.loading=0,c.handleErrors(d,!0)})))})}]),angular.module("app").controller("filtersModalCtrl",["$scope","$rootScope","Http","$timeout","$state","MsgBox","$stateParams","$uibModal","CommonFactory","$uibModalInstance","data",function(a,b,c,d,e,f,g,h,i,j,k){var l=function(a){var b=[];return a=angular.copy(a),checkNested(k,"onlyAllowedFieldId")&&_tb.countTotalKeys(k.onlyAllowedFieldId)>0?angular.forEach(a,function(a,c){jQuery.inArray(a.id,k.onlyAllowedFieldId)>-1&&b.push(a)}):b=a,b};a.settings={},a.settings.dataTableId=k.tableId,a.settings.fields=l(b.App.get("dataFields",a.settings.dataTableId)),a.element={filters:{}},checkNested(k,"filters")&&(a.element.filters=angular.copy(k.filters)),a.applyFilters=function(){j.close({updated:!0,element:a.element})},a.addFilterGroup=function(){_tb.push(a.element,"filters",{items:[],child:[]})},a.removeFilterGroup=function(b){a.element.filters.splice(b,1)},a.closeModal=function(a){j.close({updated:!1})}}]),angular.module("app").controller("importsModalCtrl",["$scope","$rootScope","Http","$timeout","$state","MsgBox","$stateParams","$uibModal","CommonFactory","$uibModalInstance","data",function(a,b,c,d,e,f,g,h,i,j,k){a.item={matchField:"",matchFieldToField:"",file:null,step:1,delimiter:"",delimiter2:""},a.uId=k.uId,a.settings={},a.settings.importOptions=k.importOptions,checkNested(a.settings.importOptions.settings,"matching")&&checkNested(a.settings.importOptions.settings,"matchField")&&"Pre Defined"==a.settings.importOptions.settings.matching&&!_tb.is("null",a.settings.importOptions.settings.matchField)&&(a.item.matching=a.settings.importOptions.settings.matchField),checkNested(a.settings.importOptions.settings,"allowDelimiter")||(a.settings.importOptions.settings.allowDelimiter="No"),checkNested(a.settings.importOptions.settings,"delimiter")&&(a.item.delimiter=a.settings.importOptions.settings.delimiter),checkNested(a.settings.importOptions.settings,"delimiter2")&&(a.item.delimiter2=a.settings.importOptions.settings.delimiter2),a.settings.dataTableId=k.tableId,a.settings.singleFields=b.App.get("singleDataFields",a.settings.dataTableId),a.btnImport='<i class="far fa-check"></i> Next',a["import"]=function(d){if(a.errMsg="",1==a.item.step){if(_tb.is("null",a.item.file))return void(a.errMsg="Please select CSV file")}else a.item.file=null;return 2!=a.item.step||!_tb.is("null",a.item.matchFieldToField)&&""!=a.item.matchFieldToField?(a.isImporting=1,a.btnImport='<i class="far fa-spin fa-spinner"></i> Processing...',void c.postWithUpload("g."+a.uId,a.item,function(c){a.btnImport='<i class="far fa-check"></i> Next',"success"==c.type&&(a.item.step=c.step,a.isImporting=2,2==a.item.step||3==a.item.step?(a.item.importFileResponse=c,a.importDataItems=angular.copy(c.data),delete a.item.importFileResponse.data,""!=a.item.matchField&&(a.settings.matchField=angular.copy(b.App.get("fieldFromFieldSlug",a.item.matchField.split("|")[0])))):4==a.item.step?"success"==c.type&&(a.successMsg=c):5==a.item.step&&(f.show(c.msg,c.type),j.close({loadNotification:!0,id:c.queueId}))),"error"==c.type&&(a.errMsg=c.msg)},function(b,c){a.btnImport='<i class="far fa-check"></i> Import',a.isImporting=0})):void(a.errMsg="Please select match column.")},a.closeModal=function(a){j.close({updated:!1})}}]),angular.module("app").controller("updateBatchRecordModalCtrl",["$scope","$rootScope","Http","$timeout","$state","MsgBox","$stateParams","$uibModal","CommonFactory","$uibModalInstance","dataTableId","onlyIds","uId","applyFilter",function(a,b,c,d,e,f,g,h,j,k,l,m,n,o){a.updated=!1,a.closeModal=function(b){k.close(a.updated)},a.page=-1,angular.isUndefined(l)?a.page=0:(a.settings={},a.settings.dataTableId=l,a.settings.dataTable=angular.copy(b.App.get("dataTables",l)),a.settings.dataTable?(a.page=1,a.settings.fields=angular.copy(b.App.get("dataFieldsWithKey",l))):a.page=0,a.item={values:[{fieldId:"",type:"custom_val",customVal:"",fieldVal:""}],conditions:[]},a.item.uId=n,a.item.onlyIds=m,a.item.af=o,angular.isArray(a.item.onlyIds)||(a.item.onlyIds=[]),a.addCondition=function(b){a.item.conditions.push({items:[]})},a.removeCondition=function(b,c){a.item.conditions.splice(b,1)},a.removeValue=function(b){a.item.values.length>1&&a.item.values.splice(b,1)},a.addValue=function(){a.item.values.push({fieldId:"",type:"custom_val",customVal:"",fieldVal:""})},a.validField=function(a){var b=!0;switch(a.type){case"Basic Formula":case"Complex Formula":case"Text Formula":case"Date Formula":case"Calendar":case"Image":case"File":case"Signature":case"Join":b=!1}return b},a.selectOptions=[],a.enableInputCtrl=function(a,c){var d=!1,e=checkNested(c,"fieldId")?b.App.get("field",c.fieldId):"",f=checkNested(e,"type")?e.type:"";switch(a){case"text":jQuery.inArray(f,["Text","Number","Rich Text","Long Text","Currency","Email","Phone"])!=-1&&(d=!0);break;case"select":jQuery.inArray(f,["Select","Decision Box","Join","Rating","Slider"])!=-1&&(d=!0);break;default:f==a&&(d=!0)}return d},a.readyControl=function(b,c){var d=checkNested(b,"fieldId")&&""!=b.fieldId&&checkNested(a.settings.fields,b.fieldId)?a.settings.fields[b.fieldId]:"";a.selectedField=d;var e=checkNested(d,"type")?d.type:"";switch(e){case"Select":case"Multi-Select":case"Checkbox":case"Radio":a.selectOptions[c]=[],angular.forEach(d.options,function(b){var e=1==d.allowDiffVal?b.val:b.text;a.selectOptions[c].push({val:e,text:b.text})}),b.value="Multi-Select"==e||"Checkbox"==e?[a.selectOptions[c][0].val]:a.selectOptions[c][0].val;break;case"Decision Box":a.selectOptions[c]=[{val:0,text:"No"},{val:1,text:"Yes"}],b.value="0";break;case"Name":b.value={};break;case"Join":b.value={};break;case"Link":b.value={};break;case"Rating":for(a.selectOptions[c]=[],i=0;i<=d.numberOfStar;i++)a.selectOptions[c].push({val:i,text:i+" Star"});b.value="0";break;case"Slider":for(floor=0,ceil=100,checkNested(d,"minVal")&&checkNested(d,"maxVal")&&(floor=parseInt(d.minVal),ceil=parseInt(d.maxVal)),i=floor;i<=ceil;i++)a.selectOptions[c].push({val:i,text:i});b.value="0";break;default:b.value=""}},a.getRecordRuleSetValueFields=function(c){var d;return d=[],"form_val"==c.type?angular.forEach(a.element.rows,function(a){angular.forEach(a.cols,function(a){angular.forEach(a.fields,function(a){d.push(a)})})}):"connected_val"==c.type&&angular.forEach(a.settings.connectedDataTables,function(c){var e=angular.copy(b.App.get("dataFields",c.id));angular.isArray(e)&&angular.forEach(e,function(b){d.add({fieldId:c.id+"_"+b.id,name:a.settings.dataTables[c.id].name+" > "+b.name})})}),d},a.btnAction='Next <i class="fa fa-arrow-right"></i> ',a.loading=0,a.totalRecords=0,a.totalFinalRecords=0,a.goFirstPage=function(){a.page=1,a.btnAction='Next <i class="fa fa-arrow-right"></i> '},a.updateAction=function(){if(1!=a.loading)if(1==a.page){var b=!1;if(angular.forEach(a.item.values,function(a){checkNested(a,"fieldId")&&""!=a.fieldId&&(b=!0)}),!b)return void f.show("Please set at-least one value to update.","error");a.loading=1,a.btnAction='<i class="fa fa-spin fa-spinner"></i> Checking...',c.postWithUpload("data-table."+l+".batchAction.updateCheck",a.item,function(b){a.loading=0,a.btnAction='Next <i class="fa fa-arrow-right"></i> ',"success"==b.type?(a.btnAction='<i class="fa fa-check"></i> Update',a.totalRecords=b.total,a.page=2):f.show(b.msg,b.type)},function(b,d){a.btnAction='Next <i class="fa fa-arrow-right"></i> ',a.loading=0,c.handleErrors(d,!0)})}else 2==a.page&&(a.loading=1,a.btnAction='<i class="fa fa-spin fa-spinner"></i> Updating...',c.postWithUpload("data-table."+l+".batchAction.updateDo",a.item,function(b){a.updated=!0,a.loading=0,a.btnAction='Next <i class="fa fa-arrow-right"></i> ',"success"==b.type?(a.totalFinalRecords=b.total,a.page=3):f.show(b.msg,b.type)},function(b,d){a.btnAction='Next <i class="fa fa-arrow-right"></i> ',a.loading=0,c.handleErrors(d,!0)}))})}]),angular.module("app").run(["$templateCache",function(a){"use strict";a.put("assets/common/simple-modal-wrap.html","<div uib-modal-transclude></div>"),a.put("assets/common/js/directives/allow-inline-editing-for-app-popover.html",'<div class="popover popover-modal-wrap {{settings.pClass}}" ng-style=settings.pStyle><div class=arrow></div><div class=popover-inner><h3 class=popover-title>{{settings.pTitle}} <span class=pclose-icn ng-click=close()><i class="far fa-times"></i></span></h3><div class=popover-content><div class=form-group><input class=form-control ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Text\' && (!settings.settings.field.isPassword || settings.settings.field.isPassword ==\'No\')"> <input class=form-control type=password ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Text\' && settings.settings.field.isPassword == \'Yes\'"><div ng-if="settings.fieldType == \'Text\' && settings.settings.field.isPassword == \'Yes\'"><span class=small-label>Password</span> <input type=password placeholder="Please confirm password"> <span class=small-label>Confirm Password</span></div><textarea class=form-control ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Long Text\'"></textarea><textarea class=form-control ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Rich Text\'" ui-tinymce=tinymceOptions style="height: {{settings.settings.field.inputHeight || \'150\'}}px"></textarea><input class=form-control type=number ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Number\'" placeholder={{settings.settings.field.options.placeholder}}><div class=input-group ng-if="settings.fieldType == \'Currency\'"><div class=input-group-addon ng-if="settings.field.options.currencyFormat== \'Prefix\'">{{settings.field.options.currencySymbol}}</div><input class=form-control ng-model=record[settings.fieldSlug] placeholder={{settings.field.options.placeholder}}><div class=input-group-addon ng-if="settings.field.options.currencyFormat == \'Suffix\'">{{settings.field.options.currencySymbol}}</div></div><div class=inline ng-if="settings.fieldType == \'Date\'"><hit-date-time-picker date-time=record[settings.fieldSlug] type=settings.fieldType options=\'{"enableTime":false}\'></hit-date-time-picker></div><div class=inline ng-if="settings.fieldType == \'Time\'"><hit-date-time-picker date-time=record[settings.fieldSlug] type=settings.fieldType options=\'{"enableDate":false}\'></hit-date-time-picker></div><div class=inline ng-if="settings.fieldType == \'Date/Time\'"><hit-date-time-picker date-time=record[settings.fieldSlug] type=settings.fieldType options={}></hit-date-time-picker></div><div class=inline ng-if="settings.fieldType == \'Calendar\'"><hit-field-calendar record=record slug=settings.field.slug range-date=settings.field.options.rangeDate ng-disabled=ctrlDisabled(field)></hit-field-calendar></div><div class=inline ng-if="settings.fieldType == \'Image\'"><xctrl-file-cloudinary2 element=record[settings.fieldSlug] client=getClientName() on-img-select=imgSelect()></xctrl-file-cloudinary2></div><div class=inline ng-if="settings.fieldType == \'File\'"><hit-only-file-upload file-type=file file=record[settings.fieldSlug] ng-disabled=ctrlDisabled(field)></hit-only-file-upload></div><select class=form-control ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Select\'"><option value="">Select any</option><option ng-repeat="option in settings.field.options.options" value={{option.text}} ng-if="settings.field.options.allowDiffVal != \'1\'">{{option.text}}</option><option ng-repeat="option in settings.field.options.options" value={{option.val}} ng-if="settings.field.options.allowDiffVal != \'0\'">{{option.text}}</option></select><select class=form-control ng-model=record[settings.fieldSlug] multiple ng-if="settings.fieldType == \'Multi-Select\'"><option ng-repeat="option in settings.field.options.options" value={{option.text}} ng-if="settings.field.options.allowDiffVal != \'1\'">{{option.text}}</option><option ng-repeat="option in settings.field.options.options" value={{option.val}} ng-if="settings.field.options.allowDiffVal != \'0\'">{{option.text}}</option></select><div ng-if="settings.fieldType == \'Checkbox\'" class=tb-checkbox-outline><ctrl-checkboxes ng-model=record[settings.fieldSlug] field=settings.field></ctrl-checkboxes></div><div ng-if="settings.fieldType == \'Radio\'" class=tb-checkbox-outline><label class="text-center tb-radio" ng-repeat="option in settings.field.options.options" ng-class="{\'radio-icon-btn\': option.iconClass && settings.field.showIcon == \'Yes\', \'selected\': record[settings.fieldSlug]==(settings.field.options.allowDiffVal==\'1\'?option.val:option.text)}"><input type=radio ng-model=record[settings.fieldSlug] name=field{{settings.field.slug}} value={{option.text}} ng-if="settings.field.options.allowDiffVal != \'1\'" ng-disabled=ctrlDisabled(field)> <input type=radio ng-model=record[settings.fieldSlug] name=field{{settings.field.slug}} value={{option.val}} ng-if="settings.field.options.allowDiffVal != \'0\'" ng-disabled=ctrlDisabled(field)> <i class="fal fa-{{option.iconClass}} fa-{{settings.field.iconSize}} font-dark" ng-if="option.iconClass && settings.field.showIcon == \'Yes\'"></i> <span ng-if="settings.field.optionLblPosition!= \'Hide\'">{{option.text}}</span></label></div><div ng-if="settings.fieldType == \'Signature\'"><ctrl-sign record=record field=settings.field disabled></ctrl-sign></div><div class=tb-checkbox-inline ng-if="settings.fieldType == \'Decision Box\' && settings.field.options.inputType == \'Checkbox\'"><label class=tb-checkbox><input type=checkbox ng-model=record[settings.fieldSlug] ng-required=false ng-true-value="\'1\'" ng-false-value="\'0\'"> {{settings.field.options.label}} <span></span></label></div><div ng-if="settings.fieldType == \'Decision Box\' && settings.field.options.inputType == \'Drop-down\'"><select class=form-control ng-model=record[settings.fieldSlug] ng-required=false><option value=0>{{settings.field.options.options[0]}}</option><option value=1>{{settings.field.options.options[1]}}</option></select></div><div class=tb-checkbox-outline ng-if="settings.fieldType == \'Decision Box\' && settings.field.options.inputType == \'Radio Buttons\'"><label class=tb-radio><input type=radio ng-model=record[settings.fieldSlug] ng-required=false value=1> {{settings.field.options.options[0]}} <span></span></label><label class=tb-radio><input type=radio ng-model=record[settings.fieldSlug] ng-required=false value=0> {{settings.field.options.options[1]}} <span></span></label></div><div ng-if="settings.fieldType == \'Join\' && settings.field.options.joinType==\'One-to-One\'"><ctrl-ui-select3 ng-model=record[settings.fieldSlug] params={appSide:1} field=settings.field></ctrl-ui-select3></div><div ng-if="settings.fieldType == \'Join\' && settings.field.options.joinType==\'One-to-Many\'"><ctrl-ui-select4 ng-model=record[settings.fieldSlug] params={appSide:1} field=settings.field></ctrl-ui-select4></div><div class=field-name ng-if="settings.fieldType == \'Name\'"><table border=0><tr><td ng-repeat="fieldItem in settings.field.options.formFieldDisplay"><select class="form-control field-name-title" ng-if="fieldItem.key == \'title\'" ng-model=record[settings.fieldSlug].title><option value="">None</option><option value=Ms.>Ms.</option><option value=Miss>Miss</option><option value=Mr.>Mr.</option><option value=Mrs.>Mrs.</option><option value=Dr.>Dr.</option><option value=Prof.>Prof.</option></select><input class="form-control field-first-name" ng-model=record[settings.fieldSlug].first_name ng-if="fieldItem.key == \'first_name\'" placeholder1="Enter First Name"> <input class="form-control field-middle-name" ng-model=record[settings.fieldSlug].middle_name ng-if="fieldItem.key == \'middle_name\'" placeholder1="Enter Middle Name"> <input class="form-control field-last-name" ng-model=record[settings.fieldSlug].last_name ng-if="fieldItem.key == \'last_name\'" placeholder1="Enter Last Name"><label class=field-name-label>{{fieldItem.name}}</label></td></tr></table></div><div class=field-address ng-if="settings.fieldType == \'Address\'"><div class=row><div class=col-md-12 ng-repeat="fieldItem in settings.field.options.formFieldDisplay" ng-class="{\'col-md-6\': fieldItem.key == \'country\' || fieldItem.key == \'zip\'}"><label class=field-address-label ng-if="$index > 0">{{fieldItem.name}}</label><input class="form-control field-{{key}}" ng-model=record[settings.fieldSlug][fieldItem.key] placeholder="Please enter {{fieldItem.key}}" google-auto-complete google-auto-complete-if="{{fieldItem.key == \'address\'}}" is-address-field=true address-field=settings.field address-model=record[settings.fieldSlug] data-sub-field-slug={{fieldItem.key}}></div></div></div><input class=form-control ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Phone\'" placeholder={{settings.field.options.placeholder}} ui-mask={{settings.field.options.phoneFormat}}> <input class=form-control type=email ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Email\'" placeholder={{settings.field.options.placeholder}} ng-disabled=ctrlDisabled(field)><div class=field-link ng-if="settings.fieldType == \'Link\'"><input class="form-control field-link" ng-model=record[settings.fieldSlug].link ng-disabled=ctrlDisabled(field)><label class=field-link-label ng-if="settings.field.options.linkFormat == \'unique\'">Link URL</label><input class="form-control field-link" ng-model=record[settings.fieldSlug].text ng-if="settings.field.options.linkFormat == \'unique\'" ng-disabled=ctrlDisabled(field)><label class=field-link-label ng-if="settings.field.options.linkFormat == \'unique\'">Link Text</label></div><div class=field-link ng-if="settings.fieldType == \'Rating\'"><ng-rate-it ng-model=record[settings.fieldSlug] min=0 max=settings.field.options.numberOfStar step=1 resetable="settings.field.options.allowReset == \'Yes\'"></ng-rate-it></div><div class=field-slider ng-if="settings.fieldType == \'Slider\'"><rzslider rz-slider-model=record[settings.fieldSlug] rz-slider-options=rzSliderOption(field)></rzslider></div></div><button class="btn btn-block btn-success" ng-click=update()><span ng-show=!isSaving><i class="far fa-check"></i> Update</span> <span ng-show=isSaving><i class="far fa-spin fa-spinner"></i> Updating</span></button></div></div></div>'),
a.put("assets/common/js/directives/allow-inline-editing-popover.html",'<div class="popover popover-modal-wrap {{settings.pClass}}" ng-style=settings.pStyle><div class=arrow></div><div class=popover-inner><h3 class=popover-title>{{settings.pTitle}} <span class=pclose-icn ng-click=close()><i class="far fa-times"></i></span></h3><div class=popover-content><div class=form-group><input class=form-control ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Text\' && (!settings.settings.field.isPassword || settings.settings.field.isPassword ==\'No\')"> <input class=form-control type=password ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Text\' && settings.settings.field.isPassword == \'Yes\'"><div ng-if="settings.fieldType == \'Text\' && settings.settings.field.isPassword == \'Yes\'"><span class=small-label>Password</span> <input type=password placeholder="Please confirm password"> <span class=small-label>Confirm Password</span></div><textarea class=form-control ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Long Text\'"></textarea><textarea class=form-control ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Rich Text\'" ui-tinymce=tinymceOptions style="height: {{settings.settings.field.inputHeight || \'150\'}}px"></textarea><input class=form-control type=number ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Number\'" placeholder={{settings.settings.field.options.placeholder}}><div class=input-group ng-if="settings.fieldType == \'Currency\'"><div class=input-group-addon ng-if="settings.field.options.currencyFormat== \'Prefix\'">{{settings.field.options.currencySymbol}}</div><input class=form-control ng-model=record[settings.fieldSlug] placeholder={{settings.field.options.placeholder}}><div class=input-group-addon ng-if="settings.field.options.currencyFormat == \'Suffix\'">{{settings.field.options.currencySymbol}}</div></div><div class=inline ng-if="settings.fieldType == \'Date\'"><hit-date-time-picker date-time=record[settings.fieldSlug] type=settings.fieldType options=\'{"enableTime":false}\'></hit-date-time-picker></div><div class=inline ng-if="settings.fieldType == \'Time\'"><hit-date-time-picker date-time=record[settings.fieldSlug] type=settings.fieldType options=\'{"enableDate":false}\'></hit-date-time-picker></div><div class=inline ng-if="settings.fieldType == \'Date/Time\'"><hit-date-time-picker date-time=record[settings.fieldSlug] type=settings.fieldType options={}></hit-date-time-picker></div><div class=inline ng-if="settings.fieldType == \'Calendar\'"><hit-field-calendar record=record slug=settings.field.slug range-date=settings.field.options.rangeDate ng-disabled=ctrlDisabled(field)></hit-field-calendar></div><div class=inline ng-if="settings.fieldType == \'Image\'"><xctrl-file-cloudinary3 element=record[settings.fieldSlug] client=getClientName() on-img-select=imgSelect()></xctrl-file-cloudinary3></div><div class=inline ng-if="settings.fieldType == \'File\'"><hit-only-file-upload file-type=file file=record[settings.fieldSlug] ng-disabled=ctrlDisabled(field)></hit-only-file-upload></div><select class=form-control ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Select\'"><option value="">Select any</option><option ng-repeat="option in settings.field.options.options" value={{option.text}} ng-if="settings.field.options.allowDiffVal != \'1\'">{{option.text}}</option><option ng-repeat="option in settings.field.options.options" value={{option.val}} ng-if="settings.field.options.allowDiffVal != \'0\'">{{option.text}}</option></select><select class=form-control ng-model=record[settings.fieldSlug] multiple ng-if="settings.fieldType == \'Multi-Select\'"><option ng-repeat="option in settings.field.options.options" value={{option.text}} ng-if="settings.field.options.allowDiffVal != \'1\'">{{option.text}}</option><option ng-repeat="option in settings.field.options.options" value={{option.val}} ng-if="settings.field.options.allowDiffVal != \'0\'">{{option.text}}</option></select><div ng-if="settings.fieldType == \'Checkbox\'" class=tb-checkbox-outline><ctrl-checkboxes ng-model=record[settings.fieldSlug] field=settings.field></ctrl-checkboxes></div><div ng-if="settings.fieldType == \'Radio\'" class=tb-checkbox-outline><label class="text-center tb-radio" ng-repeat="option in settings.field.options.options" ng-class="{\'radio-icon-btn\': option.iconClass && settings.field.showIcon == \'Yes\', \'selected\': record[settings.fieldSlug]==(settings.field.options.allowDiffVal == \'1\'?option.val:option.text)}"><input type=radio ng-model=record[settings.fieldSlug] name=field{{settings.field.slug}} value={{option.text}} ng-if="settings.field.options.allowDiffVal != \'1\'" ng-disabled=ctrlDisabled(field)> <input type=radio ng-model=record[settings.fieldSlug] name=field{{settings.field.slug}} value={{option.val}} ng-if="settings.field.options.allowDiffVal != \'0\'" ng-disabled=ctrlDisabled(field)> <i class="fal fa-{{option.iconClass}} fa-{{settings.field.iconSize}} font-dark" ng-if="option.iconClass && settings.field.showIcon == \'Yes\'"></i> <span ng-if="settings.field.optionLblPosition!= \'Hide\'">{{option.text}}</span></label></div><div ng-if="settings.fieldType == \'Signature\'"><ctrl-sign record=record field=settings.field disabled></ctrl-sign></div><div class=tb-checkbox-inline ng-if="settings.fieldType == \'Decision Box\' && settings.field.options.inputType == \'Checkbox\'"><label class=tb-checkbox><input type=checkbox ng-model=record[settings.fieldSlug] ng-required=false ng-true-value="\'1\'" ng-false-value="\'0\'"> {{settings.field.options.label}} <span></span></label></div><div ng-if="settings.fieldType == \'Decision Box\' && settings.field.options.inputType == \'Drop-down\'"><select class=form-control ng-model=record[settings.fieldSlug] ng-required=false><option value=0>{{settings.field.options.options[0]}}</option><option value=1>{{settings.field.options.options[1]}}</option></select></div><div class=tb-checkbox-outline ng-if="settings.fieldType == \'Decision Box\' && settings.field.options.inputType == \'Radio Buttons\'"><label class=tb-radio><input type=radio ng-model=record[settings.fieldSlug] ng-required=false value=1> {{settings.field.options.options[0]}} <span></span></label><label class=tb-radio><input type=radio ng-model=record[settings.fieldSlug] ng-required=false value=0> {{settings.field.options.options[1]}} <span></span></label></div><div ng-if="settings.fieldType == \'Join\' && settings.field.options.joinType==\'One-to-One\'"><ctrl-ui-select3 ng-model=record[settings.fieldSlug] params={} field=settings.field></ctrl-ui-select3></div><div ng-if="settings.fieldType == \'Join\' && settings.field.options.joinType==\'One-to-Many\'"><ctrl-ui-select4 ng-model=record[settings.fieldSlug] params={} field=settings.field></ctrl-ui-select4></div><div class=field-name ng-if="settings.fieldType == \'Name\'"><table border=0><tr><td ng-repeat="fieldItem in settings.field.options.formFieldDisplay"><select class="form-control field-name-title" ng-if="fieldItem.key == \'title\'" ng-model=record[settings.fieldSlug].title><option value="">None</option><option value=Ms.>Ms.</option><option value=Miss>Miss</option><option value=Mr.>Mr.</option><option value=Mrs.>Mrs.</option><option value=Dr.>Dr.</option><option value=Prof.>Prof.</option></select><input class="form-control field-first-name" ng-model=record[settings.fieldSlug].first_name ng-if="fieldItem.key == \'first_name\'" placeholder1="Enter First Name"> <input class="form-control field-middle-name" ng-model=record[settings.fieldSlug].middle_name ng-if="fieldItem.key == \'middle_name\'" placeholder1="Enter Middle Name"> <input class="form-control field-last-name" ng-model=record[settings.fieldSlug].last_name ng-if="fieldItem.key == \'last_name\'" placeholder1="Enter Last Name"><label class=field-name-label>{{fieldItem.name}}</label></td></tr></table></div><div class=field-address ng-if="settings.fieldType == \'Address\'"><div class=row><div class=col-md-12 ng-repeat="fieldItem in settings.field.options.formFieldDisplay" ng-class="{\'col-md-6\': fieldItem.key == \'country\' || fieldItem.key == \'zip\'}"><label class=field-address-label ng-if="$index > 0">{{fieldItem.name}}</label><input class="form-control field-{{key}}" ng-model=record[settings.fieldSlug][fieldItem.key] placeholder="Please enter {{fieldItem.key}}" google-auto-complete google-auto-complete-if="{{fieldItem.key == \'address\'}}" is-address-field=true address-field=settings.field address-model=record[settings.fieldSlug] data-sub-field-slug={{fieldItem.key}}></div></div></div><input class=form-control ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Phone\'" placeholder={{settings.field.options.placeholder}} ui-mask={{settings.field.options.phoneFormat}}> <input class=form-control type=email ng-model=record[settings.fieldSlug] ng-if="settings.fieldType == \'Email\'" placeholder={{settings.field.options.placeholder}} ng-disabled=ctrlDisabled(field)><div class=field-link ng-if="settings.fieldType == \'Link\'"><input class="form-control field-link" ng-model=record[settings.fieldSlug].link ng-disabled=ctrlDisabled(field)><label class=field-link-label ng-if="settings.field.options.linkFormat == \'unique\'">Link URL</label><input class="form-control field-link" ng-model=record[settings.fieldSlug].text ng-if="settings.field.options.linkFormat == \'unique\'" ng-disabled=ctrlDisabled(field)><label class=field-link-label ng-if="settings.field.options.linkFormat == \'unique\'">Link Text</label></div><div class=field-link ng-if="settings.fieldType == \'Rating\'"><ng-rate-it ng-model=record[settings.fieldSlug] min=0 max=settings.field.options.numberOfStar step=1 resetable="settings.field.options.allowReset == \'Yes\'"></ng-rate-it></div><div class=field-slider ng-if="settings.fieldType == \'Slider\'"><rzslider rz-slider-model=record[settings.fieldSlug] rz-slider-options=rzSliderOption(field)></rzslider></div></div><button class="btn btn-block btn-success" ng-click=update()><span ng-show=!isSaving><i class="far fa-check"></i> Update</span> <span ng-show=isSaving><i class="far fa-spin fa-spinner"></i> Updating</span></button></div></div></div>'),a.put("assets/app/blocks/delete-record-modal.html",'<div class="model-body-content client-record-form"><form name=frmDataTableBatchDeleteForm><div class=modal-header><button type=button ng-if="isUpdating != 1" class="btn btn-danger btn-circle model-close pull-right" ng-click=closeModal() data-dismiss=modal aria-label=Close><i class="fa fa-times"></i></button><h3 class=modal-title>Delete Records</h3></div><div class="modal-body modal-sub-body"><div class=modal-body-inner><div class=row ng-if="page == 0"><div class=col-md-12><div class="alert alert-info">The data table was not found.</div></div></div><div class=row ng-if="page == 1"><div class="form-group col-md-12"><label class="col-sm-2 control-label">Condition</label><div class=col-sm-10><field-filters-for-app class="d-b m-b" fields=settings.fields type=none ng-repeat="condition in item.conditions" options=condition on-delete=removeCondition($index)></field-filters-for-app><button class="btn btn-primary btn-sm" ng-click=addCondition() ng-hide=item.conditions.length>Add New Condition</button></div></div></div><div class=row ng-if="page == 2"><div class=col-md-12><strong>Confirm Batch</strong><div class=well>This operation will delete <strong>{{totalRecords}}</strong> total records.<br>Want to continue?</div></div></div><div class=row ng-if="page == 3"><div class=col-md-12><strong>Complete</strong><div class=well>This operation has deleted <strong>{{totalFinalRecords}}</strong> total record<span ng-if="totalFinalRecords > 1">s</span>.</div></div></div></div></div><div class=modal-footer><button class="btn btn-danger pull-left" ng-if="loading != 1" type=button ng-click=closeModal()><i class="fa fa-times"></i> Close</button> <button class="btn pull-right" ng-class="{\'btn-success\': page != 2, \'btn-danger\': page == 2}" type=button ng-click=updateAction() ng-disabled=frmDataTableBatchDeleteForm.$invalid ng-if="page == 1 || (page == 2 && totalRecords > 0)"><span ng-show=frmDataTableBatchDeleteForm.$invalid><i class="fa fa-exclamation-triangle"></i> Please enter all required fields</span> <span ng-show=!frmDataTableBatchDeleteForm.$invalid ng-bind-html="btnAction | unsafe"></span></button> <button class="btn pull-right" type=button ng-click=goFirstPage() ng-if="page == 2 && loading != 1"><i class="fa fa-arrow-left"></i> Back</button></div></form></div>'),a.put("assets/app/blocks/filters-modal.html",'<div class="model-body-content client-record-form"><form name=frmDataTableImportForm><div class=modal-header><button type=button class="btn btn-danger btn-circle model-close pull-right" ng-click=closeModal() data-dismiss=modal aria-label=Close><i class="fa fa-times"></i></button><h3 class=modal-title>Add Filters</h3></div><div class="modal-body modal-sub-body"><div class=modal-body-inner><field-filters-for-app class="d-b m-b" options=filter fields=settings.fields ng-repeat="filter in element.filters" on-delete=removeFilterGroup($index) allow-child-filter=false params="{hideChildGroup: true}"></field-filters-for-app><button class="btn btn-primary btn-sm" ng-click=addFilterGroup()>Add Filter Group</button></div></div><div class=modal-footer><button class="btn btn-danger pull-left" type=button ng-click=closeModal()><i class="fa fa-times"></i> Close</button> <button class="btn btn-success pull-right" type=button ng-click=applyFilters()><i class="fa fa-check"></i> Apply</button></div></form></div>'),a.put("assets/app/blocks/imports-modal.html",'<div class="model-body-content client-record-form"><form name=frmDataTableImportForm><div class=modal-header><button type=button class="btn btn-danger btn-circle model-close pull-right" ng-click=closeModal() data-dismiss=modal aria-label=Close ng-if="isImporting != 1"><i class="fa fa-times"></i></button><h3 class=modal-title>Import new records</h3></div><div class="modal-body modal-sub-body"><div class=modal-body-inner><div class="alert alert-danger" ng-if=errMsg>{{errMsg}}</div><div class=row ng-if="item.step == 1"><div class="form-group col-md-8 col-md-offset-2 hit-file-upload-block"><label class=control-label>Select CSV File <span class=required>*</span></label><hit-file-upload2 file-type=csv file=item.file required max-size=1></hit-file-upload2></div><div class="form-group col-md-8 col-md-offset-2" ng-if="settings.importOptions.settings.matching == \'Enable\'"><label class=control-label>Select a field to match records</label><select class=form-control ng-model=item.matchField><option value="">Don\'t match, add all imported.</option><option ng-repeat="field in settings.singleFields track by $index" value={{field.slug}}>{{field.name}}</option></select><div class=help-block>Match a field to a column from your CSV. The import will use this match to search for an existing record to update. A new record will be added if no match exists.</div></div><div class="form-group col-md-8 col-md-offset-2 hit-file-upload-block" ng-if="settings.importOptions.settings.allowDelimiter == \'Yes\'"><label class=control-label>Delimiter <span class=required>*</span></label><div class=clearfix></div><select class="form-control m-b" ng-model=item.delimiter><option value="">, (Comma)</option><option value=:>: (Colon)</option><option value="=">= (Equals Sign)</option><option value=;>; (Semicolon)</option><option value=tab>Tab</option><option value=custom>Custom</option></select><input ng-model=item.delimiter2 class=form-control placeholder="Enter custom delimiter" ng-if="item.delimiter == \'custom\'" maxlength=1></div></div><div class=row ng-if="item.step == 2"><div class=col-md-12><h4>Select your match column</h4>Choose the column that will match the <strong>{{settings.matchField.name}}</strong> field. The import will use this match to find an existing record to update. A new record will be inserted if no match is found.<div class=import-records><table class="table table-striped table-bordered table-hover no-footer data-table"><thead><tr><th ng-repeat="hItem in item.importFileResponse.headers">{{hItem.name}}</th></tr><tr><td ng-repeat="hItem in item.importFileResponse.headers"><label class="mt-checkbox mt-checkbox-outline m-b-sm"><input type=checkbox ng-model=item.matchFieldToField ng-true-value="\'{{hItem.slug}}\'" ng-false-value="\'\'"> Match <span></span></label></td></tr></thead><tbody><tr ng-repeat="dItem in importDataItems"><td ng-repeat="hItem in item.importFileResponse.headers">{{dItem[hItem.slug]}}</td></tr></tbody></table></div></div></div><div class=row ng-if="item.step == 4"><div class=col-md-12 ng-if="errMsg == \'\'"><div class="alert alert-success"><div>Total {{successMsg.successCount}} records imported successfully, and {{successMsg.failureCount}} records failed.</div></div><button type=button ng-click="showLogTable = 1" class="btn btn-sm btn-default">Show Log Table</button><div class=clearfix></div><div class=m-t-xs ng-if="showLogTable == 1" style="max-height: 300px; overflow: auto"><table class="table table-striped table-bordered table-hover table-checkable1 no-footer table-small"><tr><td>Row #</td><td>Type</td><td>Message</td></tr><tr ng-repeat="keyMsg in successMsg.keyMsg"><td>{{$index+1}}</td><td>{{keyMsg.type == \'error\' ? \'Error\' : \'Success\'}}</td><td>{{keyMsg.msg}}</td></tr></table></div></div></div></div></div><div class=modal-footer><button class="btn btn-danger pull-left" ng-if="isImporting != 1" type=button ng-click=closeModal()><i class="fa fa-times"></i> Close</button> <button class="btn pull-right btn-success" type=button ng-click=import() ng-if="item.step < 4"><span ng-bind-html="btnImport | unsafe"></span></button></div></form></div>'),a.put("assets/app/blocks/update-record-modal.html",'<div class="model-body-content client-record-form"><form name=frmDataTableImportForm><div class=modal-header><button type=button ng-if="isUpdating != 1" class="btn btn-danger btn-circle model-close pull-right" ng-click=closeModal() data-dismiss=modal aria-label=Close><i class="fa fa-times"></i></button><h3 class=modal-title>Update Records</h3></div><div class="modal-body modal-sub-body"><div class=modal-body-inner><div class=row ng-if="page == 0"><div class=col-md-12><div class="alert alert-info">The data table was not found.</div></div></div><div class=row ng-if="page == 1"><div class="form-group col-md-12" ng-if="item.onlyIds.length > 0"><label class="col-sm-2 control-label"></label><div class=col-sm-10><strong>{{item.onlyIds.length}}</strong> Items</div></div><div class="form-group col-md-12" ng-if="item.onlyIds.length == 0"><label class="col-sm-2 control-label">Condition</label><div class=col-sm-10><field-filters-for-app class="d-b m-b" fields=settings.fields type=none ng-repeat="condition in item.conditions" options=condition on-delete=removeCondition($index)></field-filters-for-app><button class="btn btn-primary btn-sm" ng-click=addCondition() ng-hide=item.conditions.length>Add New Condition</button></div></div><div class="form-group col-md-12"><label class="col-sm-2 control-label">Values</label><div class="col-sm-10 form-inline"><div ng-repeat="(valIndex, val) in item.values" class=m-b-sm><div class="d-i-b v-top"><select class="form-control input-medium input-sm m-r-sm" ng-model=val.fieldId ng-change="readyControl(val, valIndex)"><option value="">Select Field</option><option ng-repeat="field in settings.fields" ng-if=validField(field) value={{field.id}}>{{field.name}}</option></select></div><div class="d-i-b v-top"><input class="form-control input-sm" ng-model=val.value ng-if="enableInputCtrl(\'text\', val)"><select class="form-control input-medium input-sm" ng-if="enableInputCtrl(\'select\', val)" ng-model=val.value><option ng-repeat="opt in selectOptions[valIndex]" value={{opt.val}}>{{opt.text}}</option></select><select class="form-control input-medium input-sm" multiple ng-if="enableInputCtrl(\'Multi-Select\', val)" ng-model=val.value><option ng-repeat="opt in selectOptions[valIndex]" value={{opt.val}}>{{opt.text}}</option></select><div class=inline ng-if="enableInputCtrl(\'Date\', val)"><hit-date-time-picker date-time=val.value type="\'Date\'" options=\'{"enableTime":false}\' ng-if1="enableInputCtrl(\'Date\', val)"></hit-date-time-picker></div><div class=inline ng-if="enableInputCtrl(\'Time\', val)"><hit-date-time-picker date-time=val.value type="\'Time\'" options=\'{"enableDate":false}\' ng-if="enableInputCtrl(\'Time\', val)"></hit-date-time-picker></div><div class=inline ng-if="enableInputCtrl(\'Date/Time\', val)"><hit-date-time-picker date-time=val.value type="\'Date/Time\'" options={} ng-if="enableInputCtrl(\'Date/Time\', val)"></hit-date-time-picker></div><div ng-if="enableInputCtrl(\'Checkbox\', val)" class=mt-checkbox-outline><label class=mt-checkbox ng-repeat="(index, option) in selectOptions[valIndex]"><input type=checkbox ng-model=val.value[index] ng-required=false ng-true-value="\'{{option.val}}\'" ng-false-value="\'\'"> {{option.text}} <span></span></label></div><div ng-if="enableInputCtrl(\'Radio\', val)" class=mt-radio-outline><label class=mt-radio ng-repeat="(index, option) in selectOptions[valIndex]"><input type=radio name=field{{valIndex}} ng-model=val.value ng-required=false value={{option.val}}> {{option.text}} <span></span></label></div><div ng-if="enableInputCtrl(\'Name\', val)"><table border=0><tr><td ng-repeat="fieldItem in settings.fields[val.fieldId].formFieldDisplay"><select class="form-control field-name-title input-small" ng-if="fieldItem.key == \'title\'" ng-model=val.value.title><option value="">None</option><option value=Ms.>Ms.</option><option value=Miss>Miss</option><option value=Mr.>Mr.</option><option value=Mrs.>Mrs.</option><option value=Dr.>Dr.</option><option value=Prof.>Prof.</option></select><input class="form-control field-first-name input-small" ng-model=val.value.first_name ng-if="fieldItem.key == \'first_name\'" placeholder1="Enter First Name"> <input class="form-control field-middle-name input-small" ng-model=val.value.middle_name ng-if="fieldItem.key == \'middle_name\'" placeholder1="Enter Middle Name"> <input class="form-control field-last-name input-small" ng-model=val.value.last_name ng-if="fieldItem.key == \'last_name\'" placeholder1="Enter Last Name"><label class="field-name-label d-b">{{fieldItem.name}}</label></td></tr></table></div><div ng-if="enableInputCtrl(\'Address\', val)" class=d-i-b><div class=d-b ng-repeat="fieldItem in settings.fields[val.fieldId].formFieldDisplay" ng-class="{\'clearfix\': fieldItem.key == \'country\' || fieldItem.key == \'zip\'}"><input class="form-control input-sm input-small field-{{key}}" ng-model=val.value[fieldItem.key] placeholder="Please enter {{fieldItem.key}}"><label class="field-address-label d-b">{{fieldItem.name}}</label></div></div><div class=field-link ng-if="enableInputCtrl(\'Link\', val)"><div><input class="form-control field-link input-sm input-small" ng-model=val.value.link><label class="field-link-label d-b" ng-if="settings.fields[val.fieldId].linkFormat == \'unique\'">Link URL</label></div><div><input class="form-control field-link input-sm input-small" ng-model=val.value.text ng-if="settings.fields[val.fieldId].linkFormat == \'unique\'"><label class="field-link-label d-b" ng-if="settings.fields[val.fieldId].linkFormat == \'unique\'">Link Text</label></div></div></div><div class="d-i-b v-top"><button type=button class="btn btn-sm btn-default m-r-sm m-l-sm" ng-click=addValue()><i class="fa fa-plus"></i></button> <button type=button class="btn btn-sm btn-default" ng-click=removeValue($index)><i class="far fa-trash"></i></button></div></div></div></div></div><div class=row ng-if="page == 2"><div class=col-md-12><strong>Confirm Batch</strong><div class=well>This operation will update <strong>{{totalRecords}}</strong> total records.<br>Want to continue?</div></div></div><div class=row ng-if="page == 3"><div class=col-md-12><strong>Complete</strong><div class=well>This operation has updated <strong>{{totalFinalRecords}}</strong> total record<span ng-if="totalFinalRecords > 1">s</span>.</div></div></div></div></div><div class=modal-footer><button class="btn btn-danger pull-left" ng-if="loading != 1" type=button ng-click=closeModal()><i class="fa fa-times"></i> Close</button> <button class="btn pull-right" ng-class="{\'btn-success\': !frmDataTableImportForm.$invalid, \'btn-danger\': frmDataTableImportForm.$invalid}" type=button ng-click=updateAction() ng-disabled=frmDataTableImportForm.$invalid ng-if="page == 1 || (page == 2 && totalRecords > 0)"><span ng-show=frmDataTableImportForm.$invalid><i class="fa fa-exclamation-triangle"></i> Please enter all required fields</span> <span ng-show=!frmDataTableImportForm.$invalid ng-bind-html="btnAction | unsafe"></span></button> <button class="btn pull-right" type=button ng-click=goFirstPage() ng-if="page == 2 && loading != 1"><i class="fa fa-arrow-left"></i> Back</button></div></form></div>')}]);var checkFieldConditionOnly=function(a,b,c){isTrue=0;var d,e,f=!1;f=checkNested(a,"fieldId")&&checkNested(b,a.fieldId);var g=!1;f&&(g=b[a.fieldId]);var h=!1,i="";switch(checkNested(a,"valType")&&"Field"==a.valType?checkNested(a,"valFieldSlug")&&checkNested(b,a.valFieldSlug)&&(h=!0,i=b[a.valFieldSlug]):checkNested(a,"val")&&(h=!0,i=a.val),checkNested(b,a.fieldId)&&angular.isString(b[a.fieldId])&&(b[a.fieldId]+=""),angular.isString(i)&&(i+=""),a.operator){case"file type is":if(f&&_tb.is("fileObj",b[a.fieldId])){var j=angular.isDefined(b[a.fieldId].name)?b[a.fieldId].name:"",k=j.split(".")[j.split(".").length-1].toLowerCase(),l=a.val.toLowerCase().split(",");jQuery.inArray(k,l)>-1&&isTrue++}break;case"file type is not":if(f&&_tb.is("fileObj",b[a.fieldId])){var j=angular.isDefined(b[a.fieldId].name)?b[a.fieldId].name:"",k=j.split(".")[j.split(".").length-1].toLowerCase(),l=a.val.toLowerCase().split(",");jQuery.inArray(k,l)==-1&&isTrue++}break;case"size is less than":if(f&&_tb.is("fileObj",b[a.fieldId])){var m=angular.isDefined(b[a.fieldId].size)?b[a.fieldId].size:0,n=parseInt(a.val);if(checkNested(a,"val2"))switch(a.val2){case"kb":n=1024*n;break;case"mb":n=1024*n*1024}m<=n&&isTrue++}break;case"size is greater than":if(f&&_tb.is("fileObj",b[a.fieldId])){var m=angular.isDefined(b[a.fieldId].size)?b[a.fieldId].size:0,n=parseInt(a.val);if(checkNested(a,"val2"))switch(a.val2){case"kb":n=1024*n;break;case"mb":n=1024*n*1024}m>=n&&isTrue++}break;case"contains":f&&!_tb.is("null",i)&&(angular.isString(i)?b[a.fieldId].toLowerCase().indexOf(i.toLowerCase())>-1&&isTrue++:angular.isObject(i)&&_tb.is("contains",i.toLowerCase(),b[a.fieldId])&&isTrue++);break;case"does not contain":f&&!_tb.is("null",i)?angular.isString(b[a.fieldId])?b[a.fieldId].toLowerCase().indexOf(i.toLowerCase())==-1&&isTrue++:angular.isObject(b[a.fieldId])&&!_tb.is("contains",i.toLowerCase(),b[a.fieldId])&&isTrue++:isTrue++;break;case"is":"Date"==c?f&&!_tb.is("null",i)&&moment(i).isSame(b[a.fieldId],"day")&&isTrue++:"Join1"==c?f&&!_tb.is("null",i):!f||_tb.is("null",i)||_tb.is("null",b[a.fieldId])||(angular.isString(b[a.fieldId])?b[a.fieldId].toLowerCase()==i.toString().toLowerCase()&&isTrue++:angular.isObject(b[a.fieldId])&&("Join"==c&&(g=Object.keys(g)),_tb.is("contains",i.toString().toLowerCase(),g)&&isTrue++));break;case"is not":"Date"==c?(!f||!moment(i).isSame(b[a.fieldId],"day"))&&isTrue++:f&&_tb.is("null",i)&&_tb.is("null",b[a.fieldId])?angular.isString(b[a.fieldId])?b[a.fieldId].toLowerCase()!=i.toLowerCase()&&isTrue++:angular.isObject(b[a.fieldId])&&("Join"==c&&(g=Object.keys(g)),!_tb.is("contains",i.toLowerCase(),b[a.fieldId])&&isTrue++):isTrue++;break;case"starts with":f&&!_tb.is("null",i)&&new RegExp("^"+i.toLowerCase()).test(b[a.fieldId].toLowerCase())&&isTrue++;break;case"ends with":f&&!_tb.is("null",i)&&new RegExp(i.toLowerCase()+"$").test(b[a.fieldId].toLowerCase())&&isTrue++;break;case"is blank":(!f||/^\s*$/.test(b[a.fieldId])||null==b[a.fieldId])&&isTrue++;break;case"is not blank":f&&!/^\s*$/.test(b[a.fieldId])&&null!=b[a.fieldId]&&isTrue++;break;case"higher than":f&&!_tb.is("null",i)&&b[a.fieldId]>parseInt(i)&&isTrue++;break;case"lower than":f&&!_tb.is("null",i)&&b[a.fieldId]<parseInt(i)&&isTrue++;break;case"is during the current":switch(d=checkNested(a,"val2")?a.val2:"week"){case"month":f&&moment(b[a.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":f&&moment().format("YY-Q")==moment(b[a.fieldId]).format("YY-Q")&&isTrue++;break;case"year":f&&moment(b[a.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:f&&moment().week()==moment(b[a.fieldId]).week()&&isTrue++}break;case"is during the previous":d=checkNested(a,"val3")?a.val3:"days",e=parseInt(checkNested(a,"val2")?a.val2:0),f&&moment(b[a.fieldId]).isBetween(moment().subtract(e,d).startOf(d),moment().endOf(d),null,"[]")&&isTrue++;break;case"is during the next":d=checkNested(a,"val3")?a.val3:"days",e=parseInt(checkNested(a,"val2")?a.val2:0),f&&moment(b[a.fieldId]).isBetween(moment().startOf(d),moment().add(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the previous":d=checkNested(a,"val3")?a.val3:"days",e=parseInt(checkNested(a,"val2")?a.val2:0),f&&moment(b[a.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the next":d=checkNested(a,"val3")?a.val3:"days",e=parseInt(checkNested(a,"val2")?a.val2:0),f&&moment(b[a.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before":f&&checkNested(a,"val")&&moment(b[a.fieldId]).isBefore(moment(i).startOf("day"))&&isTrue++;break;case"is after":f&&checkNested(a,"val")&&moment(b[a.fieldId]).isAfter(moment(i).endOf("day"))&&isTrue++;break;case"is today":f&&moment(b[a.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":f&&moment(b[a.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":f&&moment(b[a.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":f&&moment(b[a.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":f&&moment(b[a.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue};angular.module("app").directive("afMenuItem",["AppSetting","$state","$stateParams","$rootScope","Http","$uibModal",function(a,b,c,d,e,f){return{link:function(g,h,i){g.uId=checkNested(i,"uId")?i.uId:"";var j=JSON.parse(checkNested(i,"options")?i.options:"{}");checkNested(j,"redirectRules")||(j.redirectRules=[]),g.user={},g.loggedIn=d.App.get("isAppUserLogin"),g.type=checkNested(i,"type")?i.type:"",g.sp=checkNested(i,"sp")?i.sp:"",g.loggedIn&&(g.user=d.App.get("appUserLogin"));var k=function(){g.sp=checkNested(i,"sp")?i.sp:"",g.type=checkNested(i,"type")?i.type:"","Special Link"==g.type&&(angular.element(h).parent().addClass("hide"),g.loggedIn?"Profile"!=g.sp&&"Logout"!=g.sp||angular.element(h).parent().removeClass("hide"):"Sign Up"!=g.sp&&"Login"!=g.sp&&""!=g.sp||angular.element(h).parent().removeClass("hide"))};k(),"Special Link"==g.type&&g.$watch("$root.loggedInUser",function(){g.loggedIn=d.loggedInUser,k()}),g.goLogin=function(){d.App.goTo("login")},g.goSignUp=function(){d.App.goTo("signup")},g.goProfile=function(){d.App.goTo("profile")},g.query={},checkNested(j,"k")&&(g.query.k=j.k),g.userRoles=[],g.refresh=function(){checkNested(j,"redirectRules")&&angular.isArray(j.redirectRules)&&j.redirectRules.length>0&&""!=g.uId&&e.post("g."+g.uId,g.query,function(a){"error"==a.type?g.status="error":(g.status="done",checkNested(a,"loggedInItem","role")&&a.loggedInItem.role&&(g.userRoles=a.loggedInItem.role))})},g.refresh();var l=function(){e.post("auth.logout",{},function(){},function(){},!0),d.App.set("appUserLogin",!1);var a=!1;g.loggedIn&&angular.isArray(j.redirectRules)&&angular.isObject(g.userRoles)&&angular.forEach(j.redirectRules,function(b){angular.forEach(g.userRoles,function(c,e){b.role==e&&(a=!0,d.App.goToPageById(b.pageId,!0))})}),a?(d.App.runHeartbeat({login:0}),d.App.doHeartBeat()):window.location.reload();
},m=function(){if(checkNested(i,"type")){var e="",f={};switch(i.type){case"Special Link":var g=checkNested(i,"sp")?i.sp:"";switch(g){case"Sign Up":e=d.App.goPageRoute("signup");break;case"Profile":e=d.App.goPageRoute("profile");break;case"Logout":break;default:e=d.App.goPageRoute("login")}break;case"Page":checkNested(i,"pageId")&&""!=i.pageId&&angular.forEach(a.Pages,function(a){if(a.id==i.pageId){var b="app."+a.slug;if(1==a.metas.restrictLogin,0!=a.parent){if(angular.isUndefined(i.itemId)){var d="";angular.forEach(c,function(a,b){d=a}),f[a.param]=d}else f[a.param]=i.itemId;f=angular.extend({},f,c),e=b}else e=b}});break;case"Link":case"Image":checkNested(i,"link")&&""!=i.link&&(angular.element(h).attr("href",i.link),checkNested(i,"newWindow")&&"Yes"==i.newWindow&&angular.element(h).attr("target","_blank"))}""!=e&&angular.element(h).attr("href",b.href(e,f))}};m();var n=function(){if(checkNested(i,"pageId")&&""!=i.pageId){var a=(checkNested(i,"popupItem")?i.popupItem:{},d.App.get("pageURI",i.pageId)+"?refresh="+getRandomInt(9999,9999999));d.App.get("isAppUserLogin")&&(a+="&api_token="+d.App.get("appUserToken")),checkNested(i,"popupRid")&&""!=i.popupRid&&(a+="&rid="+i.popupRid);var b=checkNested(i,"popupTitle")?i.popupTitle:"";d.App.setStat("openModal",!0),f.open({backdrop:"static",keyboard:!1,size:"lg",controller:["$scope","$uibModalInstance","MsgBox","App",function(a,b,c,d){a.closeModal=function(a){angular.isDefined(a)&&a?b.close(a):b.dismiss("cancel")}}],template:'<div class="model-body-content"><div class="modal-header" ng-if="options.title != \'\'"><button type="button" class="btn btn-danger btn-circle model-close pull-right" ng-click="closeModal()" data-dismiss="modal" aria-label="Close"><i class="far fa-times"></i></button><h3 class="modal-title">'+b+'</h3></div><div class="modal-body modal-sub-body"><div ng-include="\''+a+'\'"><i class="fa fa-spin fa-spinner"></i> Loading....</div></div><div class="modal-footer"><button class="btn btn-danger pull-left" type="button" ng-click="closeModal()"><i class="far fa-times"></i> Close</button></div></div>'}).result.then(function(a){},function(){})}};h.bind("click",function(e){var f=!0;if(checkNested(i,"stopClick")&&"1"==i.stopClick)return e.preventDefault(),void(checkNested(i,"openInPopup")&&"1"==i.openInPopup&&n());if(checkNested(i,"type"))switch(i.type){case"Special Link":var g=checkNested(i,"sp")?i.sp:"";switch(g){case"Sign Up":d.App.goTo("signup");break;case"Profile":d.App.goTo("profile");break;case"Logout":l();break;default:d.App.goTo("login")}break;case"Page":checkNested(i,"pageId")&&""!=i.pageId&&angular.forEach(a.Pages,function(a){if(a.id==i.pageId){var d="app."+a.slug;if(1==a.metas.restrictLogin,0!=a.parent){var e={};if(angular.isUndefined(i.itemId)){var f="";angular.forEach(c,function(a,b){f=a}),e[a.param]=f}else e[a.param]=i.itemId;checkNested(i,"newWindow")&&"Yes"==i.newWindow?window.open(b.href(d,angular.extend({},e,c)),"_blank"):b.go(d,angular.extend({},e,c))}else checkNested(i,"newWindow")&&"Yes"==i.newWindow?window.open(b.href(d),"_blank"):b.go(d)}});break;case"Link":case"Image":f=!1}f&&e.preventDefault()})}}}]),angular.module("app").directive("afPageRedirect",["AppSetting","$state","$stateParams","$rootScope","Http","$uibModal",function(a,b,c,d,e,f){return{link:function(d,e,f){var g=JSON.parse(checkNested(f.params)?f.params:"{}"),h=function(){if(checkNested(g,"type"))switch(g.type){case"page":if(checkNested(g,"id")&&""!=g.id){var d="";angular.forEach(a.Pages,function(a){if(a.id==g.id)if(d="app."+a.slug,0!=a.parent){if(angular.isUndefined(f.itemId)){var b="";angular.forEach(c,function(a,c){b=a}),param[a.param]=b}else param[a.param]=f.itemId;param=angular.extend({},param,c),route=d}else route=d}),b.go(d)}break;case"external_url":checkNested(g,"link")&&""!=g.link&&(location.href=g.link)}};h()}}}]),angular.module("app").directive("afSignupForm",["$rootScope","AppSetting","$state","Http",function(a,b,c,d){return{template:'<div class="form-horizontal form-signup"><div ng-if="!allowRegistration" class="alert alert-danger">The user registration not allow.</div><form name="frmAppBaseSignUpForm" ng-if="allowRegistration"><div class="alert" ng-class="{\'alert-success\': success, \'alert-danger\': !success}" ng-show="error" ng-bind-html="error | unsafe"></div><div class="form-group" ng-class="{\'has-error\': frmAppBaseSignUpForm.name.$invalid && frmAppBaseSignUpForm.name.$touched}"><label class="col-sm-4 control-label">Name <span class="required">*</span></label><div class="col-sm-8"><input type="text" name="name" ng-model="item.name" class="form-control" placeholder="Enter your name" required1 /></div></div><div class="form-group" ng-class="{\'has-error\': frmAppBaseSignUpForm.email.$invalid && frmAppBaseSignUpForm.email.$touched}"><label class="col-sm-4 control-label">Email <span class="required">*</span></label><div class="col-sm-8"><input type="email" name="email" ng-model="item.email" class="form-control" placeholder="Enter your email" required1 autocomplete="email"/></div></div><div class="form-group" ng-class="{\'has-error\': frmAppBaseSignUpForm.password.$invalid && frmAppBaseSignUpForm.password.$touched}"><label class="col-sm-4 control-label">Password <span class="required">*</span></label><div class="col-sm-8"><input type="password" name="password" ng-model="item.password" class="form-control" placeholder="Password" required1/></div></div><div class="form-group" ng-class="{\'has-error\': frmAppBaseSignUpForm.conPass.$invalid && frmAppBaseSignUpForm.conPass.$touched}"><label class="col-sm-4 control-label">Confirm Password <span class="required">*</span></label><div class="col-sm-8"><input type="password" name="conPass" ng-model="item.conPass" class="form-control" placeholder="Confirm password" required1/></div></div><div class="form-group" ng-if="options.roleCtrl == \'2\' && roles.length > 0"><label class="col-sm-4 control-label">Roles</label><div class="col-sm-8"><div class="dropdown" ng-if="options.roleCtrlType == \'Select\'"><select class="form-control" ng-model="item.roles[0]"><option ng-repeat="role in roles" value="{{role.id}}">{{role.name}}</option></select></div><div class="multi-dropdown" ng-if="options.roleCtrlType == \'Multi-Select\'"><select class="form-control" ng-model="item.roles" multiple><option ng-repeat="role in roles" value="{{role.id}}">{{role.name}}</option></select></div><div class="radios mt-checkbox-outline" ng-if="options.roleCtrlType == \'Radio\'"><label class="mt-radio" ng-repeat="role in roles"><input type="radio" ng-model="item.roles[0]" value="{{role.id}}"> {{role.name}}<span></span></label></div><div class="checkboxs mt-checkbox-outline" ng-if="options.roleCtrlType == \'Checkbox\'"><label class="mt-checkbox" ng-repeat="role in roles"><input type="checkbox" ng-model="item.roles" value="{{role.id}}"> {{role.name}}<span></span></label></div></div></div><div class="form-group"><div class="col-sm-offset-4 col-sm-8"><button type="button" ng-click="signUp($event)" class="btn btn-primary" ng-disabled="signUpStatus">Sign up</button></div></div></form></div>',link:function(b,c,e){b.allowRegistration=a.App.get("isAllowRegistration");var f=JSON.parse(checkNested(e.options)?e.options:"{}");b.item={name:"",email:"",password:"",conPass:"",roles:[]},b.options=f,b.roles=a.App.get("roles"),b.conPass="",b.signUpStatus=0,b.success=0,b.error="",b.signUp=function(){var c=[];""==b.item.name&&c.push("Name"),""==b.item.email&&c.push("Email"),""==b.item.password&&c.push("Password"),""==b.item.conPass&&c.push("Confirm Password"),c.length>0&&(c[0]="Required fields: "+c.join(", "),c.length=1),c.length<1&&(isEmail(b.item.email)||c.push("Please enter valid email"),b.item.password!=b.item.conPass&&c.push("Password not match!")),c.length?b.error=c.join("<br/>"):(b.error="",b.success=0,b.signUpStatus=1,checkNested(f,"objId")&&(b.item.objId=f.objId),checkNested(f,"pageId")&&(b.item.pageId=f.pageId),d.post("signup",b.item,function(c){b.signUpStatus=0,"success"==c.type&&(b.success=1,b.item={name:"",email:"",password:""},b.conPassword="",checkNested(f,"redirectPageId")&&a.App.goToPageById(f.redirectPageId)),b.error=angular.isArray(c.msg)?c.msg.join("<br/>"):c.msg},function(a,c){b.signUpStatus=0,b.error="Please try after some time."}))}}}}]),angular.module("app").directive("afProfileForm",["$rootScope","AppSetting","$state","Http",function(a,b,c,d){return{template:'<div class="form-horizontal form-profile"><form name="frmAppBaseProfileForm"><div class="alert" ng-class="{\'alert-success\': success, \'alert-danger\': !success}" ng-show="error" ng-bind-html="error | unsafe"></div><div class="form-group" ng-class="{\'has-error\': frmAppBaseProfileForm.name.$invalid && frmAppBaseProfileForm.name.$touched}"><label class="col-sm-4 control-label">Name <span class="required">*</span></label><div class="col-sm-8"><input type="text" name="name" ng-model="item.name" class="form-control" placeholder="Enter your name" required /></div></div><div class="form-group" ng-class="{\'has-error\': frmAppBaseProfileForm.email.$invalid && frmAppBaseProfileForm.email.$touched}"><label class="col-sm-4 control-label">Email <span class="required">*</span></label><div class="col-sm-8"><input type="email" name="email" ng-model="item.email" class="form-control" placeholder="Enter your email" required /></div></div><div class="form-group"><div class="col-sm-offset-4 col-sm-8"><button type="button" ng-click="save($event)" class="btn btn-primary" ng-disabled="saveStatus">Save</button></div></div></form></div>',link:function(b,c,e){var f=a.App.get("authUser");f&&(b.item=angular.copy(f)),b.saveStatus=0,b.success=0,b.error="",b.save=function(){var c=[];""==b.item.name&&c.push("Name"),""==b.item.email&&c.push("Email"),c.length>0&&(c[0]="Required fields: "+c.join(", "),c.length=1),c.length<1&&b.frmAppBaseProfileForm.email.$error.email&&c.push("Please enter valid email"),c.length?b.error=c.join("<br/>"):(b.error="",b.success=0,b.saveStatus=1,d.post("profile",b.item,function(c){b.saveStatus=0,"success"==c.type&&(b.success=1,a.App.set("authUserFields",{name:b.item.name,email:b.item.email})),b.error=angular.isArray(c.msg)?c.msg.join("<br>"):c.msg},function(a,c){b.saveStatus=0,b.error="Please try after some time."},!0))}}}}]),angular.module("app").directive("afUserMenu",["$state","Http","$localStorage","$rootScope",function(a,b,c,d){return{template:'<div class="not-login pull-right" ng-show="!loggedIn"><a href="javascript:void(0)" ng-click="goLogin()" class="x-login-btn">Login</a><a href="javascript:void(0)" ng-click="goSignUp()" ng-if="allowRegistration" class="x-signup-btn">Sign Up</a></div><div class="logged-in pull-right" ng-show="loggedIn"><a href="javascript:void(0)" class="x-login-btn" ng-click="goProfile()" >{{user.name}}</a><a href="javascript:void(0)" class="x-signup-btn" ng-click="logout()">Logout</a></div><div class="clearfix"></div>',scope:{},link:function(a,c,e){a.uId=checkNested(e,"uId")?e.uId:"",a.user={},a.allowRegistration=!checkNested(e,"allowRegistration")||"no"!=e.allowRegistration,a.options=JSON.parse(checkNested(e.options)?e.options:"{}"),checkNested(a.options,"redirectRules")||(a.options.redirectRules=[]),a.loggedIn=d.App.get("isAppUserLogin"),a.loggedIn&&(a.user=d.App.get("appUserLogin")),a.userRoles=[],a.refresh=function(){checkNested(a.options,"redirectRules")&&angular.isArray(a.options.redirectRules)&&a.options.redirectRules.length>0&&b.post("g."+a.uId,a.query,function(b){"error"==b.type?a.status="error":(a.status="done",checkNested(b,"loggedInItem","role")&&b.loggedInItem.role&&(a.userRoles=b.loggedInItem.role))})},a.refresh(),a.goLogin=function(){d.App.goTo("login")},a.goSignUp=function(){d.App.goTo("signup")},a.goProfile=function(){d.App.goTo("profile")},a.logout=function(){b.post("auth.logout",{},function(){},function(){},!0),d.App.set("appUserLogin",!1);var c=!1;angular.isArray(a.options.redirectRules)&&angular.isObject(a.userRoles)&&angular.forEach(a.options.redirectRules,function(b){angular.forEach(a.userRoles,function(a,e){b.role==e&&(c=!0,d.App.goToPageById(b.pageId,!0))})}),c||window.location.reload()},a.$watch("$root.loggedInUser",function(){a.loggedIn=d.loggedInUser})}}}]),angular.module("app").controller("AppLoginCtrl",["$scope","$state","Config","Http","$localStorage","$location","$window","$rootScope","$element","GeoLocation","MsgBox",function(a,b,c,d,e,f,g,h,i,j,k){function l(){m=angular.element(i).attr("data-labels"),"{{options.labels}}"==m?(m="",setTimeout(function(){l()},100)):(angular.isDefined(m)&&""!=m&&(m=JSON.parse(m?m:"{}")),a.error=checkNested(m,"default")?m["default"]:"Please sign in to continue.",a.isAlreadyLoginMsg=checkNested(m,"alreadyLogin")?m.alreadyLogin:"You're already logged in.",a.uniqueId=angular.element(i).attr("data-unique-id"),a.sureApply())}a.formMode="login",a.item={username:"",password:"",email:""},a.successMsg="",a.error="",a.uniqueId="",a.isAlreadyLoginMsg="";var m;a.sureApply=function(){a.$$phase?setTimeout(function(){a.sureApply()},50):a.$apply()},l(),a.loginStatus=0,a.isAlreadyLogin=h.App.get("isAppUserLogin"),a.$watch("$root.loggedInUser",function(){a.isAlreadyLogin=h.loggedInUser}),a.setFormMode=function(b){a.loginStatus=0,a.error="",a.formMode=b},a.logout=function(){d.post("auth.logout",{},function(){},function(){},!0),h.App.set("appUserLogin",!1),window.location.reload()},a.checkingGeo=!1,a.disableGeo=!1,a.disableGeoCode=!1,a.coords=!1,a.getGeoCoords=function(b){return angular.isUndefined(b)&&(b=!1),!(a.disableGeo&&!b)&&(!(a.coords!==!1&&!b)&&(!(!a.checkingGeo||b)||!!h.App.is("enableGeoTracking")&&(a.checkingGeo=!0,j.getCurrentPosition().then(function(b){a.checkingGeo=!1,angular.isDefined(b)&&angular.isDefined(b.coords)&&angular.isDefined(b.coords.latitude)&&angular.isDefined(b.coords.longitude)&&(a.coords={},a.coords.lng=b.coords.longitude,a.coords.lat=b.coords.latitude)},function(b){a.checkingGeo=!1,a.disableGeo=!0,a.disableGeoCode=b}),!0)))},a.getGeoCoords(),a.signIn=function(b,c){var e=b.target;if(angular.element(e).is("form")&&(e=angular("button.btn-signin",angular.element(e))),h.App.is("requireGeoTracking")&&a.disableGeo)return k.show(h.App.is("requireGeoTrackingMsg"),"error"),void a.getGeoCoords(!0);var c=angular.element(b.target).attr("data-redirect-rules"),i=angular.element(b.target).attr("data-unique-id");if(a.item.uniqueId="",angular.isDefined(i)&&(a.item.uniqueId=i),c=JSON.parse(c?c:"[]"),""!=a.item.username&&""!=a.item.password){a.loginStatus=1;var j={username:a.item.username,password:a.item.password,uniqueId:a.item.uniqueId};a.coords!==!1&&(j.coords=a.coords),j.screen={},j.screen.width=g.innerWidth,j.screen.height=g.innerHeight,j.screen.url=window.location.href,d.post("auth",j,function(d){if(a.loginStatus=0,"success"==d.type){a.error="",h.App.set("appUserLogin",d.token,d.user);var e=!1;angular.isArray(c)&&angular.isArray(d.userRoles)&&angular.forEach(c,function(a){angular.forEach(d.userRoles,function(b){a.role==b.id&&(e=!0,h.App.goToPageById(a.pageId,!0))})}),e?(console.log(),(checkNested(d,"token")||checkNested(d,"user"))&&h.App.set("appUserLogin",d.token,d.user)):(angular.element(b.target).attr("data-go")&&f.url(angular.element(b.target).attr("data-go")),window.location.reload())}else a.error=d.msg,checkNested(d,"eventType")&&checkNested(m,d.eventType)&&""!=m[d.eventType]&&(a.error=m[d.eventType])},function(b,c){a.loginStatus=0,a.error="Please try after some time."})}else a.error="Please fill require field"},a.btnSendVerificationCode='<i class="fal fa-shield-check"></i> Send Verification Code',a.forgotPass=function(){'<i class="far fa-spin fa-spinner"></i> Sending...'!=a.btnSendVerificationCode&&'<i class="far fa-spin fa-spinner"></i> Saving...'!=a.btnResetPass&&(a.successMsg="",a.error="",""!=a.item.email&&(a.btnSendVerificationCode='<i class="far fa-spin fa-spinner"></i> Sending...',d.post("send-verification-code",{email:a.item.email,uniqueId:a.uniqueId},function(b){a.btnSendVerificationCode='<i class="fal fa-shield-check"></i> Send Verification Code',"success"==b.type?(a.successMsg=b.msg,a.setFormMode("resetPass")):a.error=b.msg},function(b,c){a.error="Please try after some time."})))},a.btnResetPass='<i class="fal fa-redo-alt"></i> Reset Password',a.resetPass=function(){'<i class="far fa-spin fa-spinner"></i> Saving...'!=a.btnResetPass&&(a.successMsg="",a.error="",""!=a.item.code&&""!=a.item.newPass&&""!=a.item.conPass&&(a.item.newPass!=a.item.conPass!=""?a.error="Passwords are different. Please confirm the password.":(a.btnResetPass='<i class="far fa-spin fa-spinner"></i> Saving...',d.post("reset-password",{email:a.item.email,code:a.item.code,pass:a.item.newPass},function(b){a.btnResetPass='<i class="fal fa-redo-alt"></i> Reset Password',"success"==b.type?(a.successMsg=b.msg,a.setFormMode("login")):a.error=b.msg},function(b,c){a.error="Please try after some time."}))))}}]),jQuery(document).ready(function(){jQuery(document).on("shown.bs.dropdown",".dropdown",function(){var a=(jQuery(e.target),jQuery(this).children(".dropdown-menu")),b=jQuery(this).children(".dropdown-toggle"),c=a.offset(),d=c.top-b.height()-a.height()-jQuery(window).scrollTop(),f=jQuery(window).scrollTop()+jQuery(window).height()-(c.top+a.height());f<0&&(d>=0||d>f)&&jQuery(this).addClass("dropup");var g=jQuery(".dropdown-submenu > .dropdown-menu",this),h=jQuery(window);jQuery.each(g,function(){var a=jQuery(this),b=jQuery(a.parents(".dropdown-submenu")[0]),c=b.offset(),d=a.width(),e={left:b.width()+c.left+2,top:c.top},f=e.left+d<h.width(),g=!0;if(!f){var i=e.left-b.width()-d>-1;i&&a.addClass("leftside")}g=h.scrollTop()+h.height()-(e.top+a.height())-10>=0,g||a.addClass("dropup")})}).on("hidden.bs.dropdown",".dropdown",function(){jQuery(this).removeClass("dropup"),jQuery(".dropdown-submenu > .dropdown-menu",this).removeClass("leftside dropup")})}),angular.module("app").directive("afFieldValue",function(){return{restrict:"AE",template:"{{html}}",link:function(a,b,c){var d=c.field,e=c.record;switch(a.html="",c.field.type){case"Address":var f=[];$joinFields=array("_street1","_street2","_city","_state","_country","_zip");for(var g in $joinFields){var h=$joinFields[g];checkNested(e,d.fieldId+h)&&f.push(e[d.fieldId+h])}a.html=f.length?f.join(" ")+".":"-";break;case"Name":var f=[];$joinFields=array("_first_name","_middle_name","_last_name");for(var g in $joinFields){var h=$joinFields[g];checkNested(e,d.fieldId+h)&&f.push(e[d.fieldId+h])}a.html=f.length?f.join(" "):"-";break;default:a.html=checkNested(e,d.fieldId)?e[d.fieldId]:"-"}}}}),angular.module("app").directive("afParentPageLink",["$rootScope","AppSetting","$state","$http","AppURL","Http","$uibModal","MsgBox","$stateParams","$filter","App","$compile","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{restrict:"AE",link:function(a,d,e){m(function(){if(checkNested(e,"pageId")&&checkNested(b.Pages,e.pageId)){var a=b.Pages[e.pageId];if(checkNested(a,"parent")&&a.parent&&checkNested(b.Pages,a.parent)){var f=b.Pages[a.parent],g="app."+f.slug,h="";if(0!=f.parent){var j={};j[f.param]=f.itemId,h=c.href(g,angular.extend({},j,i))}else h=c.href(g,angular.extend({},j,i));h&&angular.element(d).attr("href",h).html('<i class="fal fa-arrow-left"></i> Back to '+f.name).parent().removeClass("hide")}}},10)}}}]),angular.module("app").directive("afAccordion",["AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox","$rootScope","App","$timeout",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div class="alert alert-danger" ng-show="status == \'error\'">{{err}}</div><div ng-show="status == \'loading\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading data...</div><div ng-show="status == \'done\'"><h2 ng-if="options.settings.title != \'\'">{{options.settings.title}}</h2><div class="com-desc" ng-if="options.settings.description != \'\'">{{options.settings.description}}</div><div class="filter-tabs" ng-if="options.settings.filterType==\'Filter Tab\'"><ul class="nav nav-tabs"><li class="tab-{{tab.badgeClass}}" ng-repeat="tab in options.filterTabs" ng-class="{\'active\': tabIndex == $index, \'tab-colored\': tab.isColor}"><a ng-click="setFilterTab($index)">{{tab.title}}</a></li><li ng-if="options.settings.hideClearFilter != \'Yes\'"><a ng-click="setFilterTab(-1)">Clear Filter</a></li></ul></div><div class="table-actions no-print"><div class="pull-left form-inline"><div class="input-group" ng-if="options.settings.allowSearch == \'Yes\'"><input type="text" ng-model="query.filters.k" class="form-control input-sm padder" placeholder="Search..." ng-enter="refreshData();"/><span class="input-group-btn" ng-click="refreshData()"><button type="submit" class="btn btn-sm"><i class="fa fa-search"></i></button></span></div><button class="btn btn-primary btn-sm m-l-xs" ng-click="refreshData()"><i class="far fa-sync" aria-hidden="true"></i></button></div><div class="pull-right"><button class="btn btn-default btn-sm" ng-show="refresh == \'1\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading...</button>&nbsp;<button class="btn btn-default disabled btn-sm" >{{totalItems}} {{totalItems === 1 ? "Record" : "Records"}}</button>&nbsp;<hit-pagination2 ng-if="options.settings.showPagination == \'Yes\' && totalItems > limit" page="query.page" total-items="totalItems" limit="limit" refresh-data="refreshPageData"></hit-pagination2></div><div class="clearfix"></div></div><div ng-if="items.length == 0">{{options.settings.noDataText || \'No record found\'}}</div><div class="row list-layout-size-{{listLayoutColSize}}"><div class="col-md-{{listLayoutColSize}}" ng-repeat="(itemIndex, item) in items"><div class="accordion-item shadow-{{options.settings.design.shadow.depth}}"><div class="accordion-title" ng-click="openItem($event)"><i class="{{options.settings.design.title.icon}} a-icon"></i><af-data-table-field item="item" column-slug1="options.settings.labelField" column="columns[options.settings.labelField]" columns="columns" in-display-mode="\'detail\'"></af-data-table-field></div><div class="accordion-body"><div class="row" ng-repeat="row in options.rows"><div class="col-md-{{col.size}}" ng-repeat="col in row.cols"><div class="form-group" ng-repeat="column in col.fields" id="field_block_{{column.slug}}" ng-style1="columnStyle(column, item)" allow-inline-editing-for-app item="item" field="column" allow-edit="options.settings.allowInlineEdit == \'Yes\' && (!column.allowInlineEdit || column.allowInlineEdit==\'Yes\')" table-id="tableId" page-id="pageId"><label ng-if="column.hideTitle != \'Yes\'">{{column.title}}</label><div><af-data-table-field item="item" column="column" columns="columns" in-display-mode="\'detail\'" update-val="item.__changed" logged-in-item="loggedInItem" ng-click="doColumnAction(column, itemIndex, $event)"></af-data-table-field></div></div></div></div></div></div><hr class="hr1" ng-if="options.settings.hrAfterRecord == \'Yes\'"></div></div><div class="table-actions no-print"><div class="pull-right"><button class="btn btn-default btn-sm" ng-show="refresh == \'1\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading...</button>&nbsp;<button class="btn btn-default disabled btn-sm" >{{totalItems}} {{totalItems === 1 ? "Record" : "Records"}}</button>&nbsp;<hit-pagination2 ng-if="options.settings.showPagination == \'Yes\' && totalItems > limit" page="query.page" total-items="totalItems" limit="limit" refresh-data="refreshPageData"></hit-pagination2></div><div class="clearfix"></div></div><div class="btm-elem hide"></div></div>',link:function(a,b,c){var d=b.attr("id"),e=checkNested(c.tableId)?c.tableId:0;a.pageId=checkNested(c,"pageId")?c.pageId:"",a.tableId=e,a.uId=checkNested(c,"uId")?c.uId:"",a.tableId=e,a.tabIndex=-1,a.options=options=JSON.parse(checkNested(c.options)?c.options:"{}"),checkNested(a.options,"settings")||(a.options.settings={}),checkNested(a.options,"settings","allowInlineEdit")||(a.options.settings.allowInlineEdit="No");var g=function(){var c="<style>";c+="#"+d+" .accordion-item{",checkNested(a.options.settings,"design","ele","bkColor")&&(c+="background-color: "+a.options.settings.design.ele.bkColor+";"),checkNested(a.options.settings,"design","ele","topMargin")&&(c+="margin-top: "+a.options.settings.design.ele.topMargin+"px;"),checkNested(a.options.settings,"design","ele","rightMargin")&&(c+="margin-right: "+a.options.settings.design.ele.rightMargin+"px;"),checkNested(a.options.settings,"design","ele","bottomMargin")&&(c+="margin-bottom: "+a.options.settings.design.ele.bottomMargin+"px;"),checkNested(a.options.settings,"design","ele","leftMargin")&&(c+="margin-left: "+a.options.settings.design.ele.leftMargin+"px;"),checkNested(a.options.settings,"design","br","color")&&(c+="border-color: "+a.options.settings.design.br.color+";"),checkNested(a.options.settings,"design","br","width")&&(c+="border-top-width: "+(checkNested(a.options.settings,"design","br","top")&&a.options.settings.design.br.top?a.options.settings.design.br.width:"0")+"px;",c+="border-right-width: "+(checkNested(a.options.settings,"design","br","right")&&a.options.settings.design.br.right?a.options.settings.design.br.width:"0")+"px;",c+="border-bottom-width: "+(checkNested(a.options.settings,"design","br","bottom")&&a.options.settings.design.br.bottom?a.options.settings.design.br.width:"0")+"px;",c+="border-left-width: "+(checkNested(a.options.settings,"design","br","left")&&a.options.settings.design.br.left?a.options.settings.design.br.width:"0")+"px;"),checkNested(a.options.settings,"design","br","radius")&&(c+="border-radius: "+a.options.settings.design.br.radius+"px;"),c+="}",c+="#"+d+" .accordion-item.active{",checkNested(a.options.settings,"design","ele","selBkColor")&&(c+="background-color: "+a.options.settings.design.ele.selBkColor+";"),checkNested(a.options.settings,"design","br","selColor")&&(c+="border-color: "+a.options.settings.design.br.selColor),c+="}",c+="#"+d+" .accordion-item .accordion-title{",checkNested(a.options.settings,"design","title","font")&&(c+="font-size: "+a.options.settings.design.title.font+"px;"),checkNested(a.options.settings,"design","title","align")&&(c+="text-align: "+a.options.settings.design.title.align.toLowerCase()+";"),checkNested(a.options.settings,"design","title","color")&&(c+="color: "+a.options.settings.design.title.color+";"),checkNested(a.options.settings,"design","title","color")&&(c+="color: "+a.options.settings.design.title.color+";"),c+="}",c+="#"+d+" .accordion-item.active .accordion-title{",checkNested(a.options.settings,"design","title","selColor")&&(c+="color: "+a.options.settings.design.title.selColor+";"),c+="}",c+="#"+d+" .accordion-item.active .accordion-body{",checkNested(a.options.settings,"design","con","font")&&(c+="font-size: "+a.options.settings.design.con.font+"px;"),checkNested(a.options.settings,"design","con","align")&&(c+="text-align: "+a.options.settings.design.con.align.toLowerCase()+";"),checkNested(a.options.settings,"design","con","color")&&(c+="color: "+a.options.settings.design.con.color+";"),checkNested(a.options.settings,"design","con","topPadding")&&(c+="padding-top: "+a.options.settings.design.con.topPadding+"px;"),checkNested(a.options.settings,"design","con","rightPadding")&&(c+="padding-right: "+a.options.settings.design.con.rightPadding+"px;"),checkNested(a.options.settings,"design","con","bottomPadding")&&(c+="padding-bottom: "+a.options.settings.design.con.bottomPadding+"px;"),checkNested(a.options.settings,"design","con","leftPadding")&&(c+="padding-left: "+a.options.settings.design.con.leftPadding+"px;"),c+="}",c+="</style>",angular.element(".btm-elem",b).html(c),checkNested(a.options.settings.design.shadow,"depth")};if(g(),a.listLayoutColSize=12,checkNested(a.options.settings,"listLayout"))switch(a.options.settings.listLayout){case"6 Columns":a.listLayoutColSize=2;break;case"4 Columns":a.listLayoutColSize=3;break;case"3 Columns":a.listLayoutColSize=4;break;case"2 Columns":a.listLayoutColSize=6}a.openItem=function(c){checkNested(a.options.settings,"allowOnlyOneOpen")&&"Yes"==a.options.settings.allowOnlyOneOpen&&(angular.element(".active",b).removeClass("active"),angular.element(".accordion-body",b).slideUp("fast"),checkNested(a.options.settings,"design","title","icon")&&angular.element(".a-icon",b).attr({"class":a.options.settings.design.title.icon+" a-icon"})),angular.element(c.currentTarget.parentNode).toggleClass("active"),angular.element(".accordion-body",c.currentTarget.parentNode).slideToggle(),angular.element(c.currentTarget.parentNode).hasClass("active")?(checkNested(a.options.settings,"design","title","selIcon")&&angular.element(".a-icon",c.currentTarget).attr({"class":a.options.settings.design.title.selIcon+" a-icon"}),checkNested(a.options.settings.design.shadow,"selDepth")&&angular.element(c.currentTarget.parentNode).removeClass("shadow-1x shadow-2x shadow-3x shadow-4x shadow-5x").addClass("shadow-"+a.options.settings.design.shadow.selDepth)):(checkNested(a.options.settings,"design","title","icon")&&angular.element(".a-icon",c.currentTarget).attr({"class":a.options.settings.design.title.icon+" a-icon"}),checkNested(a.options.settings.design.shadow,"depth")&&angular.element(c.currentTarget.parentNode).removeClass("shadow-1x shadow-2x shadow-3x shadow-4x shadow-5x").addClass("shadow-"+a.options.settings.design.shadow.depth))},a.items=[],a.loggedInItem={},a.columns={},a.status="loading",a.limit=checkNested(a.options,"settings","recordLimit")?a.options.settings.recordLimit:10,a.limit=parseInt(a.limit)<10?10:a.limit,a.totalItems=0,a.query={filters:{k:""},page:1,limit:a.limit},checkNested(options,"onlyLoginAllow")&&(a.query.filters.onlyLogin=options.onlyLoginAllow),checkNested(a.options,"joinFieldId")&&checkNested(a.options,"joinTableId")&&(a.query.join={recordId:i.App.get("recordIdFromURL"),fieldId:a.options.joinFieldId,tableId:a.options.joinTableId,slug:a.options.joinTableSlug,type:a.options.joinType,table:a.options.joinTable}),a.query.rId=i.App.get("recordIdFromURL"),a.setupColumn=function(a){var b={};return checkNested(a,"widthType")&&checkNested(a,"widthUnit")&&"custom"==a.widthType&&(b.width=a.widthUnit+(checkNested(a,"widthUnitType")&&"percent"==a.widthUnitType?"%":"px")),checkNested(a,"align")&&(b.textAlign=a.align),b},checkNested(a.options.settings,"labelField")&&(a.columns[a.options.settings.labelField]={slug:a.options.settings.labelField}),checkNested(a.options,"rows")&&angular.forEach(a.options.rows,function(b,c){angular.forEach(b.cols,function(b,c){angular.forEach(b.fields,function(b){checkNested(b,"ftype")&&"html"==b.ftype||checkNested(b,"slug")&&b.slug&&(checkNested(b,"tableType")||"TableLink"==b.type||(b.tableType="self"),checkNested(b,"tableType")&&"self"==b.tableType?b.allowInlineEdit=checkNested(b,"allowInlineEdit")&&"No"==b.allowInlineEdit?"No":"Yes":b.allowInlineEdit="No",a.columns[b.slug]=b)})})}),a.setFilterTab=function(b){a.tabIndex=b;var c=[];checkNested(a,"options","filterTabs",b)&&(c=a.options.filterTabs[b]),a.query.fIndex=b,a.refreshData()},checkNested(options,"filterTabs")&&angular.forEach(options.filterTabs,function(b,c){checkNested(b,"defaultFilter")&&b.defaultFilter&&(a.tabIndex=c,a.query.fIndex=c)}),a.refresh=0,a.refreshPageData=function(b){angular.isDefined(b)&&(a.query.page=b),a.refreshData()},a.refreshData=function(){""!=a.uId?(a.refresh=1,i.doRootLoading(!0),f.post("g."+a.uId,a.query,function(b){a.refresh=0,"error"==b.type?(a.status="error",a.err=checkNested(b,"msg")&&b.msg?b.msg:"Data table not found."):(a.status="done",a.err="",angular.forEach(a.columns,function(a,c){checkNested(b.dataFieldOptions,a.fieldId)&&(checkNested(a,"options")?a.options=angular.extend(a.options,b.dataFieldOptions[a.fieldId]):a.options=b.dataFieldOptions[a.fieldId])}),checkNested(b,"fullColumns")&&angular.forEach(b.fullColumns,function(b,c){checkNested(a.columns,b.id)||(a.columns[b.id]=b)}),a.loggedInItem=checkNested(b,"loggedInItem")?b.loggedInItem:{},a.items=b.items,a.totalItems=b.totalItems),i.doRootLoading(!1)},function(b,c){a.status="error",a.err=checkNested(b,"msg")&&b.msg?b.msg:"Data table not found.",i.doRootLoading(!1)},!0)):(a.refresh=0,
a.status="error",a.err="Data table not found.")},a.refreshData(),j.registerDataChange("form_add_record",function(b,c){checkNested(c,"tableId")&&c.tableId==a.tableId&&a.refreshData()}),a.fields={},a.doColumnAction=function(b,c,d){var g=b.name;switch(g){case"Action":if(angular.element(d.target).hasClass("disabled"))return;angular.element(d.target).addClass("disabled"),f.post("data-table."+e+".actions."+a.items[c].id,{column:b},function(b){"success"==b.type&&a.refreshData(),angular.element(d.target).removeClass("disabled")},function(a,b){angular.element(d.target).removeClass("disabled")});break;case"Delete":a.items[c].loading=!0;var i=checkNested(b,"confirmMsg")?b.confirmMsg:"";""==jQuery.trim(i)&&(i="Are you sure you want to delete this record?"),confirm(i)?f["delete"]("data-table."+e+".delete."+a.items[c].id,{},function(b){h.show(b.msg,b.type,"Record Delete"),"success"==b.type&&(a.items.splice(c,1),a.totalItems--)},function(b,d){h.show("Record not found","error","Record Delete"),a.items[c].loading=!1}):a.items[c].loading=!1}},a.columnStyle=function(a,b,c){var d={};return checkNested(b,"displayRules")&&b.displayRules&&angular.forEach(b.displayRules,function(c){if(checkNested(c,"items")&&c.items.length>0){var e=0;if(angular.forEach(c.items,function(b){e+=k(b,a)}),e&&e==c.items.length)switch(c.action){case"textColor":d.color=c.color;break;case"textStyle":checkNested(c,"textBold")&&c.textBold&&(d.fontWeight="900"),checkNested(c,"textItalic")&&c.textItalic&&(d.fontStyle="italic"),checkNested(c,"textStrikethrough")&&c.textStrikethrough&&(d.textDecoration="line-through");break;case"bkColor":d.backgroundColor=c.color;break;case"hideValue":d.display="none";break;case"icon":checkNested(a,b.fieldId)}}}),d};var k=function(b,c){switch(isTrue=0,b.operator){case"contains":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)&&(angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())>-1&&isTrue++:angular.isObject(c[b.fieldId])&&_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++);break;case"does not contain":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)?angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())==-1&&isTrue++:angular.isObject(c[b.fieldId])&&!_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++:isTrue++;break;case"is":"Date"==a.fieldType[b.fieldId]?checkNested(c,b.fieldId)&&moment(b.val).isSame(c[b.fieldId],"day")&&isTrue++:checkNested(c,b.fieldId)&&c[b.fieldId]==b.val&&isTrue++;break;case"is not":"Date"==a.fieldType[b.fieldId]?(!checkNested(c,b.fieldId)||!moment(b.val).isSame(c[b.fieldId],"day"))&&isTrue++:(!checkNested(c,b.fieldId)||c[b.fieldId]!=b.val)&&isTrue++;break;case"starts with":checkNested(c,b.fieldId)&&new RegExp("^"+b.val).test(c[b.fieldId])&&isTrue++;break;case"ends with":checkNested(c,b.fieldId)&&new RegExp(b.val+"$").test(c[b.fieldId])&&isTrue++;break;case"is blank":(!checkNested(c,b.fieldId)||/^\s*$/.test(c[b.fieldId])||null==c[b.fieldId])&&isTrue++;break;case"is not blank":checkNested(c,b.fieldId)&&!/^\s*$/.test(c[b.fieldId])&&null!=c[b.fieldId]&&isTrue++;break;case"higher than":checkNested(c,b.fieldId)&&c[b.fieldId]>parseInt(b.val)&&isTrue++;break;case"lower than":checkNested(c,b.fieldId)&&c[b.fieldId]<parseInt(b.val)&&isTrue++;break;case"is during the current":var d=checkNested(b,"val2")?b.val2:"week";switch(d){case"month":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":checkNested(c,b.fieldId)&&moment().format("YY-Q")==moment(c[b.fieldId]).format("YY-Q")&&isTrue++;break;case"year":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:checkNested(c,b.fieldId)&&moment().week()==moment(c[b.fieldId]).week()&&isTrue++}break;case"is during the previous":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().subtract(e,d).startOf(d),moment().endOf(d),null,"[]")&&isTrue++;break;case"is during the next":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().startOf(d),moment().add(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the previous":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the next":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isBefore(moment(b.val).startOf("day"))&&isTrue++;break;case"is after":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isAfter(moment(b.val).endOf("day"))&&isTrue++;break;case"is today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue},l=j.get("variables"),m=function(a){return angular.forEach(l,function(b){a=a.split("{!"+b.slug+"!}").join(j.get("variableFinalVal",b))}),a};a.fieldValue=function(b,c){var d="",e=[];if(checkNested(b,"ftype"))switch(b.ftype){case"html":d=m(b.text),angular.forEach(c,function(a,b){angular.isObject(a)?checkNested(a,"src")&&(d=d.split("{"+b+"}").join("https:"+a.src)):d=d.split("{"+b+"}").join(a)})}else{if(!checkNested(b,"fieldId"))return;switch(b.type){case"TableLink1":"Delete"!=b.name&&(d=$compile('<a href="javascript:void(0)" data-new-window="No" data-type="Page" data-item-id="'+b.page.id+'" data-page-id="'+b.page.id+'" data-link="http://">'+b.title+"</a>")(a.parent));break;case"TableLink1":var f="";return f="Delete"!=$ctrl.column.name?$compile('<a href="javascript:void(0)" data-new-window="No" data-type="Page" af-menu-item="" data-item-id="'+$ctrl.item.id+'" data-page-id="'+$ctrl.column.page.id+'" data-link="http://">'+$ctrl.column.title+"</a>")(a):$compile('<a href="javascript:void(0)" ng-click="doColumnAction(column.name, itemIndex)">'+$ctrl.column.title+"</a>")(a.$parent);case"Link":var g=checkNested(c,b.slug)?c[b.slug]:"";checkNested(g,"link")&&(d+='<a href="'+g.link+'" ',checkNested(b,"options","openInNewWindow")&&"Yes"==b.options.openInNewWindow&&(d+='target="_blank"'),d+=">",d+=checkNested(b,"options","linkFormat")?"same_text"===b.options.linkFormat&&checkNested(b,"options","linkText")?b.options.linkText:"unique"===b.options.linkFormat?g.text:g.link:g.link,d+="</a>");break;case"Image":var g=checkNested(c,b.slug)?c[b.slug]:"";if(checkNested(g,"src")){var h="";checkNested(b,"sizeType")&&"custom"==b.sizeType&&(checkNested(b,"width")&&(h+='width="'+b.width+'px"'),checkNested(b,"height")&&(h+='height="'+b.height+'px"')),d='<img src="'+g.src+'" class="'+(checkNested(b,"isResponsive")&&"No"==b.isResponsive?"":"img-responsive")+'" '+h+"   />"}break;case"Date":if(d=checkNested(c,b.slug)?c[b.slug]:"",""!=d){var i=new Date(d);d=d?$filter("date")(i,j.getSetting("dateFormat")):""}break;case"Address1":e=[],$joinFields=["address","address2","city","state","country","zip"];for(var k in $joinFields){var l=$joinFields[k];checkNested(c,b.slug,l)&&e.push(c[b.slug][l])}d=e.length?e.join(" ")+".":"-";break;case"Name1":e=[],$joinFields=["_first_name","_middle_name","_last_name"];for(var k in $joinFields){var l=$joinFields[k];checkNested(c,b.slug+l)&&e.push(c[b.slug+l])}d=e.length?e.join(" "):"-";break;default:d=checkNested(c,b.slug)?c[b.slug]:""}}return d||"&nbsp;"}}}}]),angular.module("app").component("afCalendar",{template:'<div><div class="filter-tabs" ng-if="$ctrl.options.settings.filterType==\'Filter Tab\'"><ul class="nav nav-tabs"><li class="tab-{{tab.badgeClass}}" ng-repeat="tab in $ctrl.options.filterTabs" ng-class="{\'active\': $ctrl.tabIndex == $index, \'tab-colored\': tab.isColor}"><a ng-click="$ctrl.setFilterTab($index)">{{tab.title}}</a></li><li ng-if="$ctrl.options.settings.hideClearFilter != \'Yes\'"><a ng-click="$ctrl.setFilterTab(-1)">Clear Filter</a></li></ul></div><div class="af-full-calendar af-full-calendar-one"></div></div>',bindings:{options:"<",uId:"<"},controller:["$scope","$element","Config","App","Http","$rootScope","$uibModal","MsgBox","$filter",function(a,b,c,d,e,f,g,h,i){var j=this;j.query={filters:{k:""},dataTableId:"",labelField:"",dateField:"",order:"id",orderBy:"DESC"},j.query.rId=f.App.get("recordIdFromURL"),j.tabIndex=-1,j.fieldOptions=[],j.dateField=!1,j.labelField=!1,j.items=[];var k=f.App.getSetting("dateFormat"),l={firstDay:0,views:{week:{columnHeaderHtml:function(a){return i("date")(a.toDate(),k)}}},columnHeaderFormat1:f.App.getSetting("dateTimeFormat"),customButtons:{refreshEvent:{text:"Refresh",click:function(){$(".af-full-calendar",b).fullCalendar("refetchEvents")}},myCalendar:{text:"Calendar",click:function(){var a=$(".af-full-calendar",b).fullCalendar("getView");"listDay"==a.type?$(".af-full-calendar",b).fullCalendar("changeView","agendaDay"):"listWeek"==a.type?$(".af-full-calendar",b).fullCalendar("changeView","agendaWeek"):"listMonth"==a.type&&$(".af-full-calendar",b).fullCalendar("changeView","month"),$(this).addClass("fc-state-active").siblings().removeClass("fc-state-active")}},myList:{text:"List",click:function(){var a=$(".af-full-calendar",b).fullCalendar("getView");"agendaDay"==a.type?$(".af-full-calendar",b).fullCalendar("changeView","listDay"):"agendaWeek"==a.type?$(".af-full-calendar",b).fullCalendar("changeView","listWeek"):"month"==a.type&&$(".af-full-calendar",b).fullCalendar("changeView","listMonth"),$(this).addClass("fc-state-active").siblings().removeClass("fc-state-active")}},myMonth:{text:"Month",click:function(){var a=$(".af-full-calendar",b).fullCalendar("getView");"agendaWeek"==a.type||"agendaDay"==a.type?$(".af-full-calendar",b).fullCalendar("changeView","month"):"listWeek"!=a.type&&"listDay"!=a.type||$(".af-full-calendar",b).fullCalendar("changeView","listMonth"),$(this).addClass("fc-state-active").siblings().removeClass("fc-state-active")}},myWeek:{text:"Week",click:function(){var a=$(".af-full-calendar",b).fullCalendar("getView");"month"==a.type||"agendaDay"==a.type?$(".af-full-calendar",b).fullCalendar("changeView","agendaWeek"):"listMonth"!=a.type&&"listDay"!=a.type||$(".af-full-calendar",b).fullCalendar("changeView","listWeek"),$(this).addClass("fc-state-active").siblings().removeClass("fc-state-active")}},myDay:{text:"Day",click:function(){var a=$(".af-full-calendar",b).fullCalendar("getView");"agendaWeek"==a.type||"month"==a.type?$(".af-full-calendar",b).fullCalendar("changeView","agendaDay"):"listWeek"!=a.type&&"listMonth"!=a.type||$(".af-full-calendar",b).fullCalendar("changeView","listDay"),$(this).addClass("fc-state-active").siblings().removeClass("fc-state-active")}}},header:{left:"prev,next today",center:"title",right:"refreshEvent myCalendar,myList myMonth,myWeek,myDay"},defaultDate:new Date,navLinks:!0,editable:!0,eventDurationEditable:!1,eventLimit:!0,loading:function(a,c){a?(f.doRootLoading(!0),$(".fc-refreshEvent-button",b).attr({disabled:!0}).html('<i class="fa fa-spin fa-spinner"></i> Loading...')):(f.doRootLoading(!1),$(".fc-refreshEvent-button",b).attr({disabled:!1}).text("Refresh"))},eventRender:function(a,b){b.find(".fc-title").html(a.title)},events:function(a,b,c,d){j.query.start=a.format("YYYY-MM-DD HH:mm:00"),j.query.end=b.format("YYYY-MM-DD HH:mm:59"),e.post("g."+j.uId,j.query,function(a){var b=[];"success"===a.type&&(j.fieldOptions=a.dataFieldOptions,j.items=a.items,j.dataFieldOptions={},angular.forEach(a.dataFieldOptions,function(a){j.dataFieldOptions[a.slug]=a}),angular.forEach(a.items,function(a,c){var d=checkNested(a,j.labelField)?a[j.labelField]:"";d=f.App.apply("field2Str",{val:d,fieldSlug:j.labelField});var e={id:a.id,itemIndex:c,title:d};if(checkNested(a,j.query.dateField))switch(j.dateField.type){case"Calendar":checkNested(a,j.query.dateField,"all_day")&&checkNested(a,j.query.dateField,"start")&&checkNested(a,j.query.dateField,"end")?(e.allDay="1"==a[j.query.dateField].all_day,e.start=a[j.query.dateField].start,e.end=a[j.query.dateField].end):e=!1;break;case"Date":e.allDay=!0,e.start=a[j.query.dateField];break;case"Date/Time":e.allDay=!1,e.start=a[j.query.dateField];break;default:e=!1}else e=!1;if(e){var g=!1;checkNested(j.options.settings,"eventColorRules")&&j.options.settings.eventColorRules&&angular.forEach(j.options.settings.eventColorRules,function(b){if(checkNested(b,"items")&&b.items.length>0){var c=0;angular.forEach(b.items,function(b){c+=checkFieldConditionOnly(b,a,f.App.get("fieldTypeBySlug",b.fieldId))}),c&&c==b.items.length&&(e.color=checkNested(b,"color")?b.color:"#000000",g=!0)}}),0==g&&checkNested(j.options.settings,"defaultColors")&&!_tb.is("null",j.options.settings.defaultColors)&&(e.color=j.options.settings.defaultColors),e.title&&"null"!=e.title||(e.title=""),b.push(e)}})),d(b)},function(a,b){d([])},!0)},navLinkDayClick:function(a,c){$(".fc-right .fc-button",b).removeClass("fc-state-active"),$(".fc-myCalendar-button,.fc-myDay-button",b).addClass("fc-state-active"),$(".af-full-calendar",b).fullCalendar("changeView","agendaDay"),$(".af-full-calendar",b).fullCalendar("gotoDate",a)},dayClick:function(a,b,c){if(!checkNested(j,"options","allowForm")||"No"!=j.options.allowForm){var d={};if(j.dateField&&checkNested(j.dateField,"type"))switch(j.dateField.type){case"Calendar":var e=new Date(a.format().split("-").join("/"));e.setHours(0),e.setMinutes(0),e.setSeconds(0),d[j.dateField.slug]={all_day:""},d[j.dateField.slug].start=e,checkNested(j.dateField,"rangeDate")&&j.dateField.rangeDate&&(e=new Date(a.format().split("-").join("/")),e.setHours(23),e.setMinutes(59),e.setSeconds(59),d[j.dateField.slug].end=e);break;default:var e=new Date(a.format().split("-").join("/"));d[j.dateField.slug]=e}g.open({backdrop:"static",keyboard:!1,size:"lg",controller:["$scope","$uibModalInstance","uId","dataTableId","options","MsgBox",function(a,b,c,d,e,f){a.uId=c,a.dataTableId=d,a.options=e,a.optionsStr=JSON.stringify(e),a.closeModal=function(a){angular.isDefined(a)&&a?b.close(a):b.dismiss("cancel")},a.onSaved=function(b,c){a.closeModal("refresh"),f.show("The record has been successfully saved.","success")}}],template:'<div class="model-body-content"><div class="modal-header" ng-if="options.title != \'\'"><button type="button" class="btn btn-danger btn-circle model-close pull-right" ng-click="closeModal()" data-dismiss="modal" aria-label="Close"><i class="far fa-times"></i></button><h3 class="modal-title">{{options.title}}</h3></div><div class="modal-body modal-sub-body"><p ng-if="options.description != \'\'">{{options.description}}</p><div af-form data-table-id="{{dataTableId}}" data-u-id="{{uId}}" data-options="{{optionsStr}}" on-saved="onSaved(id, state)"></div></div><div class="modal-footer"><button class="btn btn-danger pull-left" type="button" ng-click="closeModal()"><i class="far fa-times"></i> Close</button></div></div>',resolve:{dataTableId:function(){return j.options.dataTableId},uId:function(){return j.uId},options:function(){return{title:checkNested(j.options,"formView","title")?j.options.formView.title:"",description:checkNested(j.options,"formView","description")?j.options.formView.description:"",rows:checkNested(j.options,"formView","rows")?j.options.formView.rows:[],fieldOptions:j.fieldOptions,pageId:checkNested(j.options,"pageId")?j.options.pageId:0,lastParam:0,displayRules:[],submitRules:[],validationRules:[],settings:[],record:d}}}}).result.then(function(a){"refresh"==a&&j.refresh()},function(){})}},eventClick:function(a,c,d){if(checkNested(j.items,a.itemIndex)&&checkNested(j,"options","detailView")&&(!checkNested(j.options,"allowDetail")||"No"!=j.options.allowDetail)){var f=g.open({backdrop:"static",keyboard:!1,size:"lg",controller:["$scope","$uibModalInstance","item","options","calendarOptions","dataTableId",function(a,b,c,d,f,g){a.item=c,a.tableId=g;var i=function(a){return angular.forEach(a.rows,function(a,b){angular.forEach(a.cols,function(a,b){angular.forEach(a.fields,function(a){checkNested(j.dataFieldOptions,a.slug)?(a.options=j.dataFieldOptions[a.slug],a.__found=!0):"TableLink"==a.type?a.__found=!0:a.__found=!1})})}),a};a.options=i(d),a.calendarOptions=f,a.closeModal=function(a){b.close(a)},a.onAction=function(b){a.closeModal()},a.getColumn=function(a){},a.doColumnAction=function(c,d){var f=c.name;switch(f){case"Action":if(angular.element(d.target).hasClass("disabled"))return;angular.element(d.target).addClass("disabled"),e.post("data-table."+tableId+".actions."+a.items[itemIndex].id,{column:c},function(b){"success"==b.type&&a.refreshData(),angular.element(d.target).removeClass("disabled")},function(a,b){angular.element(d.target).removeClass("disabled")});break;case"Delete":a.item.loading=!0,confirm("Are you sure to delete this record?")?e["delete"]("data-table."+a.tableId+".delete."+a.item.id,{},function(a){h.show(a.msg,a.type,"Record Delete"),"success"==a.type&&b.close("delete")},function(b,c){h.show("Record not found","error","Record Delete"),a.item.loading=!1}):a.items[itemIndex].loading=!1}}}],template:'<div class="model-body-content"><div class="modal-header" ng-if="options.title != \'\'"><button type="button" class="btn btn-danger btn-circle model-close pull-right" ng-click="closeModal()" data-dismiss="modal" aria-label="Close"><i class="far fa-times"></i></button><h3 class="modal-title">{{options.title}}</h3></div><div class="modal-body modal-sub-body"><p ng-if="options.description != \'\'">{{options.description}}</p><div class="row" ng-repeat="row in options.rows"><div class="col-md-{{col.size}}" ng-repeat="col in row.cols"><div class="form-group" ng-repeat="field in col.fields" ng-if="field.__found" id="field_block_{{field.slug}}" allow-inline-editing-for-app item="item" field="field" allow-edit="calendarOptions.settings.allowInlineEdit == \'Yes\' && (!field.allowInlineEdit || field.allowInlineEdit==\'Yes\')" table-id="tableId" page-id="$ctrl.pageId"><label>{{field.title}}</label><div><af-data-table-field item="item" on-action="onAction(field)" column="field" ng-click="doColumnAction(field, $event)" update-val="item.__changed"></af-data-table-field></div></div></div></div></div><div class="modal-footer"><button class="btn btn-danger pull-left" type="button" ng-click="closeModal()"><i class="far fa-times"></i> Close</button></div></div>',resolve:{item:function(){return j.items[a.itemIndex]},options:function(){return j.options.detailView},calendarOptions:function(){return j.options},dataTableId:function(){return j.options.dataTableId}}});f.result.then(function(c){"delete"===c&&(j.items.splice(a.itemIndex,1),jQuery(".af-full-calendar",b).fullCalendar("removeEvents",a.id))},function(){})}},eventDrop:function(a,b,c){var d={dataTable:j.query.dataTableId,id:j.items[a.itemIndex].id,dateField:j.dateField.id};switch(d.delta=b._data,j.dateField.type){case"Date":d[j.dateField.slug]=f.App.apply("dateToStr",{date:a.start,format:"momentMysqlDateFormat"});break;case"Date/Time":d[j.dateField.slug]=f.App.apply("dateToStr",{date:a.start});break;case"Calendar":d[j.dateField.slug]={},d[j.dateField.slug].all_day=a.allDay?1:0;var g=f.App.apply("dateToStr",{date:a.start});g&&(d[j.dateField.slug].start=f.App.apply("dateToStr",{date:a.start})),g=f.App.apply("dateToStr",{date:a.end}),g?d[j.dateField.slug].end=f.App.apply("dateToStr",{date:a.end}):d[j.dateField.slug].end=d[j.dateField.slug].start}e.post("data-table."+j.query.dataTableId+".save."+d.id,d,function(a){"success"!=a.type&&(h.show(a.msg,"error"),c())},function(a,b){h.show("The calender event wasn't updated.","error"),c()},!0)},eventDropOld:function(a,b,c){return console.log(a),void console.log(b)}};j.setFilterTab=function(a){j.tabIndex=a;var b=[];checkNested(j,"options","filterTabs",a)&&(b=j.options.filterTabs[a]),j.query.page=1,j.query.fIndex=a,j.refresh()},j.refresh=function(){jQuery(".af-full-calendar",b).fullCalendar("refetchEvents")},d.registerDataChange("form_add_record",function(a,b){checkNested(b,"tableId")&&b.tableId==j.tableId&&j.refresh()}),j.$onInit=function(){j.fields=angular.copy(f.App.get("dataFields",j.options.dataTableId)),j.query.dataTableId=j.options.dataTableId,j.tableId=j.options.dataTableId,j.pageId=j.options.pageId,j.query.labelField=j.options.settings.labelField,j.query.dateField=j.options.settings.dateField,checkNested(j.query,"columns")&&angular.isArray(j.query.columns)||(j.query.columns=[]),j.query.columns.push(j.query.labelField),j.query.columns.push(j.query.dateField),checkNested(j,"options","detailView","rows")&&angular.isObject(j.options.detailView.rows)&&angular.forEach(j.options.detailView.rows,function(a){checkNested(a,"cols")&&angular.isObject(a.cols)&&angular.forEach(a.cols,function(a,b){checkNested(a,"fields")&&angular.isObject(a.fields)&&angular.forEach(a.fields,function(a){checkNested(a,"slug")&&a.slug&&j.query.columns.push(a.slug)})})}),j.labelField=j.options.settings.labelField,j.dataFieldOptions={},angular.isDefined(j.query.dateField)&&angular.forEach(j.fields,function(a){a.slug==j.query.dateField&&(j.dateField=a)}),checkNested(j.options,"filters")&&(j.query.filters.filters=j.options.filters),checkNested(j.options,"filterTabs")&&angular.forEach(j.options.filterTabs,function(a,b){checkNested(a,"defaultFilter")&&a.defaultFilter&&(j.tabIndex=b,j.query.fIndex=b)});var a="agenda";checkNested(j.options,"defaultDisplay")&&(a="List"==j.options.defaultDisplay?"list":"agenda"),checkNested(j.options,"allowDragDropEvent")&&"No"==j.options.allowDragDropEvent&&(l.editable=!1),checkNested(j.options,"settings","firstDay")&&(l.firstDay=j.options.settings.firstDay),checkNested(j.options,"defaultDisplayView")&&(a+="Day"==j.options.defaultDisplayView?"Day":"Week"==j.options.defaultDisplayView?"Week":"Month"),l.defaultView="agendaMonth"==a?"month":a,$(".af-full-calendar",b).fullCalendar(l),"list"==a.substr(0,4)?$(".af-full-calendar .fc-myList-button",b).addClass("fc-state-active"):$(".af-full-calendar .fc-myCalendar-button",b).addClass("fc-state-active"),"Day"==a.substr(-3)?$(".af-full-calendar .fc-myDay-button",b).addClass("fc-state-active"):"Week"==a.substr(-4)?$(".af-full-calendar .fc-myWeek-button",b).addClass("fc-state-active"):$(".af-full-calendar .fc-myMonth-button",b).addClass("fc-state-active")}}]}),angular.module("app").directive("afCard",["$rootScope","AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox","App",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"AE",scope:{opt:"@"},template:'<div class="af-card-component" ng-style="style.card"><div class="filter-tabs" ng-if="opt.settings.filterType==\'Filter Tab\'"><ul class="nav nav-tabs"><li class="tab-{{tab.badgeClass}}" ng-repeat="tab in opt.filterTabs" ng-class="{\'active\': tabIndex == $index, \'tab-colored\': tab.isColor}"><a ng-click="setFilterTab($index)">{{tab.title}}</a></li><li ng-if="opt.settings.hideClearFilter != \'Yes\'"><a ng-click="setFilterTab(-1)">Clear Filter</a></li></ul></div><div class="card-inner" ><div class="header" ng-show="isHeader" ng-style="style.header"><span>{{opt.settings.design.header.title}}</span></div><div class="card-inner is-loading" ng-if="loading == 1"><i class="far fa-spin fa-spinner"></i> Loading...</div><div class="card-inner is-loading" ng-if="loading == 2"><div class="alert alert-danger">{{emsg}}</div></div><div class="con {{icon.type}}" ng-style="style.con" ng-if="loading == 0"><i class="{{icon.class}}" ng-style="style.icon" ng-if="icon.type == \'left-icon\' || icon.type == \'top-icon\'"></i><span class="val">{{opt.settings.design.con.prefix}}{{val}}{{opt.settings.design.con.suffix}}</span><i class="{{icon.class}}" ng-style="style.icon" ng-if="icon.type == \'right-icon\' || icon.type == \'bottom-icon\'"></i></div><div class="footer" ng-show="isFooter" ng-style="style.footer"><span>{{opt.settings.design.footer.title}}</span></div></div></div>',link:function(b,d,e){var f=checkNested(e.tableId)?e.tableId:0;b.tableId=f;var h=angular.element(".af-card-component",d);b.uId=checkNested(e,"uId")?e.uId:"",b.val="",b.emsg="",b.icon={type:""},b.loading=1,b.opt=options=JSON.parse(checkNested(e.options)?e.options:"{}"),checkNested(b.opt,"settings")||(b.opt.settings={}),b.currentPage=c.current,b.style={},b.style.header={},b.style.footer={},b.style.con={},b.style.card={},b.style.icon={},b.query={},b.query.rId=a.App.get("recordIdFromURL");var i=function(){angular.isString(b.val)||checkNested(b.opt.settings.design,"icon","colors")&&angular.isArray(b.opt.settings.design.icon.colors)&&angular.forEach(b.opt.settings.design.icon.colors,function(a){if(checkNested(a,"op"))switch(a.op){case"higher than":b.val>a.val&&(b.style.icon.color=a.color,b.icon["class"]=a.icon);break;case"lower than":b.val<a.val&&(b.style.icon.color=a.color,b.icon["class"]=a.icon);break;case"equal to":b.val==a.val&&(b.style.icon.color=a.color,b.icon["class"]=a.icon);break;case"not equal to":b.val!=a.val&&(b.style.icon.color=a.color,b.icon["class"]=a.icon)}})},k=function(a){return checkNested(b.opt.settings,"kmark")&&(a=_tb.kMark(a,b.opt.settings.kmark)),a};b.tabIndex=-1,b.setFilterTab=function(a){b.tabIndex=a;var c=[];checkNested(b,"options","filterTabs",a)&&(c=b.options.filterTabs[a]),b.query.page=1,b.query.fIndex=a,b.loadData()},checkNested(options,"filterTabs")&&angular.forEach(options.filterTabs,function(a,c){checkNested(a,"defaultFilter")&&a.defaultFilter&&(b.tabIndex=c,b.query.fIndex=c)}),b.onceLoad=!1,b.loadData=function(){""!=b.uId&&b.currentPage==c.current&&(0==b.onceLoad&&(b.loading=1),g.post("g."+b.uId,b.query,function(a){"success"==a.type?(b.val=k(parseFloat(a.val)),b.loading=0,i(),b.onceLoad=!0,b.currentPage==c.current&&checkNested(b.opt.settings,"autoRefresh")&&"Yes"==b.opt.settings.autoRefresh&&setTimeout(function(){b.loadData()},3e4)):b.loading=0}))};var l=function(){b.isHeader=checkNested(b.opt.settings,"design","header","title")&&!_tb.is("null",b.opt.settings.design.header.title),b.isHeader&&(checkNested(b.opt.settings.design.header,"font")&&(b.style.header.fontSize=b.opt.settings.design.header.font+"px"),checkNested(b.opt.settings.design.header,"align")&&(b.style.header.textAlign=b.opt.settings.design.header.align.toLowerCase()),checkNested(b.opt.settings.design.header,"color")&&(b.style.header.color=b.opt.settings.design.header.color)),b.isFooter=checkNested(b.opt.settings,"design","footer","title")&&!_tb.is("null",b.opt.settings.design.footer.title),b.isFooter&&(checkNested(b.opt.settings.design.footer,"font")&&(b.style.footer.fontSize=b.opt.settings.design.footer.font+"px"),checkNested(b.opt.settings.design.footer,"align")&&(b.style.footer.textAlign=b.opt.settings.design.footer.align.toLowerCase()),checkNested(b.opt.settings.design.footer,"color")&&(b.style.footer.color=b.opt.settings.design.footer.color)),checkNested(b.opt.settings.design,"con","font")&&(b.style.con.fontSize=b.opt.settings.design.con.font+"px"),checkNested(b.opt.settings.design,"con","align")&&""!=b.opt.settings.design.con.align&&(b.style.con.textAlign=b.opt.settings.design.con.align.toLowerCase()),checkNested(b.opt.settings.design,"con","color")&&""!=b.opt.settings.design.con.color&&(b.style.con.color=b.opt.settings.design.con.color),checkNested(b.opt.settings.design.br,"width")&&""!=b.opt.settings.design.br.width?(b.style.card.borderTopWidth=checkNested(b.opt.settings.design.br,"top")&&b.opt.settings.design.br.top?b.opt.settings.design.br.width+"px":"0",b.style.card.borderRightWidth=checkNested(b.opt.settings.design.br,"right")&&b.opt.settings.design.br.right?b.opt.settings.design.br.width+"px":"0",b.style.card.borderBottomWidth=checkNested(b.opt.settings.design.br,"bottom")&&b.opt.settings.design.br.bottom?b.opt.settings.design.br.width+"px":"0",b.style.card.borderLeftWidth=checkNested(b.opt.settings.design.br,"left")&&b.opt.settings.design.br.left?b.opt.settings.design.br.width+"px":"0"):b.style.card.borderWidth=0,checkNested(b.opt.settings.design.br,"color")&&""!=b.opt.settings.design.br.color&&(b.style.card.borderColor=b.opt.settings.design.br.color,b.style.footer.borderColor=b.opt.settings.design.br.color,b.style.header.borderColor=b.opt.settings.design.br.color),b.style.card.borderRadius=checkNested(b.opt.settings.design.br,"radius")&&""!=b.opt.settings.design.br.radius?b.opt.settings.design.br.radius:0,checkNested(b.opt.settings.design,"shadow","depth")&&""!=b.opt.settings.design.shadow.depth&&h.addClass("shadow-"+b.opt.settings.design.shadow.depth),checkNested(b.opt.settings,"design","icon","visible")&&"Yes"==b.opt.settings.design.icon.visible&&(b.icon.type="left-icon",checkNested(b.opt.settings.design,"icon","align")&&!_tb.is("null",b.opt.settings.design.icon.align)&&""!=b.opt.settings.design.icon.align&&(b.icon.type=b.opt.settings.design.icon.align.toLowerCase()+"-icon"),checkNested(b.opt.settings.design,"icon","icon")&&!_tb.is("null",b.opt.settings.design.icon.icon)&&""!=b.opt.settings.design.icon.icon&&(b.icon["class"]=b.opt.settings.design.icon.icon),checkNested(b.opt.settings.design,"icon","defaultColor")&&""!=b.opt.settings.design.icon.defaultColor&&(b.style.icon.color=b.opt.settings.design.icon.defaultColor)),checkNested(b.opt,"cal","type")&&"Static"==b.opt.cal.type?(b.val=b.opt.cal.staticVal,b.loading=0):b.loadData(),i()};l(),j.registerDataChange("form_add_record",function(a,c){checkNested(c,"tableId")&&c.tableId==b.tableId&&b.loadData()})}}}]),angular.module("app").directive("afChart",["$rootScope","AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox","$timeout","App",function(a,b,c,d,e,f,g,h,i,j,k){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div ng-if="status == \'done\'" ><ctrl-highchart-element element="chartElement" preview="0" show-tabs="1" data="{}"></ctrl-highchart-element></div>',link:function(a,b,c){var d=function(a){return a};a.chartElement=d(JSON.parse(checkNested(c.options)?c.options:"{}")),a.status="loading",j(function(){a.status="done"},0)}}}]),angular.module("app").directive("afDataTable",["$rootScope","AppSetting","$state","$http","App","$stateParams","AppURL","Http","$uibModal","MsgBox","$timeout","GeoLocation",function(a,b,c,d,e,f,g,h,i,j,k,l){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div class="alert alert-danger" ng-show="status == \'error\'">{{err}}</div><div ng-show="status == \'loading\'"><i class="fa fa-spin fa-circle-o-notch"></i> Loading data...</div><div ng-show="status == \'done\'" class="table-responsive"><h3 ng-if="opt.settings.tableTitle != \'\'">{{opt.settings.tableTitle}}</h3><div class="filter-tabs" ng-if="opt.settings.filterType==\'Filter Tab\'"><ul class="nav nav-tabs"><li class="tab-{{tab.badgeClass}}" ng-repeat="tab in opt.filterTabs" ng-class="{\'active\': tabIndex == $index, \'tab-colored\': tab.isColor}"><a ng-click="setFilterTab($index)">{{tab.title}}</a></li><li ng-if="opt.settings.hideClearFilter != \'Yes\'"><a ng-click="setFilterTab(-1)">Clear Filter</a></li></ul></div><div class="table-actions no-print"><div class="pull-left form-inline"><div class="input-group" ng-if="opt.settings.allowSearch == \'Yes\'"><input type="text" ng-model="query.filters.k" class="form-control input-sm padder" placeholder="Search..." ng-enter="refreshData();"/><span class="input-group-btn" ng-click="refreshData()"><button type="submit" class="btn btn-sm"><i class="fa fa-search"></i></button></span></div><button class="btn btn-primary btn-sm m-l-xs" ng-click="refreshData()"><i class="far fa-sync" aria-hidden="true"></i></button><button class="btn btn-primary btn-sm m-l-xs" ng-click="openFilterDialog()" ng-if="opt.settings.allowFilter == \'Yes\'">Add Filters</button><button class="btn btn-primary btn-sm m-l-xs" ng-click="addNewRecord()" ng-if="opt.settings.newRecordPopupPage == \'Yes\'">{{opt.settings.newRecordBtnLabel || \'Add New\'}}</button><button class="btn btn-info btn-sm m-l-xs" ng-click="batchUpdate()" ng-if="opt.settings.bacthUpdate == \'Yes\' || opt.settings.enableCheckbox == \'Yes\'">Update</button><button class="btn btn-danger btn-sm m-l-xs" ng-click="batchDelete()" ng-if="opt.settings.bacthDelete == \'Yes\'">Delete</button><div class="btn-group m-l-xs" ng-if="opt.settings.allowExport == \'Yes\'" uib-dropdown><button class="btn btn-info btn-sm " ng-click="batchExport()">Export</button><button type="button" class="btn btn-sm dropdown-toggle btn-info" uib-dropdown-toggle ng-if="opt.settings.allowedExportTemplate.length > 0"><i class="far fa-angle-down"></i></button><ul class="dropdown-menu max200 pull-right" uib-dropdown-menu role="menu" aria-labelledby="single-button"><li ng-click="batchExport(tempId)" ng-repeat="tempId in opt.settings.allowedExportTemplate track by $index"><a><show-object-name id="tempId" type="\'exports\'"></show-object-name></a></li></ul></div></div><div class="pull-right form-inline"><button class="btn btn-default btn-sm" ng-show="refresh == \'1\'"><i class="fa fa-spin fa-spinner"></i> Loading...</button>&nbsp;<button class="btn btn-default disabled btn-sm" >{{totalItems}} {{totalItems === 1 ? "Record" : "Records"}}</button>&nbsp;<hit-pagination2 ng-if="opt.settings.showPagination == \'Yes\' && totalItems > limit" page="query.page" total-items="totalItems" limit="limit" refresh-data="refreshPageData"></hit-pagination2></div><div class="clearfix"></div></div><div class="table-actions pad-0" style="padding-bottom:0"><field-filters-for-app-display class="" options="filter" ng-repeat="filter in query.filters.filters3" on-delete="removeFilterGroup3(index, $index)"></field-filters-for-app-display></div><tb-table-group chk-input="chkInput" columns="columns" items="items" opt="opt" tab-index="tabIndex" table-id="tableId" row-summaries="rowSummaries" do-sort="sorting(item, event)" do-item-click="callItemClick(column, item, event, colIndex)" group-by="groupBy" page-id="pageId"></tb-table-group></div>',
link:function(b,c,d){var f,g=checkNested(d.tableId)?d.tableId:0;b.tableId=g,b.pageId="",b.tabIndex=-1,b.opt=f=JSON.parse(checkNested(d.options)?d.options:"{}"),checkNested(b.opt,"pageId")&&(b.pageId=b.opt.pageId),b.uId=checkNested(d,"uId")?d.uId:"",b.opt.hideColumns=[];var m=function(a){function c(a,c){angular.forEach(a,function(a){checkNested(a,c)&&(angular.isString(a[c])?(a[c+"___groupBy"]=a[c],a[c+"___sortBy"]=a[c]):(checkNested(b.columnsType,c)&&"Join"!=b.columnsType[c]?a[c+"___groupBy"]=_tb.joinBy(a[c]," "):a[c+"___groupBy"]=_tb.joinBy(a[c]),a[c+"___sortBy"]=_tb.slugify(_tb.joinBy(a[c]))))})}function d(e,f,g){return"undefined"!=typeof e[g]&&(f={},f.name=e[g].name,f.collapsed=!(!checkNested(e[g],"collapsed")||"On"!=e[g].collapsed),f.colorClass="",checkNested(e[g],"visibleColumn")&&"Hide"==e[g].visibleColumn&&jQuery.inArray(e[g].slug,b.opt.hideColumns)==-1&&b.opt.hideColumns.push(e[g].slug),checkNested(e[g],"isColor")&&"Yes"==e[g].isColor&&(f.colorClass="tb-group-colored tb-group-color-"+(checkNested(e[g],"badgeClass")?e[g].badgeClass:"badge-wh-10")),f.slug=e[g].slug+"___groupBy",f.order=("Desc"==e[g].order?"-":"")+e[g].slug+"___sortBy",c(a,e[g].slug),f.child=d(e,!1,g+1),f)}return checkNested(f,"settings","grouping")?b.groupBy=d(f.settings.grouping,!1,0):b.groupBy=!1,a};checkNested(b.opt,"settings","allowInlineEdit")||(b.opt.settings.allowInlineEdit="No"),b.items=[],b.chkInput={},b.columns=[],b.columnsType={},b.options=[],b.status="loading",b.rowSummaries=[],b.limit=checkNested(b.opt,"settings","recordLimit")?b.opt.settings.recordLimit:10,b.limit=parseInt(b.limit)<10?10:b.limit,b.totalItems=0,b.query={filters:{k:""},page:1,fIndex:-1},checkNested(f,"onlyLoginAllow")&&(b.query.filters.onlyLogin=f.onlyLoginAllow),b.query.rId=a.App.get("recordIdFromURL"),b.setupColumn=function(a){var b={};return checkNested(a,"widthType")&&checkNested(a,"widthUnit")&&"custom"==a.widthType&&(b.width=a.widthUnit+(checkNested(a,"widthUnitType")&&"percent"==a.widthUnitType?"%":"px")),checkNested(a,"align")&&(b.textAlign=a.align),b},checkNested(f,"columns")&&(b.columns=f.columns),angular.forEach(b.columns,function(a){"TableLink"==a.type?a.sorting=0:a.sorting=1,checkNested(a,"tableType")||"TableLink"==a.type||(a.tableType="self"),checkNested(a,"tableType")&&"self"==a.tableType?a.allowInlineEdit=checkNested(a,"allowInlineEdit")&&"No"==a.allowInlineEdit?"No":"Yes":a.allowInlineEdit="No"}),b.refresh=0,b.openFilterDialog=function(){var a={};a.tableId=g,checkNested(b.query.filters,"filters3")&&(a.filters=b.query.filters.filters3),checkNested(b.opt,"settings","allowFilter")&&"Yes"==b.opt.settings.allowFilter&&checkNested(b.opt,"settings","allowedField")&&angular.isArray(b.opt.settings.allowedField)&&(a.onlyAllowedFieldId=b.opt.settings.allowedField);var c=i.open({backdrop:"static",keyboard:!1,size:"lg",controller:"filtersModalCtrl",templateUrl:"assets/app/blocks/filters-modal.html",resolve:{data:function(){return a}}});c.result.then(function(a){checkNested(a,"updated")&&checkNested(a,"element","filters")&&(b.query.filters.filters3=a.element.filters,b.refreshData())},function(){})},b.removeFilterGroup3=function(a,c){checkNested(b.query.filters,"filters3",c)&&(angular.isDefined(a)?checkNested(b.query.filters.filters3[c],"items",a)&&(b.query.filters.filters3[c].items.splice(a,1),b.refreshData()):(b.query.filters.filters3.splice(c,1),b.refreshData()))},b.addNewRecord=function(){if(checkNested(b.opt,"newRecordPopupPageId")&&b.opt.newRecordPopupPageId){var c=a.App.get("pageURI",b.opt.newRecordPopupPageId)+"?refresh="+getRandomInt(9999,9999999);a.App.get("isAppUserLogin")&&(c+="&api_token="+a.App.get("appUserToken"));var d=checkNested(b.opt,"settings","newRecordPopupTitle")?b.opt.settings.newRecordPopupTitle:"Add New Record";a.App.setStat("openModal",!0),i.open({backdrop:"static",keyboard:!1,size:"lg",controller:["$scope","$uibModalInstance","MsgBox","App",function(a,c,d,e){a.closeModal=function(a){angular.isDefined(a)&&a?c.close(a):c.dismiss("cancel")};var f=e.registerDataChange("form_add_record",function(a){e.clearDataChange("form_add_record",f),b.opt.newRecordPopupPageId==a.pageId&&c.close("cancel")})}],template:'<div class="model-body-content"><div class="modal-header" ng-if="options.title != \'\'"><button type="button" class="btn btn-danger btn-circle model-close pull-right" ng-click="closeModal()" data-dismiss="modal" aria-label="Close"><i class="far fa-times"></i></button><h3 class="modal-title">'+d+'</h3></div><div class="modal-body modal-sub-body"><div ng-include="\''+c+'\'"><i class="fa fa-spin fa-spinner"></i> Loading....</div></div><div class="modal-footer"><button class="btn btn-danger pull-left" type="button" ng-click="closeModal()"><i class="far fa-times"></i> Close</button></div></div>'}).result.then(function(a){"refresh"==a&&b.refreshData()},function(){})}},b.batchUpdate=function(){var a=[];if(jQuery("td.tb-select-row :checkbox:checked").each(function(){a.push(jQuery(this).data("value"))}),(!checkNested(b.opt.settings,"bacthUpdate")||"Yes"!=b.opt.settings.bacthUpdate)&&0==a.length)return void j.show("Select at-least one","error");var c=1;checkNested(b.opt.settings,"applyTableFilter")&&"No"==b.opt.settings.applyTableFilter&&(c=0);var d=i.open({backdrop:"static",keyboard:!1,size:"lg",controller:"updateBatchRecordModalCtrl",templateUrl:"assets/app/blocks/update-record-modal.html",resolve:{dataTableId:function(){return g},onlyIds:function(){return a},uId:function(){return b.uId},applyFilter:function(){return c}}});d.result.then(function(a){a&&b.refreshData()},function(){})},b.batchDelete=function(){var a=i.open({backdrop:"static",keyboard:!1,size:"lg",controller:"deleteBatchRecordModalCtrl",templateUrl:"assets/app/blocks/delete-record-modal.html",resolve:{dataTableId:function(){return g}}});a.result.then(function(a){a&&b.refreshData()},function(){})},b.batchExport=function(a){var c="g."+b.uId+".export";angular.isDefined(a)&&(c+="."+a),h.post(c,b.query,function(a){var b=new Blob(["\ufeff",a],{type:"text/plain"}),c=document.createElement("a"),d=URL.createObjectURL(b);document.body.appendChild(c),c.innerHTML="download me",c.href=d,c.download="data-export-"+moment().format("YYYY-MM-DD-HH:mm:ss")+".csv",c.click(),c.remove()})},b.setFilterTab=function(a){b.tabIndex=a;var c=[];checkNested(b,"opt","filterTabs",a)&&(c=b.opt.filterTabs[a]),b.query.page=1,b.query.fIndex=a,b.refreshData()},checkNested(f,"filterTabs")&&angular.forEach(f.filterTabs,function(a,c){checkNested(a,"defaultFilter")&&a.defaultFilter&&(b.tabIndex=c,b.query.fIndex=c)});var n={};b.refreshPageData=function(a){angular.isDefined(a)&&(b.query.page=a),b.refreshData()},b.refreshData=function(c){""!=b.uId?(b.refresh=1,a.doRootLoading(!0),angular.isDefined(c)&&(b.query.onlyId=c),angular.equals(n,b.query.filters)||(b.query.page=1),h.post("g."+b.uId,b.query,function(c){n=angular.copy(b.query.filters),b.refresh=0,a.doRootLoading(!1),"error"==c.type?(b.status="error",b.err=checkNested(c,"msg")&&c.msg?c.msg:"Data table not found."):(b.status="done",b.err="",b.columnsType={},angular.forEach(b.columns,function(a,d){checkNested(c.dataFieldOptions,a.fieldId)&&(angular.isObject(a,"options")&&a.options||(a.options={}),checkNested(a,"options")?a.options=angular.extend({},a.options,c.dataFieldOptions[a.fieldId]):a.options=c.dataFieldOptions[a.fieldId]),checkNested(a,"slug")&&checkNested(a,"type")&&(b.columnsType[a.slug]=a.type)}),b.items=m(c.items),b.totalItems=c.totalItems,b.setupRowSummaries())},function(c,d){b.status="error",b.err=checkNested(c,"msg")&&c.msg?c.msg:"Data table not found.",a.doRootLoading(!1)},!0)):(b.refresh=0,b.status="error",b.err="Data table not found.")},b.refreshData(),b.setupRowSummaries=function(){b.rowSummaries=[]},e.registerDataChange("form_add_record",function(a,c){checkNested(c,"tableId")&&c.tableId==b.tableId&&b.refreshData()}),b.coords={},k(function(){checkNested(b.opt,"coords")&&1==b.opt.coords&&l.getCurrentPosition().then(function(a){angular.isDefined(a)&&angular.isDefined(a.coords)&&angular.isDefined(a.coords.latitude)&&angular.isDefined(a.coords.longitude)&&(b.coords.lng=a.coords.longitude,b.coords.lat=a.coords.latitude)},function(a){})},10),b.callItemClick=function(a,c,d,e){if(angular.isString(a)&&"refreshData"==a&&b.refreshData(c),checkNested(a,"type")&&"TableLink"==a.type)if("Action"==a.name||"Delete"==a.name){var f=-1;angular.isObject(c)&&checkNested(c,"id")&&angular.forEach(b.items,function(a,b){a.id==c.id&&(f=b)}),f>-1&&b.doColumnAction(a,f,d,e)}else"Edit1"!=a.name&&"Detail1"!=a.name||checkNested(a,"openInPopup")&&"Yes"==a.openInPopup&&(d.stopPropagation(),d.preventDefault())},b.sorting=function(a,c){checkNested(a,"sorting")&&1==a.sorting&&(element=angular.element(c.target),element.siblings().removeClass("sorted sorted-desc"),b.query.order=a.slug,element.hasClass("sorted")?(element.removeClass("sorted").addClass("sorted-desc"),b.query.orderBy="desc"):(element.removeClass("sorted-desc").addClass("sorted"),b.query.orderBy="asc"),b.refreshData())},b.fields={},b.doColumnAction=function(a,c,d,e){var f=a.name;switch(f){case"Action":if(angular.element(d.target).hasClass("disabled"))return;angular.element(d.target).addClass("disabled");var i="g."+b.uId+".actions."+e,k={rId:b.items[c].id};checkNested(a,"coords")&&(k.coords=b.coords),h.post(i,k,function(a){if("success"==a.type&&(b.refreshData(),checkNested(a,"msg"))){var c=angular.isArray(a.msg)?a.msg.join("<br/>"):a.msg;j.show(c,"success")}angular.element(d.target).removeClass("disabled")},function(a,b){angular.element(d.target).removeClass("disabled")});break;case"Delete":b.items[c].loading=!0;var l=checkNested(a,"confirmMsg")?a.confirmMsg:"";""==jQuery.trim(l)&&(l="Are you sure you want to delete this record?"),confirm(l)?h["delete"]("data-table."+g+".delete."+b.items[c].id,{},function(a){j.show(a.msg,a.type,"Record Delete"),"success"==a.type&&b.items.splice(c,1)},function(a,d){j.show("Record not found","error","Record Delete"),b.items[c].loading=!1}):b.items[c].loading=!1}},b.columnStyle=function(a,b,c){var d={};return checkNested(b,"displayRules")&&b.displayRules&&angular.forEach(b.displayRules,function(c){if(checkNested(c,"items")&&c.items.length>0){var e=0;if(angular.forEach(c.items,function(b){e+=o(b,a)}),e&&e==c.items.length)switch(c.action){case"textColor":d.color=c.color;break;case"textStyle":checkNested(c,"textBold")&&c.textBold&&(d.fontWeight="900"),checkNested(c,"textItalic")&&c.textItalic&&(d.fontStyle="italic"),checkNested(c,"textStrikethrough")&&c.textStrikethrough&&(d.textDecoration="line-through");break;case"bkColor":d.backgroundColor=c.color;break;case"hideValue":d.display="none";break;case"icon":checkNested(a,b.fieldId)}}}),d},b.checkHideColumn=function(a){var c=!1;return checkNested(b,"opt","filterTabs",b.tabIndex,"hideColumns")&&angular.forEach(b.opt.filterTabs[b.tabIndex].hideColumns,function(b){a.id==b&&(c=!0)}),c};var o=function(a,c){switch(isTrue=0,a.operator){case"is unchecked":case"is not checked":(!checkNested(c,a.fieldId)||"1"!=c[a.fieldId])&&isTrue++;break;case"is checked":case"is not unchecked":checkNested(c,a.fieldId)&&!/^\s*$/.test(c[a.fieldId])&&null!=c[a.fieldId]&&isTrue++;break;case"contains":checkNested(c,a.fieldId)&&!_tb.is("null",a.val)&&(angular.isString(c[a.fieldId])?c[a.fieldId].toLowerCase().indexOf(a.val.toLowerCase())>-1&&isTrue++:angular.isObject(c[a.fieldId])&&_tb.is("contains",a.val.toLowerCase(),c[a.fieldId])&&isTrue++);break;case"does not contain":checkNested(c,a.fieldId)&&!_tb.is("null",a.val)?angular.isString(c[a.fieldId])?c[a.fieldId].toLowerCase().indexOf(a.val.toLowerCase())==-1&&isTrue++:angular.isObject(c[a.fieldId])&&!_tb.is("contains",a.val.toLowerCase(),c[a.fieldId])&&isTrue++:isTrue++;break;case"is":"Date"==b.fieldType[a.fieldId]?checkNested(c,a.fieldId)&&moment(a.val).isSame(c[a.fieldId],"day")&&isTrue++:checkNested(c,a.fieldId)&&c[a.fieldId]==a.val&&isTrue++;break;case"is not":if("Date"==b.fieldType[a.fieldId])(!checkNested(c,a.fieldId)||!moment(a.val).isSame(c[a.fieldId],"day"))&&isTrue++;else if(checkNested(b.fieldType,a.fieldId)&&"Join"==b.fieldType[a.fieldId]){var d=[];angular.isObject(c[a.fieldId])&&angular.forEach(c[a.fieldId],function(a,b){d.push(b)}),console.log(d),checkNested(c,a.fieldId)&&d.indexOf(c[a.fieldId])==-1&&isTrue++}else console.log("test"),(!checkNested(c,a.fieldId)||c[a.fieldId]!=a.val)&&isTrue++;break;case"starts with":checkNested(c,a.fieldId)&&new RegExp("^"+a.val).test(c[a.fieldId])&&isTrue++;break;case"ends with":checkNested(c,a.fieldId)&&new RegExp(a.val+"$").test(c[a.fieldId])&&isTrue++;break;case"is blank":(!checkNested(c,a.fieldId)||/^\s*$/.test(c[a.fieldId])||null==c[a.fieldId])&&isTrue++;break;case"is not blank":checkNested(c,a.fieldId)&&!/^\s*$/.test(c[a.fieldId])&&null!=c[a.fieldId]&&isTrue++;break;case"higher than":checkNested(c,a.fieldId)&&c[a.fieldId]>parseInt(a.val)&&isTrue++;break;case"lower than":checkNested(c,a.fieldId)&&c[a.fieldId]<parseInt(a.val)&&isTrue++;break;case"is during the current":var e=checkNested(a,"val2")?a.val2:"week";switch(e){case"month":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":checkNested(c,a.fieldId)&&moment().format("YY-Q")==moment(c[a.fieldId]).format("YY-Q")&&isTrue++;break;case"year":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:checkNested(c,a.fieldId)&&moment().week()==moment(c[a.fieldId]).week()&&isTrue++}break;case"is during the previous":var e=checkNested(a,"val3")?a.val3:"days",f=parseInt(checkNested(a,"val2")?a.val2:0);checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBetween(moment().subtract(f,e).startOf(e),moment().endOf(e),null,"[]")&&isTrue++;break;case"is during the next":var e=checkNested(a,"val3")?a.val3:"days",f=parseInt(checkNested(a,"val2")?a.val2:0);checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBetween(moment().startOf(e),moment().add(f,e).endOf(e),null,"[]")&&isTrue++;break;case"is before the previous":var e=checkNested(a,"val3")?a.val3:"days",f=parseInt(checkNested(a,"val2")?a.val2:0);checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBefore(moment().subtract(f,e).endOf(e),null,"[]")&&isTrue++;break;case"is before the next":var e=checkNested(a,"val3")?a.val3:"days",f=parseInt(checkNested(a,"val2")?a.val2:0);checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBefore(moment().subtract(f,e).endOf(e),null,"[]")&&isTrue++;break;case"is before":checkNested(c,a.fieldId)&&checkNested(a,"val")&&moment(c[a.fieldId]).isBefore(moment(a.val).startOf("day"))&&isTrue++;break;case"is after":checkNested(c,a.fieldId)&&checkNested(a,"val")&&moment(c[a.fieldId]).isAfter(moment(a.val).endOf("day"))&&isTrue++;break;case"is today":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue}}}}]),angular.module("app").directive("afDetail",["$rootScope","AppSetting","$state","$http","AppURL","Http","$uibModal","MsgBox","$stateParams","$filter","App","$compile",function(a,b,c,d,e,f,g,h,i,j,k,l){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div class="af-detail"><div class="alert alert-danger" ng-show="status == \'error\' && error">{{error}}</div><div ng-show="status == \'loading\'"><i class="fat fa-spin fa-circle-o-notch"></i> Loading data...</div><div ng-show="status == \'done\'"><h3 ng-if="options.settings.title != \'\'">{{options.settings.title}}</h3><div class="row" ng-if="selectRecords.length>0">Choose <select class="form-control input-sm choose-record" ng-model="recordCurrentIndex" ng-change="chooseRecord(recordCurrentIndex)"><option ng-repeat="selectRecord in selectRecords" value="{{$index}}">{{selectRecord}}</option></select></div><div class="row" ng-repeat="(rowIndex, row) in options.rows"><div class="col-md-{{col.size}}" ng-repeat="(colIndex, col) in row.cols"><div class="form-group" ng-repeat="(fieldIndex, column) in col.fields" id="field_block_{{column.slug}}" ng-show="checkFieldVisibility(column)" ng-style1="setupColumn(field)"><label ng-if="column.hideTitle != \'Yes\'">{{column.title}}</label><div ng-repeat="(itemIndex, recordItem) in items" ng-show="recordCurrentIndex == itemIndex" allow-inline-editing-for-app item="recordItem" field="column" allow-edit="options.settings.allowInlineEdit == \'Yes\' && (!column.allowInlineEdit || column.allowInlineEdit==\'Yes\')" table-id="tableId" page-id=""><af-data-table-field item="recordItem" column="column" in-display-mode="\'detail\'" update-val="recordItem.__changed" ng-click="doColumnAction(column, itemIndex, $event, rowIndex, colIndex, fieldIndex)"></af-data-table-field></div></div></div></div></div></div>',link:function(b,c,d){b.uId=checkNested(d,"uId")?d.uId:"";var e=checkNested(d.tableId)?d.tableId:0;b.tableId=e,b.options=JSON.parse(checkNested(d.options)?d.options:"{}"),b.pageId=checkNested(d,"pageId")?d.pageId:"",checkNested(b.options,"pageId")||(b.pageId=b.options.pageId),b.status="loading",b.query={columns:[]};checkNested(b.options,"rows")&&angular.forEach(b.options.rows,function(a,c){angular.forEach(a.cols,function(a,c){angular.forEach(a.fields,function(a){checkNested(a,"slug")&&a.slug&&(b.query.columns.push(a.slug),checkNested(a,"displayRules")&&angular.isObject(a.displayRules)&&angular.forEach(a.displayRules,function(a){checkNested(a,"items")&&angular.isObject(a.items)&&angular.forEach(a.items,function(a){checkNested(a,"fieldId")&&""!=a.fieldId&&b.query.columns.push(a.fieldId)})}))})})}),b.query={},checkNested(b.options,"rId")&&""!=b.options.rId?b.query.rId=b.options.rId:b.query.rId=a.App.get("recordIdFromURL"),b.checkFieldVisibility=function(a){if(checkNested(a,"type")&&"TableLink"!=a.type&&checkNested(b.options,"settings","hideEmptyField")&&"Yes"==b.options.settings.hideEmptyField){if(!checkNested(b.items,"0",a.slug)||_tb.is("null",b.items[0][a.slug]))return!1;if("Link"==a.type&&checkNested(b.items,"0",a.slug,"link")&&_tb.is("null",b.items[0][a.slug].link))return!1;if(angular.isObject(b.items[0][a.slug])&&""==_tb.joinBy(b.items[0][a.slug],""))return!1}return!0};var g=function(a,c){var d=!1;angular.forEach(b.dataFields,function(b){checkNested(a,"fieldId")&&a.fieldId==b.slug&&(d=b)}),isTrue=0;var e,f;switch(a.operator){case"is unchecked":case"is not checked":(!checkNested(c,a.fieldId)||"1"!=c[a.fieldId])&&isTrue++;break;case"is checked":case"is not unchecked":checkNested(c,a.fieldId)&&!/^\s*$/.test(c[a.fieldId])&&null!=c[a.fieldId]&&isTrue++;break;case"contains":checkNested(c,a.fieldId)&&!_tb.is("null",a.val)&&(angular.isString(c[a.fieldId])?c[a.fieldId].toLowerCase().indexOf(a.val.toLowerCase())>-1&&isTrue++:angular.isObject(c[a.fieldId])&&_tb.is("contains",a.val.toLowerCase(),c[a.fieldId])&&isTrue++);break;case"does not contain":checkNested(c,a.fieldId)&&!_tb.is("null",a.val)?angular.isString(c[a.fieldId])?c[a.fieldId].toLowerCase().indexOf(a.val.toLowerCase())==-1&&isTrue++:angular.isObject(c[a.fieldId])&&!_tb.is("contains",a.val.toLowerCase(),c[a.fieldId])&&isTrue++:isTrue++;break;case"is":if(checkNested(d,"type")&&"Date"==d.type)checkNested(c,a.fieldId)&&moment(a.val).isSame(c[a.fieldId],"day")&&isTrue++;else if(checkNested(d,"type")&&"Join"==d.type){var g=[];angular.isObject(c[a.fieldId])&&angular.forEach(c[a.fieldId],function(a,b){g.push(b)}),checkNested(c,a.fieldId)&&g.indexOf(a.val)>-1&&isTrue++}else checkNested(c,a.fieldId)&&c[a.fieldId]==a.val&&isTrue++;break;case"is not":checkNested(b.fieldType,a.fieldId)&&"Date"==b.fieldType[a.fieldId]?(!checkNested(c,a.fieldId)||!moment(a.val).isSame(c[a.fieldId],"day"))&&isTrue++:(!checkNested(c,a.fieldId)||c[a.fieldId]!=a.val)&&isTrue++;break;case"starts with":checkNested(c,a.fieldId)&&new RegExp("^"+a.val).test(c[a.fieldId])&&isTrue++;break;case"ends with":checkNested(c,a.fieldId)&&new RegExp(a.val+"$").test(c[a.fieldId])&&isTrue++;break;case"is blank":(!checkNested(c,a.fieldId)||/^\s*$/.test(c[a.fieldId])||null==c[a.fieldId]||angular.isString(c[a.fieldId])&&_tb.is("null",c[a.fieldId])||angular.isObject(c[a.fieldId])&&_tb.is("objNull",c[a.fieldId]))&&isTrue++;break;case"is not blank":checkNested(c,a.fieldId)&&!/^\s*$/.test(c[a.fieldId])&&null!=c[a.fieldId]&&isTrue++;break;case"higher than":checkNested(c,a.fieldId)&&c[a.fieldId]>parseInt(a.val)&&isTrue++;break;case"lower than":checkNested(c,a.fieldId)&&c[a.fieldId]<parseInt(a.val)&&isTrue++;break;case"is during the current":switch(e=checkNested(a,"val2")?a.val2:"week"){case"month":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":checkNested(c,a.fieldId)&&moment().format("YY-Q")==moment(c[a.fieldId]).format("YY-Q")&&isTrue++;break;case"year":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:checkNested(c,a.fieldId)&&moment().week()==moment(c[a.fieldId]).week()&&isTrue++}break;case"is during the previous":e=checkNested(a,"val3")?a.val3:"days",f=parseInt(checkNested(a,"val2")?a.val2:0),checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBetween(moment().subtract(f,e).startOf(e),moment().endOf(e),null,"[]")&&isTrue++;break;case"is during the next":e=checkNested(a,"val3")?a.val3:"days",f=parseInt(checkNested(a,"val2")?a.val2:0),checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBetween(moment().startOf(e),moment().add(f,e).endOf(e),null,"[]")&&isTrue++;break;case"is before the previous":e=checkNested(a,"val3")?a.val3:"days",f=parseInt(checkNested(a,"val2")?a.val2:0),checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBefore(moment().subtract(f,e).endOf(e),null,"[]")&&isTrue++;break;case"is before the next":e=checkNested(a,"val3")?a.val3:"days",f=parseInt(checkNested(a,"val2")?a.val2:0),checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBefore(moment().subtract(f,e).endOf(e),null,"[]")&&isTrue++;break;case"is before":checkNested(c,a.fieldId)&&checkNested(a,"val")&&moment(c[a.fieldId]).isBefore(moment(a.val).startOf("day"))&&isTrue++;break;case"is after":checkNested(c,a.fieldId)&&checkNested(a,"val")&&moment(c[a.fieldId]).isAfter(moment(a.val).endOf("day"))&&isTrue++;break;case"is today":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":checkNested(c,a.fieldId)&&moment(c[a.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue};b.assignDisplayRules=function(){if(checkNested(b.options,"displayRules")&&b.options.displayRules){var a=checkNested(b.items,0)?b.items[0]:{};angular.forEach(b.options.displayRules,function(b){var c=0;angular.forEach(b.items,function(b){c+=g(b,a)}),c&&c==b.items.length&&checkNested(b,"displayRules")&&angular.forEach(b.displayRules,function(a){switch(a.action){case"Hide":b.items.length==isTrue&&isTrue&&angular.element("#field_block_"+a.fieldId).hide(),checkNested(a,"action2")&&"Show"==a.action2&&b.items.length!=isTrue&&angular.element("#field_block_"+a.fieldId).show();break;case"Show":b.items.length==isTrue&&isTrue&&angular.element("#field_block_"+a.fieldId).show(),checkNested(a,"action2")&&"Hide"==a.action2&&b.items.length!=isTrue&&angular.element("#field_block_"+a.fieldId).hide();break;case"Show/Hide":b.items.length==isTrue&&isTrue&&angular.element("#field_block_"+a.fieldId).show(),b.items.length!=isTrue&&angular.element("#field_block_"+a.fieldId).hide();break;case"Hide/Show":b.items.length==isTrue&&isTrue&&angular.element("#field_block_"+a.fieldId).hide(),b.items.length!=isTrue&&angular.element("#field_block_"+a.fieldId).show();break;case"Rename":b.items.length==isTrue&&isTrue&&checkNested(a,"renameLabel")&&angular.element("#field_block_"+a.fieldId+" label").text(a.renameLabel)}})})}},b.record=!1,b.item={},b.refresh=0,b.recordId=a.App.get("recordIdFromURL"),b.dataFields={},b.selectRecords=[],b.items=[],b.recordCurrentIndex="0",b.chooseRecord=function(a){angular.isDefined(a)&&(b.recordCurrentIndex=a+""),b.item=b.items[b.recordCurrentIndex],b.record=b.items[b.recordCurrentIndex]},b.refreshData=function(){""!=b.uId?(b.refresh=1,a.doRootLoading(!0),f.post("g."+b.uId,b.query,function(c){a.doRootLoading(!1),"error"==c.type?(b.status="error",b.error=c.msg):(b.status="done",b.items=c.items,b.selectRecords=[],b.items.length>1&&angular.forEach(b.items,function(a,d){checkNested(c,"joinFieldSlug")&&checkNested(a,c.joinFieldSlug)&&""!=a[c.joinFieldSlug]?b.selectRecords.push(a[c.joinFieldSlug]):b.selectRecords.push("#"+(d+1))}),b.dataFields=c.dataFields,angular.forEach(b.options.rows,function(a,b){angular.forEach(a.cols,function(a,b){angular.forEach(a.fields,function(a){checkNested(c.dataFieldOptions,a.slug)&&(a.options=c.dataFieldOptions[a.slug])})})}),angular.forEach(b.dataFields,function(a,b){a.fieldId=a.id}),setTimeout(function(){b.assignDisplayRules()},10))},function(c,d){b.status="error",a.doRootLoading(!1),b.error=checkNested(c,"msg")?c.msg:""},!0)):(b.refresh=0,b.status="error",b.err="Data table not found.")},b.refreshData(),k.registerDataChange("form_add_record",function(c,d){checkNested(d,"tableId")&&(d.tableId==b.tableId||a.App.is("relatedTable",{t1:b.tableId,t2:d.tableId}))&&b.refreshData()}),b.fieldValue=function(a){if(checkNested(a,"fieldId")){checkNested(b.record,a.slug)&&null===b.record[a.slug]&&(b.record[a.slug]="");var c="",d=[],e=!!checkNested(b.dataFields,a.slug)&&b.dataFields[a.slug];switch(a.type){case"Link":var f=checkNested(b.record,a.slug)?b.record[a.slug]:"";checkNested(f,"link")&&(c+='<a href="'+f.link+'" ',checkNested(a,"options","openInNewWindow")&&"Yes"==a.options.openInNewWindow&&(c+='target="_blank"'),c+=">",c+=checkNested(a,"options","linkFormat")?"same_text"===a.options.linkFormat&&checkNested(a,"options","linkText")?a.options.linkText:"unique"===a.options.linkFormat?f.text:f.link:f.link,c+="</a>");break;case"Image":var f=checkNested(b.record,a.slug)?b.record[a.slug]:"";if(checkNested(f,"src")){var g="";checkNested(a,"sizeType")&&"custom"==a.sizeType&&(checkNested(a,"width")&&(g+='width="'+a.width+'px"'),checkNested(a,"height")&&(g+='height="'+a.height+'px"')),c='<img src="'+f.src+'" class="'+(checkNested(a,"isResponsive")&&"No"==a.isResponsive?"":"img-responsive")+'" '+g+"   />"}break;case"Date":if(c=checkNested(b.record,a.slug)?b.record[a.slug]:"",""!=c){var h=new Date(c);c=c?j("date")(h,k.getSetting("dateFormat")):""}break;case"Address1":d=[],$joinFields=["address","address2","city","state","country","zip"];for(var i in $joinFields){var l=$joinFields[i];checkNested(b.record,a.slug,l)&&d.push(b.record[a.slug][l])}c=d.length?d.join(" ")+".":"-";break;case"Name1":d=[],$joinFields=["_first_name","_middle_name","_last_name"];for(var i in $joinFields){var l=$joinFields[i];checkNested(b.record,a.slug+l)&&d.push(b.record[a.slug+l])}c=d.length?d.join(" "):"-";break;case"Currency":c=checkNested(b.record,a.slug)?b.record[a.slug]:"",""!==c&&checkNested(b.dataFields,a.slug)&&("Suffix"===b.dataFields[a.slug].currency_format?c+=b.dataFields[a.slug].currency_symbol:c=b.dataFields[a.slug].currency_symbol+c);break;case"Phone":f=checkNested(b.record,a.slug)?b.record[a.slug]:"",c=checkNested(e,"phone_format")&&""!=f&&f?j("mask")(f,e.phone_format):f,checkNested(a,"displayAs")&&"Link"===a.displayAs&&f&&(c='<a href="tel:'+f+'">'+c+"</a>");break;default:c=checkNested(b.record,a.slug)?b.record[a.slug]:""}if(angular.isArray(c))c=c.join(", ");else if(angular.isObject(c)){var l,d=[];for(l in c)angular.isString(c[l])&&d.push(c[l]);return d.join(", ")}return c||"&nbsp;"}},b.columnStyle=function(a,b,c){console.log(g);var d={};return checkNested(b,"displayRules")&&b.displayRules&&angular.forEach(b.displayRules,function(c){if(checkNested(c,"items")&&c.items.length>0){var e=0;if(angular.forEach(c.items,function(b){e+=g(b,a)}),e&&e==c.items.length)switch(c.action){case"textColor":d.color=c.color;break;case"textStyle":checkNested(c,"textBold")&&c.textBold&&(d.fontWeight="900"),checkNested(c,"textItalic")&&c.textItalic&&(d.fontStyle="italic"),checkNested(c,"textStrikethrough")&&c.textStrikethrough&&(d.textDecoration="line-through");break;case"bkColor":d.backgroundColor=c.color;break;case"hideValue":d.display="none";break;case"icon":checkNested(a,b.fieldId)}}}),d},b.doColumnAction=function(a,c,d,g,i,j){var k=a.name;switch(k){case"Action":if(angular.element(d.target).hasClass("disabled"))return;angular.element(d.target).addClass("disabled");var l="g."+b.uId+".actions."+g+"_"+i+"_"+j,m={rId:b.items[c].id};checkNested(a,"coords")&&(m.coords=b.coords),f.post(l,m,function(a){if("success"==a.type&&(b.refreshData(),checkNested(a,"msg"))){var c=angular.isArray(a.msg)?a.msg.join("<br/>"):a.msg;h.show(c,"success")}angular.element(d.target).removeClass("disabled")},function(a,b){angular.element(d.target).removeClass("disabled")});break;case"Delete":b.items[c].loading=!0,confirm("Are you sure to delete this record?")?f["delete"]("data-table."+e+".delete."+b.items[c].id,{},function(a){h.show(a.msg,a.type,"Record Delete"),"success"==a.type&&b.items.splice(c,1)},function(a,d){h.show("Record not found","error","Record Delete"),b.items[c].loading=!1}):b.items[c].loading=!1}}}}}]),angular.module("app").directive("afExport",["$rootScope","AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox",function(a,b,c,d,e,f,g,h,i){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div class="af-import-component"><h3 ng-if="opt.settings.tableTitle != \'\'">{{opt.settings.title}}</h3><div class="desc" ng-if="opt.settings.desc">{{opt.settings.desc}}</div><div class="notify-con" ng-if="dataTableNotification"><div class="t2"><i class="{{dataTableNotification.lc}}"></i>  {{dataTableNotification.t1}}</div><div class="con" ng-if="dataTableNotification.con1">{{dataTableNotification.con1}}</div><div class="con" ng-if="dataTableNotification.con2">{{dataTableNotification.con2}}</div></div><div class="notify-con" ng-if="dataTableNotificationFinal"><div class="t2"><i class="{{dataTableNotificationFinal.lc}}"></i>  {{dataTableNotificationFinal.t1}}</div><div class="con" ng-if="dataTableNotificationFinal.con1">{{dataTableNotificationFinal.con1}}</div><div class="con" ng-if="dataTableNotificationFinal.con2">{{dataTableNotificationFinal.con2}}</div></div><div class="con"><button class="btn btn-info btn-sm btn-block no-print" ng-click="openExport()" ng-disabled="dataTableNotification">{{opt.settings.exportBtnText}}</button></div></div>',link:function(a,b,c){var d=checkNested(c.tableId)?c.tableId:0;a.opt=options=JSON.parse(checkNested(c.options)?c.options:"{}"),checkNested(a.opt,"settings")||(a.opt.settings={}),checkNested(a.opt.settings,"matching")||(a.opt.settings.matching="Disable"),a.uId=checkNested(c,"uId")?c.uId:"",a.dataTableNotification={lc:"far fa-spin fa-spinner",t1:"Importing Records",con1:"62% Complete",con2:"Records processed: 10/100"},a.dataTableNotification=!1,a.dataTableNotificationFinal=!1,a.checkDataTableNotification=function(b){var c={};c.loadNotification="1",angular.isDefined(b)&&(c.ids=b),g.postWithUpload("g."+a.uId,c,function(c){"success"==c.type?c.reload?(a.dataTableNotification=c.notification,setTimeout(function(){a.checkDataTableNotification(b)},500)):(a.dataTableNotificationFinal=c.notification,a.dataTableNotification=!1):a.dataTableNotification=!1})},a.openExport=function(){var b=h.open({backdrop:"static",keyboard:!1,size:"lg",controller:"exportsModalCtrl",templateUrl:"assets/app/blocks/exports-modal.html",resolve:{data:function(){return{uId:a.uId,tableId:d,exportOptions:a.opt
}}}});b.result.then(function(b){checkNested(b,"loadNotification")&&b.loadNotification&&a.checkDataTableNotification(b.id),checkNested(b,"updated")&&checkNested(b,"element","filters")&&(a.query.filters.filters3=b.element.filters,a.refreshData())},function(){})}}}}]),angular.module("app").directive("afForm",["$rootScope","AppSetting","$state","$http","AppURL","Http","$uibModal","MsgBox","$stateParams","$timeout","$location","App","CommonFactory","GeoLocation",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return{restrict:"AE",scope:{fields:"@",onSaved:"&"},template:'<div class="af-form"><div class="alert alert-danger" ng-show="mode == \'error\'"><span ng-bind-html="error | unsafe"></span></div><div ng-show="mode == \'loading\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading data...</div><div ng-show="mode == \'done\'"><form ng-enter="saveRecord()"><h3 ng-if="options.settings.formTitle != \'\'">{{options.settings.formTitle}}</h3><div class="row" ng-repeat="row in options.rows"><div class="ctrl-col col-md-{{col.size}}" ng-repeat="col in row.cols"><div class="field-wrap" ng-repeat="field in col.fields" ng-if="field.__found"><div class="field-section-break" ng-if="field.type == \'_special_\'"><h3 class="field-title">{{field.title}}</h3><div class="field-description" ng-bind-html="field.instruction | unsafe"></div></div><div class="form-group" id="field_block_{{field.slug}}" data-field-slug="{{field.slug}}" ng-if="field.type != \'_special_\'"><label class="control-label" for="field{{field.id}}" ng-style="labelStyle(field)" ng-show="(field.type != \'Decision Box\' || field.options.inputType != \'Checkbox\')" ng-if="showAtLabelTop(field)"><i class="{{field.lblIcon}}" ng-if="field.lblIcon"></i> <span class="lbl">{{field.title}} </span>  <span class="required" ng-show="field.required == \'Yes\' || field.isRequire == \'Yes\'">*</span> </label><div ng-if="onlyReadField(field)"><af-data-table-field item="record" column="field" columns="fields" update-val="record[field.slug]" in-display-mode="\'form\'"></af-data-table-field></div><div ng-if="!onlyReadField(field)"><input name="field{{field.id}}" id="field{{field.id}}" class="form-control" type="text" ng-model="record[field.slug]" required ng-required="field.isRequired == \'Yes\'" ng-if="field.type == \'Text\' && (!field.isPassword || field.isPassword ==\'No\')" maxlength="{{allowLength(field)}}" placeholder="{{field.options.placeholder}}" ng-disabled="ctrlDisabled(field)"/><input name="field{{field.id}}" id="field{{field.id}}" class="form-control" type="password" ng-model="record[field.slug]" required ng-required="field.isRequired == \'Yes\'" ng-if="field.type == \'Text\' && field.isPassword == \'Yes\'" maxlength="{{allowLength(field)}}" placeholder="{{field.options.placeholder}}" ng-disabled="ctrlDisabled(field)"/><div ng-if="field.type == \'Text\' && field.isPassword == \'Yes\'"><span class="small-label">Password</span><input name="field{{field.id}}" id="field_con{{field.id}}" class="form-control" type="password" required ng-required="field.isRequired == \'Yes\'" maxlength="{{allowLength(field)}}" placeholder="Please confirm password" ng-disabled="ctrlDisabled(field)"/><span class="small-label">Confirm Password</span></div> <input name="field{{field.id}}" id="field_{{field.slug}}" class="form-control" type="number" ng-model="record[field.slug]" required ng-required="field.isRequired == \'Yes\'" ng-if="field.type == \'Number\'" maxlength="{{allowLength(field)}}" placeholder="{{field.options.placeholder}}" ng-disabled="ctrlDisabled(field)"/><textarea name="field{{field.id}}" id="field{{field.id}}" class="form-control" ng-model="record[field.slug]" required ng-required="field.isRequired == \'Yes\'" ng-if="field.type == \'Long Text\'" placeholder="{{field.options.placeholder}}" ng-disabled="ctrlDisabled(field)" style="height: {{field.inputHeight || \'100\'}}px" ng-enter-stop></textarea><textarea ui-tinymce="tinymceOptions" name="field{{field.slug}}" class="form-control1" ng-model="record[field.slug]" required ng-required="field.isRequired == \'Yes\'" ng-if="field.type == \'Rich Text\'"  placeholder="{{field.options.placeholder}}" ng-disabled="ctrlDisabled(field)" style="height: {{field.inputHeight || \'150\'}}px"  ng-enter-stop></textarea><div class="input-group" ng-if="field.type == \'Currency\'"><div class="input-group-addon" ng-if="field.options.currencyFormat== \'Prefix\'">{{field.options.currencySymbol}}</div><input name="field{{field.id}}" id="field{{field.id}}" class="form-control" type="text" ng-model="record[field.slug]" required ng-required="field.isRequired == \'Yes\'" placeholder="{{field.options.placeholder}}" ng-disabled="ctrlDisabled(field)" /><div class="input-group-addon" ng-if="field.options.currencyFormat == \'Suffix\'">{{field.options.currencySymbol}}</div></div><select name="field{{field.id}}" id="field{{field.id}}" class="form-control" ng-model="record[field.slug]" required ng-required="field.isRequired == \'Yes\'" ng-if="field.type == \'Select\'" ng-disabled="ctrlDisabled(field)"><option value="">{{field.options.noValueText}}</option><option ng-repeat="option in field.options.options" value="{{option.text}}" ng-if="field.options.allowDiffVal != \'1\'">{{option.text}}</option><option ng-repeat="option in field.options.options" value="{{option.val}}" ng-if="field.options.allowDiffVal != \'0\'">{{option.text}}</option></select><select name="field{{field.id}}" id="field{{field.id}}" class="form-control" ng-model="record[field.slug]" multiple required ng-required="field.isRequired == \'Yes\'" ng-if="field.type == \'Multi-Select\'" ng-disabled="ctrlDisabled(field)"><option ng-repeat="option in field.options.options" value="{{option.text}}" ng-if="field.options.allowDiffVal != \'1\'">{{option.text}}</option><option ng-repeat="option in field.options.options" value="{{option.val}}" ng-if="field.options.allowDiffVal != \'0\'">{{option.text}}</option><option ng-repeat="option in field.options.options" value="{{option.val}}" ng-if="field.options.allowDiffVal != \'0\'">{{option.text}}</option></select><div class="inline" ng-if="field.type == \'Date\'"><hit-date-time-picker date-time="record[field.slug]" type="field.type" options=\'{"enableTime":false}\' changed="" ng-disabled="ctrlDisabled(field)"></hit-date-time-picker></div><div class="inline" ng-if="field.type == \'Time\'"><hit-date-time-picker date-time="record[field.slug]" type="field.type" options=\'{"enableDate":false}\' ng-disabled="ctrlDisabled(field)"></hit-date-time-picker></div><div class="inline" ng-if="field.type == \'Date/Time\'"><hit-date-time-picker date-time="record[field.slug]" type="field.type" options=\'{}\' ng-disabled="ctrlDisabled(field)"></hit-date-time-picker></div><div class="inline" ng-if="field.type == \'Calendar\'"><hit-field-calendar record="record" slug="field.slug" column="field" range-date="field.options.rangeDate" ng-disabled="ctrlDisabled(field)"></hit-field-calendar></div><div class="inline" ng-if="field.type == \'Image\'"><xctrl-file-cloudinary2 element="record[field.slug]" client="getClientName()" on-img-select="imgSelect()" ng-disabled="ctrlDisabled(field)"></xctrl-file-cloudinary2></div><div class="inline" ng-if="field.type == \'File\'"><hit-only-file-upload file-type="file" file="record[field.slug]" ng-disabled="ctrlDisabled(field)"></hit-only-file-upload></div><div ng-if="field.type == \'Checkbox\'" class="field-label-pos-{{field.optionLblPosition}}"  ng-class="{\'tb-checkbox-inline\': field.formatView != \'Separate Line\', \'tb-checkbox-outline\': field.formatView == \'Separate Line\'}"><ctrl-checkboxes ng-model="record[field.slug]" field="field" disabled="ctrlDisabled(field)"></ctrl-checkboxes></div><div ng-if="field.type == \'Radio\' && (!field.optionLblPosition || field.optionLblPosition== \'Right\' || field.optionLblPosition== \'Bottom\' || field.optionLblPosition== \'Hide\')" ng-class="{\'tb-checkbox-inline\': field.formatView != \'Separate Line\', \'tb-checkbox-outline\': field.formatView == \'Separate Line\'}"><label class="text-center tb-radio" ng-repeat="option in field.options.options" ng-class="{\'radio-icon-btn\': option.iconClass && field.showIcon == \'Yes\', \'selected\': record[field.slug]==(field.options.allowDiffVal == \'1\'?option.val:option.text)}"><input type="radio" ng-model="record[field.slug]" name="field{{field.slug}}" value="{{option.text}}" ng-if="field.options.allowDiffVal != \'1\'" ng-disabled="ctrlDisabled(field)"/><input type="radio" ng-model="record[field.slug]" name="field{{field.slug}}" value="{{option.val}}" ng-if="field.options.allowDiffVal != \'0\'" ng-disabled="ctrlDisabled(field)"/><i class="fal fa-{{option.iconClass}} fa-{{field.iconSize}} font-dark" ng-if="option.iconClass && field.showIcon == \'Yes\'"></i><br ng-if="field.optionLblPosition== \'Bottom\'"/> <span ng-if="field.optionLblPosition!= \'Hide\'">{{option.text}}</span></label></div><div ng-if="field.type == \'Radio\' && (field.optionLblPosition== \'Left\' || field.optionLblPosition== \'Top\')" ng-class="{\'tb-checkbox-inline\': field.formatView != \'Separate Line\', \'tb-checkbox-outline\': field.formatView == \'Separate Line\'}"><label class="tb-radio text-center" ng-repeat="option in field.options.options" ng-class="{\'radio-icon-btn\': option.iconClass && field.showIcon == \'Yes\', \'selected\': record[field.slug]==(field.options.allowDiffVal == \'1\'?option.val:option.text)}"><span>{{option.text}}</span> <br ng-if="field.optionLblPosition== \'Top\'"/><input type="radio" ng-model="record[field.slug]" name="field{{field.slug}}" value="{{option.text}}" ng-if="field.options.allowDiffVal != \'1\'" ng-disabled="ctrlDisabled(field)"/><input type="radio" ng-model="record[field.slug]" name="field{{field.slug}}" value="{{option.val}}" ng-if="field.options.allowDiffVal != \'0\'" ng-disabled="ctrlDisabled(field)"/><i class="fal fa-{{option.iconClass}} fa-{{field.iconSize}} font-dark" ng-if="option.iconClass && field.showIcon == \'Yes\'"></i></label></div><div ng-if="field.type == \'Signature\'" ><ctrl-sign record="record" field="field" disabled="ctrlDisabled(field)"></ctrl-sign></div><div class="tb-checkbox-inline" ng-if="field.type == \'Decision Box\' && field.options.inputType == \'Checkbox\'"><label class="tb-checkbox" ng-style="labelStyle(field)"><input type="checkbox" ng-model="record[field.slug]" ng-required="false" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-disabled="ctrlDisabled(field)"> {{field.options.label}}<span></span></label></div><div ng-if="field.type == \'Decision Box\' && field.options.inputType == \'Drop-down\'"><select name="field{{field.id}}" id="field{{field.id}}" class="form-control" ng-model="record[field.slug]" ng-required="false" ng-disabled="ctrlDisabled(field)"><option value="1">{{field.options.labels[0]}}</option><option value="0">{{field.options.labels[1]}}</option></select></div><div class="tb-checkbox-outline" ng-if="field.type == \'Decision Box\' && field.options.inputType == \'Radio Buttons\'"><label class="tb-radio"><input type="radio" ng-model="record[field.slug]" ng-required="false" value="1" ng-disabled="ctrlDisabled(field)"> {{field.options.labels[0]}}<span></span></label><label class="tb-radio"><input type="radio" ng-model="record[field.slug]" ng-required="false" value="0" ng-disabled="ctrlDisabled(field)"> {{field.options.labels[1]}}<span></span></label></div><div ng-if="field.type == \'Join\' && field.options.joinType == \'One-to-One\'" ng-class="{\'has-add-new-one\': field.page.id}"><ctrl-ui-select2 ng-model="record[field.slug]" params="{}" field="field" changes="field.changes" ng-disabled="ctrlDisabled(field)" on-change-val="changeJoinFieldVal(field, val)"></ctrl-ui-select2><button class="btn btn-add-new-option btn-sm btn-primary" ng-if="field.page.id" ng-click="addNewRecord(field)"><i class="far fa-plus"></i></button></div><div ng-if="field.type == \'Join\' && field.options.joinType==\'One-to-Many\'"><ctrl-ui-select2 ng-model="record[field.slug]" params="{}" multiple="1" field="field" changes="field.changes" ng-disabled="ctrlDisabled(field)"></ctrl-ui-select2><button class="btn btn-sm btn-primary" ng-if="field.page.id" ng-click="addNewRecord(field)"><i class="far fa-plus"></i></button></div><div class="field-name" ng-if="field.type == \'Name\'"><table border="0"><tr><td ng-repeat="fieldItem in field.options.formFieldDisplay"><select class="form-control field-name-title" ng-if="fieldItem.key == \'title\'" ng-model="record[field.slug].title" ng-disabled="ctrlDisabled(field)"><option value="">None</option><option value="Ms.">Ms.</option><option value="Miss">Miss</option><option value="Mr.">Mr.</option><option value="Mrs.">Mrs.</option><option value="Dr.">Dr.</option><option value="Prof.">Prof.</option></select><input class="form-control field-first-name" type="text" ng-model="record[field.slug].first_name" ng-if="fieldItem.key == \'first_name\'" placeholder1="Enter First Name" ng-disabled="ctrlDisabled(field)"/><input class="form-control field-middle-name" type="text" ng-model="record[field.slug].middle_name" ng-if="fieldItem.key == \'middle_name\'" placeholder1="Enter Middle Name" ng-disabled="ctrlDisabled(field)"/><input class="form-control field-last-name" type="text" ng-model="record[field.slug].last_name" ng-if="fieldItem.key == \'last_name\'" placeholder1="Enter Last Name" ng-disabled="ctrlDisabled(field)"/><label class="field-name-label">{{fieldItem.name}}</label></td></tr></table></div><div class="field-address" ng-if="field.type == \'Address\'"><div class="row"><div class="col-md-12" ng-repeat="fieldItem in field.options.formFieldDisplay" ng-class="{\'col-md-6\': fieldItem.key == \'country\' || fieldItem.key == \'zip\' || fieldItem.key == \'lat\' || fieldItem.key == \'lng\'}"><label class="field-address-label" ng-if="fieldItem.key != \'address\'">{{fieldItem.name}}</label><input class="form-control field-{{key}}" type="text" ng-model="record[field.slug][fieldItem.key]" placeholder="Please enter {{fieldItem.name}}" ng-disabled="ctrlDisabled(field)" google-auto-complete google-auto-complete-if="{{fieldItem.key == \'address\'}}" is-address-field="true" address-field="field" address-model="record[field.slug]" data-sub-field-slug="{{fieldItem.key}}"/></div></div><div class="m-t" ng-if="field.getCurValBtn == \'Yes\'"><button class="btn btn-xs btn-default m-r" ng-click="fetchCurAdd(field)"><i class="fa fa-map-marker-alt"></i> Current Location</button></div></div><input name="field{{field.id}}" id="field{{field.id}}" class="form-control" type="text" ng-model="record[field.slug]" required ng-required="field.isRequired == \'Yes\'" ng-if="field.type == \'Phone\'" placeholder="{{field.options.placeholder}}" ui-mask="{{field.options.phoneFormat}}" ng-disabled="ctrlDisabled(field)"/><input name="field{{field.id}}" id="field{{field.id}}" class="form-control" type="email" ng-model="record[field.slug]" required ng-required="field.isRequired == \'Yes\'" ng-if="field.type == \'Email\'" placeholder="{{field.options.placeholder}}" ng-disabled="ctrlDisabled(field)"/><div class="field-link" ng-if="field.type == \'Link\'"><input class="form-control field-link" type="text" ng-model="record[field.slug].link" ng-disabled="ctrlDisabled(field)"/><label class="field-link-label" ng-if="field.options.linkFormat == \'unique\'">Link URL</label><input class="form-control field-link" type="text" ng-model="record[field.slug].text" ng-if="field.options.linkFormat == \'unique\'" ng-disabled="ctrlDisabled(field)"/><label class="field-link-label" ng-if="field.options.linkFormat == \'unique\'">Link Text</label></div><div class="field-link" ng-if="field.type == \'Rating\'"><ng-rate-it ng-model="record[field.slug]" min="0" max="field.options.numberOfStar" step="1" resetable="field.options.allowReset == \'Yes\'" read-only="ctrlDisabled(field)"></ng-rate-it></div><div class="field-slider" ng-if="field.type == \'Slider\'"><rzslider rz-slider-model="record[field.slug]" rz-slider-options="rzSliderOption(field)" disabled="ctrlDisabled(field)"></rzslider></div></div><label class="control-label" for="field_{{field.slug}}" ng-style="labelStyle(field)" ng-show="(field.type != \'Decision Box\' || field.options.inputType != \'Checkbox\')" ng-if="showAtLabelBottom(field)">{{field.title}}  <span class="required" ng-show="field.required == \'Yes\' || field.isRequire == \'Yes\'">*</span></label><div class="help-block" ng-if="field.help">{{field.help}}</div></div></div></div></div><div class="form-submit row"><div class="col-md-12"><button class="btn btn-success af-form-submit" type="button" ng-click="saveRecord()" ng-disabled="options.settings.submitBtnStatus == \'Disable\' || recordSave == \'saving\'" ng-style="submitBtnStyle(record)" data-default="{{options.settings.submitText || \'Save\'}}"><i class="far fa-check"></i> <span>{{options.settings.submitText || \'Save\'}}</span></button></div></div><div class="col-md-12 form-process-message" ng-show="recordSave == \'error\'"><div class="alert alert-danger row" ng-bind-html="msg | unsafe"></div></div><div class="col-md-12 form-process-message" ng-show="recordSave == \'success\'"><div class="alert alert-success row" ng-bind-html="msg | unsafe"></div></div><div class="td-back-link hide" ng-if="!options.isOpenModal && options.settings.hideBackLink == \'No\'"><a af-parent-page-link page-id="{{options.pageId}}"></a></div></form></div></div>',link:function(d,l,m){d.options=JSON.parse(checkNested(m.options)?m.options:"{}");var o=checkNested(d,"$parent","$parent","closeModal"),p=!1;o&&(p=d.$parent.$parent),d.uId=checkNested(m,"uId")?m.uId:"";var q=checkNested(m.tableId)?m.tableId:0;d.tableId=q;var r=angular.element(".af-form-submit",l);j(function(){d.$broadcast("rzSliderForceRender")}),d.isAlreadyLogin=a.App.get("isAppUserLogin");var s=function(a,b){angular.forEach(d.fields,function(c){checkNested(c,"tableType")&&"Join"==c.tableType&&checkNested(c,"join","fieldId")&&c.join.fieldId==a&&(angular.isObject(d.record)||(d.record={}),d.record[c.slug]=angular.isDefined(b)&&checkNested(b,c.slug)?b[c.slug]:"")})};d.changeJoinFieldVal=function(a,b,c){if(b&&(c||checkNested(a,"type")&&"Join"==a.type&&checkNested(a,"slug")&&checkNested(d.fields,a.slug))){var e=[];angular.forEach(d.fields,function(b){checkNested(b,"tableType")&&"Join"==b.tableType&&checkNested(b,"join","fieldId")&&b.join.fieldId==a.id&&e.push(b)}),(e.length||c)&&(!angular.isString(b)&&""==_tb.joinBy(b,"")||angular.isString(b)&&""==b?s(a.id):f.post("g."+d.uId,{__cmode:"loadJoinVal",fieldId:a.id,fieldVal:b},function(b){"error"==b.type?s(a.id):s(a.id,b.record)},function(b,c){s(a.id)}))}},d.fetchCurAdd=function(a){n.getCurrentPosition().then(function(b){angular.isDefined(b)&&angular.isDefined(b.coords)&&angular.isDefined(b.coords.latitude)&&angular.isDefined(b.coords.longitude)&&(checkNested(d.record,a.slug)||(d.record[a.slug]={}),d.record[a.slug].lng=b.coords.longitude,d.record[a.slug].lat=b.coords.latitude,jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug=lng]',l).val(b.coords.longitude),jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug=lat]',l).val(b.coords.latitude),n.fetchAddFromLatLng(d.record[a.slug].lat,d.record[a.slug].lng).then(function(b){if(checkNested(b,"address_components")){var c={route1:"address2",locality:"city",administrative_area_level_1:"state",country:"country",postal_code:"zip"},e={administrative_area_level_2:"city"},f={street_number:"address",route:"address"};angular.forEach(b.address_components,function(b){checkNested(b,"types")&&angular.forEach(c,function(c,e){jQuery.inArray(e,b.types)>-1&&(d.record[a.slug][c]=b.long_name,jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug='+c+"]",l).val(b.long_name))})}),angular.forEach(b.address_components,function(b){checkNested(b,"types")&&angular.forEach(e,function(c,e){jQuery.inArray(e,b.types)>-1&&(checkNested(d.record,a.slug,c)&&""!=d.record[a.slug][c]||(d.record[a.slug][c]=b.long_name,jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug='+c+"]",l).val(b.long_name)))})});var g=[];for(addressType in f)for(var h=0;h<b.address_components.length;h++)checkNested(b.address_components[h],"types","0")&&addressType==b.address_components[h].types[0]&&checkNested(b.address_components[h],"long_name")&&g.push(b.address_components[h].long_name);g.length>0?(g=g.join(" "),jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug=address]',l).val(g),d.record[a.slug].address=g):(jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug=address]',l).val(""),d.record[a.slug].address="")}},function(a){}))},function(a){h.show("Unable to fetch your location","error")})},d.coords={},j(function(){checkNested(d.options,"coords")&&n.getCurrentPosition().then(function(a){angular.isDefined(a)&&angular.isDefined(a.coords)&&angular.isDefined(a.coords.latitude)&&angular.isDefined(a.coords.longitude)&&(d.coords.lng=a.coords.longitude,d.coords.lat=a.coords.latitude)},function(){})},10),d.fetchYourAdd=function(a){n.getCurrentPosition().then(function(b){angular.isDefined(b)&&angular.isDefined(b.coords)&&angular.isDefined(b.coords.latitude)&&angular.isDefined(b.coords.longitude)&&(checkNested(d.record,a.slug)||(d.record[a.slug]={}),d.record[a.slug].lng=b.coords.longitude,d.record[a.slug].lat=b.coords.latitude,jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug=lng]',l).val(b.coords.longitude),jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug=lat]',l).val(b.coords.latitude))},function(a){})},d.fetchAdd=function(a){checkNested(d.record,a.slug,"lng")&&checkNested(d.record,a.slug,"lat")&&!_tb.is("null",d.record[a.slug].lat)&&!_tb.is("null",d.record[a.slug].lng)&&n.fetchAddFromLatLng(d.record[a.slug].lat,d.record[a.slug].lng).then(function(b){if(checkNested(b,"address_components")){console.log(b);var c={street_number:"address",route:"address2",locality:"city",administrative_area_level_1:"state",country:"country",postal_code:"zip"};angular.forEach(b.address_components,function(b){checkNested(b,"types")&&angular.forEach(c,function(c,e){jQuery.inArray(e,b.types)>-1&&(d.record[a.slug][c]=b.long_name,jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug='+c+"]",l).val(b.long_name))})})}},function(a){})},d.fetchLatLng=function(a){var b=[];checkNested(d.record,a.slug)&&angular.forEach(d.record[a.slug],function(a,c){"lat"!=c&&"lng"!=c&&b.push(a)}),b=b.join(","),""!=b&&n.fetchLatLngFromAdd(b).then(function(b){checkNested(b,"geometry","location")&&(checkNested(d.record,a.slug)||(d.record[a.slug]={}),d.record[a.slug].lng=b.geometry.location.lng(),d.record[a.slug].lat=b.geometry.location.lat(),jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug=lng]',l).val(b.geometry.location.lng()),jQuery('[data-field-slug="'+a.slug+'"] [data-sub-field-slug=lat]',l).val(b.geometry.location.lat()))},function(a){})},d.rzSliderOption=function(a){var b={floor:0,ceil:100};return b.disabled=!1,checkNested(a,"options","minVal")&&checkNested(a,"options","maxVal")&&(b.floor=parseInt(a.options.minVal),b.ceil=parseInt(a.options.maxVal)),checkNested(a,"isDisable")&&(b.disabled="Yes"==a.isDisable),b},d.readyFile=function(a){angular.isObject(a)&&(a._type="file")},d.allowLength=function(a){var b="";return checkNested(a,"options","maxChar")?b=a.options.maxChar:checkNested(a,"options","maxLength")&&(b=a.options.maxLength),b},d.getClientName=function(){return e.domain},d.ctrlDisabled=function(a){return!!checkNested(a,"isDisable")&&"Yes"==a.isDisable},d.getFieldValue=function(a,b){return[{id:1,text:"one"},{id:2,text:"two"}]},d.labelStyle=function(a){var b={};return checkNested(a,"lblTextBold")&&!a.lblTextBold||(b.fontWeight="bold"),checkNested(a,"lblTextItalic")&&a.lblTextItalic&&(b.fontStyle="italic"),checkNested(a,"lblTextStrikethrough")&&a.lblTextStrikethrough&&(b.textDecoration="line-through"),checkNested(a,"lblTextColor")&&""!=a.lblTextColor&&(b.color=a.lblTextColor),checkNested(a,"lblTextSize")&&("Smaller"==a.lblTextSize?b.fontSize="10px":"Large"==a.lblTextSize&&(b.fontSize="18px")),b},d.loadFieldOptions=function(a,b){if(b=checkNested(b,"0")?b[0]:"",""==jQuery.trim(b))d.fields[a.fieldSlug].options.options={};else if(checkNested(a.options,b))d.fields[a.fieldSlug].options.options=angular.copy(a.options[b]);else{var c=angular.copy(a);c.value=b,delete c.options,f.post("data-table."+q+".form."+d.recordId+".load-options."+(new Date).getTime(),c,function(c){"error"==c.type||(a.options[b]=c.items,d.fields[a.fieldSlug].options.options=angular.copy(c.items))},function(a,b){})}},d.assignDisplayRules=function(){(checkNested(d.options,"displayRules")&&d.options.displayRules||d.connectedJoinFieldQuery.length>0)&&d.$watch("record",function(a,b){angular.forEach(a,function(a,c){(!checkNested(b,c)||angular.isObject(a)&&angular.equals(a,b)||a!=b[c])&&angular.forEach(d.connectedJoinFieldQuery,function(b){var e=b.join.split("-");c==e[0]&&d.loadFieldOptions(b,a)})}),angular.forEach(d.options.displayRules,function(b){var c=0;angular.forEach(b.items,function(b){var e="",f=!1;switch(checkNested(a,b.fieldId)&&(f=!0,angular.isArray(a[b.fieldId])||angular.isObject(a[b.fieldId])?e=_tb.joinBy(a[b.fieldId]," "):angular.isString(a[b.fieldId])&&(e=a[b.fieldId])),checkNested(b,"val")&&angular.isNumber(b.val)&&(b.val+=""),b.operator){case"contains":checkNested(a,b.fieldId)&&!_tb.is("null",b.val)&&(angular.isString(a[b.fieldId])?a[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())>-1&&c++:angular.isObject(a[b.fieldId])&&_tb.is("contains",b.val.toLowerCase(),a[b.fieldId])&&c++);break;case"does not contain":checkNested(a,b.fieldId)&&!_tb.is("null",b.val)?angular.isString(a[b.fieldId])?a[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())==-1&&c++:angular.isObject(a[b.fieldId])&&!_tb.is("contains",b.val.toLowerCase(),a[b.fieldId])&&c++:c++;break;case"is":"Date"==d.fieldType[b.fieldId]?checkNested(a,b.fieldId)&&moment(b.val).isSame(a[b.fieldId],"day")&&c++:"Join"==d.fieldType[b.fieldId]?checkNested(a,b.fieldId)&&countTotalKeys(a[b.fieldId])>0&&a[b.fieldId][0]==b.val&&c++:f&&e.toLowerCase()==b.val.toLowerCase()&&c++;break;case"is not":"Date"==d.fieldType[b.fieldId]?(!checkNested(a,b.fieldId)||!moment(b.val).isSame(a[b.fieldId],"day"))&&c++:(!f||e.toLowerCase()!=b.val.toLowerCase())&&c++;break;case"starts with":checkNested(a,b.fieldId)&&new RegExp("^"+b.val.toLowerCase()).test(a[b.fieldId].toLowerCase())&&c++;break;case"ends with":checkNested(a,b.fieldId)&&new RegExp(b.val.toLowerCase()+"$").test(a[b.fieldId].toLowerCase())&&c++;break;case"is blank":(!checkNested(a,b.fieldId)||/^\s*$/.test(a[b.fieldId])||null==a[b.fieldId])&&c++;break;case"is not blank":checkNested(a,b.fieldId)&&!/^\s*$/.test(a[b.fieldId])&&null!=a[b.fieldId]&&c++;break;case"higher than":checkNested(a,b.fieldId)&&a[b.fieldId]>parseInt(b.val)&&c++;break;case"lower than":checkNested(a,b.fieldId)&&a[b.fieldId]<parseInt(b.val)&&c++;break;case"is during the current":var g=checkNested(b,"val2")?b.val2:"week";switch(g){case"month":checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isSame(moment(),"month")&&c++;break;case"quarter":checkNested(a,b.fieldId)&&moment().format("YY-Q")==moment(a[b.fieldId]).format("YY-Q")&&c++;break;case"year":checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isSame(moment(),"year")&&c++;break;default:checkNested(a,b.fieldId)&&moment().week()==moment(a[b.fieldId]).week()&&c++}break;case"is during the previous":var g=checkNested(b,"val3")?b.val3:"days",h=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isBetween(moment().subtract(h,g).startOf(g),moment().endOf(g),null,"[]")&&c++;break;case"is during the next":var g=checkNested(b,"val3")?b.val3:"days",h=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isBetween(moment().startOf(g),moment().add(h,g).endOf(g),null,"[]")&&c++;break;case"is before the previous":var g=checkNested(b,"val3")?b.val3:"days",h=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isBefore(moment().subtract(h,g).endOf(g),null,"[]")&&c++;break;case"is before the next":var g=checkNested(b,"val3")?b.val3:"days",h=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isBefore(moment().subtract(h,g).endOf(g),null,"[]")&&c++;break;case"is before":checkNested(a,b.fieldId)&&checkNested(b,"val")&&moment(a[b.fieldId]).isBefore(moment(b.val).startOf("day"))&&c++;break;case"is after":checkNested(a,b.fieldId)&&checkNested(b,"val")&&moment(a[b.fieldId]).isAfter(moment(b.val).endOf("day"))&&c++;break;case"is today":"Calendar"==d.fieldType[b.fieldId]?checkNested(a,b.fieldId,"start")&&moment(a[b.fieldId].start).isSame(moment(),"day")&&c++:checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isSame(moment(),"day")&&c++;break;case"is today or before":"Calendar"==d.fieldType[b.fieldId]?checkNested(a,b.fieldId,"start")&&moment(a[b.fieldId].start).isBefore(moment().endOf("day"))&&c++:checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isBefore(moment().endOf("day"))&&c++;break;case"is today or after":"Calendar"==d.fieldType[b.fieldId]?checkNested(a,b.fieldId,"start")&&moment(a[b.fieldId].start).isAfter(moment().startOf("day"))&&c++:checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isAfter(moment().startOf("day"))&&c++;break;case"is before today":"Calendar"==d.fieldType[b.fieldId]?checkNested(a,b.fieldId,"start")&&moment(a[b.fieldId].start).isBefore(moment().startOf("day"))&&c++:checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isBefore(moment().startOf("day"))&&c++;break;case"is after today":"Calendar"==d.fieldType[b.fieldId]?checkNested(a,b.fieldId,"start")&&moment(a[b.fieldId].start).isAfter(moment().endOf("day"))&&c++:checkNested(a,b.fieldId)&&moment(a[b.fieldId]).isAfter(moment().endOf("day"))&&c++;break;case"is checked":case"is not unchecked":checkNested(a,b.fieldId)&&!/^\s*$/.test(a[b.fieldId])&&null!=a[b.fieldId]&&"0"!=a[b.fieldId]&&c++;break;case"is unchecked":case"is not checked":(!checkNested(a,b.fieldId)||"1"!=a[b.fieldId])&&c++}});var e=!1;e=b.items.length==c,checkNested(b,"condition")&&"Any"==b.condition&&(e=b.items.length>0&&c>0),checkNested(b,"displayRules")&&angular.forEach(b.displayRules,function(a){switch(a.action){case"Hide":e&&c&&angular.element("#field_block_"+a.fieldId,l).hide(),checkNested(a,"action2")&&"Show"==a.action2&&!e&&angular.element("#field_block_"+a.fieldId,l).show();break;case"Show":e&&c&&angular.element("#field_block_"+a.fieldId,l).show(),checkNested(a,"action2")&&"Hide"==a.action2&&!e&&angular.element("#field_block_"+a.fieldId,l).hide();break;case"Rename":e&&c&&checkNested(a,"renameLabel")&&angular.element("#field_block_"+a.fieldId+" > label span.lbl",l).text(a.renameLabel);break;case"Required":checkNested(d.options,"rows")&&angular.forEach(d.options.rows,function(b,c){angular.forEach(b.cols,function(b,c){angular.forEach(b.fields,function(b){checkNested(b,"slug")&&b.slug==a.fieldId&&(e?b.isRequire="Yes":checkNested(a,"action2")&&"Unrequired"==a.action2&&(b.isRequire="No"))})})});break;case"Unrequired":checkNested(d.options,"rows")&&angular.forEach(d.options.rows,function(b,c){angular.forEach(b.cols,function(b,c){angular.forEach(b.fields,function(b){checkNested(b,"slug")&&b.slug==a.fieldId&&(e?b.isRequire="No":checkNested(a,"action2")&&"Required"==a.action2&&(b.isRequire="Yes"))})})});break;case"Enabled":checkNested(d.options,"rows")&&angular.forEach(d.options.rows,function(b,c){angular.forEach(b.cols,function(b,c){angular.forEach(b.fields,function(b){checkNested(b,"slug")&&b.slug==a.fieldId&&(e?b.isDisable="No":checkNested(a,"action2")&&"Disabled"==a.action2&&(b.isDisable="Yes"))})})});break;case"Disabled":checkNested(d.options,"rows")&&angular.forEach(d.options.rows,function(b,c){angular.forEach(b.cols,function(b,c){angular.forEach(b.fields,function(b){checkNested(b,"slug")&&b.slug==a.fieldId&&(e?b.isDisable="Yes":checkNested(a,"action2")&&"Enabled"==a.action2&&(b.isDisable="No"))})})})}})})},!0)},d.tinymceOptions={menubar:!1,statusbar:!1,branding:!1,plugins:"link image code textcolor hr lists table",toolbar:"undo redo formatselect bold italic underline strikethrough forecolor backcolor alignleft aligncenter alignright bullist numlist hr table link image code"
};var q=checkNested(m,"tableId")?m.tableId:0;d.options.isOpenModal=a.App.getStat("openModal",!1),checkNested(d.options,"settings")&&angular.isObject(d.options.settings)||(d.options.settings={}),checkNested(d.options.settings,"formTitle")||(d.options.settings.formTitle=""),checkNested(d.options.settings,"hideBackLink")||(d.options.settings.hideBackLink="No"),d.showAtLabelTop=function(a){return checkNested(a,"lblPosition")?"Top"==a.lblPosition||"Left"==a.lblPosition:!checkNested(d.options.settings,"labelPosition")||"Top"==d.options.settings.labelPosition||"Left"==d.options.settings.labelPosition},d.showAtLabelBottom=function(a){return checkNested(a,"lblPosition")?"Bottom"==a.lblPosition||"Right"==a.lblPosition:checkNested(d.options.settings,"labelPosition")&&("Bottom"==d.options.settings.labelPosition||"Right"==d.options.settings.labelPosition)},d.mode="loading",d.error="",d.columns=[],d.formDataFields={};d.query={columns:[],joinFilters:{}},d.query={},d.query.__cmode="get",d.connectedJoinFieldQuery=[],checkNested(d.options,"rows")&&angular.forEach(d.options.rows,function(a,b){angular.forEach(a.cols,function(a,b){angular.forEach(a.fields,function(a){if(checkNested(a,"slug")&&a.slug)if(d.formDataFields[a.slug]=a,checkNested(a,"connectedJoin")){var b={fieldSlug:a.slug,join:a.connectedJoin,joinFilters:"Join"==a.type&&checkNested(a,"joinFilters")?a.joinFilters:{},options:{}};d.connectedJoinFieldQuery.push(b)}else"Join"==a.type&&checkNested(a,"joinFilters")})})});var t=function(){jQuery(".form-group",l).length>0?jQuery(".form-group",l).each(function(){var a=jQuery(this),b=a.data("field-slug"),c="",e="";checkNested(d.formDataFields,b)&&checkNested(d.formDataFields[b],"lblPosition")?(c=d.formDataFields[b].lblPosition,e=checkNested(d.formDataFields[b],"lblColumnSize")?d.formDataFields[b].lblColumnSize:4):checkNested(d.options.settings,"labelPosition")&&(c=d.options.settings.labelPosition,e=checkNested(d.options.settings,"labelColumnSize")?d.options.settings.labelColumnSize:4),""!=c&&""!=e&&(a.addClass("label-position-"+c),"Left"!=c&&"Right"!=c||(jQuery(a).addClass("form-horizontal row"),jQuery(".control-label",a).first().addClass("col-md-"+e),jQuery("div",a).first().addClass("col-md-"+(12-e)),"Left"==c&&jQuery(".control-label",a).first().addClass("text-right")))}):j(t,10)};j(t,0),d.recordId=0,d.query.rId=0,d.query.pageRecordId=0,checkNested(d.options,"lastParam")&&d.options.lastParam&&(checkNested(d.options,"rId")&&""!=d.options.rId?(d.recordId=d.options.rId,d.query.rId=d.options.rId):(d.recordId=a.App.get("recordIdFromURL"),d.query.rId=a.App.get("recordIdFromURL"))),checkNested(d.options,"rId")&&""!=d.options.rId?d.query.pageRecordId=d.options.rId:d.query.pageRecordId=a.App.get("recordIdFromURL");var u=function(b){if(checkNested(d.options,"profileComponent")&&1==d.options.profileComponent){d.record={id:0};var c=a.App.get("authUser");angular.isDefined(c)&&c?(d.record=angular.copy(c),d.record.__mode="profile",d.recordId=d.record.id):d.mode="error2"}else checkNested(d.options,"signupComponent")&&1==d.options.signupComponent?(d.record={id:0},d.record.__mode="signup",d.isAlreadyLogin&&(d.mode="error",d.error="You're already logged in.")):!angular.isUndefined(d.record)&&checkNested(d.record,"id")&&0!=d.record.id||(d.record={id:0},angular.forEach(d.formDataFields,function(a){if(checkNested(a,"type"))switch(a.type){case"Image":d.record[a.slug]={src:""};break;case"Slider":d.record[a.slug]=0}}));d.record.pageId=checkNested(d.options,"pageId")?d.options.pageId:0,d.record.objId=checkNested(d.options,"objId")?d.options.objId:0,d.record.formUrl=k.absUrl(),d.record.__cmode="save",jQuery(".signature-pad",l).length>0&&jQuery(".signature-pad",l).each(function(){var a=jQuery(this),b=a.data("field-id");angular.isDefined(b)&&""!=b&&a.signaturePad().clearCanvas()}),b&&angular.forEach(d.fields,function(a){w(a)})};u(),d.settings={},d.recordSave="done",d.fieldType={},d.fields={},d.msg="";var v=function(a){if(checkNested(a,"enableUrlVal")&&"Yes"==a.enableUrlVal&&checkNested(a,"urlParamName")&&!_tb.is("null",a.urlParamName)){var b=k.search();if(jQuery.inArray(a.type,["Name","Address","Calendar"])!=-1||checkNested(b,a.urlParamName))switch(a.type){case"Number":case"Currency":case"Text":case"Long Text":case"Rich Text":d.record[a.slug]=b[a.urlParamName];break;case"Date":case"Time":case"Date/Time":var c=moment(b[a.urlParamName]);c.isValid()&&(d.record[a.slug]=c.toDate());break;case"Checkbox":angular.isObject(d.record[a.slug])||(d.record[a.slug]={}),checkNested(a,"options","options")&&angular.forEach(a.options.options,function(c,e){"1"==a.options.allowDiffVal&&c.val==b[a.urlParamName]?d.record[a.slug][e]=c.val+"":"0"==a.options.allowDiffVal&&c.text==b[a.urlParamName]&&(d.record[a.slug][e]=c.text+"")});break;case"Multi-Select":angular.isArray(d.record[a.slug])||(d.record[a.slug]=[]),checkNested(a,"options","options")&&angular.forEach(a.options.options,function(c,e){"1"==a.options.allowDiffVal&&c.val==b[a.urlParamName]?d.record[a.slug].push(c.val+""):"0"==a.options.allowDiffVal&&c.text==b[a.urlParamName]&&d.record[a.slug].push(c.text+"")});break;case"Radio":case"Select":checkNested(a,"options","options")&&angular.forEach(a.options.options,function(c,e){"1"==a.options.allowDiffVal&&c.val==b[a.urlParamName]?d.record[a.slug]=c.val:"0"==a.options.allowDiffVal&&c.text==b[a.urlParamName]&&(d.record[a.slug]=c.text+"")});break;case"Slider":checkNested(a,"options","minVal")&&checkNested(a,"options","maxVal")&&a.options.minVal<=parseInt(b[a.urlParamName])&&a.options.maxVal>=parseInt(b[a.urlParamName])&&(d.record[a.slug]=parseInt(b[a.urlParamName]));break;case"Rating":checkNested(a,"options","numberOfStar")&&a.options.numberOfStar>=parseInt(b[a.urlParamName])&&parseInt(b[a.urlParamName])>=0&&(d.record[a.slug]=parseInt(b[a.urlParamName]));break;case"Decision Box":b[a.urlParamName]?d.record[a.slug]="1":d.record[a.slug]="0";break;case"Name":case"Address":checkNested(a,"options","formFieldDisplay")&&angular.forEach(a.options.formFieldDisplay,function(c){checkNested(b,c.key)&&(angular.isObject(d.record[a.slug])||(d.record[a.slug]={}),d.record[a.slug][c.key]=b[c.key])});break;case"Calendar":if(angular.isObject(d.record[a.slug])||(d.record[a.slug]={}),checkNested(b[a.urlParamName],"start_date")){var c=moment(b[a.urlParamName].start_date);c.isValid()&&(d.record[a.slug].start_date=c.toDate())}if(checkNested(b[a.urlParamName],"end_date")){var c=moment(b[a.urlParamName].end_date);c.isValid()&&(d.record[a.slug].end_date=c.toDate())}}}},w=function(a){switch(a.type){case"Number":case"Currency":checkNested(a,"options","defaultValue","text")&&(d.record[a.slug]=parseFloat(a.options.defaultValue.text));break;case"Text":case"Long Text":case"Rich Text":checkNested(a,"options","defaultValue","text")&&(d.record[a.slug]=a.options.defaultValue.text);break;case"Date":checkNested(a,"options","defaultValue","date","type")&&("Current Date"==a.options.defaultValue.date.type?d.record[a.slug]=new Date:"Specific Date"==a.options.defaultValue.date.type&&checkNested(a,"options","defaultValue","date","specificDate")&&(d.record[a.slug]=moment(a.options.defaultValue.date.specificDate).toDate()));break;case"Time":checkNested(a,"options","defaultValue","date","type")&&("Current Time"==a.options.defaultValue.date.type?d.record[a.slug]=new Date:"Specific Time"==a.options.defaultValue.date.type&&checkNested(a,"options","defaultValue","date","specificDate")&&(d.record[a.slug]=moment(a.options.defaultValue.date.specificDate).toDate()));break;case"Date/Time":checkNested(a,"options","defaultValue","date","type")&&("Current Date/Time"==a.options.defaultValue.date.type?d.record[a.slug]=new Date:"Specific Date/Time"==a.options.defaultValue.date.type&&checkNested(a,"options","defaultValue","date","specificDate")&&(d.record[a.slug]=moment(a.options.defaultValue.date.specificDate).toDate()));break;case"Multi-Select":case"Checkbox":checkNested(a,"options")||(a.options={}),(!checkNested(a.options,"allowDiffVal")||"0"!=a.options.allowDiffVal&&"1"!=a.options.allowDiffVal)&&(a.options.allowDiffVal="0"),checkNested(a,"options","defaultValue","option")&&checkNested(a,"options","options")&&angular.forEach(a.options.options,function(b,c){("1"==a.options.allowDiffVal&&b.val==a.options.defaultValue.option||"1"!=a.options.allowDiffVal&&b.text==a.options.defaultValue.option)&&("Multi-Select"==a.type,d.record[a.slug]=[],d.record[a.slug].push(a.options.defaultValue.option+""))});break;case"Radio":case"Select":checkNested(a,"options")||(a.options={}),(!checkNested(a.options,"allowDiffVal")||"0"!=a.options.allowDiffVal&&"1"!=a.options.allowDiffVal)&&(a.options.allowDiffVal="0"),checkNested(a,"options","defaultValue","option")&&(d.record[a.slug]=a.options.defaultValue.option+""),checkNested(d.record,a.slug)&&(d.record[a.slug]+="");break;case"Slider":checkNested(a,"options","defaultValue","text")?d.record[a.slug]=parseInt(a.options.defaultValue.text):d.record[a.slug]=0;break;case"Decision Box":checkNested(a,"options","defaultValue","checked")&&"Checked"==a.options.defaultValue.checked?d.record[a.slug]="1":d.record[a.slug]="0";break;case"Link":checkNested(a,"options","defaultValue","text")&&""!=a.options.defaultValue.text&&(checkNested(d.record,a.slug)||(d.record[a.slug]={}),d.record[a.slug].link=a.options.defaultValue.text)}};d._record={};var x=function(b,c,e){d._record=e,checkNested(d.options,"profileComponent")&&1==d.options.profileComponent&&(d.recordId=e.id),d.dataFields=b,angular.forEach(d.dataFields,function(a,b){a.fieldId=a.id}),angular.forEach(d.options.rows,function(b,e){angular.forEach(b.cols,function(b,e){angular.forEach(b.fields,function(b){if(b.__found=!1,"_special_"==b.type)b.__found=!0;else if(checkNested(d.dataFields,b.id,"type")){if("signup"==d.record.__mode&&"password"==b.slug&&(b.isPassword="Yes",b.isConfirmPassword="Yes"),b.__found=!0,checkNested(b,"restrictLogin")&&2==b.restrictLogin&&checkNested(b,"allowRoles")&&_tb.countTotalKeys(b.allowRoles)>0&&(b.__found=!1,a.App.is("isAtLeastOneAllowedUserRole",{roleIds:b.allowRoles})&&(b.__found=!0)),b.type=d.dataFields[b.id].type,checkNested(c,b.slug))switch(b.options=c[b.slug],b.type){case"Select":checkNested(b,"options","noValueText")||(b.options.noValueText="Select");break;case"Decision Box":checkNested(b,"options","labels")&&(b.options.labels=b.options.labels.split("/"))}d.fieldType[b.slug]=b.type,d.fields[b.slug]=b,0==d.recordId&&w(b),v(b)}})})}),"error"!=d.mode&&"error2"!=d.mode&&(d.mode="done"),checkNested(d.options,"record")&&angular.extend(d.record,d.options.record),d.recordId&&(d.record={},d.record.pageId=checkNested(d.options,"pageId")?d.options.pageId:0,d.record.objId=checkNested(d.options,"objId")?d.options.objId:0,d.record.formUrl=k.absUrl(),angular.forEach(e,function(b,c){if(("id"==c||"created_at"==c||checkNested(d.fields,c))&&(d.record[c]=b,checkNested(d.fields,c,"type")))switch(d.fields[c].type){case"Radio":case"Select":case"Decision Box":d.record[c]+="";break;case"Date/Time":case"Date":var e=moment(b);e.isValid()&&(d.record[c]=e.toDate());break;case"Multi-Select":case"Checkbox":(angular.isArray(d.record[c])||angular.isObject(d.record[c]))&&angular.forEach(d.record[c],function(a,b){angular.isNumber(a)&&(d.record[c][b]+="")});break;case"Time":d.record[c]=a.App.apply("strToDate",{time:d.record[c]});break;case"Join":angular.isObject(d.record[c])||(d.record[c]=[])}})),d.recordId&&(d.record.id=d.recordId),j(function(){d.$broadcast("rzSliderForceRender"),d.assignDisplayRules()}),angular.forEach(d.record,function(a,b){angular.element(".x-type-html").each(function(){checkNested(d.dataFields,b)&&angular.element(this).html(angular.element(this).html().split("{"+b+"}").join(d.fieldValue(d.dataFields[b])))})});var f=[];angular.forEach(d.fields,function(a){checkNested(a,"join","fieldId")&&checkNested(b,a.join.fieldId)&&!checkNested(d.record,b[a.join.fieldId].slug)&&checkNested(e,b[a.join.fieldId].slug)&&f.indexOf(b[a.join.fieldId]+"_"+e[b[a.join.fieldId].slug])==-1&&(f.push(b[a.join.fieldId]+"_"+e[b[a.join.fieldId].slug]),d.changeJoinFieldVal(b[a.join.fieldId],e[b[a.join.fieldId].slug],!0))})};d.clearSign=function(a){jQuery(".signature-pad",l).length>0&&jQuery(".signature-pad",l).each(function(){var b=jQuery(this),c=b.data("field-id");if(angular.isDefined(c)&&""!=c&&a==c){b.signaturePad().clearCanvas()}})},d.refresh=function(b){a.doRootLoading(!0),f.post("g."+d.uId,d.query,function(b){a.doRootLoading(!1),"error"==b.type?(d.mode="error",d.error=angular.isArray(b.msg)?b.msg.join("<br/>"):b.msg):x(b.dataFields,b.fields,_tb.nullToEmpty(b.record))},function(b,c){a.doRootLoading(!1),d.mode="error",d.error="Record not found.",a.doRootLoading(!1)})};var y=function(a){angular.forEach(d.options.rows,function(b,c){angular.forEach(b.cols,function(b,c){angular.forEach(b.fields,function(b){switch(b.type){case"Email":jQuery("#field"+b.id,l).hasClass("ng-invalid")&&a.push("Please enter valid email address");break;case"Text":checkNested(b,"isPassword")&&checkNested(b,"isConfirmPassword")&&"Yes"==b.isPassword&&"Yes"==b.isConfirmPassword&&jQuery("#field"+b.id,l).val()!=jQuery("#field_con"+b.id,l).val()&&a.push("Passwords are different. Please confirm the password.")}})})})};"signup"!=d.record.__mode,d.refresh();d.recordSave="done",d.msg="",d.sureApply=function(){d.$$phase?setTimeout(function(){d.sureApply()},50):d.$apply()},d.addNewRecord=function(b){if(checkNested(b,"page","id")){var c=a.App.get("pageURI",b.page.id)+"?refresh="+getRandomInt(9999,9999999);a.App.get("isAppUserLogin")&&(c+="&api_token="+a.App.get("appUserToken"));var e=checkNested(b,"newRecordPopupTitle")?d.opt.settings.newRecordPopupTitle:"Add New Record";a.App.setStat("openModal",!0),g.open({backdrop:"static",keyboard:!1,size:"lg",controller:["$scope","$uibModalInstance","MsgBox","App",function(a,c,d,e){a.closeModal=function(a){angular.isDefined(a)&&a?c.close(a):c.dismiss("cancel")};var f=e.registerDataChange("form_add_record",function(a){e.clearDataChange("form_add_record",f),b.page.id==a.pageId&&c.close(a)})}],template:'<div class="model-body-content"><div class="modal-header" ng-if="options.title != \'\'"><button type="button" class="btn btn-danger btn-circle model-close pull-right" ng-click="closeModal()" data-dismiss="modal" aria-label="Close"><i class="far fa-times"></i></button><h3 class="modal-title">'+e+'</h3></div><div class="modal-body modal-sub-body"><div ng-include="\''+c+'\'"><i class="fa fa-spin fa-spinner"></i> Loading....</div></div><div class="modal-footer"><button class="btn btn-danger pull-left" type="button" ng-click="closeModal()"><i class="far fa-times"></i> Close</button></div></div>'}).result.then(function(c){if(checkNested(c,"id")&&c.id){var e=a.App.get("field",b.options.joinTableFieldId);switch(valText=c[e.slug],e.type){case"Link":checkNested(valText,"link")&&(valText=valText.link);break;case"Address":delete valText.lat,delete valText.lng}angular.isObject(valText)&&(valText=_tb.joinBy(valText," ")),b.options.options.push({text:valText,val:c.id}),angular.isArray(d.record[b.slug])||(d.record[b.slug]=[]),d.record[b.slug].push(c.id),checkNested(b,"changes")&&(b.changes=0),b.changes++}},function(){})}},d.saveRecord=function(){checkNested(d,"coords")&&(d.record.coords=d.coords),angular.forEach(d.formDataFields,function(b){if(checkNested(b,"type")&&"Calendar"==b.type&&checkNested(b,"options","showEndDateAs"))if("Duration Field"==b.options.showEndDateAs){if(d.record[b.slug].end="",checkNested(d.record,b.slug,"start")&&d.record[b.slug].start){var c={strDateTime:d.record[b.slug].start,outPutAs:"str"};checkNested(d.record,b.slug,"durationVal")&&(c.durationVal=d.record[b.slug].durationVal,c.durationSlug=checkNested(d.record,b.slug,"durationSlug")?d.record[b.slug].durationSlug:"m"),d.record[b.slug].end=a.App.apply("str2Date",c)}}else"Time Field"==b.options.showEndDateAs&&(checkNested(d.record,b.slug,"start")&&d.record[b.slug].start?(c={strDate:d.record[b.slug].start,strTime:d.record[b.slug].end},d.record[b.slug].end=a.App.apply("str2Date",c)):d.record[b.slug].end="")}),a.App.getLatLngFromAddressRecord(d.record,function(e){j(function(){var e=[];return angular.forEach(d.formDataFields,function(a){if(checkNested(a,"isRequire")&&"Yes"==a.isRequire)if("Signature"==a.type)jQuery(".signature-pad",l).length>0&&jQuery(".signature-pad",l).each(function(){var b=jQuery(this),c=b.data("field-id"),d=b.signaturePad().getSignatureString();angular.isDefined(c)&&""!=c&&a.slug==c&&"[]"==d&&e.push("The following required field is required: "+a.name)});else if(angular.isObject(d.record[a.slug]))if("Address"!=a.type&&"Name"!=a.type||!checkNested(a,"options","formFieldDisplay"))"Calendar"==a.type?checkNested(d.record[a.slug],"start")&&checkNested(d.record[a.slug],"end")&&""!=d.record[a.slug].start&&""!=d.record[a.slug].end||e.push(a.name+" is required."):angular.isDate(d.record[a.slug])?moment(d.record[a.slug]).isValid()||e.push(a.name+" is required."):""==jQuery.trim(_tb.joinBy(d.record[a.slug],""))&&e.push(a.name+" is required.");else{var b=[];angular.forEach(a.options.formFieldDisplay,function(c){checkNested(c.key)&&checkNested(d.record,a.slug,c.key)&&b.push(d.record[a.slug][c.key])}),""==jQuery.trim(_tb.joinBy(b,""))&&e.push(a.name+" is required.")}else jQuery.trim(d.record[a.slug])||e.push(a.name+" is required.")}),y(e),e.length>0?(d.recordSave="error",void(d.msg=e.join("<br/>"))):(d.recordSave="",d.msg="",jQuery(".signature-pad:not(.ng-hide)",l).length>0&&jQuery(".signature-pad:not(.ng-hide)",l).each(function(){var a=jQuery(this),b=a.data("field-id");angular.isDefined(b)&&""!=b&&(d.record[b]=a.signaturePad().getSignatureImage(),_tb.is("signatureEmpty",d.record[b])&&(d.record[b]=""))}),d.recordSave="saving",checkNested(d.options,"lastParam2")&&d.options.lastParam2&&(d.record.connectedTo=d.options.connectedTo,d.record.connectedTo.joinType=d.options.joinType,d.record.connectedTo.recordId=a.App.get("recordIdFromURL")),checkNested(d.options,"profileComponent")&&1==d.options.profileComponent&&(d.record.__mode="profile"),checkNested(d.options,"signupComponent")&&1==d.options.signupComponent&&(d.record.__mode="signup"),d.record.__cmode="save",void f.postWithUpload("g."+d.uId,f.processData(d.record),function(e){if("error"==e.type)d.recordSave="error",d.msg=angular.isArray(e.msg)?e.msg.join("<br/>"):e.msg;else{checkNested(d.options,"profileComponent")&&1==d.options.profileComponent&&a.App.set("authUserFields",{name:d.record.name});var f=0;checkNested(d.options,"signupComponent")&&1==d.options.signupComponent&&(checkNested(d.options.settings,"autoLogin")&&"No"==d.options.settings.autoLogin||checkNested(e,"token")&&checkNested(e,"user")&&(a.App.set("appUserLogin",e.token,e.user),f=1)),checkNested(e,"insertedRecordId")&&(d.recordId=e.insertedRecordId);var g=0==d.record.id;if(d.record.id=d.recordId,a.App.doDataChange("form_add_record",angular.copy(d.record),{tableId:d.tableId}),checkNested(d.options,"submitRules")&&d.options.submitRules){var h=!1,j=!1,k={};if(checkNested(d.options,"signupComponent")&&1==d.options.signupComponent&&(k={reload:!0}),angular.forEach(d.options.submitRules,function(a){1==a["default"]&&(j=a)}),angular.forEach(d.options.submitRules,function(a){if(0==a["default"]&&h===!1){var b=0;checkNested(a,"conditions")&&a.conditions.length>0&&angular.forEach(a.conditions,function(c){angular.forEach(c.items,function(a){b+=z(a,d.record)}),b&&b==c.items.length&&(h=a)})}}),h===!1&&(h=j),h)switch(h.action){case"message":d.recordSave="success",d.msg=h.message,f=100;break;case"parent_page":if(o&&p)d.$parent.$parent.closeModal(),f=11;else if(checkNested(b.Pages,d.options.pageId)){var m=b.Pages[d.options.pageId];if(checkNested(m,"parent")&&m.parent&&checkNested(b.Pages,m.parent)){var n=b.Pages[m.parent],q="app."+n.slug,r={};0!=n.parent&&(angular.forEach(i,function(a,b){r[b]=a}),!_tb.is("null")&&h.itemId&&(r[n.param]=h.itemId)),c.go(q,r,k),f=2}}break;case"existing_page":angular.forEach(b.Pages,function(a){if(a.id==h.pageId){var b="app."+a.slug;if(1==a.metas.restrictLogin,0!=a.parent){var e={};if(angular.isUndefined(d.recordId)||!d.recordId){var g="";angular.forEach(i,function(a,b){g=a}),e[a.param]=g}else e[a.param]=d.recordId;c.go(b,angular.extend({},e,i),k),f=2}else c.go(b,{},k),f=2}});break;case"external_url":if(checkNested(h,"sendParam")&&"Yes"==h.sendParam){var s={};checkNested(h,"params")&&angular.isObject(h.params)&&angular.forEach(h.params,function(a){if(checkNested(a,"name")&&""!=a.name&&checkNested(a,"valType"))if("form_val"==a.valType){if(checkNested(d.record,a.fieldVal))if(checkNested(d.fieldType,a.fieldVal))switch(d.fieldType[a.fieldVal]){case"Link":checkNested(d.record,a.fieldVal,"link")?s[a.name]=d.record[a.fieldVal].link:s[a.name]=d.record[a.fieldVal];break;case"Join":jQuery("#field_block_"+a.fieldVal+" select",l).prop("multiple")?jQuery("#field_block_"+a.fieldVal+" select option:selected",l).each(function(b,c){s[a.name+"["+b+"]"]=jQuery(this).html()}):s[a.name]=jQuery("#field_block_"+a.fieldVal+" select option:selected",l).html();break;case"File":checkNested(d.record,a.fieldVal,"src")?s[a.name]=d.record[a.fieldVal].src:s[a.name]="";break;case"Signature":break;case"Image":checkNested(d.record,a.fieldVal,"src")?s[a.name]=d.record[a.fieldVal].src:s[a.name]="";break;default:angular.isObject(d.record[a.fieldVal])?angular.forEach(d.record[a.fieldVal],function(b,c){angular.isString(b)&&(s[a.name+"["+c+"]"]=b)}):s[a.name]=d.record[a.fieldVal]}else s[a.name]=d.record[a.fieldVal]}else checkNested(a,"customVal")&&(s[a.name]=a.customVal)}),_tb.submitForm(h.externalUrl,s,h.requestMethod||"GET"),f=2}else location.href=h.externalUrl,f=2}}else d.msg=angular.isArray(e.msg)?e.msg.join("<br/>"):e.msg;({id:d.record.id});g&&(d.recordId=0,d.record.id=0,angular.forEach(d.formDataFields,function(a){if(checkNested(d.record,a.slug))switch(a.type){case"Calendar":d.record[a.slug].start="",d.record[a.slug].end="";break;case"Join":d.record[a.slug]=[];break;default:delete d.record[a.slug]}}),_tb.clearAllSelect2(l),u(!0)),d.onSaved({id:d.record.id,state:d.record.id?"old":"new"}),1==f&&window.location.reload(),0==f&&(d.recordSave="success",d.msg=e.msg)}},function(a,b){d.recordSave="error",d.msg="Record not found."},function(a){},!0))},0)})};var z=function(a,b){switch(isTrue=0,a.operator){case"contains":checkNested(b,a.fieldId)&&!_tb.is("null",a.val)&&(angular.isString(b[a.fieldId])?b[a.fieldId].toLowerCase().indexOf(a.val.toLowerCase())>-1&&isTrue++:angular.isObject(b[a.fieldId])&&_tb.is("contains",a.val.toLowerCase(),b[a.fieldId])&&isTrue++);break;case"does not contain":checkNested(b,a.fieldId)&&!_tb.is("null",a.val)?angular.isString(b[a.fieldId])?b[a.fieldId].toLowerCase().indexOf(a.val.toLowerCase())==-1&&isTrue++:angular.isObject(b[a.fieldId])&&!_tb.is("contains",a.val.toLowerCase(),b[a.fieldId])&&isTrue++:isTrue++;break;case"is":"Date"==d.fieldType[a.fieldId]?checkNested(b,a.fieldId)&&moment(a.val).isSame(b[a.fieldId],"day")&&isTrue++:checkNested(b,a.fieldId)&&b[a.fieldId]==a.val&&isTrue++;break;case"is not":"Date"==d.fieldType[a.fieldId]?(!checkNested(b,a.fieldId)||!moment(a.val).isSame(b[a.fieldId],"day"))&&isTrue++:(!checkNested(b,a.fieldId)||b[a.fieldId]!=a.val)&&isTrue++;break;case"starts with":checkNested(b,a.fieldId)&&new RegExp("^"+a.val).test(b[a.fieldId])&&isTrue++;break;case"ends with":checkNested(b,a.fieldId)&&new RegExp(a.val+"$").test(b[a.fieldId])&&isTrue++;break;case"is blank":(!checkNested(b,a.fieldId)||/^\s*$/.test(b[a.fieldId])||null==b[a.fieldId])&&isTrue++;break;case"is not blank":checkNested(b,a.fieldId)&&!/^\s*$/.test(b[a.fieldId])&&null!=b[a.fieldId]&&isTrue++;break;case"higher than":checkNested(b,a.fieldId)&&b[a.fieldId]>parseInt(a.val)&&isTrue++;break;case"lower than":checkNested(b,a.fieldId)&&b[a.fieldId]<parseInt(a.val)&&isTrue++;break;case"is during the current":var c=checkNested(a,"val2")?a.val2:"week";switch(c){case"month":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":checkNested(b,a.fieldId)&&moment().format("YY-Q")==moment(b[a.fieldId]).format("YY-Q")&&isTrue++;break;case"year":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:checkNested(b,a.fieldId)&&moment().week()==moment(b[a.fieldId]).week()&&isTrue++}break;case"is during the previous":var c=checkNested(a,"val3")?a.val3:"days",e=parseInt(checkNested(a,"val2")?a.val2:0);checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBetween(moment().subtract(e,c).startOf(c),moment().endOf(c),null,"[]")&&isTrue++;break;case"is during the next":var c=checkNested(a,"val3")?a.val3:"days",e=parseInt(checkNested(a,"val2")?a.val2:0);checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBetween(moment().startOf(c),moment().add(e,c).endOf(c),null,"[]")&&isTrue++;break;case"is before the previous":var c=checkNested(a,"val3")?a.val3:"days",e=parseInt(checkNested(a,"val2")?a.val2:0);checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBefore(moment().subtract(e,c).endOf(c),null,"[]")&&isTrue++;break;case"is before the next":var c=checkNested(a,"val3")?a.val3:"days",e=parseInt(checkNested(a,"val2")?a.val2:0);checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBefore(moment().subtract(e,c).endOf(c),null,"[]")&&isTrue++;break;case"is before":checkNested(b,a.fieldId)&&checkNested(a,"val")&&moment(b[a.fieldId]).isBefore(moment(a.val).startOf("day"))&&isTrue++;break;case"is after":checkNested(b,a.fieldId)&&checkNested(a,"val")&&moment(b[a.fieldId]).isAfter(moment(a.val).endOf("day"))&&isTrue++;break;case"is today":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":checkNested(b,a.fieldId)&&moment(b[a.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue};d.submitBtnStyle=function(a){var b=angular.copy(a);angular.forEach(d._record,function(a,c){checkNested(c,b)||(b[c]=a)});var c={};return checkNested(d.options.settings,"submitBtnDisplayRules")&&d.options.settings.submitBtnDisplayRules&&(angular.element("i",r).attr({"class":"far fa-check"}),angular.element("span",r).show().text(r.data("default")),r.attr({disabled:!1}),angular.forEach(d.options.settings.submitBtnDisplayRules,function(a){if(checkNested(a,"items")&&a.items.length>0){var d=0;angular.forEach(a.items,function(a){d+=z(a,b)}),d&&d==a.items.length&&checkNested(a,"displayRules")&&angular.isArray(a.displayRules)&&angular.forEach(a.displayRules,function(a){switch(a.action){case"textColor":c.color=a.color;break;case"textStyle":checkNested(a,"textBold")&&a.textBold&&(c.fontWeight="900"),checkNested(a,"textItalic")&&a.textItalic&&(c.fontStyle="italic"),checkNested(a,"textStrikethrough")&&a.textStrikethrough&&(c.textDecoration="line-through");break;case"bkColor":c.borderColor=a.color,c.backgroundColor=a.color;break;case"hideValue":angular.element("span",r).hide();case"changeText":checkNested(a,"text")&&""!=a.text&&angular.element("span",r).text(a.text);break;case"disableEle":r.attr({disabled:!0});break;case"icon":checkNested(a,"iconClass")&&""!=a.iconClass&&angular.element("i",r).attr({"class":a.iconClass})}})}})),c},d.validField=function(a){switch(ret=!0,a.type){case"_special_":case"Text Formula":case"Basic Formula":case"Date Formula":case"Complex Formula":ret=!1}return ret},d.onlyReadField=function(a){switch(ret=!1,a.type){case"_special_":case"Text Formula":case"Basic Formula":case"Date Formula":case"Complex Formula":case"Auto Increment":ret=!0}return checkNested(a,"tableType")&&"Join"==a.tableType&&(ret=!0),ret},d.fieldValue=function(a){if(checkNested(a,"fieldId")){var b="",c=[];switch(a.type){case"Address":c=[],$joinFields=["address","address2","city","state","country","zip"];for(var e in $joinFields){var f=$joinFields[e];checkNested(d.record,a.fieldId,f)&&c.push(d.record[a.fieldId][f])}b=c.length?c.join(" ")+".":"-";break;case"Name":c=[],$joinFields=["first_name","middle_name","last_name"];for(var e in $joinFields){var f=$joinFields[e];checkNested(d.record,a.fieldId,f)&&c.push(d.record[a.fieldId][f])}b=c.length?c.join(" "):"-";break;default:b=checkNested(d.record,a.fieldId)?d.record[a.fieldId]:""}return b||"&nbsp;"}}}}}]),angular.module("app").directive("afHtml",["AppSetting","$state","$http","AppURL","Http","$uibModal","MsgBox","$stateParams","$filter","App","$compile","$rootScope","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{restrict:"AE",scope:{},link:function(a,b,c){var d=j.get("variables"),f=function(a){return angular.forEach(d,function(b){a=a.split("{!"+b.slug+"!}").join(j.get("variableFinalVal",b))}),a},g=checkNested(c.tableId)?c.tableId:0;a.tableId=g,a.uId=checkNested(c,"uId")?c.uId:"",a.status="loading",a.options=JSON.parse(checkNested(c.opt)?c.opt:"{}"),a.query=!1,a.dataFields=[],checkNested(a.options,"hasField")&&1==a.options.hasField&&(a.query={},checkNested(a.options,"rId")&&""!=a.options.rId?a.query.rId=a.options.rId:a.query.rId=l.App.get("recordIdFromURL")),b=angular.element(b),a.getColumn=function(b){return checkNested(a.dataFields,b)?angular.copy(a.dataFields[b]):{}},a.record={},a.refreshData=function(){0!=a.query&&e.post("g."+a.uId,a.query,function(c){if("error"==c.type)a.status="error",a.error=c.msg;else{var e=b.html();a.status="done";var g=!!checkNested(c,"items","0")&&c.items[0];angular.isObject(g)&&_tb.countTotalKeys(g)>0&&angular.forEach(g,function(b,c){a.record[c]=b,angular.isObject(b)?(angular.forEach(b,function(a,b){e=e.split("{!!"+c+"."+b+"!!}").join(a)}),e=e.split("{!!"+c+"!!}").join(_tb.joinBy(b,", "))):e=e.split("{!!"+c+"!!}").join(b),e=e.split("{"+c+"}").join('<af-data-table-field item="record" column="dataFields[\''+c+"']\" in-display-mode=\"'dataTable'\"></af-data-table-field>")}),checkNested(c,"loggedInItem")&&c.loggedInItem&&angular.forEach(c.loggedInItem,function(b,c){a.record[c]=b,e=e.split("{loggedInUser."+c+"}").join('<af-data-table-field item="record" column="dataFields[\''+c+"']\" in-display-mode=\"'dataTable'\"></af-data-table-field>")}),checkNested(c,"loggedInItemColumn")&&angular.isArray(c.loggedInItemColumn)&&angular.forEach(c.loggedInItemColumn,function(a){e=e.split("{loggedInUser."+a+"}").join("")}),checkNested(c,"fullColumns")&&(a.dataFields=angular.copy(c.fullColumns)),angular.forEach(d,function(a){var b=j.get("variableFinalVal",a);"loggedInUserRoles"==a.slug&&checkNested(c.loggedInItem,"role")&&(b=c.loggedInItem.role),"loggedInUserCreatedDate"==a.slug&&checkNested(c.loggedInItem,"created_at")&&(b=l.App.get("parseDT","dateTime",moment(c.loggedInItem.created_at).toDate())),(angular.isObject(b)||angular.isArray(b))&&(b=_tb.joinBy(b,", ")),e=e.split("{!"+a.slug+"!}").join(b)}),e=f(e),m(function(){b.html(e),k(b.contents())(a),b.removeClass("x-ele-hide")},10)}})},a.refreshData(),a.fieldValue=function(b){if(checkNested(b,"fieldId")){var c="",d=[];switch(b.type){case"Link":var e=checkNested(a.record,b.slug)?a.record[b.slug]:"";checkNested(e,"link")&&(c+='<a href="'+e.link+'" ',checkNested(b,"options","openInNewWindow")&&"Yes"==b.options.openInNewWindow&&(c+='target="_blank"'),c+=">",c+=checkNested(b,"options","linkFormat")?"same_text"===b.options.linkFormat&&checkNested(b,"options","linkText")?b.options.linkText:"unique"===b.options.linkFormat?e.text:e.link:e.link,c+="</a>");break;case"Image":var e=checkNested(a.record,b.slug)?a.record[b.slug]:"";if(checkNested(e,"src")){var f="";checkNested(b,"sizeType")&&"custom"==b.sizeType&&(checkNested(b,"width")&&(f+='width="'+b.width+'px"'),checkNested(b,"height")&&(f+='height="'+b.height+'px"')),c='<img src="'+e.src+'" class="'+(checkNested(b,"isResponsive")&&"No"==b.isResponsive?"":"img-responsive")+'" '+f+"   />"}break;case"Date":if(c=checkNested(a.record,b.slug)?a.record[b.slug]:"",""!=c){var g=new Date(c);c=c?i("date")(g,j.getSetting("dateFormat")):""}break;case"Address1":d=[],$joinFields=["address","address2","city","state","country","zip"];
for(var h in $joinFields){var k=$joinFields[h];checkNested(a.record,b.slug,k)&&d.push(a.record[b.slug][k])}c=d.length?d.join(" ")+".":"-";break;case"Name1":d=[],$joinFields=["_first_name","_middle_name","_last_name"];for(var h in $joinFields){var k=$joinFields[h];checkNested(a.record,b.slug+k)&&d.push(a.record[b.slug+k])}c=d.length?d.join(" "):"-";break;default:c=checkNested(a.record,b.slug)?a.record[b.slug]:""}return c||"&nbsp;"}}}}}]),angular.module("app").directive("afHtmldddd",["AppSetting","$state","$http","AppURL","Http","$uibModal","MsgBox","$stateParams","$filter","App","$compile","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k,l){return{restrict:"AE",link:function(a,b,c){var d=j.get("variables"),f=function(a){return angular.forEach(d,function(b){a=a.split("{!"+b.slug+"!}").join(j.get("variableFinalVal",b))}),a},g=checkNested(c.tableId)?c.tableId:0,h=checkNested(c.uId)?c.uId:0;0!=g?(a.options=JSON.parse(checkNested(c.options)?c.options:"{}"),a.query={columns:[]},a.uId=h,a.dataFields=[],checkNested(a.options,"fields")&&angular.isArray(a.options.fields)&&a.options.fields.length>0&&(a.query.columns=a.options.fields),a.recordId=l.App.get("recordIdFromURL"),b=angular.element(b),a.getColumn=function(b){return checkNested(a.dataFields,b)?a.dataFields[b]:{}},a.refreshData=function(){g?(a.refresh=1,a.query.columns.length?e.post("data-table."+g+".detail."+a.recordId,a.query,function(c){if("error"==c.type)a.status="error",a.error=c.msg;else{angular.forEach(c.dataFields,function(b,d){a.dataFields[d]=b,a.dataFields[d].options=c.dataFieldOptions[d]}),a.status="done",a.record=checkNested(c,"items",0)?c.items[0]:{};var d=b.html();angular.forEach(a.record,function(a,b){d=d.split("{"+b+"}").join('<af-data-table-field item="record" column="getColumn(\''+b+"')\"></af-data-table-field>")}),d=f(d),d=l.App.get("processLoggedInUserFields",d),b.html(d),k(b.contents())(a),b.removeClass("x-ele-hide")}},function(b,c){a.status="error",a.err="Data table not found."},!0):b.removeClass("x-ele-hide")):(b.removeClass("x-ele-hide"),a.refresh=0,a.status="error",a.err="Data table not found.")},a.refreshData(),a.dataFields={},a.fieldValue=function(b){if(checkNested(b,"fieldId")){var c="",d=[];switch(b.type){case"Link":var e=checkNested(a.record,b.slug)?a.record[b.slug]:"";checkNested(e,"link")&&(c+='<a href="'+e.link+'" ',checkNested(b,"options","openInNewWindow")&&"Yes"==b.options.openInNewWindow&&(c+='target="_blank"'),c+=">",c+=checkNested(b,"options","linkFormat")?"same_text"===b.options.linkFormat&&checkNested(b,"options","linkText")?b.options.linkText:"unique"===b.options.linkFormat?e.text:e.link:e.link,c+="</a>");break;case"Image":var e=checkNested(a.record,b.slug)?a.record[b.slug]:"";if(checkNested(e,"src")){var f="";checkNested(b,"sizeType")&&"custom"==b.sizeType&&(checkNested(b,"width")&&(f+='width="'+b.width+'px"'),checkNested(b,"height")&&(f+='height="'+b.height+'px"')),c='<img src="'+e.src+'" class="'+(checkNested(b,"isResponsive")&&"No"==b.isResponsive?"":"img-responsive")+'" '+f+"   />"}break;case"Date":if(c=checkNested(a.record,b.slug)?a.record[b.slug]:"",""!=c){var g=new Date(c);c=c?i("date")(g,j.getSetting("dateFormat")):""}break;case"Address1":d=[],$joinFields=["address","address2","city","state","country","zip"];for(var h in $joinFields){var k=$joinFields[h];checkNested(a.record,b.slug,k)&&d.push(a.record[b.slug][k])}c=d.length?d.join(" ")+".":"-";break;case"Name1":d=[],$joinFields=["_first_name","_middle_name","_last_name"];for(var h in $joinFields){var k=$joinFields[h];checkNested(a.record,b.slug+k)&&d.push(a.record[b.slug+k])}c=d.length?d.join(" "):"-";break;default:c=checkNested(a.record,b.slug)?a.record[b.slug]:""}return c||"&nbsp;"}}):(html=f(b.html()),html=l.App.get("processLoggedInUserFields",html),b.html(html),angular.element(b).removeClass("x-ele-hide"))}}}]),angular.module("app").directive("afImagePopup",["$uibModal",function(a){return function(b,c,d){c.bind("click",function(b){var c=angular.element(this).attr("src");a.open({animation:!0,templateUrl:"img-modal.html",controller:["$scope","$uibModalInstance","imageUrl",function(a,b,c){a.imageUrl=c,a.close=function(){b.close()}}],openedClass:"modal-open tb-full-popup-1",resolve:{imageUrl:function(){return c}}})})}}]),angular.module("app").directive("afImport",["$rootScope","AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox",function(a,b,c,d,e,f,g,h,i){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div class="af-import-component"><h3 ng-if="opt.settings.tableTitle != \'\'">{{opt.settings.title}}</h3><div class="desc" ng-if="opt.settings.desc">{{opt.settings.desc}}</div><div class="notify-con" ng-if="dataTableNotification"><div class="t2"><i class="{{dataTableNotification.lc}}"></i>  {{dataTableNotification.t1}}</div><div class="con" ng-if="dataTableNotification.con1">{{dataTableNotification.con1}}</div><div class="con" ng-if="dataTableNotification.con2">{{dataTableNotification.con2}}</div></div><div class="notify-con" ng-if="dataTableNotificationFinal"><div class="t2"><i class="{{dataTableNotificationFinal.lc}}"></i>  {{dataTableNotificationFinal.t1}}</div><div class="con" ng-if="dataTableNotificationFinal.con1">{{dataTableNotificationFinal.con1}}</div><div class="con" ng-if="dataTableNotificationFinal.con2">{{dataTableNotificationFinal.con2}}</div></div><div class="con"><button class="btn btn-info btn-sm btn-block no-print" ng-click="openImport()" ng-disabled="dataTableNotification">{{opt.settings.importBtnText}}</button></div></div>',link:function(a,b,c){var d=checkNested(c.tableId)?c.tableId:0;a.opt=options=JSON.parse(checkNested(c.options)?c.options:"{}"),checkNested(a.opt,"settings")||(a.opt.settings={}),checkNested(a.opt.settings,"matching")||(a.opt.settings.matching="Disable"),a.uId=checkNested(c,"uId")?c.uId:"",a.dataTableNotification={lc:"far fa-spin fa-spinner",t1:"Importing Records",con1:"62% Complete",con2:"Records processed: 10/100"},a.dataTableNotification=!1,a.dataTableNotificationFinal=!1,a.checkDataTableNotification=function(b){var c={};c.loadNotification="1",angular.isDefined(b)&&(c.ids=b),g.postWithUpload("g."+a.uId,c,function(c){"success"==c.type?c.reload?(a.dataTableNotification=c.notification,setTimeout(function(){a.checkDataTableNotification(b)},500)):(a.dataTableNotificationFinal=c.notification,a.dataTableNotification=!1):a.dataTableNotification=!1})},a.openImport=function(){var b=h.open({backdrop:"static",keyboard:!1,size:"lg",controller:"importsModalCtrl",templateUrl:"assets/app/blocks/imports-modal.html",resolve:{data:function(){return{uId:a.uId,tableId:d,importOptions:a.opt}}}});b.result.then(function(b){checkNested(b,"loadNotification")&&b.loadNotification&&a.checkDataTableNotification(b.id),checkNested(b,"updated")&&checkNested(b,"element","filters")&&(a.query.filters.filters3=b.element.filters,a.refreshData())},function(){})}}}}]),angular.module("app").directive("afKanban",["AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox","$rootScope","App",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div class="alert alert-danger" ng-show="status == \'error\'">{{err}}</div><div ng-show="status == \'loading\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading data...</div><div ng-show="status == \'done\'"><h2 ng-if="options.settings.tableTitle != \'\'">{{opt.settings.tableTitle}}</h2><div class="filter-tabs" ng-if="options.settings.filterType==\'Filter Tab\'"><ul class="nav nav-tabs"><li class="tab-{{tab.badgeClass}}" ng-repeat="tab in options.filterTabs" ng-class="{\'active\': tabIndex == $index, \'tab-colored\': tab.isColor}"><a ng-click="setFilterTab($index)">{{tab.title}}</a></li><li ng-if="options.settings.hideClearFilter != \'Yes\'"><a ng-click="setFilterTab(-1)">Clear Filter</a></li></ul></div><div class="kanban-wrap"><div class="kanban"><div class="kanban-item kanban-color-{{kanCol.badgeClass || \'no-color\'}}" ng-repeat="kanCol in options.settings.kanCols" ng-if="kanCol.show == \'Show\'" ng-class="{\'kanban-colored\': kanCol.isColor}" style="width: {{kanbanColWidth}}"><div class="kanban-header"><h2>{{kanCol.title}}</h2><div class="kanban-header-tools"><span class="count" ng-if="options.settings.allowColCount == \'Yes\'">{{kanCol.total}}</span><span class="has-action" ng-click="toggleUpClose(kanCol)"><i class="far fa-compress-alt" ng-if="!kanCol.hide"></i><i class="far fa-expand-alt" ng-if="kanCol.hide"></i></span></div></div><div class="kanban-body"><div class="kanban-body-inner" ng-show="!kanCol.hide"><div class="kanban-card" ng-repeat="(itemIndex, item) in items" ng-if="item.optKey == kanCol.optKey"><div class="kanban-card-cover"><af-data-table-field item="item" column="columns[options.settings.coverField]" columns="columns" in-display-mode="\'detail\'"></af-data-table-field></div><div class="kanban-card-inner"><div class="row" ng-repeat="row in options.rows"><div class="col-md-{{col.size}}" ng-repeat="col in row.cols"><div class="form-group" ng-repeat="column in col.fields" id="field_block_{{column.slug}}" ng-style1="columnStyle(column, item)" allow-inline-editing-for-app item="item" field="column" allow-edit="options.settings.allowInlineEdit == \'Yes\' && (!column.allowInlineEdit || column.allowInlineEdit==\'Yes\')" table-id="tableId"><label ng-if="column.hideTitle != \'Yes\'">{{column.title}}</label><div><af-data-table-field item="item" column="column" columns="columns" in-display-mode="\'detail\'" update-val="item.__changed" logged-in-item="loggedInItem" ng-click="doColumnAction(column, itemIndex, $event)"></af-data-table-field></div></div></div></div></div></div></div></div><div class="kanban-footer"></div></div></div></div></div>',link:function(a,b,c){var d=checkNested(c.tableId)?c.tableId:0;if(a.tableId=d,a.uId=checkNested(c,"uId")?c.uId:"",a.tableId=d,a.tabIndex=-1,a.options=options=JSON.parse(checkNested(c.options)?c.options:"{}"),checkNested(a.options,"settings")||(a.options.settings={}),checkNested(a.options,"settings","allowInlineEdit")||(a.options.settings.allowInlineEdit="No"),checkNested(a.options.settings,"kanBanField")||(a.options.settings.kanBanField=!1),checkNested(a.options.settings,"coverField")||(a.options.settings.coverField=!1),a.kanbanHeight=(checkNested(a.options.settings,"height")?parseInt(a.options.settings.height):"600")+"px",a.kanbanColWidth=checkNested(a.options.settings,"colWidth")?parseInt(a.options.settings.colWidth):"295",a.kanbanColWidth+=checkNested(a.options.settings,"colWidthUnit")?a.options.settings.colWidthUnit:"px",a.kanbanWidth=checkNested(a.options.settings,"kanCols")?340*_tb.countTotalKeys(a.options.settings.kanCols):340,a.kanbanWidth<340&&(a.kanbanWidth=340),jQuery(".kanban-wrap",b).css("height",a.kanbanHeight),jQuery(".kanban",b).css("min-width",a.kanbanWidth+"px"),a.items=[],a.loggedInItem={},a.columns={},a.status="loading",a.limit=checkNested(a.options,"settings","recordLimit")?a.options.settings.recordLimit:10,a.limit=parseInt(a.limit)<10?10:a.limit,a.totalItems=0,a.query={filters:{k:""},page:1,limit:-1,kanban:1},a.query.rId=i.App.get("recordIdFromURL"),checkNested(a.options,"rows")&&angular.forEach(a.options.rows,function(b,c){angular.forEach(b.cols,function(b,c){angular.forEach(b.fields,function(b){if(checkNested(b,"ftype")&&"html"==b.ftype){var c=findCurlyBracketStr(b.text);angular.isObject(c)&&_tb.countTotalKeys(c)>0&&angular.forEach(c,function(b){if(!checkNested(a.columns,b)){var c=i.App.get("fieldFromFieldSlug",b);""!=c?a.columns[b]=c:a.columns[b]={slug:b}}})}else checkNested(b,"slug")&&b.slug&&(checkNested(b,"tableType")||"TableLink"==b.type||(b.tableType="self"),checkNested(b,"tableType")&&"self"==b.tableType?b.allowInlineEdit=checkNested(b,"allowInlineEdit")&&"No"==b.allowInlineEdit?"No":"Yes":b.allowInlineEdit="No",a.columns[b.fieldId]=b)})})}),a.options.settings.kanBanField&&!checkNested(a.columns,a.options.settings.kanBanField)){var e=i.App.get("fieldFromFieldSlug",a.options.settings.kanBanField);""!=e?a.columns[a.options.settings.kanBanField]=e:a.columns[a.options.settings.kanBanField]={slug:a.options.settings.kanBanField}}if(a.options.settings.coverField&&!checkNested(a.columns,a.options.settings.coverField)){var e=i.App.get("fieldFromFieldSlug",a.options.settings.coverField);""!=e?a.columns[a.options.settings.coverField]=e:a.columns[a.options.settings.coverField]={slug:a.options.settings.coverField}}var g=function(b){var c=!1;return checkNested(a.columns,a.options.settings.kanBanField)&&(c=a.columns[a.options.settings.kanBanField]),angular.forEach(b,function(b){b.optKey=-1,c!==!1&&checkNested(b,c.slug)&&!_tb.is("null",b[c.slug])&&angular.forEach(c.options,function(a,d){("0"==c.allowDiffVal&&a.text==b[c.slug]||"1"==c.allowDiffVal&&a.val==b[c.slug])&&(b.optKey=d)}),angular.forEach(a.options.settings.kanCols,function(a){checkNested(a,"total")||(a.total=0),a.optKey==b.optKey&&(a.total>=99||"99+"==a.total?a.total="99+":a.total++)})}),b};a.setFilterTab=function(b){a.tabIndex=b;var c=[];checkNested(a,"options","filterTabs",b)&&(c=a.options.filterTabs[b]),a.query.page=1,a.query.fIndex=b,a.refreshData()},checkNested(options,"filterTabs")&&angular.forEach(options.filterTabs,function(b,c){checkNested(b,"defaultFilter")&&b.defaultFilter&&(a.tabIndex=c,a.query.fIndex=c)}),a.refresh=0,a.refreshData=function(){""!=a.uId?(a.refresh=1,i.doRootLoading(!0),f.post("g."+a.uId,a.query,function(b){a.refresh=0,"error"==b.type?(a.status="error",a.err=checkNested(b,"msg")&&b.msg?b.msg:"Data table not found."):(a.status="done",a.err="",angular.forEach(a.columns,function(a,c){checkNested(b.dataFieldOptions,a.fieldId)&&(checkNested(a,"options")?a.options=angular.extend(a.options,b.dataFieldOptions[a.fieldId]):a.options=b.dataFieldOptions[a.fieldId])}),checkNested(b,"fullColumns")&&angular.forEach(b.fullColumns,function(b,c){checkNested(a.columns,b.id)||(a.columns[b.id]=b)}),a.loggedInItem=checkNested(b,"loggedInItem")?b.loggedInItem:{},a.items=g(b.items),a.totalItems=b.totalItems),i.doRootLoading(!1)},function(b,c){a.status="error",a.err=checkNested(b,"msg")&&b.msg?b.msg:"The data was not load",i.doRootLoading(!1)},!0)):(a.refresh=0,a.status="error",a.err="The data of timeline was not found.")},a.refreshData(),j.registerDataChange("form_add_record",function(b,c){checkNested(c,"tableId")&&c.tableId==a.tableId&&a.refreshData()}),a.fields={},a.doColumnAction=function(b,c,e){var g=b.name;switch(g){case"Action":if(angular.element(e.target).hasClass("disabled"))return;angular.element(e.target).addClass("disabled"),f.post("data-table."+d+".actions."+a.items[c].id,{column:b},function(b){if("success"==b.type&&(a.refreshData(),checkNested(b,"msg"))){var c=angular.isArray(b.msg)?b.msg.join("<br/>"):b.msg;h.show(c,"success")}angular.element(e.target).removeClass("disabled")},function(a,b){angular.element(e.target).removeClass("disabled")});break;case"Delete":a.items[c].loading=!0,confirm("Are you sure to delete this record?")?f["delete"]("data-table."+d+".delete."+a.items[c].id,{},function(b){h.show(b.msg,b.type,"Record Delete"),"success"==b.type&&a.items.splice(c,1)},function(b,d){h.show("Record not found","error","Record Delete"),a.items[c].loading=!1}):a.items[c].loading=!1}},a.kanFilter=function(a){return function(b){return b.optKey==a.optKey}},a.toggleUpClose=function(a){a.hide=!!angular.isUndefined(a.hide)||!a.hide},a.columnStyle=function(a,b,c){var d={};return checkNested(b,"displayRules")&&b.displayRules&&angular.forEach(b.displayRules,function(c){if(checkNested(c,"items")&&c.items.length>0){var e=0;if(angular.forEach(c.items,function(b){e+=k(b,a)}),e&&e==c.items.length)switch(c.action){case"textColor":d.color=c.color;break;case"textStyle":checkNested(c,"textBold")&&c.textBold&&(d.fontWeight="900"),checkNested(c,"textItalic")&&c.textItalic&&(d.fontStyle="italic"),checkNested(c,"textStrikethrough")&&c.textStrikethrough&&(d.textDecoration="line-through");break;case"bkColor":d.backgroundColor=c.color;break;case"hideValue":d.display="none";break;case"icon":checkNested(a,b.fieldId)}}}),d};var k=function(b,c){switch(isTrue=0,b.operator){case"contains":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)&&(angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())>-1&&isTrue++:angular.isObject(c[b.fieldId])&&_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++);break;case"does not contain":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)?angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())==-1&&isTrue++:angular.isObject(c[b.fieldId])&&!_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++:isTrue++;break;case"is":"Date"==a.fieldType[b.fieldId]?checkNested(c,b.fieldId)&&moment(b.val).isSame(c[b.fieldId],"day")&&isTrue++:checkNested(c,b.fieldId)&&c[b.fieldId]==b.val&&isTrue++;break;case"is not":"Date"==a.fieldType[b.fieldId]?(!checkNested(c,b.fieldId)||!moment(b.val).isSame(c[b.fieldId],"day"))&&isTrue++:(!checkNested(c,b.fieldId)||c[b.fieldId]!=b.val)&&isTrue++;break;case"starts with":checkNested(c,b.fieldId)&&new RegExp("^"+b.val).test(c[b.fieldId])&&isTrue++;break;case"ends with":checkNested(c,b.fieldId)&&new RegExp(b.val+"$").test(c[b.fieldId])&&isTrue++;break;case"is blank":(!checkNested(c,b.fieldId)||/^\s*$/.test(c[b.fieldId])||null==c[b.fieldId])&&isTrue++;break;case"is not blank":checkNested(c,b.fieldId)&&!/^\s*$/.test(c[b.fieldId])&&null!=c[b.fieldId]&&isTrue++;break;case"higher than":checkNested(c,b.fieldId)&&c[b.fieldId]>parseInt(b.val)&&isTrue++;break;case"lower than":checkNested(c,b.fieldId)&&c[b.fieldId]<parseInt(b.val)&&isTrue++;break;case"is during the current":var d=checkNested(b,"val2")?b.val2:"week";switch(d){case"month":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":checkNested(c,b.fieldId)&&moment().format("YY-Q")==moment(c[b.fieldId]).format("YY-Q")&&isTrue++;break;case"year":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:checkNested(c,b.fieldId)&&moment().week()==moment(c[b.fieldId]).week()&&isTrue++}break;case"is during the previous":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().subtract(e,d).startOf(d),moment().endOf(d),null,"[]")&&isTrue++;break;case"is during the next":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().startOf(d),moment().add(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the previous":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the next":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isBefore(moment(b.val).startOf("day"))&&isTrue++;break;case"is after":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isAfter(moment(b.val).endOf("day"))&&isTrue++;break;case"is today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue},l=j.get("variables"),m=function(a){return angular.forEach(l,function(b){a=a.split("{!"+b.slug+"!}").join(j.get("variableFinalVal",b))}),a};a.fieldValue=function(b,c){var d="",e=[];if(checkNested(b,"ftype"))switch(b.ftype){case"html":d=m(b.text),angular.forEach(c,function(a,b){angular.isObject(a)?checkNested(a,"src")&&(d=d.split("{"+b+"}").join("https:"+a.src)):d=d.split("{"+b+"}").join(a)})}else{if(!checkNested(b,"fieldId"))return;switch(b.type){case"TableLink1":"Delete"!=b.name&&(d=$compile('<a href="javascript:void(0)" data-new-window="No" data-type="Page" data-item-id="'+b.page.id+'" data-page-id="'+b.page.id+'" data-link="http://">'+b.title+"</a>")(a.parent));break;case"TableLink1":var f="";return f="Delete"!=$ctrl.column.name?$compile('<a href="javascript:void(0)" data-new-window="No" data-type="Page" af-menu-item="" data-item-id="'+$ctrl.item.id+'" data-page-id="'+$ctrl.column.page.id+'" data-link="http://">'+$ctrl.column.title+"</a>")(a):$compile('<a href="javascript:void(0)" ng-click="doColumnAction(column.name, itemIndex)">'+$ctrl.column.title+"</a>")(a.$parent);case"Link":var g=checkNested(c,b.slug)?c[b.slug]:"";checkNested(g,"link")&&(d+='<a href="'+g.link+'" ',checkNested(b,"options","openInNewWindow")&&"Yes"==b.options.openInNewWindow&&(d+='target="_blank"'),d+=">",d+=checkNested(b,"options","linkFormat")?"same_text"===b.options.linkFormat&&checkNested(b,"options","linkText")?b.options.linkText:"unique"===b.options.linkFormat?g.text:g.link:g.link,d+="</a>");break;case"Image":var g=checkNested(c,b.slug)?c[b.slug]:"";if(checkNested(g,"src")){var h="";checkNested(b,"sizeType")&&"custom"==b.sizeType&&(checkNested(b,"width")&&(h+='width="'+b.width+'px"'),checkNested(b,"height")&&(h+='height="'+b.height+'px"')),d='<img src="'+g.src+'" class="'+(checkNested(b,"isResponsive")&&"No"==b.isResponsive?"":"img-responsive")+'" '+h+"   />"}break;case"Date":if(d=checkNested(c,b.slug)?c[b.slug]:"",""!=d){var i=new Date(d);d=d?$filter("date")(i,j.getSetting("dateFormat")):""}break;case"Address1":e=[],$joinFields=["address","address2","city","state","country","zip"];for(var k in $joinFields){var l=$joinFields[k];checkNested(c,b.slug,l)&&e.push(c[b.slug][l])}d=e.length?e.join(" ")+".":"-";break;case"Name1":e=[],$joinFields=["_first_name","_middle_name","_last_name"];for(var k in $joinFields){var l=$joinFields[k];checkNested(c,b.slug+l)&&e.push(c[b.slug+l])}d=e.length?e.join(" "):"-";break;default:d=checkNested(c,b.slug)?c[b.slug]:""}}return d||"&nbsp;"}}}}]),angular.module("app").directive("afList",["AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox","$rootScope","App",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div class="alert alert-danger" ng-show="status == \'error\'">{{err}}</div><div ng-show="status == \'loading\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading data...</div><div ng-show="status == \'done\'"><h2 ng-if="options.settings.tableTitle != \'\'">{{opt.settings.tableTitle}}</h2><div class="filter-tabs" ng-if="options.settings.filterType==\'Filter Tab\'"><ul class="nav nav-tabs"><li class="tab-{{tab.badgeClass}}" ng-repeat="tab in options.filterTabs" ng-class="{\'active\': tabIndex == $index, \'tab-colored\': tab.isColor}"><a ng-click="setFilterTab($index)">{{tab.title}}</a></li><li ng-if="options.settings.hideClearFilter != \'Yes\'"><a ng-click="setFilterTab(-1)">Clear Filter</a></li></ul></div><div class="table-actions no-print"><div class="pull-left form-inline"><div class="input-group" ng-if="options.settings.allowSearch == \'Yes\'"><input type="text" ng-model="query.filters.k" class="form-control input-sm padder" placeholder="Search..." ng-enter="refreshData();"/><span class="input-group-btn" ng-click="refreshData()"><button type="submit" class="btn btn-sm"><i class="fa fa-search"></i></button></span></div><button class="btn btn-primary btn-sm m-l-xs" ng-click="refreshData()"><i class="far fa-sync" aria-hidden="true"></i></button></div><div class="pull-right"><button class="btn btn-default btn-sm" ng-show="refresh == \'1\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading...</button>&nbsp;<button class="btn btn-default disabled btn-sm" >{{totalItems}} {{totalItems === 1 ? "Record" : "Records"}}</button>&nbsp;<hit-pagination2 ng-if="options.settings.showPagination == \'Yes\' && totalItems > limit" page="query.page" total-items="totalItems" limit="limit" refresh-data="refreshPageData"></hit-pagination2></div><div class="clearfix"></div></div><div ng-if="items.length == 0">{{options.settings.noDataText || \'No record found\'}}</div><div class="row list-layout-size-{{listLayoutColSize}}"><div class="col-md-{{listLayoutColSize}}" ng-repeat="(itemIndex, item) in items"><div class="list-row-item list-layout-{{options.itemClass}}" style="{{options.itemStyle}}"><div class="list-cover"><af-data-table-field item="item" column="columns[options.coverField]" columns="columns" in-display-mode="\'detail\'"></af-data-table-field></div><div class="list-body"><div class="row" ng-repeat="(rowIndex, row) in options.rows"><div class="col-md-{{col.size || \'12\'}}" ng-repeat="(colIndex, col) in row.cols"><div class="form-group" ng-repeat="(fieldIndex, column) in col.fields" id="field_block_{{column.slug}}" ng-style1="columnStyle(column, item)" allow-inline-editing-for-app item="item" field="column" allow-edit="options.settings.allowInlineEdit == \'Yes\' && (!column.allowInlineEdit || column.allowInlineEdit==\'Yes\')" table-id="tableId" page-id="pageId"><label ng-if="column.hideTitle != \'Yes\'">{{column.title}}</label><div class="{{column.cssClass}}"><af-data-table-field item="item" column="column" columns="columns" in-display-mode="\'detail\'" update-val="item.__changed" logged-in-item="loggedInItem" ng-click="doColumnAction(column, itemIndex, $event, rowIndex, colIndex, fieldIndex)"></af-data-table-field></div></div></div></div></div></div><hr class="hr1" ng-if="options.settings.hrAfterRecord == \'Yes\'"></div></div><div class="table-actions"><div class="pull-right"><button class="btn btn-default btn-sm" ng-show="refresh == \'1\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading...</button>&nbsp;<button class="btn btn-default disabled btn-sm" >{{totalItems}} {{totalItems === 1 ? "Record" : "Records"}}</button>&nbsp;<hit-pagination2 ng-if="options.settings.showPagination == \'Yes\' && totalItems > limit" page="query.page" total-items="totalItems" limit="limit" refresh-data="refreshPageData"></hit-pagination2></div><div class="clearfix"></div></div></div>',link:function(a,b,c){var d=checkNested(c.tableId)?c.tableId:0;if(a.uId=checkNested(c,"uId")?c.uId:"",a.tableId=d,a.tabIndex=-1,a.options=options=JSON.parse(checkNested(c.options)?c.options:"{}"),a.pageId=checkNested(a.options,"pageId")?a.options.pageId:"",checkNested(a.options,"settings")||(a.options.settings={}),checkNested(a.options,"settings","allowInlineEdit")||(a.options.settings.allowInlineEdit="No"),a.options.itemClass=checkNested(a.options.settings,"layout")&&!_tb.is("null",a.options.settings.layout)?a.options.settings.layout:"default",a.options.itemClass=a.options.itemClass.toLowerCase().split(" ").join("-"),a.options.itemStyle=[],a.options.coverField=!1,"bordered-box"==a.options.itemClass){a.options.settings.layoutBbColor=checkNested(a.options.settings,"layoutBbColor")?a.options.settings.layoutBbColor:"#000000",a.options.settings.layoutBbWidth=(checkNested(a.options.settings,"layoutBbWidth")?a.options.settings.layoutBbWidth:"1")+"px";var e=["Left","Top","Right","Bottom"];angular.forEach(e,function(b){checkNested(a.options.settings,"layoutBb"+b)&&a.options.settings["layoutBb"+b]&&a.options.itemStyle.push("border-"+b.toLowerCase()+": "+a.options.settings.layoutBbWidth+" solid "+a.options.settings.layoutBbColor)}),checkNested(a.options.settings,"layoutBbRadius")&&!_tb.is("null",a.options.settings.layoutBbRadius)&&a.options.settings.layoutBbRadius>0&&a.options.itemStyle.push("border-radius:"+a.options.settings.layoutBbRadius+"px"),a.options.itemStyle=a.options.itemStyle.join(";")}if(a.listLayoutColSize=12,checkNested(a.options.settings,"listLayout"))switch(a.options.settings.listLayout){case"6 Columns":a.listLayoutColSize=2;break;case"4 Columns":a.listLayoutColSize=3;break;case"3 Columns":a.listLayoutColSize=4;break;case"2 Columns":a.listLayoutColSize=6}if(a.loggedInItem={},a.items=[],a.columns={},a.status="loading",a.limit=checkNested(a.options,"settings","recordLimit")?a.options.settings.recordLimit:10,a.limit=parseInt(a.limit)<1?1:a.limit,a.totalItems=0,a.query={filters:{k:""},page:1,limit:a.limit},checkNested(options,"onlyLoginAllow")&&(a.query.filters.onlyLogin=options.onlyLoginAllow),checkNested(a.options,"joinFieldId")&&checkNested(a.options,"joinTableId")&&(a.query.join={recordId:i.App.get("recordIdFromURL"),fieldId:a.options.joinFieldId,tableId:a.options.joinTableId,slug:a.options.joinTableSlug,type:a.options.joinType,table:a.options.joinTable}),a.query.rId=i.App.get("recordIdFromURL"),a.setupColumn=function(a){var b={};return checkNested(a,"widthType")&&checkNested(a,"widthUnit")&&"custom"==a.widthType&&(b.width=a.widthUnit+(checkNested(a,"widthUnitType")&&"percent"==a.widthUnitType?"%":"px")),checkNested(a,"align")&&(b.textAlign=a.align),b},checkNested(a.options,"rows")&&angular.forEach(a.options.rows,function(b,c){angular.forEach(b.cols,function(b,c){angular.forEach(b.fields,function(b){b.cssClass="",checkNested(b,"align")&&""!=b.align&&(b.cssClass=" text-"+b.align.toLowerCase()),checkNested(b,"ftype")&&"html"==b.ftype||checkNested(b,"slug")&&b.slug&&(checkNested(b,"tableType")||"TableLink"==b.type||(b.tableType="self"),checkNested(b,"tableType")&&"self"==b.tableType?b.allowInlineEdit=checkNested(b,"allowInlineEdit")&&"No"==b.allowInlineEdit?"No":"Yes":b.allowInlineEdit="No",a.columns[b.fieldId]=b)})})}),"bordered-box"==a.options.itemClass&&checkNested(a.options.settings,"layoutBiCoverField")&&!checkNested(a.columns,a.options.settings.layoutBiCoverField)){var g=i.App.get("fieldFromFieldSlug",a.options.settings.layoutBiCoverField);""!=g?(a.options.coverField=a.options.settings.layoutBiCoverField,a.columns[a.options.settings.layoutBiCoverField]=g):a.columns[a.options.settings.layoutBiCoverField]={slug:a.options.settings.layoutBiCoverField}}a.setFilterTab=function(b){a.tabIndex=b;var c=[];checkNested(a,"options","filterTabs",b)&&(c=a.options.filterTabs[b]),a.query.page=1,a.query.fIndex=b,a.refreshData()},checkNested(options,"filterTabs")&&angular.forEach(options.filterTabs,function(b,c){checkNested(b,"defaultFilter")&&b.defaultFilter&&(a.tabIndex=c,a.query.fIndex=c)}),a.refresh=0,a.refreshPageData=function(b){angular.isDefined(b)&&(a.query.page=b),a.refreshData()},a.refreshData=function(){""!=a.uId?(a.refresh=1,i.doRootLoading(!0),f.post("g."+a.uId,a.query,function(b){a.refresh=0,"error"==b.type?(a.status="error",a.err=checkNested(b,"msg")&&b.msg?b.msg:"Data table not found."):(a.status="done",a.err="",angular.forEach(a.columns,function(a,c){checkNested(b.dataFieldOptions,a.fieldId)&&(checkNested(a,"options")?a.options=angular.extend(a.options,b.dataFieldOptions[a.fieldId]):a.options=b.dataFieldOptions[a.fieldId])}),checkNested(b,"fullColumns")&&angular.forEach(b.fullColumns,function(b,c){checkNested(a.columns,b.id)||(a.columns[b.id]=b)}),a.loggedInItem=checkNested(b,"loggedInItem")?b.loggedInItem:{},a.items=b.items,a.totalItems=b.totalItems),i.doRootLoading(!1)},function(b,c){a.status="error",a.err=checkNested(b,"msg")&&b.msg?b.msg:"Data table not found.",i.doRootLoading(!1)},!0)):(a.refresh=0,a.status="error",a.err="Data table not found.")},a.refreshData(),j.registerDataChange("form_add_record",function(b,c){checkNested(c,"tableId")&&c.tableId==a.tableId&&a.refreshData()}),a.fields={},a.doColumnAction=function(b,c,e,g,i,j){var k=b.name;switch(k){case"Action":if(angular.element(e.target).hasClass("disabled"))return;var l="g."+a.uId+".actions."+g+"_"+i+"_"+j,m={rId:a.items[c].id};checkNested(b,"coords")&&(m.coords=a.coords),angular.element(e.target).addClass("disabled"),f.post(l,m,function(b){if("success"==b.type&&(a.refreshData(),checkNested(b,"msg"))){
var c=angular.isArray(b.msg)?b.msg.join("<br/>"):b.msg;h.show(c,"success")}angular.element(e.target).removeClass("disabled")},function(a,b){angular.element(e.target).removeClass("disabled")});break;case"Delete":a.items[c].loading=!0;var n=checkNested(b,"confirmMsg")?b.confirmMsg:"";""==jQuery.trim(n)&&(n="Are you sure you want to delete this record?"),confirm(n)?f["delete"]("data-table."+d+".delete."+a.items[c].id,{},function(b){h.show(b.msg,b.type,"Record Delete"),"success"==b.type&&(a.items.splice(c,1),a.totalItems--)},function(b,d){h.show("Record not found","error","Record Delete"),a.items[c].loading=!1}):a.items[c].loading=!1}},a.columnStyle=function(a,b,c){var d={};return checkNested(b,"displayRules")&&b.displayRules&&angular.forEach(b.displayRules,function(c){if(checkNested(c,"items")&&c.items.length>0){var e=0;if(angular.forEach(c.items,function(b){e+=k(b,a)}),e&&e==c.items.length)switch(c.action){case"textColor":d.color=c.color;break;case"textStyle":checkNested(c,"textBold")&&c.textBold&&(d.fontWeight="900"),checkNested(c,"textItalic")&&c.textItalic&&(d.fontStyle="italic"),checkNested(c,"textStrikethrough")&&c.textStrikethrough&&(d.textDecoration="line-through");break;case"bkColor":d.backgroundColor=c.color;break;case"hideValue":d.display="none";break;case"icon":checkNested(a,b.fieldId)}}}),d};var k=function(b,c){switch(isTrue=0,b.operator){case"contains":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)&&(angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())>-1&&isTrue++:angular.isObject(c[b.fieldId])&&_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++);break;case"does not contain":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)?angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())==-1&&isTrue++:angular.isObject(c[b.fieldId])&&!_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++:isTrue++;break;case"is":"Date"==a.fieldType[b.fieldId]?checkNested(c,b.fieldId)&&moment(b.val).isSame(c[b.fieldId],"day")&&isTrue++:checkNested(c,b.fieldId)&&c[b.fieldId]==b.val&&isTrue++;break;case"is not":"Date"==a.fieldType[b.fieldId]?(!checkNested(c,b.fieldId)||!moment(b.val).isSame(c[b.fieldId],"day"))&&isTrue++:(!checkNested(c,b.fieldId)||c[b.fieldId]!=b.val)&&isTrue++;break;case"starts with":checkNested(c,b.fieldId)&&new RegExp("^"+b.val).test(c[b.fieldId])&&isTrue++;break;case"ends with":checkNested(c,b.fieldId)&&new RegExp(b.val+"$").test(c[b.fieldId])&&isTrue++;break;case"is blank":(!checkNested(c,b.fieldId)||/^\s*$/.test(c[b.fieldId])||null==c[b.fieldId])&&isTrue++;break;case"is not blank":checkNested(c,b.fieldId)&&!/^\s*$/.test(c[b.fieldId])&&null!=c[b.fieldId]&&isTrue++;break;case"higher than":checkNested(c,b.fieldId)&&c[b.fieldId]>parseInt(b.val)&&isTrue++;break;case"lower than":checkNested(c,b.fieldId)&&c[b.fieldId]<parseInt(b.val)&&isTrue++;break;case"is during the current":var d=checkNested(b,"val2")?b.val2:"week";switch(d){case"month":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":checkNested(c,b.fieldId)&&moment().format("YY-Q")==moment(c[b.fieldId]).format("YY-Q")&&isTrue++;break;case"year":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:checkNested(c,b.fieldId)&&moment().week()==moment(c[b.fieldId]).week()&&isTrue++}break;case"is during the previous":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().subtract(e,d).startOf(d),moment().endOf(d),null,"[]")&&isTrue++;break;case"is during the next":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().startOf(d),moment().add(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the previous":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the next":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isBefore(moment(b.val).startOf("day"))&&isTrue++;break;case"is after":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isAfter(moment(b.val).endOf("day"))&&isTrue++;break;case"is today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue},l=j.get("variables"),m=function(a){return angular.forEach(l,function(b){a=a.split("{!"+b.slug+"!}").join(j.get("variableFinalVal",b))}),a};a.fieldValue=function(b,c){var d="",e=[];if(checkNested(b,"ftype"))switch(b.ftype){case"html":d=m(b.text),angular.forEach(c,function(a,b){angular.isObject(a)?checkNested(a,"src")&&(d=d.split("{"+b+"}").join("https:"+a.src)):d=d.split("{"+b+"}").join(a)})}else{if(!checkNested(b,"fieldId"))return;switch(b.type){case"TableLink1":"Delete"!=b.name&&(d=$compile('<a href="javascript:void(0)" data-new-window="No" data-type="Page" data-item-id="'+b.page.id+'" data-page-id="'+b.page.id+'" data-link="http://">'+b.title+"</a>")(a.parent));break;case"TableLink1":var f="";return f="Delete"!=$ctrl.column.name?$compile('<a href="javascript:void(0)" data-new-window="No" data-type="Page" af-menu-item="" data-item-id="'+$ctrl.item.id+'" data-page-id="'+$ctrl.column.page.id+'" data-link="http://">'+$ctrl.column.title+"</a>")(a):$compile('<a href="javascript:void(0)" ng-click="doColumnAction(column.name, itemIndex)">'+$ctrl.column.title+"</a>")(a.$parent);case"Link":var g=checkNested(c,b.slug)?c[b.slug]:"";checkNested(g,"link")&&(d+='<a href="'+g.link+'" ',checkNested(b,"options","openInNewWindow")&&"Yes"==b.options.openInNewWindow&&(d+='target="_blank"'),d+=">",d+=checkNested(b,"options","linkFormat")?"same_text"===b.options.linkFormat&&checkNested(b,"options","linkText")?b.options.linkText:"unique"===b.options.linkFormat?g.text:g.link:g.link,d+="</a>");break;case"Image":var g=checkNested(c,b.slug)?c[b.slug]:"";if(checkNested(g,"src")){var h="";checkNested(b,"sizeType")&&"custom"==b.sizeType&&(checkNested(b,"width")&&(h+='width="'+b.width+'px"'),checkNested(b,"height")&&(h+='height="'+b.height+'px"')),d='<img src="'+g.src+'" class="'+(checkNested(b,"isResponsive")&&"No"==b.isResponsive?"":"img-responsive")+'" '+h+"   />"}break;case"Date":if(d=checkNested(c,b.slug)?c[b.slug]:"",""!=d){var i=new Date(d);d=d?$filter("date")(i,j.getSetting("dateFormat")):""}break;case"Address1":e=[],$joinFields=["address","address2","city","state","country","zip"];for(var k in $joinFields){var l=$joinFields[k];checkNested(c,b.slug,l)&&e.push(c[b.slug][l])}d=e.length?e.join(" ")+".":"-";break;case"Name1":e=[],$joinFields=["_first_name","_middle_name","_last_name"];for(var k in $joinFields){var l=$joinFields[k];checkNested(c,b.slug+l)&&e.push(c[b.slug+l])}d=e.length?e.join(" "):"-";break;default:d=checkNested(c,b.slug)?c[b.slug]:""}}return d||"&nbsp;"}}}}]),angular.module("app").directive("afLoginForm",["AppSetting","$state","Http","$rootScope",function(a,b,c,d){return{template:'<div class="form-horizontal" ng-controller="AppLoginCtrl" data-labels="{{options.labels}}" data-unique-id="{{options.uniqueId}}"><div ng-if="pageFlashMsg" class="alert alert-danger">{{pageFlashMsg}}</div><div ng-if="successMsg" class="alert alert-success">{{successMsg}}</div><div ng-if="isAlreadyLogin" ><div class="alert alert-info">{{isAlreadyLoginMsg}}<button type="button" ng-click="logout()" class="btn btn-primary m-l-15 btn-xs">Logout</button></div></div><div ng-if="!isAlreadyLogin"><div ng-if="formMode == \'login\'"><form ng-enter2=".btn-signin"><div class="alert alert-danger" ng-show="error && !pageFlashMsg">{{error}}</div><div class="form-group"><label class="col-sm-2 control-label">Email Address</label><div class="col-sm-10"><input type="email" name="email" ng-model="item.username" class="form-control" placeholder="Email Address"></div></div><div class="form-group"><label class="col-sm-2 control-label">Password</label><div class="col-sm-10"><input type="password" ng-model="item.password" class="form-control" placeholder="Password"></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="button" ng-click="signIn($event)" data-go="/" data-redirect-rules="{{options.redirectRules}}" data-labels="{{options.labels}}"  data-unique-id="{{options.uniqueId}}" class="btn btn-primary btn-signin" ng-disabled="loginStatus"><i class="fal fa-sign-in-alt"></i> Sign in</button></div><div class="col-sm-offset-2 col-sm-10 m-t" ng-if="options.allowedForgetPassword == \'Yes\'"><a href="javascript:void(0)" ng-click="setFormMode(\'forgotPass\')">Forgot password?</a></div></div></form></div><div ng-if="formMode == \'forgotPass\'"><form ng-enter="forgotPass()"><div class="alert alert-danger" ng-show="error && !pageFlashMsg">{{error}}</div><div class="form-group"><label class="col-sm-2 control-label">Email Address</label><div class="col-sm-10"><input type="text" ng-model="item.email" class="form-control" placeholder="Email Address"></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="button" ng-click="forgotPass()" class="btn btn-primary" ng-bind-html="btnSendVerificationCode | unsafe"></button></div><div class="col-sm-offset-2 col-sm-10 m-t"><a href="javascript:void(0)" ng-click="setFormMode(\'login\')">Back</a></div></div></form></div><div ng-if="formMode == \'resetPass\'"><form ng-enter="resetPass()"><div class="alert alert-danger" ng-show="error && !pageFlashMsg">{{error}}</div><div class="form-group"><label class="col-sm-2 control-label">Email Address</label><div class="col-sm-10"><label class="control-label">{{item.email}}</label></div></div><div class="form-group"><label class="col-sm-2 control-label">Verification Code</label><div class="col-sm-10"><input type="text" ng-model="item.code" class="form-control" placeholder="Enter Code"/></div></div><div class="form-group"><label class="col-sm-2 control-label">New Password</label><div class="col-sm-10"><input type="password" ng-model="item.newPass" class="form-control" placeholder="Enter new password"></div></div><div class="form-group"><label class="col-sm-2 control-label">Confirm Password</label><div class="col-sm-10"><input type="password" ng-model="item.conPass" class="form-control" placeholder="Confirm new password"></div></div><div class="form-group"><div class="col-sm-offset-2 col-sm-10"><button type="button" ng-click="resetPass()" class="btn btn-primary m-r" ng-bind-html="btnResetPass | unsafe"></button><button type="button" ng-click="forgotPass()" class="btn btn-primary" ng-bind-html="btnSendVerificationCode | unsafe"></button></div><div class="col-sm-offset-2 col-sm-10 m-t"><a href="javascript:void(0)" ng-click="setFormMode(\'login\')">Back</a></div></div></form></div></div></div>',link:function(a,b,c){a.pageFlashMsg=d.App.getFlash("loginPageInfo"),a.options=JSON.parse(checkNested(c.options)?c.options:"{}"),checkNested(a.options,"redirectRules")||(a.options.redirectRules=[]),checkNested(a.options,"labels")||(a.options.labels={})}}}]),angular.module("app").directive("afMap",["AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox","$rootScope","App",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div ng-show="status == \'not\'"></div><div ng-show="status == \'error\'" class="alert alert-danger">{{err}}</div><div ng-show="status == \'loading\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading data...</div><div ng-show="status == \'init\'"><i class="far fa-spin fa-circle-o-notch"></i> Initalizing map...</div><div ng-show="status == \'done\'"><h2 ng-if="options.settings.title != \'\'">{{opt.settings.title}}</h2><div class="filter-tabs" ng-if="options.settings.filterType==\'Filter Tab\'"><ul class="nav nav-tabs"><li class="tab-{{tab.badgeClass}}" ng-repeat="tab in options.filterTabs" ng-class="{\'active\': tabIndex == $index, \'tab-colored\': tab.isColor}"><a ng-click="setFilterTab($index)">{{tab.title}}</a></li><li ng-if="options.settings.hideClearFilter != \'Yes\'"><a ng-click="setFilterTab(-1)">Clear Filter</a></li></ul></div><div class="table-actions"><div class="pull-left form-inline" ng-if="0"><div class="input-group" ng-if="options.settings.allowSearch == \'Yes\'"><input type="text" ng-model="query.filters.k" class="form-control input-sm padder" placeholder="Search..." ng-enter="refreshData();"/><span class="input-group-btn" ng-click="refreshData()"><button type="submit" class="btn btn-sm"><i class="fa fa-search"></i></button></span></div><button class="btn btn-primary btn-sm m-l-xs" ng-click="refreshData()"><i class="far fa-sync" aria-hidden="true"></i></button></div><div class="pull-right"><button class="btn btn-default btn-sm" ng-show="refresh == \'1\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading...</button>&nbsp;<button class="btn btn-default btn-sm" ng-click="showHideListView()" ng-if="options.allowList == \'Yes\'"><span ng-show="options.openList">Hide</span><span ng-show="!options.openList">Show</span> List</button>&nbsp;<button class="btn btn-default disabled btn-sm" >{{totalItems}} {{totalItems === 1 ? "Record" : "Records"}}</button>&nbsp;<hit-pagination2 ng-if="options.settings.showPagination == \'Yes\' && totalItems > limit" page="query.page" total-items="totalItems" limit="limit" refresh-data="refreshPageData"></hit-pagination2></div><div class="clearfix"></div></div><div ng-if="items.length == 0">{{options.settings.noDataText || \'No record found\'}}</div><div class="row hide map-view"><div class="" ng-class="{\'col-md-9\': options.openList, \'col-md-12\': !options.openList}"><div class="map-map"></div></div><div class="map-list" ng-class="{\'col-md-3\': options.openList, \'hide\': !options.openList}"><div ng-repeat="(itemIndex, item) in items" class="map-list-row-item" data-id="map-item-{{item.id}}" ng-class1="{\'active\': activeMapItemId == item.id}" ng-click="openInfoWindow(item.id)"><div class="list-body"><div class="row" ng-repeat="row in options.listView.rows"><div class="col-md-{{col.size}}" ng-repeat="col in row.cols"><div class="form-group" ng-repeat="column in col.fields" id="field_block_{{column.slug}}" ng-style1="columnStyle(column, item)"><label ng-if="column.hideTitle != \'Yes\'">{{column.title}}</label><div><af-data-table-field item="item" column="column" columns="columns.listView" in-display-mode="\'detail\'"></af-data-table-field></div></div></div></div></div></div></div></div><div class="hide map-popup-view"><div ng-repeat="(itemIndex, item) in items" data-id="map-popup-{{item.id}}"><div class="list-body" style="width:90%;"><div class="row" ng-repeat="row in options.popupView.rows"><div class="col-md-{{col.size}}" ng-repeat="col in row.cols"><div class="form-group" ng-repeat="column in col.fields" id="field_block_{{column.slug}}" ng-style1="columnStyle(column, item)"><label ng-if="column.hideTitle != \'Yes\'">{{column.title}}</label><div><af-data-table-field item="item" column="column" columns="columns.listView" in-display-mode="\'detail\'"></af-data-table-field></div></div></div></div></div></div></div><div class="table-actions"><div class="pull-right"><button class="btn btn-default btn-sm" ng-show="refresh == \'1\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading...</button>&nbsp;<button class="btn btn-default btn-sm" ng-click="showHideListView()"><span ng-show="options.openList">Hide</span><span ng-show="!options.openList">Show</span> List</button>&nbsp;<button class="btn btn-default disabled btn-sm" >{{totalItems}} {{totalItems === 1 ? "Record" : "Records"}}</button>&nbsp;<hit-pagination2 ng-if="options.settings.showPagination == \'Yes\' && totalItems > limit" page="query.page" total-items="totalItems" limit="limit" refresh-data="refreshPageData"></hit-pagination2></div><div class="clearfix"></div></div></div>',link:function(a,b,c){var d=checkNested(c.tableId)?c.tableId:0;a.tableId=d,a.tabIndex=-1,a.options=options=JSON.parse(checkNested(c.options)?c.options:"{}"),a.options.openList=!0,checkNested(a.options,"allowList")&&"No"==a.options.allowList&&(a.options.openList=!1),checkNested(a.options,"settings")||(a.options.settings={}),a.items=[],a.columns={},a.status="loading",a.limit=checkNested(a.options,"settings","recordLimit")?a.options.settings.recordLimit:-1,a.totalItems=0,a.query={filters:{k:""},columns:[],join:{},page:1,limit:a.limit},checkNested(options,"settings","sortBy")&&(a.query.sortBy=options.settings.sortBy),angular.isArray(a.query.sortBy)&&0!=a.query.sortBy.length||(a.query.sortBy=[{sort:"id",by:"desc"}]),checkNested(options,"onlyLoginAllow")&&(a.query.filters.onlyLogin=options.onlyLoginAllow),checkNested(options,"filters")&&(a.query.filters.filters=options.filters),checkNested(a.options,"joinFieldId")&&checkNested(a.options,"joinTableId")&&(a.query.join={recordId:i.App.get("recordIdFromURL"),fieldId:a.options.joinFieldId,tableId:a.options.joinTableId,slug:a.options.joinTableSlug,type:a.options.joinType,table:a.options.joinTable},checkNested(a.options,"joinLevel")&&(a.query.join.joinLevel=a.options.joinLevel),checkNested(a.options,"joinType2")&&(a.query.join.joinType2=a.options.joinType2),checkNested(a.options,"join2")&&(a.query.join.join2=a.options.join2),checkNested(a.options,"join")&&(a.query.join.join=a.options.join)),a.query.rId=i.App.get("recordIdFromURL");var g=["listView","popupView"];angular.forEach(g,function(b){a.columns[b]={},checkNested(a.options,b,"rows")&&angular.forEach(a.options[b].rows,function(c,d){angular.forEach(c.cols,function(c,d){angular.forEach(c.fields,function(c){checkNested(c,"ftype")&&"html"==c.ftype?a.query.columns=a.query.columns.concat(findCurlyBracketStr(c.text)):checkNested(c,"slug")&&c.slug&&(a.query.columns.push(c.slug),a.columns[b][c.fieldId]=c,a.columns[b][c.slug]=i.App.get("fieldFromFieldSlug",c.slug))})})})}),checkNested(a.options,"settings","mapField")&&""!=a.options.settings.mapField&&a.query.columns.push(a.options.settings.mapField),checkNested(a.options,"settings","customRuleIcons")&&angular.forEach(a.options.settings.customRuleIcons,function(b){checkNested(b,"conditions","items","items","0")&&angular.forEach(b.conditions.items.items,function(b){checkNested(b,"fieldId")&&a.query.columns.push(b.fieldId)})}),a.showHideListView=function(b){a.options.openList=!a.options.openList},a.setFilterTab=function(b){a.tabIndex=b;var c=[];checkNested(a,"options","filterTabs",b)&&(c=a.options.filterTabs[b]),a.query.page=1,a.query.filters.filters2=c,a.refreshData()},checkNested(options,"filterTabs")&&angular.forEach(options.filterTabs,function(b,c){checkNested(b,"defaultFilter")&&b.defaultFilter&&(a.tabIndex=c,a.query.filters.filters2=b)});var k,l,m={},n={};k=angular.element(".map-map",b)[0];var o=function(){if(angular.element(k).parent().parent().removeClass("hide"),angular.element(k).width("100%"),angular.element(k).height((a.options.settings.mapHeight||"400")+"px"),angular.element(".map-list",b).height((a.options.settings.mapHeight||"400")+"px"),angular.isDefined(google)&&checkNested(google,"maps")){checkNested(a.options.settings,"zoomLevel")||(a.options.settings.zoomLevel=8),checkNested(a.options.settings,"mapType")||(a.options.settings.mapType="ROADMAP"),checkNested(a.options.settings,"mouseScroll")||(a.options.settings.mouseScroll="Enable"),checkNested(a.options.settings,"defaultMapIcon")||(a.options.settings.defaultMapIcon="");var c=new google.maps.LatLng((-34.397),150.644),d={zoom:a.options.settings.zoomLevel,center:c,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,mapTypeId:google.maps.MapTypeId[a.options.settings.mapType],scrollwheel:"Enable"==a.options.settings.mouseScroll};l=new google.maps.Map(k,d);var f=new google.maps.LatLngBounds;angular.forEach(a.items,function(b){n[b.id]=new google.maps.InfoWindow({content:""}),google.maps.event.addListener(n[b.id],"closeclick",function(){a.setActiveMapItemId(0)});var c=new google.maps.LatLng(b[a.options.settings.mapField].lat,b[a.options.settings.mapField].lng),d=_tb.getFontAwesomeSvgUrl(a.options.settings.defaultMapIcon,"/vendor/fontawesome5.3.1/svgs/light/map-marker-alt-red.svg");checkNested(a.options.settings,"customRuleIcons")&&a.options.settings.customRuleIcons&&angular.forEach(a.options.settings.customRuleIcons,function(a){if(checkNested(a,"icon")&&""!=a.icon&&checkNested(a,"conditions","items","items")&&_tb.countTotalKeys(a.conditions.items.items)>0){var c=0;if(angular.forEach(a.conditions.items.items,function(a){c+=checkFieldConditionOnly(a,b,i.App.get("fieldTypeBySlug",a.fieldId))}),c&&c==_tb.countTotalKeys(a.conditions.items.items)){var f=a.icon.split(" ");if(2==f.length){var g=checkNested(a,"color")&&""!=a.color?a.color.substr(1):"";d=e.SITE+"fa-icons/"+f[0]+"/"+f[1]+"/"+g+".svg"}}}}),m[b.id]=new google.maps.Marker({position:c,map:l,_itemId:b.id,icon:{url:d,scaledSize:new google.maps.Size(30,30)}}),google.maps.event.addListener(m[b.id],"click",function(){var b=this._itemId;a.openInfoWindow(b)}),f.extend(c)}),a.totalItems=_tb.countTotalKeys(m),a.totalItems&&(l.fitBounds(f),google.maps.event.addListenerOnce(l,"bounds_changed",function(b){this.getZoom()&&this.setZoom(a.options.settings.zoomLevel)}))}};a.activeMapItemId=0,a.setActiveMapItemId=function(b){a.activeMapItemId=b},a.openInfoWindow=function(c){if(checkNested(n,c)){angular.forEach(n,function(a,b){b!=c&&a.close()}),a.setActiveMapItemId(c);var d=angular.element('.map-popup-view [data-id="map-popup-'+c+'"]',b).html();n[c].setContent(d),n[c].open(l,m[c]),jQuery(".map-list-row-item",b).removeClass("active"),jQuery('.map-list-row-item[data-id="map-item-'+c+'"]',b).length&&jQuery('.map-list-row-item[data-id="map-item-'+c+'"]',b).addClass("active")}},a.refresh=0,a.refreshPageData=function(b){angular.isDefined(b)&&(a.query.page=b),a.refreshData()},a.refreshData=function(){d?(a.refresh=1,i.doRootLoading(!0),f.post("list."+d,a.query,function(b){a.refresh=0,"error"==b.type?(a.status="error",a.err=checkNested(b,"msg")&&b.msg?b.msg:"Data table not found."):(a.status="done",a.err="",angular.forEach(a.columns,function(a){angular.forEach(a,function(a,c){checkNested(b.dataFieldOptions,a.fieldId)&&(checkNested(a,"options")?a.options=angular.extend(a.options,b.dataFieldOptions[a.fieldId]):a.options=b.dataFieldOptions[a.fieldId])})}),a.items=[],angular.forEach(b.items,function(b){checkNested(b,a.options.settings.mapField,"lat")&&checkNested(b,a.options.settings.mapField,"lng")&&!_tb.is("null",b[a.options.settings.mapField].lat)&&!_tb.is("null",b[a.options.settings.mapField].lng)&&a.items.push(b)}),o()),i.doRootLoading(!1)},function(b,c){a.status="error",a.err=checkNested(b,"msg")&&b.msg?b.msg:"Data table not found.",i.doRootLoading(!1)},!0)):(a.refresh=0,a.status="error",a.err="Data table not found.")},"undefined"!=typeof google&&checkNested(google,"maps")?a.refreshData():(console.warn("Only available into pro plan"),a.status="not",a.err=!1),j.registerDataChange("form_add_record",function(b,c){checkNested(c,"tableId")&&c.tableId==a.tableId&&a.refreshData()}),a.fields={},a.doColumnAction=function(b,c,e){var g=b.name;switch(g){case"Action":if(angular.element(e.target).hasClass("disabled"))return;angular.element(e.target).addClass("disabled"),f.post("data-table."+d+".actions."+a.items[c].id,{column:b},function(b){"success"==b.type&&a.refreshData(),angular.element(e.target).removeClass("disabled")},function(a,b){angular.element(e.target).removeClass("disabled")});break;case"Delete":a.items[c].loading=!0,confirm("Are you sure to delete this record?")?f["delete"]("data-table."+d+".delete."+a.items[c].id,{},function(b){h.show(b.msg,b.type,"Record Delete"),"success"==b.type&&a.items.splice(c,1)},function(b,d){h.show("Record not found","error","Record Delete"),a.items[c].loading=!1}):a.items[c].loading=!1}},a.columnStyle=function(a,b,c){var d={};return checkNested(b,"displayRules")&&b.displayRules&&angular.forEach(b.displayRules,function(c){if(checkNested(c,"items")&&c.items.length>0){var e=0;if(angular.forEach(c.items,function(b){e+=p(b,a)}),e&&e==c.items.length)switch(c.action){case"textColor":d.color=c.color;break;case"textStyle":checkNested(c,"textBold")&&c.textBold&&(d.fontWeight="900"),checkNested(c,"textItalic")&&c.textItalic&&(d.fontStyle="italic"),checkNested(c,"textStrikethrough")&&c.textStrikethrough&&(d.textDecoration="line-through");break;case"bkColor":d.backgroundColor=c.color;break;case"hideValue":d.display="none";break;case"icon":checkNested(a,b.fieldId)}}}),d};var p=function(b,c){switch(isTrue=0,b.operator){case"contains":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)&&(angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())>-1&&isTrue++:angular.isObject(c[b.fieldId])&&_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++);break;case"does not contain":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)?angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())==-1&&isTrue++:angular.isObject(c[b.fieldId])&&!_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++:isTrue++;break;case"is":"Date"==a.fieldType[b.fieldId]?checkNested(c,b.fieldId)&&moment(b.val).isSame(c[b.fieldId],"day")&&isTrue++:checkNested(c,b.fieldId)&&c[b.fieldId]==b.val&&isTrue++;break;case"is not":"Date"==a.fieldType[b.fieldId]?(!checkNested(c,b.fieldId)||!moment(b.val).isSame(c[b.fieldId],"day"))&&isTrue++:(!checkNested(c,b.fieldId)||c[b.fieldId]!=b.val)&&isTrue++;break;case"starts with":checkNested(c,b.fieldId)&&new RegExp("^"+b.val).test(c[b.fieldId])&&isTrue++;break;case"ends with":checkNested(c,b.fieldId)&&new RegExp(b.val+"$").test(c[b.fieldId])&&isTrue++;break;case"is blank":(!checkNested(c,b.fieldId)||/^\s*$/.test(c[b.fieldId])||null==c[b.fieldId])&&isTrue++;break;case"is not blank":checkNested(c,b.fieldId)&&!/^\s*$/.test(c[b.fieldId])&&null!=c[b.fieldId]&&isTrue++;break;case"higher than":checkNested(c,b.fieldId)&&c[b.fieldId]>parseInt(b.val)&&isTrue++;break;case"lower than":checkNested(c,b.fieldId)&&c[b.fieldId]<parseInt(b.val)&&isTrue++;break;case"is during the current":var d=checkNested(b,"val2")?b.val2:"week";switch(d){case"month":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":checkNested(c,b.fieldId)&&moment().format("YY-Q")==moment(c[b.fieldId]).format("YY-Q")&&isTrue++;break;case"year":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:checkNested(c,b.fieldId)&&moment().week()==moment(c[b.fieldId]).week()&&isTrue++}break;case"is during the previous":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().subtract(e,d).startOf(d),moment().endOf(d),null,"[]")&&isTrue++;break;case"is during the next":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().startOf(d),moment().add(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the previous":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the next":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isBefore(moment(b.val).startOf("day"))&&isTrue++;break;case"is after":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isAfter(moment(b.val).endOf("day"))&&isTrue++;break;case"is today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue},q=j.get("variables"),r=function(a){return angular.forEach(q,function(b){a=a.split("{!"+b.slug+"!}").join(j.get("variableFinalVal",b))}),a};a.fieldValue=function(b,c){var d="",e=[];if(checkNested(b,"ftype"))switch(b.ftype){case"html":d=r(b.text),angular.forEach(c,function(a,b){angular.isObject(a)?checkNested(a,"src")&&(d=d.split("{"+b+"}").join("https:"+a.src)):d=d.split("{"+b+"}").join(a)})}else{if(!checkNested(b,"fieldId"))return;switch(b.type){case"TableLink1":"Delete"!=b.name&&(d=$compile('<a href="javascript:void(0)" data-new-window="No" data-type="Page" data-item-id="'+b.page.id+'" data-page-id="'+b.page.id+'" data-link="http://">'+b.title+"</a>")(a.parent));break;case"TableLink1":var f="";return f="Delete"!=$ctrl.column.name?$compile('<a href="javascript:void(0)" data-new-window="No" data-type="Page" af-menu-item="" data-item-id="'+$ctrl.item.id+'" data-page-id="'+$ctrl.column.page.id+'" data-link="http://">'+$ctrl.column.title+"</a>")(a):$compile('<a href="javascript:void(0)" ng-click="doColumnAction(column.name, itemIndex)">'+$ctrl.column.title+"</a>")(a.$parent);case"Link":var g=checkNested(c,b.slug)?c[b.slug]:"";checkNested(g,"link")&&(d+='<a href="'+g.link+'" ',checkNested(b,"options","openInNewWindow")&&"Yes"==b.options.openInNewWindow&&(d+='target="_blank"'),d+=">",d+=checkNested(b,"options","linkFormat")?"same_text"===b.options.linkFormat&&checkNested(b,"options","linkText")?b.options.linkText:"unique"===b.options.linkFormat?g.text:g.link:g.link,d+="</a>");break;case"Image":var g=checkNested(c,b.slug)?c[b.slug]:"";if(checkNested(g,"src")){var h="";checkNested(b,"sizeType")&&"custom"==b.sizeType&&(checkNested(b,"width")&&(h+='width="'+b.width+'px"'),checkNested(b,"height")&&(h+='height="'+b.height+'px"')),d='<img src="'+g.src+'" class="'+(checkNested(b,"isResponsive")&&"No"==b.isResponsive?"":"img-responsive")+'" '+h+"   />"}break;case"Date":if(d=checkNested(c,b.slug)?c[b.slug]:"",""!=d){var i=new Date(d);d=d?$filter("date")(i,j.getSetting("dateFormat")):""}break;case"Address1":e=[],$joinFields=["address","address2","city","state","country","zip"];for(var k in $joinFields){var l=$joinFields[k];checkNested(c,b.slug,l)&&e.push(c[b.slug][l])}d=e.length?e.join(" ")+".":"-";break;case"Name1":e=[],$joinFields=["_first_name","_middle_name","_last_name"];for(var k in $joinFields){var l=$joinFields[k];checkNested(c,b.slug+l)&&e.push(c[b.slug+l])}d=e.length?e.join(" "):"-";break;default:d=checkNested(c,b.slug)?c[b.slug]:""}}return d||"&nbsp;"}}}}]),angular.module("app").directive("afMySubscription",["$rootScope","AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox","App","$timeout","$compile","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{restrict:"AE",scope:{opt:"@"},template:'<div class="af-my-subscription-component"><div ng-if="loading"><i class="fal fa-spin fa-spinner"></i> Loading...</div><div class="alert alert-success m-b-10" ng-show="successMsg">{{successMsg}}</div><div class="alert alert-danger m-b-10" ng-show="errorMsg">{{errorMsg}}</div><div class="my-subscription-block" ng-show="!loading && showMyBlock"><div class="my-subscription-inner"><div class="my-subscription-plan-tabs"><ul class="nav nav-tabs"><li ng-class="{active: 0 == activeTabPlan}"><a href="javascript:void(0)" ng-click="changeTabPlan(0)">My Subscription</a></li><li ng-class="{active: 1 == activeTabPlan}"><a href="javascript:void(0)" ng-click="changeTabPlan(1)">Invoices</a></li></ul></div><div class="my-subscription-tab-content"><div ng-if="activeTabPlan == 0" class="row"><div class="col-md-4" ng-repeat="subscription in subPlans"><div class="my-subscription-box"><div class="title">{{subscription.title || subscription.planName}}</div><div class="status">Status : {{subscription.status}}</div><div ng-show="subscription.loading"><i class="fal fa-spin fa-spinner"></i> Loading...</i></div><div class="actions btn-group" ng-hide="subscription.loading"><button class="btn btn-primary" ng-click="cancelSubscription(subscription)" ng-if="subscription.status != \'canceled\'">Cancel</button><button class="btn btn-default" ng-click="showTrans(subscription)">Invoices</button></div></div></div><div class="clearfix"></div></div><div ng-if="activeTabPlan == 1"><div class="table-actions"><div class="col-md-3"><select class="form-control" ng-model="query.subId"><option value="">All</option><option ng-repeat="subscription in subPlans" value="{{subscription.id}}">{{subscription.title || subscription.planName}}</option></select></div><button class="btn btn-primary" ng-click="getTrans()">Filter</button><button class="btn btn-link" ng-show="loading1"><i class="fal fa-spin fa-spinner"></i> Loading</button></div><div class="table-wrap"><table class="table table-striped table-bordered table-hover table-checkable1 no-footer data-table" ng-if="onceLoad"><thead><tr><th>Plan</th><th>Date</th><th>Amount</th><th>Status</th><th></th></tr></thead><tbody><tr ng-if="invoices.length < 1"><td colspan="5">No record found.</td></tr><tr ng-repeat="invoice in invoices"><td>{{invoice.planName}}</td><td>{{invoice.created_at}}</td><td>{{invoice.amount}}</td><td>{{invoice.status}}</td><td><a href="{{invoice.hosted_invoice_url}}" target="_blank" class="btn btn-default btn-sm m-r" uib-tooltip="View"><i class="fa fa-search"></i></a><a href="{{invoice.invoice_pdf}}" class="btn btn-default btn-sm" uib-tooltip="Download"><i class="fa fa-download"></i></a></td></tr></tbody></table></div></div></div></div></div></div>',
link:function(a,b,c){a.uId=checkNested(c,"uId")?c.uId:"";var d=function(a){return angular.forEach(a,function(a){a.loading=!1}),a};a.loading=1,a.loading1=0,a.onceLoad=!1,a.successMsg="",a.errorMsg="",a.showMyBlock=!1,a.activeTabPlan=0,a.subPlans=[],a.invoices=[],a.query={subId:""},a.getTrans=function(){a.loading1=1,a.query.mode="trans",a.refresh()},a.cancelSubscription=function(b){b.loading=!0,checkNested(a.query,"subId")&&""!=a.query.subId||(a.query.subId=-1),a.query.subId=b.id,a.query.mode="cancel",a.refresh(b)},a.showTrans=function(b){a.loading1=1,a.query.subId=b.id,a.activeTabPlan=1,a.query.mode="trans",a.refresh()},a.refresh=function(b){""!=a.uId&&g.post("g."+a.uId,a.query,function(c){if(a.loading=0,a.loading1=0,"success"==c.type){a.showMyBlock=!0;var e=angular.isDefined(c.mode)?c.mode:"subscription";switch(e){case"cancel":checkNested(b,"loading")&&(b.status="canceled",b.loading=!1);break;case"trans":a.onceLoad=!0,a.invoices=c.items;break;default:a.query={subId:""},a.subPlans=d(c.items)}}else a.errorMsg=c.msg})},a.refresh(),a.changeTabPlan=function(b){a.activeTabPlan=b}}}}]),angular.module("app").component("afResource",{template:'<div><div class="filter-tabs" ng-if="$ctrl.options.settings.filterType==\'Filter Tab\'"><ul class="nav nav-tabs"><li class="tab-{{tab.badgeClass}}" ng-repeat="tab in $ctrl.options.filterTabs" ng-class="{\'active\': $ctrl.tabIndex == $index, \'tab-colored\': tab.isColor}"><a ng-click="$ctrl.setFilterTab($index)">{{tab.title}}</a></li><li ng-if="$ctrl.options.settings.hideClearFilter != \'Yes\'"><a ng-click="$ctrl.setFilterTab(-1)">Clear Filter</a></li></ul></div><div class="af-full-resource af-full-resource-one"></div></div>',bindings:{options:"<",uId:"<"},controller:["$scope","$element","Config","App","Http","$rootScope","$uibModal","MsgBox","$filter",function(a,b,c,d,e,f,g,h,i){var j=this;j.query={filters:{k:""},dataTableId:"",labelField:"",dateField:"",order:"id",orderBy:"DESC"},j.query.rId=f.App.get("recordIdFromURL"),j.tabIndex=-1,j.fieldOptions=[],j.resourceField=!1,j.resourceGroupField=!1,j.resourceFieldItem=!1,j.dateField=!1,j.labelField=!1,j.items=[],j.items_str=[];var k=(f.App.getSetting("dateFormat"),!1),l=!1;j.setFilterTab=function(a){j.tabIndex=a;var b=[];checkNested(j,"options","filterTabs",a)&&(b=j.options.filterTabs[a]),j.query.page=1,j.query.fIndex=a,j.refresh()},j.refresh=function(){if(k){var a=k.getEventSources();checkNested(a,"0")&&a[0].refetch()}},d.registerDataChange("form_add_record",function(a,b){checkNested(b,"tableId")&&b.tableId==j.tableId}),j.$onInit=function(){j.fields=angular.copy(f.App.get("dataFields",j.options.dataTableId)),j.query.dataTableId=j.options.dataTableId,j.tableId=j.options.dataTableId,j.pageId=j.options.pageId,j.query.labelField=j.options.settings.labelField,j.query.dateField=j.options.settings.dateField,j.query.resourceField=j.options.settings.resourceField,checkNested(j.query,"columns")&&angular.isArray(j.query.columns)||(j.query.columns=[]),j.query.columns.push(j.query.labelField),j.query.columns.push(j.query.dateField),checkNested(j,"options","detailView","rows")&&angular.isObject(j.options.detailView.rows)&&angular.forEach(j.options.detailView.rows,function(a){checkNested(a,"cols")&&angular.isObject(a.cols)&&angular.forEach(a.cols,function(a,b){checkNested(a,"fields")&&angular.isObject(a.fields)&&angular.forEach(a.fields,function(a){checkNested(a,"slug")&&a.slug&&j.query.columns.push(a.slug)})})}),j.labelField=j.options.settings.labelField,j.dataFieldOptions={},angular.isDefined(j.query.dateField)&&angular.forEach(j.fields,function(a){a.slug==j.query.dateField&&(j.dateField=a)}),angular.forEach(j.fields,function(a){a.slug==j.query.resourceField&&(j.resourceField=a)}),checkNested(j.options,"settings","resourceGroupField")&&""!=j.options.settings.resourceGroupField&&angular.forEach(j.fields,function(a){a.slug==j.options.settings.resourceGroupField&&(j.resourceGroupField=a)}),checkNested(j.options,"filters")&&(j.query.filters.filters=j.options.filters),checkNested(j.options,"filterTabs")&&angular.forEach(j.options.filterTabs,function(a,b){checkNested(a,"defaultFilter")&&a.defaultFilter&&(j.tabIndex=b,j.query.fIndex=b)}),r()};var m=[],n=function(){angular.forEach(m,function(a){var b=k.getResourceById(a.id);_tb.is("null",b)||b.remove()}),m=[]},o=function(a){n(),angular.forEach(a,function(a){if(checkNested(a,"resourceId")){var b={id:a.resourceId};b.title=a.resourceId,b.resourceVal=a.resourceVal,b.eventId=a.id,"____empty________empty____"==b.title&&(b.title="(Empty)"),checkNested(p,"resourceGroupField")&&checkNested(a,p.resourceGroupField)&&(b[p.resourceGroupField]=a[p.resourceGroupField]),m.push(b),k.addResource(b)}})},p={},q=function(a,b,c){var d=!0;switch(b.dataTableId=j.query.dataTableId,b.id=a.id,b.dateField=j.dateField.id,j.dateField.type){case"Date":b[j.dateField.slug]=f.App.apply("dateToStr",{date:a.start,format:"momentMysqlDateFormat"});break;case"Date/Time":b[j.dateField.slug]=f.App.apply("dateToStr",{date:a.start});break;case"Calendar":b[j.dateField.slug]={};var g=f.App.apply("dateToStr",{date:a.start});g&&(b[j.dateField.slug].start=f.App.apply("dateToStr",{date:a.start})),g=f.App.apply("dateToStr",{date:a.end}),g&&(b[j.dateField.slug].end=f.App.apply("dateToStr",{date:a.end}))}d?e.post("data-table."+b.dataTableId+".save."+b.id,b,function(a){"success"!=a.type&&c.revert()},function(a,b){h.show("The event wasn't updated.","error"),c.revert()},!0):c.revert()},r=function(){switch(l=angular.element(".af-full-resource",b)[0],p={schedulerLicenseKey:"0479311582-fcs-1576214032",customButtons:{resourceRefresh:{icon:"refresh fc-tb-icons",click:function(){j.refresh()}},goToDate:{icon:"calendar fc-tb-icons",click:function(){}}},plugins:["interaction","resourceTimeline","resourceTimeGrid"],header:{left:"today prev,next resourceRefresh",center:"title",right:"resourceTimelineDay,resourceTimelineWeek,resourceTimelineMonth"},aspectRatio:1.6,resourceLabelText:checkNested(j.options,"settings","resouceLabel")?j.options.settings.resouceLabel:"",events:function(a,b,c){j.query.start=moment(a.start).format("YYYY-MM-DD HH:mm:00"),j.query.end=moment(a.end).format("YYYY-MM-DD HH:mm:59"),e.post("g."+j.uId,j.query,function(a){var c=[];"success"===a.type&&(j.fieldOptions=a.dataFieldOptions,j.items=a.items,checkNested(a,"items_str")&&(j.items_str=a.items_str),j.dataFieldOptions={},angular.forEach(a.dataFieldOptions,function(a){j.dataFieldOptions[a.slug]=a}),angular.forEach(a.items,function(b,d){var e=checkNested(b,j.labelField)?b[j.labelField]:"";e=f.App.apply("field2Str",{val:e,fieldSlug:j.labelField}),checkNested(a,"items_str",d,j.labelField)&&(e=a.items_str[d][j.labelField]);var g={id:b.id,itemIndex:d,title:e};if(checkNested(b,j.query.dateField))switch(j.dateField.type){case"Calendar":checkNested(b,j.query.dateField,"all_day")&&checkNested(b,j.query.dateField,"start")&&checkNested(b,j.query.dateField,"end")?(g.allDay="1"==b[j.query.dateField].all_day,g.start=b[j.query.dateField].start,g.end=b[j.query.dateField].end):g=!1;break;case"Date":g.allDay=!0,g.start=b[j.query.dateField];break;case"Date/Time":g.allDay=!1,g.start=b[j.query.dateField];break;default:g=!1}else g=!1;if(g){var h=!1;checkNested(j.options.settings,"eventColorRules")&&j.options.settings.eventColorRules&&angular.forEach(j.options.settings.eventColorRules,function(a){if(checkNested(a,"items")&&a.items.length>0){var c=0;angular.forEach(a.items,function(a){c+=checkFieldConditionOnly(a,b,f.App.get("fieldTypeBySlug",a.fieldId))}),c&&c==a.items.length&&(g.color=checkNested(a,"color")?a.color:"#000000",h=!0)}}),0==h&&checkNested(j.options.settings,"defaultColors")&&!_tb.is("null",j.options.settings.defaultColors)&&(g.color=j.options.settings.defaultColors),g.title&&"null"!=g.title||(g.title=""),checkNested(b,j.query.resourceField)&&(checkNested(a,"items_str",d,j.query.resourceField)?(g.resourceId=a.items_str[d][j.query.resourceField],""==g.resourceId&&(g.resourceId="____empty________empty____")):checkNested(b,j.query.resourceField)&&(g.resourceId=b[j.query.resourceField]),checkNested(b,j.query.resourceField)&&(g.resourceVal=b[j.query.resourceField])),checkNested(p,"resourceGroupField")&&checkNested(b,p.resourceGroupField)&&(checkNested(a,"items_str",d,p.resourceGroupField)?g[p.resourceGroupField]=a.items_str[d][p.resourceGroupField]:checkNested(b,p.resourceGroupField)&&(g[p.resourceGroupField]=b[p.resourceGroupField]),checkNested(g,p.resourceGroupField)),c.push(g)}})),o(c),b(c)},function(a,b){c([])},!0)}},p.eventResize=function(a){q(a.event,{},a)},p.eventDrop=function(a){var b=!1,c={};c.delta=a.delta;a.event;if(checkNested(a,"newResource")&&!_tb.is("null",a.newResource)){var d=a.newResource,e=d.extendedProps;if(angular.isDefined(e)&&angular.isDefined(e.resourceVal)&&(b=!0,c[j.query.resourceField]=d.extendedProps.resourceVal,"Join"==j.resourceField.type)){var f=[];angular.forEach(d.extendedProps.resourceVal,function(a,b){f.push(b)}),c[j.query.resourceField]=f}if(j.resourceGroupField&&checkNested(j.resourceGroupField,"slug")&&angular.isDefined(e)&&angular.isDefined(e[j.resourceGroupField.slug])&&(c[j.resourceGroupField.slug]=e[j.resourceGroupField.slug],"Join"==j.resourceGroupField.type)){var f=[];angular.forEach(e[j.resourceGroupField.slug],function(a,b){f.push(b)}),c[j.resourceGroupField.slug]=f}}q(a.event,c,a)},p.dateClick=function(a){if(!checkNested(j,"options","allowForm")||"No"!=j.options.allowForm){var b=moment(a.dateStr).toDate(),c={};if(j.dateField&&checkNested(j.dateField,"type"))switch(j.dateField.type){case"Calendar":c[j.dateField.slug]={},c[j.dateField.slug].allDay=checkNested(a,"allDay")&&a.allDay?1:0,c[j.dateField.slug].start=b,1==c[j.dateField.slug].allDay&&(c[j.dateField.slug].start.setHours(0),c[j.dateField.slug].start.setMinutes(0),c[j.dateField.slug].start.setSeconds(0)),checkNested(j.dateField,"rangeDate")&&j.dateField.rangeDate&&(c[j.dateField.slug].end=moment(b).add(30,"minutes").toDate(),1==c[j.dateField.slug].allDay&&(c[j.dateField.slug].end.setHours(23),c[j.dateField.slug].end.setMinutes(59),c[j.dateField.slug].end.setSeconds(59))),c[j.dateField.slug].start=_tb.strDt(moment(c[j.dateField.slug].start).format(f.App.getSetting("momentMysqlDateTimeFormat"))),c[j.dateField.slug].end=_tb.strDt(moment(c[j.dateField.slug].end).format(f.App.getSetting("momentMysqlDateTimeFormat")));break;default:c[j.dateField.slug]=_tb.strDt(moment(b).format(f.App.getSetting("momentMysqlDateTimeFormat")))}if(checkNested(a,"resource")&&!_tb.is("null",a.resource)){var d=a.resource;if(angular.isDefined(d.extendedProps)&&angular.isDefined(d.extendedProps.resourceVal)&&(c[j.query.resourceField]=d.extendedProps.resourceVal,"Join"==j.resourceField.type)){var e=[];angular.forEach(d.extendedProps.resourceVal,function(a,b){e.push(b)}),c[j.query.resourceField]=e}}g.open({backdrop:"static",keyboard:!1,size:"lg",controller:["$scope","$uibModalInstance","uId","dataTableId","options","MsgBox",function(a,b,c,d,e,f){a.uId=c,a.dataTableId=d,a.options=e,a.optionsStr=JSON.stringify(e),a.closeModal=function(a){angular.isDefined(a)&&a?b.close(a):b.dismiss("cancel")},a.onSaved=function(b,c){a.closeModal("refresh"),f.show("The record has been successfully saved.","success")}}],template:'<div class="model-body-content"><div class="modal-header" ng-if="options.title != \'\'"><button type="button" class="btn btn-danger btn-circle model-close pull-right" ng-click="closeModal()" data-dismiss="modal" aria-label="Close"><i class="far fa-times"></i></button><h3 class="modal-title">{{options.title}}</h3></div><div class="modal-body modal-sub-body"><p ng-if="options.description != \'\'">{{options.description}}</p><div af-form data-table-id="{{dataTableId}}" data-u-id="{{uId}}" data-options="{{optionsStr}}" on-saved="onSaved(id, state)"></div></div><div class="modal-footer"><button class="btn btn-danger pull-left" type="button" ng-click="closeModal()"><i class="far fa-times"></i> Close</button></div></div>',resolve:{dataTableId:function(){return j.options.dataTableId},uId:function(){return j.uId},options:function(){return{title:checkNested(j.options,"formView","title")?j.options.formView.title:"",description:checkNested(j.options,"formView","description")?j.options.formView.description:"",rows:checkNested(j.options,"formView","rows")?j.options.formView.rows:[],fieldOptions:j.fieldOptions,pageId:checkNested(j.options,"pageId")?j.options.pageId:0,lastParam:0,displayRules:[],submitRules:[],validationRules:[],settings:[],record:c}}}}).result.then(function(a){"refresh"==a&&j.refresh()},function(){})}},p.eventClick=function(a){if(!checkNested(j.options,"allowDetail")||"No"!=j.options.allowDetail){var b=a.event,c=a.event.extendedProps;if(checkNested(c,"itemIndex")&&checkNested(j.items,c.itemIndex)&&checkNested(j,"options","detailView")){var d=c.itemIndex,f=g.open({backdrop:"static",keyboard:!1,size:"lg",controller:["$scope","$uibModalInstance","item","options","calendarOptions","dataTableId",function(a,b,c,d,f,g){a.item=c,a.tableId=g;var i=function(a){return angular.forEach(a.rows,function(a,b){angular.forEach(a.cols,function(a,b){angular.forEach(a.fields,function(a){checkNested(j.dataFieldOptions,a.slug)?(a.options=j.dataFieldOptions[a.slug],a.__found=!0):"TableLink"==a.type?a.__found=!0:a.__found=!1})})}),a};a.options=i(d),a.calendarOptions=f,a.closeModal=function(a){b.close(a)},a.onAction=function(b){a.closeModal()},a.getColumn=function(a){},a.doColumnAction=function(c,d){var f=c.name;switch(f){case"Action":if(angular.element(d.target).hasClass("disabled"))return;angular.element(d.target).addClass("disabled"),e.post("data-table."+tableId+".actions."+a.items[itemIndex].id,{column:c},function(b){"success"==b.type&&a.refreshData(),angular.element(d.target).removeClass("disabled")},function(a,b){angular.element(d.target).removeClass("disabled")});break;case"Delete":a.item.loading=!0,confirm("Are you sure to delete this record?")?e["delete"]("data-table."+a.tableId+".delete."+a.item.id,{},function(a){h.show(a.msg,a.type,"Record Delete"),"success"==a.type&&b.close("delete")},function(b,c){h.show("Record not found","error","Record Delete"),a.item.loading=!1}):a.items[itemIndex].loading=!1}}}],template:'<div class="model-body-content"><div class="modal-header" ng-if="options.title != \'\'"><button type="button" class="btn btn-danger btn-circle model-close pull-right" ng-click="closeModal()" data-dismiss="modal" aria-label="Close"><i class="far fa-times"></i></button><h3 class="modal-title">{{options.title}}</h3></div><div class="modal-body modal-sub-body"><p ng-if="options.description != \'\'">{{options.description}}</p><div class="row" ng-repeat="row in options.rows"><div class="col-md-{{col.size}}" ng-repeat="col in row.cols"><div class="form-group" ng-repeat="field in col.fields" ng-if="field.__found" id="field_block_{{field.slug}}" allow-inline-editing-for-app item="item" field="field" allow-edit="calendarOptions.settings.allowInlineEdit == \'Yes\' && (!field.allowInlineEdit || field.allowInlineEdit==\'Yes\')" table-id="tableId" page-id="$ctrl.pageId"><label>{{field.title}}</label><div><af-data-table-field item="item" on-action="onAction(field)" column="field" ng-click="doColumnAction(field, $event)" update-val="item.__changed"></af-data-table-field></div></div></div></div></div><div class="modal-footer"><button class="btn btn-danger pull-left" type="button" ng-click="closeModal()"><i class="far fa-times"></i> Close</button></div></div>',resolve:{item:function(){return j.items[d]},options:function(){return j.options.detailView},calendarOptions:function(){return j.options},dataTableId:function(){return j.options.dataTableId}}});f.result.then(function(a){"delete"===a&&(j.items.splice(d,1),b.remove())},function(){})}}},p.defaultView="resourceTimeline",checkNested(j.options,"settings","defaultResourceView")&&"Vertical"==j.options.settings.defaultResourceView&&(p.header.right="resourceTimeGridDay,resourceTimeGridWeek",p.defaultView="resourceTimeGrid"),checkNested(j.options,"defaultDisplayView")?"Day"==j.options.defaultDisplayView?p.defaultView+="Day":"Week"==j.options.defaultDisplayView?p.defaultView+="Week":p.defaultView+="resourceTimeGrid"==p.defaultView?"Week":"Month":p.defaultView+="Day",checkNested(j.options,"settings","firstDay")&&(p.firstDay=j.options.settings.firstDay),checkNested(j.options,"settings","resourceGroupField")&&""!=j.options.settings.resourceGroupField&&(p.resourceGroupField=j.options.settings.resourceGroupField),p.editable=!0,j.dateField.type){case"Calendar":break;case"Date":p.eventDurationEditable=!1;break;case"Date/Time":p.eventDurationEditable=!1}switch(checkNested(j.options,"allowDragDropEvent")&&"No"==j.options.allowDragDropEvent&&(p.editable=!1,p.eventDurationEditable=!1),j.resourceField.type){case"Text Formula":case"Basic Formula":case"Complex Formula":case"Auto Increment":case"Equation":case"Date Formula":p.editable=!1,p.eventDurationEditable=!1}k=new FullCalendar.Calendar(l,p),k.render()}}]}),angular.module("app").directive("afSingleMap",["$rootScope","AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox","$timeout",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"AE",scope:{options:"@"},template:'<div class="google-single-map"><div ng-if="status == \'loading\'">Loading data...</div><div ng-if="status == \'init\'">Initalizing map...</div><div ng-show1="status == \'done\'" class="hide map"></div><div ng-if="status == \'error\'" class="alert alert-danger">{{error}}</div></div>',link:function(b,c,d){var e,f,h=function(a){return a},i=0,k=function(){if(!checkNested(b.record,b.mapElement.settings.mapField))return b.status="error",void(b.error="The address is blank.");if(b.mapAddress=[],angular.forEach(b.record[b.mapElement.settings.mapField],function(a){_tb.is("null",a)||""==a||b.mapAddress.push(a)}),b.mapAddress.length<1)return b.status="error",void(b.error="The address is blank.");if(b.mapAddress=b.mapAddress.join(","),e=angular.element(".map",c)[0],angular.element(e).width((b.mapElement.settings.mapWidth||"600")+"px"),angular.element(e).height((b.mapElement.settings.mapHeight||"400")+"px"),angular.isDefined(google)&&checkNested(google,"maps")){b.status="init";var a=new google.maps.Geocoder,d=new google.maps.LatLng((-34.397),150.644);checkNested(b.mapElement.settings,"zoomLevel")||(b.mapElement.settings.zoomLevel=8),checkNested(b.mapElement.settings,"mapType")||(b.mapElement.settings.mapType="ROADMAP"),checkNested(b.mapElement.settings,"mouseScroll")||(b.mapElement.settings.mouseScroll="Enable");var g={zoom:b.mapElement.settings.zoomLevel,center:d,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,mapTypeId:google.maps.MapTypeId[b.mapElement.settings.mapType],scrollwheel:"Enable"==b.mapElement.settings.mouseScroll};f=new google.maps.Map(e,g),a&&a.geocode({address:b.mapAddress},function(a,c){if(c==google.maps.GeocoderStatus.OK)if(c!=google.maps.GeocoderStatus.ZERO_RESULTS){b.status="done",angular.element(e).removeClass("hide"),angular.element(e).siblings().addClass("hide"),f.setCenter(a[0].geometry.location);var d=new google.maps.InfoWindow({content:"<b>"+b.mapAddress+"</b>",size:new google.maps.Size(150,50)}),g=new google.maps.Marker({position:a[0].geometry.location,map:f,title:b.mapAddress});google.maps.event.addListener(g,"click",function(){d.open(f,g)})}else b.status="error",b.error="The address is blank.";else b.status="error",b.error="The address is blank."})}else i++,i<100&&j(function(){k()},1e3)};b.recordId=0,b.recordId=a.App.get("recordIdFromURL"),b.record=!1,b.error="",b.mapAddress="",b.mapElement=h(JSON.parse(checkNested(d.options)?d.options:"{}"));var l=checkNested(b.mapElement,"dataTableId")?b.mapElement.dataTableId:0;b.status="loading",b.query={columns:[]},checkNested(b.mapElement.settings,"mapField")&&b.query.columns.push(b.mapElement.settings.mapField),checkNested(b.mapElement.settings,"titleField")&&b.query.columns.push(b.mapElement.settings.titleField),b.refreshData=function(){l?(a.doRootLoading(!0),g.post("data-table."+l+".detail."+b.recordId,b.query,function(c){a.doRootLoading(!1),"error"==c.type?(b.status="error",b.error=c.msg):(b.status="done",c.items.length>0&&angular.forEach(c.items,function(a,c){b.record||(b.record=a,k())}))},function(c,d){b.status="error",a.doRootLoading(!1),b.error=checkNested(c,"msg")?c.msg:"Record not found."},!0)):(b.status="error",b.err="The data table was not found.")},b.refreshData()}}}]),angular.module("app").directive("afSubscription",["$rootScope","AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox","App","$timeout","$compile","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{restrict:"AE",scope:{opt:"@"},template:'<div class="af-subscription-component"><div class="alert alert-success m-b-10" ng-show="success">{{success}}</div><div ng-if="loading"><i class="fal fa-spin fa-spinner"></i> Loading...</div><div class="subscription-form" ng-show="!loading"></div></div>',link:function(a,b,c){a.uId=checkNested(c,"uId")?c.uId:"",a.loading=1,a.onceLoad=!1,a.success="",a.activeTabPlan=0;var d=m.search();a.opt=options=JSON.parse(checkNested(c.options)?c.options:"{}"),checkNested(d,"sp")&&(checkNested(a.opt,"msg")?a.success=a.opt.msg:a.success="You're successfully subscribe"),a.refresh=function(){""!=a.uId&&(0==a.onceLoad&&(a.loading=1),g.post("g."+a.uId,a.query,function(c){if(a.loading=0,a.onceLoad=!0,"success"==c.type){var d=c.subscriptionForm;d=d.split("{{AppURL}}").join(f.API),d=d.split("{{currenturl}}").join(m.absUrl()),angular.element(".subscription-form",b).html(d),k(function(){l(angular.element(".subscription-form",b).contents())(a)},10)}}))},a.refresh(),a.changeTabPlan=function(b){a.activeTabPlan=b}}}}]),angular.module("app").directive("afTask",["$rootScope","AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox",function(a,b,c,d,e,f,g,h,i){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div class="af-task-component"><h3 ng-if="opt.settings.tableTitle != \'\'">{{opt.settings.title}}</h3><div class="desc" ng-if="opt.settings.desc">{{opt.settings.desc}}</div><div class="con"><button class="btn btn-info btn-sm btn-block" ng-click="runTask()"><span ng-show="!loading">{{opt.settings.taskBtnText}}</span><span ng-show="loading"><i class="far fa-spin fa-spinner"></i> Running...</span></button></div></div>',link:function(b,c,d){checkNested(d.tableId)?d.tableId:0;b.opt=options=JSON.parse(checkNested(d.options)?d.options:"{}"),checkNested(b.opt,"settings")||(b.opt.settings={}),b.uId=checkNested(d,"uId")?d.uId:"",b.loading=!1,b.query={},b.query.rId=a.App.get("recordIdFromURL"),b.runTask=function(){b.loading||(b.loading=!0,g.post("g."+b.uId,b.query,function(a){b.loading=!1,checkNested(a,"msg")&&i.show(a.msg,a.type)},function(a,c){b.loading=!1,i.show(checkNested(a,"msg")?a.msg:"No","error")}))}}}}]),angular.module("app").directive("afTimeline",["AppSetting","$state","$http","$stateParams","AppURL","Http","$uibModal","MsgBox","$rootScope","App",function(a,b,c,d,e,f,g,h,i,j){return{restrict:"AE",scope:{columns:"@",opt:"@"},template:'<div class="alert alert-danger" ng-show="status == \'error\'">{{err}}</div><div ng-show="status == \'loading\'"><i class="far fa-spin fa-circle-o-notch"></i> Loading data...</div><div ng-show="status == \'done\'"><h2 ng-if="options.settings.tableTitle != \'\'">{{opt.settings.tableTitle}}</h2><div class="filter-tabs" ng-if="options.settings.filterType==\'Filter Tab\'"><ul class="nav nav-tabs"><li class="tab-{{tab.badgeClass}}" ng-repeat="tab in options.filterTabs" ng-class="{\'active\': tabIndex == $index, \'tab-colored\': tab.isColor}"><a ng-click="setFilterTab($index)">{{tab.title}}</a></li><li ng-if="options.settings.hideClearFilter != \'Yes\'"><a ng-click="setFilterTab(-1)">Clear Filter</a></li></ul></div><div class="timeline-wrap timeline-layout-{{timelineStyle}}"><section class="timeline" ng-if="timelineStyle == \'vertical\'"><div class="timeline__container"><div class="timeline__block" ng-repeat="item in items"><div class="timeline__point"></div><div class="timeline__content"><div class="row" ng-repeat="row in options.rows"><div class="col-md-{{col.size}}" ng-repeat="col in row.cols"><div class="form-group" ng-repeat="column in col.fields" id="field_block_{{column.slug}}" ng-style1="columnStyle(column, item)"><label ng-if="column.hideTitle != \'Yes\'">{{column.title}}</label><div><af-data-table-field item="item" column="column" columns="columns" logged-in-item="loggedInItem"></af-data-table-field></div></div></div></div><div class="timeline__field"><af-data-table-field item="item" column="timelineField" columns="columns" in-display-mode="\'dataTable\'"></af-data-table-field> </div></div></div></div></section></div></div>',link:function(a,b,c){var d=checkNested(c.tableId)?c.tableId:0;a.tableId=d,a.uId=checkNested(c,"uId")?c.uId:"",a.tabIndex=-1,a.options=options=JSON.parse(checkNested(c.options)?c.options:"{}"),a.timelineStyle=checkNested(a.options.settings,"timelineStyle")?"vertical":a.options.settings.timelineStyle.toLowerCase(),a.items=[],a.loggedInItem={},a.columns={},a.status="loading",a.limit=checkNested(a.options,"settings","recordLimit")?a.options.settings.recordLimit:10,a.limit=parseInt(a.limit)<10?10:a.limit,a.totalItems=0,a.timelineField="",a.query={filters:{k:""},page:1,limit:a.limit,timeline:1},a.query.rId=i.App.get("recordIdFromURL"),checkNested(a.options,"rows")&&angular.forEach(a.options.rows,function(b,c){angular.forEach(b.cols,function(b,c){angular.forEach(b.fields,function(b){if(checkNested(b,"ftype")&&"html"==b.ftype){var c=findCurlyBracketStr(b.text);angular.isObject(c)&&_tb.countTotalKeys(c)>0&&angular.forEach(c,function(b){if(!checkNested(a.columns,b)){var c=i.App.get("fieldFromFieldSlug",b);""!=c?a.columns[b]=c:a.columns[b]={slug:b}}})}else checkNested(b,"slug")&&b.slug&&(checkNested(a.options,"settings","timelineField")&&b.slug==a.options.settings.timelineField&&(a.timelineField=b),checkNested(b,"tableType")||"TableLink"==b.type||(b.tableType="self"),checkNested(b,"tableType")&&"self"==b.tableType?b.allowInlineEdit=checkNested(b,"allowInlineEdit")&&"No"==b.allowInlineEdit?"No":"Yes":b.allowInlineEdit="No",a.columns[b.fieldId]=b)})})}),a.setFilterTab=function(b){a.tabIndex=b;var c=[];checkNested(a,"options","filterTabs",b)&&(c=a.options.filterTabs[b]),a.query.page=1,a.query.fIndex=b,a.refreshData()},checkNested(options,"filterTabs")&&angular.forEach(options.filterTabs,function(b,c){checkNested(b,"defaultFilter")&&b.defaultFilter&&(a.tabIndex=c,a.query.fIndex=c)}),a.refresh=0,a.refreshData=function(){""!=a.uId?(a.refresh=1,i.doRootLoading(!0),f.post("g."+a.uId,a.query,function(b){a.refresh=0,"error"==b.type?(a.status="error",a.err=checkNested(b,"msg")&&b.msg?b.msg:"Data table not found."):(a.status="done",a.err="",""==a.timelineField&&(angular.forEach(b.dataFieldOptions,function(b,c){checkNested(a.options,"settings","timelineField")&&b.slug==a.options.settings.timelineField&&(a.timelineField=b)}),checkNested(a.options,"settings","timelineField")&&checkNested(b,"fullColumns",a.options.settings.timelineField)&&(a.timelineField=b.fullColumns[a.options.settings.timelineField])),angular.forEach(a.columns,function(a,c){checkNested(b.dataFieldOptions,a.fieldId)&&(checkNested(a,"options")?a.options=angular.extend(a.options,b.dataFieldOptions[a.fieldId]):a.options=b.dataFieldOptions[a.fieldId])}),checkNested(b,"fullColumns")&&angular.forEach(b.fullColumns,function(b,c){checkNested(a.columns,b.id)||(a.columns[b.id]=b)}),a.loggedInItem=checkNested(b,"loggedInItem")?b.loggedInItem:{},a.items=b.items,a.totalItems=b.totalItems),i.doRootLoading(!1)},function(b,c){a.status="error",a.err=checkNested(b,"msg")&&b.msg?b.msg:"The data of timeline was not found.",i.doRootLoading(!1)},!0)):(a.refresh=0,a.status="error",a.err="The data of timeline was not found.")},a.refreshData(),j.registerDataChange("form_add_record",function(b,c){checkNested(c,"tableId")&&c.tableId==a.tableId&&a.refreshData()}),a.fields={},a.doColumnAction=function(b,c,e){var g=b.name;switch(g){case"Action":if(angular.element(e.target).hasClass("disabled"))return;angular.element(e.target).addClass("disabled"),f.post("data-table."+d+".actions."+a.items[c].id,{column:b},function(b){"success"==b.type&&a.refreshData(),angular.element(e.target).removeClass("disabled")},function(a,b){angular.element(e.target).removeClass("disabled")});break;case"Delete":a.items[c].loading=!0,confirm("Are you sure to delete this record?")?f["delete"]("data-table."+d+".delete."+a.items[c].id,{},function(b){h.show(b.msg,b.type,"Record Delete"),"success"==b.type&&a.items.splice(c,1)},function(b,d){h.show("Record not found","error","Record Delete"),a.items[c].loading=!1}):a.items[c].loading=!1}},a.columnStyle=function(a,b,c){var d={};return checkNested(b,"displayRules")&&b.displayRules&&angular.forEach(b.displayRules,function(c){if(checkNested(c,"items")&&c.items.length>0){var f=0;if(angular.forEach(c.items,function(b){f+=e(b,a)}),f&&f==c.items.length)switch(c.action){case"textColor":d.color=c.color;break;case"textStyle":checkNested(c,"textBold")&&c.textBold&&(d.fontWeight="900"),checkNested(c,"textItalic")&&c.textItalic&&(d.fontStyle="italic"),checkNested(c,"textStrikethrough")&&c.textStrikethrough&&(d.textDecoration="line-through");break;case"bkColor":d.backgroundColor=c.color;break;case"hideValue":d.display="none";break;case"icon":checkNested(a,b.fieldId)}}}),d};var e=function(b,c){switch(isTrue=0,b.operator){case"contains":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)&&(angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())>-1&&isTrue++:angular.isObject(c[b.fieldId])&&_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++);break;case"does not contain":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)?angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())==-1&&isTrue++:angular.isObject(c[b.fieldId])&&!_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++:isTrue++;break;case"is":"Date"==a.fieldType[b.fieldId]?checkNested(c,b.fieldId)&&moment(b.val).isSame(c[b.fieldId],"day")&&isTrue++:checkNested(c,b.fieldId)&&c[b.fieldId]==b.val&&isTrue++;break;case"is not":"Date"==a.fieldType[b.fieldId]?(!checkNested(c,b.fieldId)||!moment(b.val).isSame(c[b.fieldId],"day"))&&isTrue++:(!checkNested(c,b.fieldId)||c[b.fieldId]!=b.val)&&isTrue++;break;case"starts with":checkNested(c,b.fieldId)&&new RegExp("^"+b.val).test(c[b.fieldId])&&isTrue++;break;case"ends with":checkNested(c,b.fieldId)&&new RegExp(b.val+"$").test(c[b.fieldId])&&isTrue++;break;case"is blank":(!checkNested(c,b.fieldId)||/^\s*$/.test(c[b.fieldId])||null==c[b.fieldId])&&isTrue++;break;case"is not blank":checkNested(c,b.fieldId)&&!/^\s*$/.test(c[b.fieldId])&&null!=c[b.fieldId]&&isTrue++;break;case"higher than":checkNested(c,b.fieldId)&&c[b.fieldId]>parseInt(b.val)&&isTrue++;break;case"lower than":checkNested(c,b.fieldId)&&c[b.fieldId]<parseInt(b.val)&&isTrue++;break;case"is during the current":var d=checkNested(b,"val2")?b.val2:"week";switch(d){case"month":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":checkNested(c,b.fieldId)&&moment().format("YY-Q")==moment(c[b.fieldId]).format("YY-Q")&&isTrue++;break;case"year":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:checkNested(c,b.fieldId)&&moment().week()==moment(c[b.fieldId]).week()&&isTrue++}break;case"is during the previous":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().subtract(e,d).startOf(d),moment().endOf(d),null,"[]")&&isTrue++;break;case"is during the next":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().startOf(d),moment().add(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the previous":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);
checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before the next":var d=checkNested(b,"val3")?b.val3:"days",e=parseInt(checkNested(b,"val2")?b.val2:0);checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(e,d).endOf(d),null,"[]")&&isTrue++;break;case"is before":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isBefore(moment(b.val).startOf("day"))&&isTrue++;break;case"is after":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isAfter(moment(b.val).endOf("day"))&&isTrue++;break;case"is today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue},g=j.get("variables"),k=function(a){return angular.forEach(g,function(b){a=a.split("{!"+b.slug+"!}").join(j.get("variableFinalVal",b))}),a};a.fieldValue=function(b,c){var d="",e=[];if(checkNested(b,"ftype"))switch(b.ftype){case"html":d=k(b.text),angular.forEach(c,function(a,b){angular.isObject(a)?checkNested(a,"src")&&(d=d.split("{"+b+"}").join("https:"+a.src)):d=d.split("{"+b+"}").join(a)})}else{if(!checkNested(b,"fieldId"))return;switch(b.type){case"TableLink1":"Delete"!=b.name&&(d=$compile('<a href="javascript:void(0)" data-new-window="No" data-type="Page" data-item-id="'+b.page.id+'" data-page-id="'+b.page.id+'" data-link="http://">'+b.title+"</a>")(a.parent));break;case"TableLink1":var f="";return f="Delete"!=$ctrl.column.name?$compile('<a href="javascript:void(0)" data-new-window="No" data-type="Page" af-menu-item="" data-item-id="'+$ctrl.item.id+'" data-page-id="'+$ctrl.column.page.id+'" data-link="http://">'+$ctrl.column.title+"</a>")(a):$compile('<a href="javascript:void(0)" ng-click="doColumnAction(column.name, itemIndex)">'+$ctrl.column.title+"</a>")(a.$parent);case"Link":var g=checkNested(c,b.slug)?c[b.slug]:"";checkNested(g,"link")&&(d+='<a href="'+g.link+'" ',checkNested(b,"options","openInNewWindow")&&"Yes"==b.options.openInNewWindow&&(d+='target="_blank"'),d+=">",d+=checkNested(b,"options","linkFormat")?"same_text"===b.options.linkFormat&&checkNested(b,"options","linkText")?b.options.linkText:"unique"===b.options.linkFormat?g.text:g.link:g.link,d+="</a>");break;case"Image":var g=checkNested(c,b.slug)?c[b.slug]:"";if(checkNested(g,"src")){var h="";checkNested(b,"sizeType")&&"custom"==b.sizeType&&(checkNested(b,"width")&&(h+='width="'+b.width+'px"'),checkNested(b,"height")&&(h+='height="'+b.height+'px"')),d='<img src="'+g.src+'" class="'+(checkNested(b,"isResponsive")&&"No"==b.isResponsive?"":"img-responsive")+'" '+h+"   />"}break;case"Date":if(d=checkNested(c,b.slug)?c[b.slug]:"",""!=d){var i=new Date(d);d=d?$filter("date")(i,j.getSetting("dateFormat")):""}break;case"Address1":e=[],$joinFields=["address","address2","city","state","country","zip"];for(var l in $joinFields){var m=$joinFields[l];checkNested(c,b.slug,m)&&e.push(c[b.slug][m])}d=e.length?e.join(" ")+".":"-";break;case"Name1":e=[],$joinFields=["_first_name","_middle_name","_last_name"];for(var l in $joinFields){var m=$joinFields[l];checkNested(c,b.slug+m)&&e.push(c[b.slug+m])}d=e.length?e.join(" "):"-";break;default:d=checkNested(c,b.slug)?c[b.slug]:""}}return d||"&nbsp;"}}}}]);var app=angular.module("app").config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(a,b,c,d){app.controller=a.register,app.directive=b.directive,app.filter=c.register,app.factory=d.factory,app.service=d.service,app.constant=d.constant,app.value=d.value}]);app.constant("Config",function(){return{Date:{format:{"default":{moment:"MM/DD/YYYY",angular:"MM/dd/yyyy"}}},list:{limit:20}}}()),app.config(["cloudinaryProvider","$localStorageProvider",function(a,b){a.set("cloud_name","tadabase").set("upload_preset","a9bbxkte").set("api_key","259257651684622"),b.setKeyPrefix("tb-")}]),app.provider("modalState",["$stateProvider",function(a){var b=this;this.$get=function(){return b},this.state=function(c,d,e){function f(a,b,e,g){d.resolve={};for(var j=f.$inject.length-i.length;j<f.$inject.length;j++)!function(a,b){d.resolve[a]=function(){return b}}(f.$inject[j],arguments[j]);e(function(){h=a.open(d),h.result["finally"](function(){e(function(){b.$current.name===c&&b.go(d.parent||"^")})})})}function g(){h&&h.close()}var h;d.onEnter=f,d.onExit=g,d.backdrop="static",d.keyboard=!1,d.controller=["$scope","$rootScope","$uibModalInstance",function(a,b,d){a.closeModal=function(){b._formObject={},d.close(),b.$broadcast("close_apop",{type:"form",form:c})}}],d.resolve||(d.resolve=[]);var i=angular.isArray(d.resolve)?d.resolve:Object.keys(d.resolve);return a.state(c,omit(d,["template","templateUrl","controller","controllerAs"])),f.$inject=["$uibModal","$state","$timeout"].concat(i),b}}]),angular.module("app").constant("JQ_CONFIG",{signaturePad:["vendor/bower_components/signature-pad/jquery.signaturepad.min.js","vendor/bower_components/signature-pad/assets/jquery.signaturepad.css"]}).constant("MODULE_CONFIG",[{name:"toaster",files:["vendor/bower_components/AngularJS-Toaster/toaster.min.js","vendor/bower_components/AngularJS-Toaster/toaster.min.css"]},{name:"tinyMCE",files:["vendor/bower_components/tinymce/tinymce.min.js","vendor/bower_components/angular-ui-tinymce/dist/tinymce.min.js"]}]).config(["$ocLazyLoadProvider","MODULE_CONFIG",function(a,b){a.config({debug:!1,events:!0,modules:b})}]),angular.module("app").config(["$compileProvider",function(a){a.debugInfoEnabled(!1)}]),angular.module("app").run(["$rootScope","$state","$stateParams","$localStorage","$location","AppURL","AppSetting","CSRF_TOKEN","$http","MetaTags","$templateCache","App",function(a,b,c,d,e,f,g,h,i,j,k,l){k.put("img-modal.html",'<div class="tb-img-popup"><div ng-click="close()" class="button-close"><i class="fal fa-times"></i></div><img ng-src="{{imageUrl}}"/></div>'),a.MetaTags=j,i.defaults.headers.common["X-CSRF-TOKEN"]=h,i.defaults.headers.common["X-TB-TOKEN"]="",a.$state=b,a.$stateParams=c,a.afBreadCrumbs=[],a.getAfBreadCrumbs=function(){return a.afBreadCrumbs},a.setBredCrumbPage=function(b){if(checkNested(b,"parent")&&b.parent){var c=!1;angular.forEach(g.Pages,function(a){b.parent==a.id&&(c=a)}),c&&a.setBredCrumbPage(c)}a.afBreadCrumbs.push({name:b.name,slug:b.slug,id:b.id})},a.updateBredCrumb=function(b){var c=!1;b=b.substr(4),angular.forEach(g.Pages,function(a){b==a.slug&&(c=a)}),a.afBreadCrumbs=[],a.setBredCrumbPage(c)},a.$on("$stateChangeStart",function(c,d,f,h,j){if(l.clearDataChange(),checkNested(d,"name")&&a.updateBredCrumb(d.name),"otherwise.404"==d.name&&(""==e.url()||"/"==e.url())&&checkNested(g,"Pages")){var k="";if(angular.forEach(g.Pages,function(a){checkNested(a,"isIndex")&&"Yes"==a.isIndex&&(k=a.metas.route)}),""!=k)return c.preventDefault(),b.go(k)}d.templateUrl=d.templateUrl+"?_="+(new Date).getTime(),i.defaults.headers.common["X-TB-TOKEN"]="",a.App.get("isAppUserLogin")&&(i.defaults.headers.common["X-TB-TOKEN"]=a.App.get("appUserToken"));var m="";if(_tb.countTotalKeys(f)>0){for(var n in f);m=f[n]}""!=m&&(d.templateUrl=(d.templateUrl.indexOf("&recordId")>-1?d.templateUrl.substr(0,d.templateUrl.indexOf("&recordId")):d.templateUrl)+"&recordId="+m),"function"==typeof ga&&(ga("set","page",d.url),ga("send","pageview"))}),a.$on("$locationChangeSuccess",function(a,c,d,f,h,i){if(!b.transition,!1){var j=e.url(),k="app.errors.404";""==j&&checkNested(g,"Pages")&&angular.forEach(g.Pages,function(a){checkNested(a,"isIndex")&&"Yes"==a.isIndex&&(k=a.metas.route)}),b.go(k)}}),a.$on("$stateChangeError",function(a,b,c,d,e,f){})}]).config(["$stateProvider","$urlRouterProvider","JQ_CONFIG","MODULE_CONFIG","modalStateProvider",function(a,b,c,d,e){a.state("app",{"abstract":!0,url:"/",template:'<div ui-view><i class="fa fa-spin fa-circle-o-notch"></i> Loading...</div>'}).state("app.errors",{"abstract":!0,url:"errors",template:'<div class="page-content bg-red bg-font-red"><ui-view/></div>'}).state("app.errors.404",{url:"/404",templateUrl:"tpl/common/errors/app-404.html",params:{bodyClass:"error-page"}}).state("app.errors.401",{url:"/401",templateUrl:"tpl/common/errors/app-401.html",params:{bodyClass:"error-page"}}).state("errors",{"abstract":!0,url:"/errors",template:"<ui-view/>"}).state("errors.404",{url:"/404",templateUrl:"tpl/common/errors/404.html",params:{bodyClass:"error-page bg-red bg-font-red"}}).state("errors.401",{url:"/401",templateUrl:"tpl/common/errors/401.html",params:{bodyClass:"error-page bg-red bg-font-red"}}).state("app.app",{url:"app","abstract":!0,template:"<ui-view/>"})}]),angular.module("app").controller("AppAppCtrl",["$scope","$rootScope","$window","CSRF_TOKEN","$stateParams","Http","App","$timeout","ConfirmBox","MsgBox","AppURL","$cookies",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b=a.navigator.userAgent||a.navigator.vendor||a.opera;return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(b)}b.App=g,b.AppURL=k,b.App.doHeartBeat(0),b.loggedInUser=b.App.get("isAppUserLogin"),checkNested(g,"data","metas","showCreatedWithBadge")&&"Yes"==g.data.metas.showCreatedWithBadge&&angular.element("html > body").append('<a href="https://tadabase.io?utm_campaign=brand-badge" class="made-with-tb-badge visible-badge"><span></span> Created with no-code using Tadabase</a><style>html > body > a.made-with-tb-badge.visible-badge{display: inline-block!important;visibility: visible!important;}</style>');var n=!!navigator.userAgent.match(/MSIE/i);n&&angular.element(c.document.body).addClass("ie");var o=(new Date).getFullYear();a.app={name:"TB",version:"0.0.1",copyYear:o,settings:{appName:"TB",footerText:o+" © TB.",bodyClass:""}},m(c)&&(angular.element(c.document.body).addClass("smart"),a.app.settings.toasterPosition="toast-bottom-full-width"),b.CSRF_TOKEN=d,a.updateAppSettings=function(b){angular.forEach(b,function(b,c){a.app.settings[c]=b})},a.tinyMCE={options:{skin:"lightgray",theme:"modern",toolbar:"undo redo | bold italic | alignleft aligncenter alignright | code"}},b.rootLoadingCounter=0,b.doRootLoading=function(a,c){a?b.rootLoadingCounter++:angular.isDefined(c)&&c?b.rootLoadingCounter=0:b.rootLoadingCounter>0&&b.rootLoadingCounter--},a.printPage=function(a,c){l.put("ptoken",b.App.get("appUserToken"));var d=g.get("pages",a),f=a;if(checkNested(d,"parent")&&d.parent){for(var i in e);f+="-"+e[i]}var j=g.get("ApiPdfURL",f);"Download"==c&&(j+="?mode=Download"),window.open(j),h(function(){l.remove("ptoken")},100)};var p=0,q=b.App.get("appUserLogin");angular.isDefined(q)&&b.App.is("autoLogout")&&(_tb.windowVisibilityChange(function(a){a?(clearTimeout(p),p=0,"undefined"!=typeof sysend&&sysend.broadcast("activateTab",{status:!0})):p=setTimeout(function(){f.post("auth.logout",{},function(){},function(){},!0),b.App.setFlash("loginPageInfo",b.App.getSetting("autoLogoutMsg")),b.App.set("appUserLogin",!1),b.App.goTo("login",!0)},60*b.App.get("autoLogoutMin")*1e3)}),"undefined"!=typeof sysend&&sysend.on("activateTab",function(a){a&&(console.log("clear from tab"),clearTimeout(p))}))}]),angular.module("app").controller("AppAppError404Ctrl",["$scope","$rootScope","$window","CSRF_TOKEN","$stateParams","Http","App",function(a,b,c,d,e,f,g){var h=g.get("metas");checkNested(h,"error404")&&""!=h.error404?a.defaultMsg=h.error404:a.defaultMsg="We can not find the page you're looking for."}]),angular.module("app").directive("xMenuItem",function(){return function(a,b,c,d){b.bind("click",function(a){if(checkNested(c,"dataType"))switch(c.dataType){case"Page":checkNested(c,"dataPageId")&&angular.forEach(d.Pages,function(a){a.id==c.dataPageId&&$state.go(a.slug)});break;case"Link":checkNested(c,"dataLink")&&""!=c.dataLink&&(checkNested(c,"dataNewWindow")&&"Yes"==c.ataNewWindow?window.open(c.dataLink):window.location.href=c.dataLink)}})}}),app.filter("html",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]),angular.module("ui.load",[]).service("uiLoad",["$document","$q","$timeout",function(a,b,c){var d=[],e=!1,f=b.defer();this.load=function(a){a=angular.isArray(a)?a:a.split(/\s+/);var b=this;return e||(e=f.promise),angular.forEach(a,function(a){e=e.then(function(){return a.indexOf(".css")>=0?b.loadCSS(a):b.loadScript(a)})}),f.resolve(),e},this.loadScript=function(e){if(d[e])return d[e].promise;var f=b.defer(),g=a[0].createElement("script");return g.src=e,g.onload=function(a){c(function(){f.resolve(a)})},g.onerror=function(a){c(function(){f.reject(a)})},a[0].body.appendChild(g),d[e]=f,f.promise},this.loadCSS=function(e){if(d[e])return d[e].promise;var f=b.defer(),g=a[0].createElement("link");return g.rel="stylesheet",g.type="text/css",g.href=e,g.onload=function(a){c(function(){f.resolve(a)})},g.onerror=function(a){c(function(){f.reject(a)})},a[0].head.appendChild(g),d[e]=f,f.promise}}]),angular.module("app").factory("CommonFactory",["$rootScope","$window","$q","$localStorage","$filter",function(a,b,c,d,e){var f,g=!1;return b.GoogleMapsLoaded=function(){g=!0,f.resolve()},{clearAllSelect2:function(a,b){angular.isUndefined(b)&&(b="ctrl-ui-select2"),jQuery(b+" select",a).val(""),jQuery(b+" select",a).trigger("change")},parseDate:function(a,b){var c=moment(a).toDate();return a&&"Invalid Date"!=c.toString()?e("date")(c,b):""},updateCtrlVar:function(a,b,c){var d=angular.element("[ng-controller="+a+"]");d.length&&(d.scope()[b]=angular.copy(c),setTimeout(function(){d.scope().$apply()},100))},getCtrlVar:function(a,b){var c=angular.element("[ng-controller="+a+"]");return c.length&&checkNested(c.scope(),b)?c.scope()[b]:""},isSuperAdmin:function(){return checkNested(a,"currentUser","metas","is_super_admin")&&"Yes"==a.currentUser.metas.is_super_admin},loadGoogleMaps:function(){return g||$.getScript("http://maps.googleapis.com/maps/api/js?v=3&sensor=false&libraries=places&key=AIzaSyCIawx0M5nKnYqthiRQVe4P2eVXWYwgrhE&callback=GoogleMapsLoaded",function(){}),f=c.defer(),f.promise},isGoogleMapsLoaded:function(){return g},isEmpty:function(a){if(!a)return!0;if(angular.isArray(a)||angular.isString(a))return!a.length;for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0},systemMessage:function(b,c){if(!(angular.isDefined(b.page)&&angular.isDefined(b.event)&&checkNested(a.messages,b.page,b.event)))return!1;var d=a.messages[b.page][b.event];switch(d.alertClass="",d.textClass="",d.type){case"Error":d.alertClass="alert-danger",d.textClass="text-danger";break;case"Success":d.alertClass="alert-success",d.textClass="text-success";break;case"Warning":d.alertClass="alert-warning",d.textClass="text-warning";break;case"Info":d.alertClass="alert-info",d.textClass="text-info"}return angular.isDefined(c)?void angular.element(c).html(d.msg):d},applyCurrency:function(b){var c="fa fa-gbp";if(angular.isDefined(a.currentUser.settings.currency))switch(a.currentUser.settings.currency){case"GBP":c="fa fa-gbp";break;case"USD":case"CAD":case"AUD":c="far fa-dollar-sign";break;case"EURO":c="fa fa-euro"}return'<i class="icn-currency '+c+'"></i>'+b},getCachedObj:function(a){return null!==d[a]?d[a]:""},setCachedObj:function(a,b){d[a]=b},getSetupWizardStep:function(){var a=[{id:1,name:"Company Detail"},{id:2,name:"RT Package"},{id:3,name:"Logo"},{id:4,name:"VAT Detail"},{id:5,name:"Shop Location"},{id:6,name:"Repair Tech"},{id:7,name:"Change Label"},{id:8,name:"Booking Settings"},{id:9,name:"Ticket Settings"},{id:10,name:"Quality Control"},{id:11,name:"KPIs"},{id:12,name:"Terms"},{id:13,name:"Membership"},{id:14,name:"Finish"}];return a}}}]),angular.module("app").factory("Pagination",["Config",function(a){var b=function(b,c,d){return this.total=void 0===b?0:b,this.options=void 0===c?{}:c,this.options.limit=void 0===c.limit?a.list.limit:c.limit,this.options.page=void 0===c.page?a.list.page:c.page,this.totalPage=Math.ceil(this.total/this.options.limit),this.getItems=function(){for(var a=[],b=this.options.page;b<=this.totalPage&&b<=this.options.page+3;b++)a.push(b);if(a.push("..."),this.totalPage>3)for(b=this.totalPage-2;b<=this.totalPage;b++)a.push(b);return a},this.goPrev=function(){this.options.page>1&&(this.options.page-=1)},this.goNext=function(){this.options.page<this.totalPage&&(this.options.page+=1)},this.goToPage=function(a){"..."!=a&&a>=0&&a<=this.totalPage&&(this.options.page=a)},this};return b}]),angular.module("app").directive("uiButterbar1",["$rootScope","$anchorScroll","$http",function(a,b,c){return{restrict:"AC",template:'<span class="bar"></span>',link:function(a,d,e){d.addClass("butterbar hide"),a.$on("$stateChangeStart",function(a){b(),d.removeClass("hide").addClass("active")}),a.$on("$stateChangeSuccess",function(a,b,c,e){a.targetScope.$watch("$viewContentLoaded",function(){d.addClass("hide").removeClass("active")})}),a.isAnyLoading=function(){return c.pendingRequests.length>0},a.$watch(a.isAnyLoading,function(a){a?d.removeClass("hide").addClass("active"):d.addClass("hide").removeClass("active")})}}}]),angular.module("app").factory("ConfirmBox",["$rootScope","$timeout","toaster","$uibModal",function(a,b,c,d){return{show:function(a,b){b(confirm(a)?!0:!1)},prompt:function(a,b,c,e,f,g){return angular.isUndefined(f)?f="right":""==f&&(f="in-middle"),angular.isUndefined(g)&&(g=!0),!angular.isUndefined(e)&&e||(e=[{result:!1,label:"Cancel",cssClass:"btn-three"},{result:!0,label:"Yes",cssClass:"btn-two"}]),f+=" tb-modal",d.open({backdrop:"static",keyboard:!1,windowClass:f,template:'<div class="modal-header">'+(g?'<button type="button" class="btn btn-danger btn-circle model-close" ng-click="close()" data-dismiss="modal" aria-label="Close"><i class="far fa-times"></i></button>':"")+'<h3 class="m-none">{{ title }}</h3></div><div class="modal-body full-height-body"><div class="right-part hp100"><div class="con-box hp100 nice-scrollbar"><div class="con-wrap no-border p-25-i"><div ng-bind-html="message | unsafe"></div><div class="ctrl-help" ng-show="note != \'\'"><strong>Note:</strong> {{note}}</div></div></div></div></div><div class="modal-footer"><div class="btn-group col2"><button ng-repeat="btn in buttons" ng-click="close(btn.result)" class="btn" ng-class="btn.cssClass">{{ btn.label }}</button></div></div>',controller:["$scope","$uibModalInstance",function(d,f){d.title=a,d.message=b,d.buttons=e,angular.forEach(d.buttons,function(a){e.length<7&&(a.cssClass+=" col-sm-"+12/e.length)}),d.note=void 0===c?"":c,d.close=function(a){f.close(a)}}]}).result}}}]),angular.module("app").factory("GeoLocation",["$q","$window","$rootScope",function(a,b,c){function d(){var c=a.defer();return b.navigator.geolocation?b.navigator.geolocation.getCurrentPosition(function(a){c.resolve(a)},function(a){c.reject(a)}):c.reject("Geolocation not supported."),c.promise}function e(a){b.navigator.geolocation&&(i=b.navigator.geolocation.watchPosition(function(b){c[a]=b},function(a){console.warn("ERROR("+a.code+"): "+a.message)},{enableHighAccuracy:!1,timeout:5e3,maximumAge:0}))}function f(){i!==!1&&b.navigator.geolocation.clearWatch(i)}function g(b,c){var d,e=a.defer();return"undefined"!=typeof google&&(d=new google.maps.Geocoder),"undefined"!=typeof d?d.geocode({location:{lat:b,lng:c}},function(a,b){"OK"===b?a[0]?e.resolve(a[0]):e.reject("No results found"):e.reject("Geocoder failed due to: "+b)}):e.reject("Geolocation not supported."),e.promise}function h(b){var c,d=a.defer();return"undefined"!=typeof google&&(c=new google.maps.Geocoder),"undefined"!=typeof c?c.geocode({address:b},function(a,b){"OK"===b?a[0]?d.resolve(a[0]):d.reject("No results found"):d.reject("Geocoder failed due to: "+b)}):d.reject("Geolocation not supported."),d.promise}var i;return i=!1,{getCurrentPosition:d,watchPosition:e,clearPosition:f,fetchAddFromLatLng:g,fetchLatLngFromAdd:h}}]),angular.module("app").factory("MsgBox",["$rootScope","$timeout","toaster","CommonFactory",function(a,b,c,d){return{systemMsg:function(a,b){var c=!1;angular.isDefined(a.page)&&angular.isDefined(a.event)&&(c=d.systemMessage(a)),c===!1&&checkNested(a,"msg")&&checkNested(a,"type")&&(c={msg:a.msg,type:a.type}),c&&this.show(c.msg,c.type.toLowerCase(),b)},show:function(a,b,d,e){var f="",g="";if(angular.isString(a)&&""!==a)switch(f=a){case"__server_not_responded__":f="An error occurred, please contact the app admin."}else f=angular.isArray(a)?a.join("<br/>"):"Unknown error";"undefined"==typeof b||"error"==b?(g="alert alert-danger",b="error"):"success"==b?g="alert alert-success":"warning"==b?g="alert alert-warning":"info"==b&&(g="alert alert-info"),angular.element(window.document.body).hasClass("smart")&&angular.element(window.document.body).addClass("show-toaster"),angular.isUndefined(e)&&(e={}),e=angular.extend({type:b,timeout:5e3,title:d||"",body:f,bodyOutputType:"trustedHtml",onHideCallback:function(){angular.element(window.document.body).removeClass("show-toaster")}},e),c.pop(e)},clear:function(){c.clear(),a.errMsg=null,a.errClass=null}}}]),angular.module("app").directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter,b)}),b.preventDefault())})}}),angular.module("app").directive("afSecuredUrl",function(){return function(a,b,c){b.bind("click",function(a){console.log("test")})}}),angular.module("app").directive("ngEnterStop",function(){return function(a,b,c){b.bind("keydown keypress",function(a){13===a.which&&(a.preventDefault(),a.stopPropagation())})}}),angular.module("app").directive("ngEnter2",["$timeout",function(a){return function(b,c,d){c.bind("keydown keypress",function(b){if(13===b.which){var e=angular.element(d.ngEnter2,c);e.length&&a(function(){e.triggerHandler("click")}),b.preventDefault()}})}}]),angular.module("app").directive("sorting",function(){return function(a,b,c){b.addClass("sortable"),b.bind("click",function(d){b.siblings().removeClass("sorted sorted-desc"),a.query.order=c.field,b.hasClass("sorted")?(b.removeClass("sorted").addClass("sorted-desc"),a.query.orderBy="desc"):(b.removeClass("sorted-desc").addClass("sorted"),a.query.orderBy="asc"),a.refresh()})}}),angular.module("app").directive("sortingArray1",["$parse","orderByFilter",function(a,b){return function(c,d,e){d.addClass("sortable"),d.bind("click",function(f){d.siblings().removeClass("sorted sorted-desc"),item=a(e.item)(c),d.hasClass("sorted")?(d.removeClass("sorted").addClass("sorted-desc"),item=b(item,e.field,!0)):(d.removeClass("sorted-desc").addClass("sorted"),item=b(item,e.field,!1)),a(e.item).assign(c,item)})}}]),angular.module("app").directive("sortingArray",["$parse","orderByFilter",function(a,b){return{link:function(a,b,c,d){b.addClass("sortable"),b.bind("click",function(d){b.siblings().removeClass("sorted sorted-desc"),b.hasClass("sorted")?(b.removeClass("sorted").addClass("sorted-desc"),reverse=!0):(b.removeClass("sorted-desc").addClass("sorted"),reverse=!1),checkNested(a,"sortArray")&&a.sortArray(c.field,reverse,c.atype)})}}}]),angular.module("app").directive("capitalize",function(){return{require:"ngModel",link:function(a,b,c,d){var e=function(a){void 0==a&&(a="");var b=a.toUpperCase();return b!==a&&(d.$setViewValue(b),d.$render()),b};d.$parsers.push(e),e(a[c.ngModel])}}}),angular.module("app").directive("hitPagination",function(){return{restrict:"AE",scope:{pagination:"=val"},template:'<ul class="pagination pagination-total" ng-show1="pagination.total"><li class="disabled text"><a>Total {{pagination.total}} record{{pagination.total>1?\'s\':\'\'}}</a></li></ul><ul class="pagination" ng-show="pagination.totalPage > 1"><li ng-class="{disabled: pagination.options.page == 1}"><a aria-label="Previous" ng-click="pagination.goPrev()"><span aria-hidden="true">&laquo;</span></a></li><li class="disabled text"><a>{{pagination.options.page}} of {{pagination.totalPage}}</a></li><li ng-class="{disabled: pagination.options.page == pagination.totalPage}"><a aria-label="Next" ng-click="pagination.goNext()"><span aria-hidden="true">&raquo;</span></a></li></ul>',link:function(a,b,c){}}}),angular.module("app").directive("checkBoxGroupModel",["$parse",function(a){return{require:"^form",restrict:"A",link:function(b,c,d,e){function f(){}c.unbind("change").bind("change",function(){model=a(d.checkBoxGroupModel)(b),angular.isArray(model)||(model=[]),b.$apply(function(){var a=model.indexOf(angular.element(c).val());a>-1?model.splice(a,1):model.push(angular.element(c).val()),b[d.checkBoxGroupModel]=model}),f()}),b.$watch(d.checkBoxGroupModel,function(a){if(!angular.isUndefined(a)){angular.isArray(a)||(a=[a]);var b=a.indexOf(angular.element(c).val());b>-1&&angular.element(c).attr({checked:!0}),f()}})}}}]),angular.module("app").directive("systemMessage",["CommonFactory",function(a){return{restrict:"A",compile:function(b,c){var d={};d.page=angular.isDefined(c.errorPage)?c.errorPage:"",d.event=angular.isDefined(c.errorEvent)?c.errorEvent:"";var e=a.systemMessage(d);e&&(b.html(e.msg),b.hasClass("alert")?b.addClass(e.alertClass):b.addClass(e.textClass))}}}]),angular.module("app").directive("hitFileUpload",function(){return{restrict:"AE",scope:{file:"=ngModel"},require:"ngModel",template:'<div class="hit-file-upload image-file thumb-xl" ng-if="type == \'image\'"><div class="previews" ng-class="{\'has-file\': file != null  && file != \'\'}" ngf-drop="" ngf-select="" ng-model="file" ngf-drop-disabled="file!=null" name="file" style=""><img ngf-thumbnail="file || \'/images/default-img.png\'" class="img-responsive"/></div><div class="btn btn-upload btn-info btn-block" ngf-select="readyFile($file)"  ng-model="file" ng-hide="file != null  && file != \'\'" name="file" ngf-accept="{{pattern}}" required=""  ngf-validate-fn="validateFile($file)"   ng-required="isRequired">Select</div><div class="btn-file-remove btn btn-danger btn-block m-t-none" ng-show="file != null && file != \'\'" ng-click="file=null">Remove</div></div><div class="hit-file-upload" ng-if="type != \'image\'"><div ng-show="file != null  && file != \'\'"> {{file.name}} <a href="javascript:void(0)" ng-click="file=null" uib-tooltip="Remove File"><i class="far fa-trash"></i></a></div><div class="btn btn-upload btn-info btn-block" ngf-select="readyFile($file)"  ng-model="file" ng-hide="file != null  && file != \'\'" name="file" ngf-accept1="{{pattern}}" required=""  ngf-validate-fn="validateFile($file)"  ng-required="isRequired">Browse {{$file}}</div></div>',link:function(a,b,c){switch(c.pathPrefix=void 0===c.pathPrefix?"":c.pathPrefix,a.pathPrefix=c.pathPrefix,a.file=void 0===a.file||null==a.file?null:c.pathPrefix+a.file,a.isRequired=void 0!==c.ngRequired&&c.ngRequired,a.type=void 0===c.ngFileType?"image":c.ngFileType,a.extension=[],a.type){case"csv":a.extension=["csv"],a.maxSize=4;break;case"file":a.extension=[],a.maxSize=4;break;default:a.extension=["jpg","jpeg","png"],a.maxSize=2}a.pattern=a.extension.length>0?"'."+a.extension.join(",.")+"'":"",a.readyFile=function(a){angular.isObject(a)&&(a._type="file")},a.removeFile=function(a){a=null},a.validateFile=function(b){if(window.File&&window.FileReader&&window.FileList&&window.Blob&&"object"==typeof b){var c=b.name,d=c.split(".")[c.split(".").length-1].toLowerCase(),e=b.size;if(a.extension.length>0&&jQuery.inArray(d,a.extension)<0)return"invalid extension";if(e>1024*a.maxSize*1024)return"exceed file size "+a.maxSize+"MB";b._type="file"}}}}}),angular.module("app").directive("hitMultiImageUpload",["MsgBox","DataAPI","ConfirmBox","$uibModal",function(a,b,c,d){return{restrict:"AE",scope:{files:"=ngModel"},template:'<div class="hit-file-upload multi-image-mode thumb-xl"><div class="img-previews" ng-show="files.length > 0"><div class="img" ng-repeat="img in files"><img ngf-thumbnail="img || \'/images/default-img.png\'" ng-hide="img.src" class="img-responsive"/><img ng-src="{{img.src}}" ng-show="img.src" class="img-responsive"/><div class="img-loading" ng-show="img.loading">{{img.loadingStatus}}</div><div class="img-actions" ng-show="img.id != 0"><button class="btn btn-sm btn-primary m-r-xs" ng-show="viewButton == 1" ng-click="viewImg(img, $index)"><i class="fa fa-search"></i> </button><button class="btn btn-sm btn-danger" ng-click="deleteImg(img, $index)"><i class="far fa-trash"></i> <span ng-show="viewButton == 0">Delete</span></button></div></div></div><div class="btn btn-multi-image-upload btn-info btn-block" ng-show="addMode != 0 && !isUploading" ngf-select="uploadFile($file)" ng-model="file" name="file" ngf-accept="{{pattern}}" required="" ngf-validate-fn="validateFile($file)"   ng-required="isRequired">Browse Image</div></div>',link:function(e,f,g){e.apiPath=void 0===g.apiPath?"":g.apiPath,e.addMode=void 0===g.addMode?1:g.addMode,e.viewButton=void 0===g.viewButton?0:g.viewButton,e.view=void 0===g.viewButton?0:g.viewButton,e.file=null,e.isUploading=!1,e.extension=["jpg","jpeg","png"],e.maxSize=10,e.pattern=e.extension.length>0?"'."+e.extension.join(",.")+"'":"",e.removeFile=function(){e.file=null},e.uploadFile=function(c){e.jobId=void 0===g.jobId?"":g.jobId,e.jobOrder=void 0===g.jobOrder?"":g.jobOrder,e.jobAddress=void 0===g.jobAddress?"":g.jobAddress,null!=c&&(e.isUploading=!0,c.loadingStatus="Uploading...",c.loading=!0,c.id=0,c.fileIndex=e.files.length,c._type="file",e.files.push(c),b.saveWithUpload(e.apiPath+"/add",{file:c,jobId:e.jobId,jobOrder:e.jobOrder,jobAddress:e.jobAddress,fileIndex:e.files.length-1},function(b){e.isUploading=!1,"success"==b.type?(a.systemMsg({page:"Job Form",event:b.event}),e.files[b.index].loading=!1,e.files[b.index].id=b.id):a.show(b.msg,"error","Image Save Error")},function(a,c){e.isUploading=!1,b.handleErrors(c,!0)}))},e.deleteImg=function(d,f){c.prompt("Delete Image","Are you sure you want to delete this image from job?").then(function(c){c&&(d.loadingStatus="Deleting...",d.loading=!0,b.save(e.apiPath+"/delete",{id:d.id},function(b){d.loading=!1,a.systemMsg({page:"Job Form",event:b.event,msg:b.msg,type:b.type}),"success"==b.type&&e.files.splice(f,1)},function(a,c){d.loading=!1,b.handleErrors(c,!1)}))})},e.viewImg=function(a,b){d.open({template:'<div class="modal-body" id="image-body"><img ng-src="{{src}}" class="img-responsive"/></div><div class="modal-footer"><a href="{{src}}" target="_blank" class="btn btn-primary">View Actual</a><button class="btn btn-danger" type="button" ng-click="close()">Close</button></div>',controller:["$scope","$uibModalInstance",function(b,c){b.src=a.src,b.close=function(){c.close()}}],size:"lg",resolve:{src:function(){return a.src}}})},e.validateFile=function(b){if(window.File&&window.FileReader&&window.FileList&&window.Blob&&"object"==typeof b){var c=b.name,d=c.split(".")[c.split(".").length-1].toLowerCase(),f=b.size;if(jQuery.inArray(d,e.extension)<0)return a.show("Invalid Extension"),"invalid extension";if(f>1024*e.maxSize*1024)return a.show("Image size should not be exceed 2MB."),"exceed file size 2MB"}}}}}]),angular.module("app").directive("historyBackButton",["$window",function(a){return{restrict:"A",link:function(b,c,d){c.unbind("click").bind("click",function(){a.history.back()})}}}]),app.directive("ngIfSuperAdmin",["ngIfDirective","$rootScope",function(a,b){var c=a[0];return{transclude:c.transclude,priority:c.priority,terminal:c.terminal,restrict:c.restrict,link:function(a,d,e){e.ngIf=function(){return checkNested(b,"currentUser","metas","is_super_admin")&&"Yes"==b.currentUser.metas.is_super_admin},c.link.apply(c,arguments)}}}]),angular.module("app").directive("hitDateTimePicker1",["MsgBox","$uibModal","App","Config",function(a,b,c,d){return{restrict:"AE",scope:{dateTime:"=",options:"@",type:"@"},template:'<div ng-show="options.onlyLabel" ng-click="openCalendar($event)">{{options.label}}</div><div class="input-group">{{dateTime}}<input type="text" class="form-control" datetime-picker="{{options.format}}" ng-model="dateTime" is-open="options.isOpen" enable-date="options.enableDate" enable-time="options.enableTime" ng-hide="options.onlyLabel" read-as="true" save-as="true" readonly="readonly"/><span class="input-group-btn" ng-hide="options.onlyLabel"><button type="button" class="btn btn-default" ng-click="openCalendar($event)"><i class="fa fa-calendar"></i></button></span></div>',
link:function(a,b,e){switch(a.dateTime1="",a.$watch("dateTime",function(b,c){a.dateTime1=new Date(b)},!0),a.options=angular.extend({enableDate:!0,enableTime:!0,format:d.Date.format["default"].dateTime,onlyLabel:!1,label:"Choose Date",isOpen:!1},a.options),a.type){case"Date":a.options.enableTime=!1,a.options.format=c.getSetting("dateFormat")}a.openCalendar=function(b){b.preventDefault(),b.stopPropagation(),a.options.isOpen=!0}}}}]),angular.module("app").component("hitFieldCalendar",{template:'<div class="row"><div class="col-md-5"><div class="input-group date-input-group"><input type="text" class="form-control" datetime-picker="{{$ctrl.options.format}}" ng-model="$ctrl.record[$ctrl.slug].start" is-open="$ctrl.options.isStartOpen" enable-time="$ctrl.options.enableTime" read-as="true" save-as="true"/><i class="fa fa-exclamation-circle date-input-group-invalid" uib-tooltip-html="\'Invalid Date/Time<br/>Valid format: {{$ctrl.options.format}}\'"></i><span class="input-group-btn" ng-hide="$ctrl.options.onlyLabel"><button type="button" class="btn btn-default" ng-click="$ctrl.openCalendar($event, \'isStartOpen\')"><i class="far fa-calendar"></i></button></span></div></div><div class="col-md-2 text-center" ng-if="$ctrl.showToLabel">to</div><div class="col-md-5" ng-if="$ctrl.showDuration"><span ng-if="$ctrl.record.id" class="m-r"><af-data-table-field item="$ctrl.record" column="$ctrl.field" params="{show: \'onlyEndDate\'}"></af-data-table-field></span><input type="text" class="form-control d-i-b m-r" style="width: 100px" ng-model="$ctrl.record[$ctrl.slug].durationVal"/><select ng-model="$ctrl.record[$ctrl.slug].durationSlug" class="form-control d-i-b " style="width:100px"><option value="">minutes</option><option value="h">hours</option><option value="d">days</option></select></div><div class="col-md-5" ng-if="$ctrl.showEndTime"><hit-date-time-picker date-time="$ctrl.record[$ctrl.slug].end" type="\'Time\'" options=\'{"enableDate":false}\'></hit-date-time-picker></div><div class="col-md-5" ng-if="$ctrl.showEndDate"><div class="input-group date-input-group"><input type="text" class="form-control" datetime-picker="{{$ctrl.options.format}}" ng-model="$ctrl.record[$ctrl.slug].end" is-open="$ctrl.options.isEndOpen" enable-time="$ctrl.options.enableTime" read-as="true" save-as="true"/><i class="fa fa-exclamation-circle date-input-group-invalid" uib-tooltip-html="\'Invalid Date/Time<br/>Valid format: {{$ctrl.options.format}}\'"></i><span class="input-group-btn" ng-hide="$ctrl.options.onlyLabel"><button type="button" class="btn btn-default" ng-click="$ctrl.openCalendar($event, \'isEndOpen\')"><i class="far fa-calendar"></i></button></span></div></div><div class="clearfix"></div><div class="col-md-12" ng-if="$ctrl.showAllDay"><label class="mt-checkbox"><input type="checkbox" ng-model="$ctrl.record[$ctrl.slug].all_day" ng-required="false" ng-true-value="\'1\'" ng-false-value="\'\'" ng-change="$ctrl.allDayChange()"> {{field.options.label}}<span>All Day</span></label></div></div>',bindings:{record:"=",slug:"<",column:"<",rangeDate:"<",ngDisabled:"<"},controller:["$scope","$element","Config","App","$rootScope","$filter",function(a,b,c,d,e,f){var g=this;g.options={enableTime:!0,format:d.getSetting("dateFormat")+" "+d.getSetting("timeFormat"),isStartOpen:!1,isEndOpen:!1},g.showToLabel=!1,g.showEndDate=!1,g.showEndTime=!1,g.showDuration=!1,g.showAllDay=!0,g.$onInit=function(){g.field=e.App.get("fieldFromFieldSlug",g.slug),g.rangeDate,checkNested(g.field,"showEndDateAs")&&0==g.record.id?"Duration Field"==g.field.showEndDateAs?(g.showDuration=!0,g.showAllDay=!1):"Time Field"==g.field.showEndDateAs?(g.showAllDay=!1,g.showEndTime=!0,g.showToLabel=!0):(g.showToLabel=!0,g.showEndDate=!0):(g.showToLabel=!0,g.showEndDate=!0),g.ngDisabled=!!checkNested(g,"ngDisabled")&&g.ngDisabled,checkNested(g.record,g.slug)||(g.record[g.slug]={}),""==g.slug||checkNested(g.record,g.slug,"all_day")||(g.record[g.slug].all_day=""),checkNested(g.column,"hideTimeCtrl")&&"Yes"==g.column.hideTimeCtrl&&(g.showAllDay=!1,g.record[g.slug].all_day="1",g.allDayChange()),g.allDayChange()},g.openCalendar=function(a,b){a.preventDefault(),a.stopPropagation(),g.ngDisabled||(g.options[b]=!0)};g.allDayChange=function(){g.options.format;1==g.record[g.slug].all_day?(g.options.format=d.getSetting("dateFormat"),g.options.enableTime=!1):(g.options.format=d.getSetting("dateFormat")+" "+d.getSetting("timeFormat"),g.options.enableTime=!0)}}]}),angular.module("app").component("hitDateTimePicker",{template:'<div ng-show="$ctrl.options.onlyLabel" ng-click="$ctrl.openCalendar($event)">{{$ctrl.options.label}}</div><div class="input-group date-input-group"><input type="text" class="form-control" datetime-picker="{{$ctrl.options.format}}" ng-model="$ctrl.dateTime" is-open="$ctrl.options.isOpen" enable-date="$ctrl.options.enableDate" enable-time="$ctrl.options.enableTime" ng-hide="$ctrl.options.onlyLabel" timepicker-options="$ctrl.timePickerOptions" read-as="true" save-as="true" ng-disabled="$ctrl.ngDisabled"/><i class="fa fa-exclamation-circle date-input-group-invalid" uib-tooltip-html="\'Invalid Date/Time<br/>Valid format: {{$ctrl.options.format}}\'"></i><span class="input-group-btn" ng-hide="$ctrl.options.onlyLabel"><button type="button" class="btn btn-default" ng-click="$ctrl.openCalendar($event)"><i class="{{$ctrl.classIcon}}"></i></button></span></div>',bindings:{dateTime:"=",options:"<",type:"<",ngDisabled:"="},controller:["$scope","$element","Config","App",function(a,b,c,d){var e=this;e.classIcon="far fa-calendar",e.$onInit=function(){switch(e.options=angular.extend({enableDate:!0,enableTime:!0,format:d.getSetting("dateFormat")+" "+d.getSetting("timeFormat"),onlyLabel:!1,label:"Choose Date",isOpen:!1},e.options),e.timePickerOptions={showMeridian:!0},"HH:mm"==d.getSetting("timeFormat")&&(e.timePickerOptions.showMeridian=!1),e.type){case"Time":e.classIcon="far fa-clock",e.options.format=d.getSetting("timeFormat");break;case"Date":e.options.enableTime=!1,e.options.format=d.getSetting("dateFormat");break;case"Date/Time":angular.isDefined(e.dateTime)&&angular.isString(e.dateTime)&&(e.dateTime=e.dateTime.split("-").join("/")),e.options.enableTime=!0,e.options.enableDate=!0,e.options.format=d.getSetting("dateFormat")+" "+d.getSetting("timeFormat")}},e.openCalendar=function(a){a.preventDefault(),a.stopPropagation(),e.ngDisabled||(e.options.isOpen=!0)}}]}),angular.module("app").component("hitFileUpload2",{template:'<div class="hit-file-upload image-file thumb-xl" ng-if="$ctrl.type == \'image\'"><div class="previews" ng-class="{\'has-file\': $ctrl.file != null  && $ctrl.file != \'\'}" ngf-drop="" ngf-select="" ng-model="$ctrl.file" ngf-drop-disabled="$ctrl.file!=null" style="" ngf-accept="{{$ctrl.pattern}}"><img ngf-thumbnail="$ctrl.file || \'/images/default-img.png\'" class="img-responsive"/></div><div class="btn btn-upload btn-primary btn-block" ngf-select="$ctrl.readyFile($file)"  ng-model="$ctrl.file" ng-hide="$ctrl.file != null  && $ctrl.file != \'\'" ngf-accept="{{$ctrl.pattern}}" required=""  ngf-validate-fn="$ctrl.validateFile($file)"   ng-required="isRequired">Select</div><div class="btn-file-remove btn btn-danger btn-block m-t-none" ng-show="$ctrl.file != null  && $ctrl.file != \'\'" ng-click="$ctrl.file=null">Remove</div></div><div class="hit-file-upload" ng-if="$ctrl.type != \'image\'"><div ng-show="$ctrl.file != null  && $ctrl.file != \'\'"> {{$ctrl.file.name}} <a href="javascript:void(0)" ng-click="$ctrl.file=null" uib-tooltip="Remove File"><i class="far fa-times-square font-dark"></i></a></div><div class="btn btn-upload btn-info btn-block" ngf-select="$ctrl.readyFile($file)"  ng-model="$ctrl.file" ng-hide="$ctrl.file != null  && file != \'\'" ngf-accept1="{{$ctrl.pattern}}" required=""  ngf-validate-fn="$ctrl.validateFile($file)" ng-required="$ctrl.isRequired" ng-disabled="$ctrl.ngDisabled">Browse {{$file}}</div><div class="alert alert-danger alert-sm m-t-s" ng-if="$ctrl.tempMsg">{{$ctrl.tempMsg}}</div></div>',bindings:{file:"=",ngDisabled:"<"},controller:["$scope","$element","$attrs",function(a,b,c){var d=this;d.isRequired=!1,d.tempMsg=!1,d.$onInit=function(){switch(d.ngDisabled=!!checkNested(d,"ngDisabled")&&d.ngDisabled,d.file=void 0===d.file||null==d.file?null:$attr.pathPrefix+d.file,d.isRequired=void 0!==c.required,d.type=void 0===c.fileType?"image":c.fileType,d.extension=[],d.type){case"csv":d.extension=["csv"],d.maxSize=4;break;case"file":d.extension=[],d.maxSize=4;break;default:d.extension=["jpg","jpeg","png"],d.maxSize=2}d.pattern=d.extension.length>0?"'."+d.extension.join(",.")+"'":""},d.readyFile=function(a){angular.isObject(a)&&(a._type="file")},d.removeFile=function(a){d.tempMsg=!1,a=null},d.validateFile=function(a){if(d.tempMsg=!1,window.File&&window.FileReader&&window.FileList&&window.Blob&&"object"==typeof a){var b=a.name,c=b.split(".")[b.split(".").length-1].toLowerCase(),e=a.size;if(d.extension.length>0&&jQuery.inArray(c,d.extension)<0)return d.tempMsg="Invalid file, Please select "+d.type+" file","invalid extension";if(e>1024*d.maxSize*1024)return d.tempMsg="The File size should be less than "+d.maxSize+"MB","exceed file size "+d.maxSize+"MB";a._type="file"}}}]}),angular.module("app").directive("googleAutoComplete",["$parse","$timeout",function(a,b){return{restrict:"A",scope:{addressModel:"=",addressField:"="},link:function(a,c,d){function e(){var b=g.getPlace();if(checkNested(b,"geometry","location")&&(a.addressModel.lng=b.geometry.location.lng(),a.addressModel.lat=b.geometry.location.lat(),jQuery("[data-sub-field-slug=lng]",m).val(b.geometry.location.lng()),jQuery("[data-sub-field-slug=lat]",m).val(b.geometry.location.lat())),checkNested(b,"address_components")){for(var c,d,e=!1,f=0;f<b.address_components.length;f++)c=b.address_components[f].types[0],h[c]&&("street_number"==c&&(e=!0),d=b.address_components[f][h[c]],checkNested(i,c)&&(jQuery("[data-sub-field-slug="+i[c]+"]",m).val(d),a.addressModel[i[c]]=d));for(f=0;f<b.address_components.length;f++)c=b.address_components[f].types[0],h[c]&&("street_number"==c&&(e=!0),d=b.address_components[f][h[c]],!checkNested(j,c)||checkNested(a.addressModel,j[c])&&""!=a.addressModel[j[c]]||(jQuery("[data-sub-field-slug="+j[c]+"]",m).val(d),a.addressModel[j[c]]=d));d=[];for(c in l)for(f=0;f<b.address_components.length;f++)checkNested(b.address_components[f],"types","0")&&c==b.address_components[f].types[0]&&checkNested(h,c)&&checkNested(b.address_components[f],h[c])&&0==d.length&&d.push(b.address_components[f][h[c]]);d.length>0?(d=d.join(", "),jQuery("[data-sub-field-slug=city]",m).val(d),a.addressModel.city=d):(jQuery("[data-sub-field-slug=city]",m).val(""),a.addressModel.city=""),e=!1,d=[];for(c in k)for(f=0;f<b.address_components.length;f++)checkNested(b.address_components[f],"types","0")&&c==b.address_components[f].types[0]&&checkNested(h,c)&&checkNested(b.address_components[f],h[c])&&d.push(b.address_components[f][h[c]]);d.length>0?(d=d.join(" "),jQuery("[data-sub-field-slug="+k.route+"]",m).val(d),a.addressModel[k.route]=d):(jQuery("[data-sub-field-slug="+k.route+"]",m).val(""),a.addressModel[k.route]="")}}function f(){"undefined"!=typeof google&&checkNested(google,"maps","places")?(checkNested(a.addressField,"options","formFieldDisplay")&&angular.forEach(a.addressField.options.formFieldDisplay,function(a){"country"==a.key&&(n=!0),"address2"==a.key&&(o=!0)}),g=new google.maps.places.Autocomplete(c[0],{types:["geocode"]}),checkNested(d,"isAddressField")&&"true"==d.isAddressField&&g.addListener("place_changed",e)):b(function(){f()},100)}if(!checkNested(d,"googleAutoCompleteIf")||"false"!=d.googleAutoCompleteIf&&d.googleAutoCompleteIf){var g,h={street_number:"long_name",route:"long_name",locality:"long_name",sublocality_level_1:"long_name",administrative_area_level_1:"long_name",administrative_area_level_2:"long_name",country:"long_name",postal_code:"long_name"},i={route1:"address2",administrative_area_level_1:"state",country:"country",postal_code:"zip"},j={administrative_area_level_2:"city"},k={street_number:"address",route:"address"},l={locality:"city",sublocality_level_1:"city"},m=jQuery(jQuery(c).parents(".field-address")[0]),n=!1,o=!1;f(),c.bind("keydown keypress",function(a){13===a.which&&(a.preventDefault(),a.stopPropagation())})}}}}]),angular.module("app").directive("allowInlineEditingForApp",["$parse","$timeout","$rootScope","$compile","$uibTooltip","$uibModal","MsgBox",function(a,b,c,d,e,f,g){return{restrict:"A",scope:{item:"=",field:"=",tableId:"=",pageId:"=",allowEdit:"=",updated:"=",onUpdate:"&"},link:function(a,b,d){a.open=0;var e=function(){c.App.is("validField",{field:a.field})&&jQuery.inArray(a.field.slug,["api_token"])==-1&&jQuery.inArray(a.field.type,["Auto Increment","Text Formula","Date Formula","Complex Formula","Basic Formula","TableLink","Equation"])==-1&&(jQuery(b).addClass("allow-inline-edit"),angular.element(b).click(function(){jQuery(b).addClass("open-allow-inline-edit");var c=f.open({animation:!0,templateUrl:"assets/common/js/directives/allow-inline-editing-for-app-popover.html",windowTemplateUrl:"assets/common/simple-modal-wrap.html",controller:["$scope","$uibModalInstance","Http","$stateParams","item","field","element","$filter","$rootScope","tableId","pageId",function(a,b,c,d,e,f,h,i,j,k,l){var m=function(a){switch(a.type){case"Radio":case"Checkbox":case"Select":case"Multi-Select":checkNested(a,"options")||(a.options={}),(!checkNested(a.options,"allowDiffVal")||"0"!=a.options.allowDiffVal&&"1"!=a.options.allowDiffVal)&&(a.options.allowDiffVal="0")}return a},n=jQuery(window);a.ngModel="",a.settings={},a.settings.tableId=k,a.settings.pageId=l,a.settings.pStyle={},a.settings.pTitle="Edit",a.settings.pWidth=250,a.settings.pHeight=136,a.settings.field=m(f),a.settings.fieldType=checkNested(f,"type")?f.type:"",a.settings.fieldSlug=checkNested(f,"slug")?f.slug:"",a.settings.item=e,a.record={};var o,p={type:"error"},q=function(){switch(a.record.id=a.settings.item.id,a.record[a.settings.fieldSlug]=checkNested(a.settings.item,a.settings.fieldSlug)?a.settings.item[a.settings.fieldSlug]:"",a.settings.fieldType){case"Rich Text":a.settings.pWidth=650,a.settings.pHeight=362;break;case"Address":a.settings.pHeight=312;break;case"Calendar":a.settings.pWidth=550;break;case"Signature":a.settings.pWidth=335,a.settings.pHeight=226;break;case"Radio":case"Select":a.record[a.settings.fieldSlug]+="";break;case"Decision Box":""===a.record[a.settings.fieldSlug]&&(a.record[a.settings.fieldSlug]="0"),a.record[a.settings.fieldSlug]+="";break;case"Multi-Select":case"Checkbox":(angular.isArray(a.record[a.settings.fieldSlug])||angular.isObject(a.record[a.settings.fieldSlug]))&&(angular.forEach(a.record[a.settings.fieldSlug],function(b,c){angular.isNumber(b)&&(a.record[a.settings.fieldSlug][c]+="")}),checkNested(a.settings.field,"options","allowDiffVal")&&"1"==a.settings.field.options.allowDiffVal&&checkNested(a.settings.field,"options","options")&&angular.forEach(a.record[a.settings.fieldSlug],function(b,c){var d=b;checkNested(a.settings.field,"options","allowColorBadge")&&"1"==a.settings.field.options.allowColorBadge&&(d=jQuery(b).text()),angular.forEach(a.settings.field.options.options,function(b){b.text==d&&(a.record[a.settings.fieldSlug][c]=""+b.val)})}));break;case"Time":_tb.is("null",a.record[a.settings.fieldSlug])||(o=new Date(moment().format("YYYY-MM-DD ")+a.record[a.settings.fieldSlug]),a.record[a.settings.fieldSlug]=_tb.is("validDate",o)?o:"");break;case"Date":case"Date/Time":o=new Date(_tb.strDt(a.record[a.settings.fieldSlug])),a.record[a.settings.fieldSlug]=_tb.is("validDate",o)?_tb.strDt(a.record[a.settings.fieldSlug]):"";break;case"Link":angular.isString(a.record[a.settings.fieldSlug])&&(a.record[a.settings.fieldSlug]={link:a.record[a.settings.fieldSlug],text:""});break;case"Join":a.settings.field.options.remote=1,a.settings.field.options.options=[],angular.forEach(a.record[a.settings.fieldSlug],function(b,c){a.settings.field.options.options.push({val:c,id:c,text:b})});var b=[];angular.isObject(a.record[a.settings.fieldSlug])&&angular.forEach(a.record[a.settings.fieldSlug],function(a,c){b.push(c)}),a.record[a.settings.fieldSlug]=b}n.width()<a.settings.pWidth&&(a.settings.pWidth=n.width())},r=function(){q();var b=jQuery(h).offset(),c=jQuery(window).scrollTop();a.settings.pStyle.minWidth=a.settings.pWidth,a.settings.pStyle.left=b.left-a.settings.pWidth/2+jQuery(h).width()/2,(n.width()==a.settings.pWidth||a.settings.pStyle.left<1)&&(a.settings.pStyle.left=0),a.settings.pStyle.top=b.top-c-a.settings.pHeight,a.settings.pStyle.top=Math.max(a.settings.pStyle.top,10),a.settings.pPosition="top",a.settings.pClass=a.settings.pPosition+" field-type-"+a.settings.fieldType.split(" ").join(""),a.settings.pTitle="Edit "+f.name};a.isSaving=!1,a.update=function(){if(a.isSaving=!0,jQuery(".signature-pad",".popover-modal-wrap").length>0&&jQuery(".signature-pad",".popover-modal-wrap").each(function(){var b=jQuery(this);a.record[a.settings.fieldSlug]=b.signaturePad().getSignatureImage()}),"Calendar"==a.settings.fieldType&&checkNested(a.settings.field,"options","showEndDateAs"))if("Duration Field"==a.settings.field.options.showEndDateAs){if(a.record[a.settings.field.slug].end="",checkNested(a.record,a.settings.field.slug,"start")&&a.record[a.settings.field.slug].start){var b={strDateTime:a.record[a.settings.field.slug].start,outPutAs:"str"};checkNested(a.record,a.settings.field.slug,"durationVal")&&(b.durationVal=a.record[a.settings.field.slug].durationVal,b.durationSlug=checkNested(a.record,a.settings.field.slug,"durationSlug")?a.record[a.settings.field.slug].durationSlug:"m"),a.record[a.settings.field.slug].end=j.App.apply("str2Date",b)}}else"Time Field"==a.settings.field.options.showEndDateAs&&(checkNested(a.record,a.settings.field.slug,"start")&&a.record[a.settings.field.slug].start?(b={strDate:a.record[a.settings.field.slug].start,strTime:a.record[a.settings.field.slug].end},a.record[a.settings.field.slug].end=j.App.apply("str2Date",b)):a.record[a.settings.field.slug].end="");a.record.__i=1,a.record.pageId=a.settings.pageId,c.postWithUpload("data-table."+a.settings.tableId+".save."+a.record.id,a.record,function(b){if(a.isSaving=!1,"success"==b.type){switch(p={type:"success"},checkNested(b,"record")&&(p.record=b.record),checkNested(b,"record",a.settings.fieldSlug)&&(a.record[a.settings.fieldSlug]=b.record[a.settings.fieldSlug]),a.settings.fieldType){case"File":checkNested(b,"record",a.settings.fieldSlug)?p.value=b.record[a.settings.fieldSlug]:p.value="";break;case"Date/Time1":p.value=moment(p.value).format("HH:mm:ss");break;case"Time":checkNested(b,"record",a.settings.fieldSlug)&&(p.value=b.record[a.settings.fieldSlug]),p.value=moment(p.value).format("HH:mm:ss");break;case"Join":var c={};jQuery(".select2 option:selected",".popover-modal-wrap").each(function(){c[$(this).val()]=$(this).text()}),p.value=c;break;default:p.value=a.record[a.settings.fieldSlug]}a.close()}else g.show(b.msg,"error","Error!")},function(b,c){a.isSaving=!1,DataAPI.handleErrors(c,!0)})},a.close=function(){b.close(p)},a.rzSliderOption=function(){return checkNested(a.settings.field,"options","minVal")&&checkNested(a.settings.field,"options","maxVal")?{floor:parseInt(a.settings.field.options.minVal),ceil:parseInt(a.settings.field.options.maxVal)}:{floor:0,ceil:100}},r(),a.$on("modal.closing",function(b,c,d){a.isSaving&&b.preventDefault()})}],popoverPosition:"top",openedClass:"modal-open popover-modal-open",windowClass:"popover-modal",resolve:{item:function(){return a.item},field:function(){return a.field},tableId:function(){return a.tableId},pageId:function(){return a.pageId},element:function(){return b}}});c.closed.then(function(a){jQuery(b).removeClass("open-allow-inline-edit")}),c.result.then(function(c){jQuery(b).removeClass("open-allow-inline-edit"),checkNested(c,"type")&&"success"==c.type&&(angular.isObject(c.value)?a.item[a.field.slug]=angular.copy(c.value):a.item[a.field.slug]=c.value,checkNested(c,"record")&&(angular.forEach(c.record,function(b,c){a.item[c]=b}),checkNested(a.item,"__changed")||(a.item.__changed=0),a.item.__changed++))},function(){})}))};a.allowEdit&&e()}}}]),angular.module("app").factory("Http",["$http","AppURL","$localStorage","Upload","ConfirmBox","$rootScope","MsgBox",function(a,b,c,d,e,f,g){var h=function(a){if(checkNested(a,"status")&&200!=a.status){var b="ooops. Something went wrong but we are working to resolve it. Please refresh your page and contact support if the issue persists.";if(a.status==-1)return g.show(b,"error","Attention"),!0;var c="",d=[{result:!0,label:"Reload",cssClass:"btn-danger"}];return(401==a.status||checkNested(a,"data","errorType")&&"TokenMismatch"==a.data.errorType)&&(b="Your session has expired, Please login again.",c="The page will be reloaded.",d=[{result:!0,label:"Refresh",cssClass:"btn-danger"}]),f.doRootLoading(!1,!0),500==a.status?g.show(b,"error","Attention"):e.prompt("Attention!",b,c,d,"tb-modal in-middle",!1).then(function(a){a&&window.location.reload()}),!1}return!0};return{post:function(b,c,d,e,g){a({url:this.getURL(b,g),method:"POST",data:c}).then(function(a){h(a)&&d(a.data)},function(a){h(a)&&(a.status==-1?f.doRootLoading(!1):e(a.data,a.status))})},postWithUpload:function(a,b,c,e,g,i){b=this.processData(b),a=a.split(".").join("/"),d.upload({url:this.getURL(a,i),data:b}).then(function(a){h(a)&&c(a.data)},function(a){h(a)&&(response.status==-1?f.doRootLoading(!1):e(response.data,response.status))},function(a){g=parseInt(100*a.loaded/a.total)})},"delete":function(b,c,d,e,f){a({url:this.getURL(b,f),method:"Delete"}).then(function(a){h(a)&&d(a.data)},function(a){h(a)&&e(a.data,a.status)})},get:function(b,c,d,e,g){a({url:this.getURL(b,g),method:"GET",params:this.processData(c)}).then(function(a){h(a)&&d(a.data)},function(a){h(a)&&(a.status==-1?f.doRootLoading(!1):e(a.data,a.status))})},addNewUploads:function(c,d,e){var g=b.Upload;f.App.get("isAppUserLogin"),a({url:g,method:"POST",data:c}).then(function(a){h(a)&&d(a.data)},function(a){h(a)&&e(a.data,a.status)})},openInNew:function(a,c){var a=a.split(".").join("/"),d=jQuery.param(this.processData(c));""!=jQuery.trim(d)?window.open(b.API+a+"?"+d):window.open(b.API+a)},getURL:function(a,c){var d=b.API+a.split(".").join("/");return c&&f.App.get("isAppUserLogin"),d},checkIfFile:function(a){return checkNested(a,"_type")&&"file"==a._type},processData:function(a){var b,c={};for(b in a)!angular.isObject(a[b])||this.checkIfFile(a[b])||null===a[b]||null===a[b]||angular.isDate(a[b])?null===a[b]?c[b]="":angular.isDate(a[b])?c[b]=moment(a[b],f.App.get("momentDateTimeFormat")).format("YYYY-MM-DD HH:mm:ss"):c[b]=a[b]:0===countTotalKeys(a[b])?c[b]="":c[b]=this.processData(a[b]);return c},getLoginUser:function(){var a={};return checkNested(c,"apiToken")&&(a=c.user),a}}}]),angular.module("app").factory("App",["$http","AppURL","AppData","$localStorage","Upload","Http","$state","$rootScope","$filter","$timeout","CSRF_TOKEN","$q","$stateParams",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={};n.data={},n.setData=function(a,b){"undefined"==typeof b?(n.data=a,a!==!1&&n.resetJoins()):n[a]=b},n.goTo=function(a,b){var c={};if(1==b&&(c={reload:!0}),checkNested(n.data,"pages")){angular.forEach(n.data.pages,function(b){b.slug==a&&checkNested(b,"metas","route")&&g.go(b.metas.route,{},c)})}},n.goPageRoute=function(a){var b="";if(checkNested(n.data,"pages")){angular.forEach(n.data.pages,function(c){c.slug==a&&checkNested(c,"metas","route")&&(b=c.metas.route)})}return b},n.doTest=function(b){angular.isDefined(b)&&b?a.defaults.headers.common["X-CSRF-TOKEN"]=k:a.defaults.headers.common["X-CSRF-TOKEN"]=(new Date).getTime()},n.getSetting=function(a,b){var c="";switch(a){case"autoLogoutMsg":c=checkNested(n.data,"metas","autoLogoutMsg")?n.data.metas.autoLogoutMsg:"You're logout due to inactivity.";break;case"dateFormat":c=checkNested(n.data,"metas","defaultFormat","date")?n.data.metas.defaultFormat.date:"MM/dd/yyyy";break;case"timeFormat":c=checkNested(n.data,"metas","defaultFormat","time")?n.data.metas.defaultFormat.time:"hh:mm a";break;case"dateTimeFormat":c=n.getSetting("dateFormat")+" "+n.getSetting("timeFormat");break;case"mySqlDateFormat":c="yyyy-MM-dd";break;case"mySqlTimeFormat":c="hh:mm:ss";break;case"mysqlDateTimeFormat":c=n.getSetting("mySqlDateFormat")+" "+n.getSetting("mySqlTimeFormat");break;case"momentMysqlDateTimeFormat":c="YYYY-MM-DD HH:mm:ss";break;case"momentMysqlDateFormat":c="YYYY-MM-DD";break;case"momentDateTimeFormat":c=n.getSetting("dateTimeFormat"),angular.isDefined(b)&&(c=b),c=c.split("dd").join("DD").split("yyyy").join("YYYY").split("hh:mm a").join("hh:mm A");break;case"momentTimeFormat":c=n.getSetting("timeFormat"),c=c.split("hh:mm a").join("hh:mm A");break;case"momentDateFormat":c=n.getSetting("dateFormat"),c=c.split("dd").join("DD").split("yyyy").join("YYYY")}return c},n.setStat=function(a,b){checkNested(n.data,"stats")||(n.data.stats={}),n.data.stats[a]=b},n.getStat=function(a,b){return checkNested(n.data,"stats",a)?n.data.stats[a]:angular.isDefined(b)?b:""},n.getLatLngFromAddressRecord=function(a,b){if("undefined"==typeof google||!checkNested(google,"maps"))return void b({type:"success"});var c=[],d={};angular.forEach(a,function(a,b){if(field=n.get("fieldFromFieldSlug",b),n.is("validField",{field:field})&&checkNested(field,"type")&&"Address"==field.type){var e={address:!1,address2:!1,city:!1,state:!1,country:!1,zip:!1},f=[];checkNested(field,"formFieldDisplay")&&(angular.forEach(field.formFieldDisplay,function(b){checkNested(a,b.key)&&(e[b.key]=!0)}),angular.forEach(e,function(b,c){b===!1&&"country"==c?f.push("USA"):b!==!1&&""!=a[c]&&f.push(a[c])})),0==e.country&&1==f.length&&(f=[]),f.length&&(f=f.join(","),c.push(n.getLatLngFromAddress(f,d).then(function(b){checkNested(b,"type")&&"success"==b.type&&(checkNested(b,"position","lat")&&(a.lat=b.position.lat),checkNested(b,"position","lng")&&(a.lng=b.position.lng))})))}}),l.all(c).then(function(a){b({type:"success"})})},n.getLatLngFromAddress=function(a,b){var c=l.defer();if(angular.isDefined(google)&&checkNested(google,"maps")){var d=new google.maps.Geocoder;d&&d.geocode({address:a},function(a,b){b==google.maps.GeocoderStatus.OK&&b!=google.maps.GeocoderStatus.ZERO_RESULTS?c.resolve({type:"success",msg:"",result:a[0],position:{lat:a[0].geometry.location.lat(),lng:a[0].geometry.location.lng()}}):c.resolve({type:"success",msg:"The address is blank."})})}return c.promise},n.getLatLngFromAddress1=function(a,b){if(angular.isFunction(b)){var c={type:"error",msg:"The Google API was not accessible."};if(angular.isDefined(google)&&checkNested(google,"maps")){var d=new google.maps.Geocoder;if(d)return void d.geocode({address:a},function(a,c){b(c==google.maps.GeocoderStatus.OK?c!=google.maps.GeocoderStatus.ZERO_RESULTS?{type:"success",msg:"",result:a[0],position:{lat:a[0].geometry.location.lat(),lng:a[0].geometry.location.lng()}}:{type:"success",msg:"The address is blank."}:{type:"success",msg:"The address is blank."})})}b(c)}},n.is=function(a,b){var c=!1,d="",e="";switch(a){case"autoLogout":c="Yes"==n.get("autoLogout");break;case"validField":c=!1,checkNested(b,"field")&&angular.isObject(b.field)&&_tb.countTotalKeys(b.field)>0&&checkNested(b.field,"id")&&(c=!0);break;case"isAtLeastOneAllowedUserRole":if(c=!1,checkNested(b,"roleIds")&&_tb.countTotalKeys(b.roleIds)>0){var d=n.get("authRoles");_tb.countTotalKeys(d)>0&&angular.forEach(d,function(a){jQuery.inArray(a.id,b.roleIds)>-1&&(c=!0)})}break;case"enableGeoTracking":c=!1,d=n.get("userDataTable"),!checkNested(d,"metas","loginGeo")||"Enable"!=d.metas.loginGeo&&"Required"!=d.metas.loginGeo||(c=!0);break;case"requireGeoTracking":c=!1,d=n.get("userDataTable"),checkNested(d,"metas","loginGeo")&&"Required"==d.metas.loginGeo&&(c=!0);break;case"requireGeoTrackingMsg":c="Please allow location to login",d=n.get("userDataTable"),checkNested(d,"metas","loginGeoRequireLongMsg")&&""!=d.metas.loginGeoRequireLongMsg&&(c=d.metas.loginGeoRequireLongMsg);break;case"relatedTable":if(c=!1,checkNested(b,"t1")&&checkNested(b,"t2")){d=b.t1,e=b.t2;var f=n.get("dataTables",d);console.log(f),checkNested(f,"joins")&&angular.isArray(f.joins)&&angular.forEach(f.joins,function(a){checkNested(a,"id")&&a.id==e&&(c=!0)}),checkNested(f,"joinTo")&&angular.isArray(f.joinTo)&&angular.forEach(f.joinTo,function(a){checkNested(a,"id")&&a.id==e&&(c=!0)})}}return c},n.get=function(a,c,e){var f;switch(a){case"appCurrency":f=[],console.log("$rootScope.appSettings"),console.log(n.data),console.log(h.appSettings),checkNested(h.appSettings,"currency")&&(f=h.appSettings.currency);break;case"currentPageId":var j=g.current.name,k=n.get("pages");f="",angular.forEach(k,function(a){checkNested(a,"metas","route")&&a.metas.route==j&&(f=a.id)});break;case"recordIdFromURL":for(var l in m);f=m[l],angular.isDefined(f)?f.lastIndexOf("-")>-1&&(f=f.substr(f.lastIndexOf("-")+1)):f="";break;case"authUser":f=n.get("appUserLogin");break;case"authUserField":f=n.get("appUserLogin"),c=c.split("_").join(""),f=checkNested(f,c)?f[c]:"";break;case"authRoles":f=[];var o=n.get("authUser");checkNested(o,"roles")&&angular.isArray(o.roles)&&(f=o.roles);break;case"apiToken":f="",checkNested(d,"apiToken")&&(f=d.apiToken);break;case"AppUniqueKey":f="",checkNested(n.data,"uniqueKey")&&(f=angular.copy(n.data.uniqueKey));break;case"ApiPdfURL":f=b.SITE+"app/"+n.data.id+"/pages/"+c+".pdf";break;case"pageURI":f=b.PageURI.split("app_id").join(n.data.id).split("page_id").join(c);break;case"roles":f=[],checkNested(n.data,"metas","roles")&&(f=angular.copy(n.data.metas.roles));break;case"appId":f=checkNested(n.data,"id")?n.data.id:"";break;case"isAppUserLogin":f=n.get("appId")&&angular.isDefined(n.get("appUserLogin"));break;case"parseDT":angular.isUndefined(e)&&(e=new Date),f=i("date")(e,n.getSetting(c+"Format"));break;case"appUserLogin":var p=n.get("appId"),q=n.get("appUserToken");if(p&&angular.isDefined(q)&&""!=q){var r=d["user_"+p];checkNested(r,"unix")&&moment().unix()<r.unix,f=r}break;case"appUserToken":var p=n.get("appId");p&&checkNested(d,"apiToken_"+p)&&(f=d["apiToken_"+p],f.length<33&&(f=""));break;case"isAllowRegistration":f=!0,checkNested(n.data,"metas","allowRegistration")&&"0"==n.data.metas.allowRegistration&&(f=!1);break;case"autoLogout":f=checkNested(n.data,"metas","autoLogout")?n.data.metas.autoLogout:"No";break;case"autoLogoutMin":f=parseInt(checkNested(n.data,"metas","autoLogoutMin")&&n.data.metas.autoLogoutMin?n.data.metas.autoLogoutMin:60);break;case"autoUserLogoutInMin":f=1,checkNested(n.data,"metas","autoUserLogoutInMin")&&(f=+n.data.metas.autoUserLogoutInMin);break;case"field":f=n.get("objects",c),checkNested(f,"id")||(f="");break;case"fieldName":f="",checkNested(n.data,"objects",c)&&(f=n.data.objects[c].name);break;case"fieldNameFromFieldSlug":f="",checkNested(n.data,"objects")&&angular.forEach(n.data.objects,function(a){checkNested(a,"slug")&&a.slug==c&&(f=a.name)});break;case"fieldCurrencySymbol":f="$";var s=n.get("field",c);isNestedPathExist(s,"currencyType")&&(f="_custom_"==s.currencyType?getNestedPath(s,"customCurrency","$"):n.apply("currencySymbol",{val:s.currencyType}));break;case"anyObjectName":f="",checkNested(e,"type")&&checkNested(n.data,e.type,c)&&checkNested(n.data,e.type,c,"name")&&(f=n.data[e.type][c].name);break;case"dataFields":f=[];var t=n.get("dataTables",c);t&&checkNested(t,"metas","fields")&&angular.forEach(t.metas.fields,function(a){var b=n.get("objects",a);n.is("validField",{field:b})&&(b.id=a,f.push(b))});break;case"singleDataFields":if(checkNested(n.data,"dataTables",c)){var u=n.get("dataFields",c);f=[],angular.forEach(u,function(a){switch(a.type){case"Date/Time":f.push({slug:a.slug,name:a.name,id:a.id}),f.push({slug:a.slug+"|Date",name:a.name+" - Date",id:a.id}),f.push({slug:a.slug+"|Time",name:a.name+" - Time",id:a.id});break;case"Link":f.push({slug:a.slug+"|URL",name:a.name+" - URL",id:a.id}),f.push({slug:a.slug+"|Title",name:a.name+" - Title",id:a.id});break;case"Calendar":f.push({slug:a.slug+"|StartDate",name:a.name+" - Start Date",id:a.id}),f.push({slug:a.slug+"|EndDate",name:a.name+" - End Date",
id:a.id}),f.push({slug:a.slug+"|isAll",name:a.name+" - isAll",id:a.id});break;case"Name":case"Address":checkNested(a,"formFieldDisplay")&&angular.isObject(a.formFieldDisplay)&&angular.forEach(a.formFieldDisplay,function(b){f.push({slug:a.slug+"|"+b.key,name:a.name+" - "+b.name,id:a.id})});break;default:f.push({slug:a.slug,name:a.name,id:a.id})}})}break;case"dataFieldsWithKey":f={};var t=n.get("dataTables",c);t&&checkNested(t,"metas","fields")&&angular.forEach(t.metas.fields,function(a){var b=n.get("objects",a);n.is("validField",{field:b})&&(b.id=a,f[b.id]=b)});break;case"fieldFromFieldSlug":f="",checkNested(n.data,"objects")&&angular.forEach(n.data.objects,function(a){checkNested(a,"slug")&&a.slug==c&&(f=angular.copy(a))});break;case"fieldTypeBySlug":f="";var s=n.get("fieldFromFieldSlug",c);checkNested(s,"type")&&(f=s.type);break;case"processVariables":var v=n.get("variables");f=c,angular.forEach(v,function(a){var b=n.get("variableFinalVal",a);"loggedInUserRoles"==a.slug&&checkNested(e,"loggedInItem","role")&&(b=e.loggedInItem.role),"loggedInUserCreatedDate"==a.slug&&checkNested(e,"loggedInItem","created_at")&&(b=n.get("parseDT","dateTime",moment(e.loggedInItem.created_at).toDate())),(angular.isObject(b)||angular.isArray(b))&&(b=_tb.joinBy(b,", ")),f=f.split("{!"+a.slug+"!}").join(b)});break;case"processLoggedInUserFields":var u=n.get("userDataTableFields");f=c,angular.forEach(u,function(a){checkNested(a,"slug")&&(f=f.split("{loggedInUser."+a.slug+"}").join(n.get("authUserField",a.slug)))});break;case"variableFinalVal":if(f="",checkNested(c,"slug"))switch(c.slug){case"loggedInUserFullName":var o=n.get("authUser");f=checkNested(o,"name")?o.name:"";break;case"currentDate":f=i("date")(new Date,n.getSetting("dateFormat"));break;case"currentTime":f=i("date")(new Date,n.getSetting("timeFormat"));break;default:f=c.finalVal}break;case"userDataTableFields":f={},checkNested(n.data,"dataTables")&&angular.forEach(n.data.dataTables,function(a){checkNested(a,"slug")&&"_users"==a.slug.substr(-6)&&(f=n.get("dataFields",a.id))});break;case"userDataTable":f={},checkNested(n.data,"dataTables")&&angular.forEach(n.data.dataTables,function(a){checkNested(a,"slug")&&"_users"==a.slug.substr(-6)&&(f=a)});break;default:angular.isDefined(c)?checkNested(n.data,a)?angular.forEach(n.data[a],function(a){a.id==c&&(f=a)}):f={}:f=checkNested(n.data,a)?n.data[a]:[]}return f},n.set=function(a,b,c){var e;switch(a){case"appUserLogin":var f=n.get("appId");b!==!1?(c.unix=moment().add(n.get("autoUserLogoutInMin"),"m").unix(),d["apiToken_"+f]=b,d["user_"+f]=c,d.$apply(),h.loggedInUser=!0):(delete d["apiToken_"+f],delete d["user_"+f],d.$apply());break;case"authUserFields":e=!1;var f=n.get("appId");checkNested(d,"apiToken_"+f)&&(e=d["user_"+f],d["user_"+f]=e),angular.isDefined(b)&&angular.isObject(b)?angular.forEach(b,function(a,b){e[b]=a}):angular.isDefined(b)&&angular.isDefined(c)&&(e[b]=c),d["user_"+f]=e}return e},n.goToPageById=function(a,b){var c={};if(1==b&&(c={reload:!0}),checkNested(n.data,"pages")){angular.forEach(n.data.pages,function(b){b.id==a&&checkNested(b,"metas","route")&&g.go(b.metas.route,{},c)})}};var o={};n.doDataChange=function(a,b,c){angular.forEach(o,function(d,e){a==e&&angular.forEach(d,function(a){a(b,c)})})},n.registerDataChange=function(a,b){checkNested(o,a)||(o[a]={});var c=_tb.countTotalKeys(o[a]);return o[a][c]=b,c},n.clearDataChange=function(a,b){angular.isDefined(a)&&angular.isDefined(b)?checkNested(o,a,b)&&delete o[a][b]:o={}},n.getDataChange=function(){return o};var p={};return n.setFlash=function(a,b){p[a]=b},n.getFlash=function(a,b){var c="";return checkNested(p,a)&&(c=p[a],angular.isDefined(b)&&b||(p[a]="",delete p[a])),c},n.setUpAppVariables=function(){checkNested(n,"data","variables")&&angular.forEach(n.data.variables,function(a){switch(a.slug){case"loggedInUserFullName":var b=n.get("authUser");a.finalVal=checkNested(b,"name")?b.name:"";break;case"loggedInUserCreatedDate":var b=n.get("authUser");checkNested(b,"createdAt")&&(a.finalVal=i("date")(b.createdAt,n.getSetting("dateFormat")));break;case"loggedInUserRoles":var c=n.get("authRoles");a.finalVal=c.join(", ");break;case"currentDate":a.finalVal=i("date")(new Date,n.getSetting("dateFormat"));break;case"currentTime":a.finalVal=i("date")(new Date,n.getSetting("timeFormat"))}})},n.loadData=function(a,b,c,d,e){var g={appId:n.data.id};switch(a){default:angular.forEach(b,function(a,b){g[b]=a})}e=angular.isUndefined(e)?"common-get-one":"get-one",j(function(){f.post(e+"."+a,g,function(a){angular.isFunction(d)&&d(a)},function(a,b){angular.isFunction(d)&&d(a)},!0)},0)},n.apply=function(a,b){var c="";switch(a){case"filterDate":checkNested(b,"date")&&checkNested(b,"format")&&(c=i("date")(b.date,b.format),angular.isObject(c)&&"Invalid Date"===c.toString()&&(c=""));break;case"dateToStr":var d=!1,e="momentMysqlDateTimeFormat";checkNested(b,"date")&&!_tb.is("null",b.date)&&(d=moment(b.date)),checkNested(b,"format")&&(e=b.format),""!=e&&d&&(c=d.format(n.getSetting(e)));break;case"strToDate":var d="",e="";checkNested(b,"time")&&(e=n.getSetting("timeFormat"),d=b.time),d=moment(d,e),d.isValid()&&(c=d.toDate());break;case"str2Date":var d=!1;if(checkNested(b,"strDate")&&checkNested(b,"strTime")){var f=angular.copy(b.strDate),e=n.getSetting("momentDateFormat");d=moment(f,e),d.isValid()||(d=moment(f,n.getSetting("momentMysqlDateTimeFormat")));var g;b.strTime.length>8?(f=angular.copy(b.strTime),g=moment(f,e),g.isValid()||(g=moment(f,n.getSetting("momentMysqlDateTimeFormat")))):(f=angular.copy(b.strTime),g=moment(f,n.getSetting("momentTimeFormat")),g.isValid()||(g=moment(f,n.getSetting("momentMysqlDateTimeFormat")))),g.isValid()?b.strDateTime=d.format(n.getSetting("momentDateFormat"))+" "+g.format(n.getSetting("momentTimeFormat")):b.strDateTime=d.format(n.getSetting("momentDateTimeFormat"))}if(checkNested(b,"strDateTime")){var h=angular.copy(b.strDateTime),e=n.getSetting("momentDateTimeFormat");d=moment(h,e),d.isValid()||(d=moment(h,n.getSetting("momentMysqlDateTimeFormat"))),d.isValid()&&checkNested(b,"durationVal")&&(d=d.add(b.durationVal,checkNested(b,"durationSlug")?b.durationSlug:"m"))}d!==!1&&(c=d.toDate(),checkNested(b,"outPutAs")&&("str"==b.outPutAs?c=d.format(e):"strDate"==b.outPutAs?c=d.format(n.getSetting("momentDateFormat")):"strTime"==b.outPutAs&&(c=d.format(n.getSetting("momentTimeFormat")))));break;case"currencySymbol":var j=n.get("appCurrency");console.log("allCurrency"),console.log(j),checkNested(b,"val")&&(c="$",angular.forEach(j,function(a){checkNested(a,"val")&&checkNested(a,"symbol")&&a.val==b.val&&(c=a.symbol)}));break;case"field2Str":if(c="",checkNested(b,"val")){c=b.val;var k=!1;checkNested(b,"fieldId")?k=n.get("field",b.fieldId):checkNested(b,"fieldSlug")&&(k=n.get("fieldFromFieldSlug",b.fieldId)),k&&checkNested(k,"type"),angular.isObject(c)&&(c=_tb.valAt(c))}break;case"fieldFormat":if(checkNested(b,"val")&&checkNested(b,"fieldId")){c=b.val;var k=n.get("field",b.fieldId);switch(k.type){case"Date":var e="MM/DD/YYYY";if(checkNested(b,"format"))switch(b.format){case"chart":e=n.getSetting("dateFormat");break;case"short2":e="M/D/YY"}c=moment(b.val).format(e);break;case"Date/Time":var e="M/D/YY";if(checkNested(b,"format"))switch(b.format){case"chart":e=n.getSetting("dateTimeFormat");break;case"onlyDateShort2":e="M/D/YY"}c=moment(b.val).format(e);break;case"Time":var e="HH:mm A";if(checkNested(b,"format"))switch(b.format){case"chart":e=n.getSetting("timeFormat");break;case"short2":e="h:ma"}c=moment(moment().format("Y-MM-D")+" "+b.val).format(e);break;case"Currency":c=checkNested(k,"currencyFormat")&&"Suffix"===k.currencyFormat?b.val+n.apply("currencySymbol",{val:k.currencyType}):n.apply("currencySymbol",{val:k.currencyType})+b.val}}}return c},n.resetJoins=function(){if(checkNested(n.data.dataTables)){var a=[];angular.forEach(n.data.dataTables,function(b,c){var d=[],e=n.get("dataFields",b.id);e&&angular.forEach(e,function(c){"Join"!==c.type||checkNested(c,"join")&&"hidden"==c.join||(d.push({id:c.joinTableId,fieldId:c.id,type:c.joinType,joinTable:c.joinTable,joinTableFieldId:c.joinTableFieldId,title:n.get("dataTableName",c.joinTableId)+" ("+n.get("fieldName",c.id)+")"}),checkNested(a,c.joinTableId)||(a[c.joinTableId]=[]),a[c.joinTableId].push({id:b.id,fieldId:c.id,type:c.joinType,joinTable:c.joinTable,joinTableFieldId:c.joinTableFieldId,title:n.get("dataTableName",c.joinTableId)+" ("+n.get("fieldName",c.id)+")"}))}),checkNested(b,"id")&&(b.joins=d)}),angular.forEach(n.data.dataTables,function(b,c){checkNested(a,b.id)?b.joinTo=a[b.id]:b.joinTo=[]})}},n.doHeartBeat=function(a){angular.isUndefined(a)&&(a=6e4),j(function(){f.get("heartbeat",{},function(a){h.App.runHeartbeat(a),checkNested(a,"login")&&1!=a.login||n.doHeartBeat()},function(a){n.doHeartBeat()})},a)},n.runHeartbeat=function(a){checkNested(a,"login")&&0==a.login&&(n.set("appUserLogin",!1),h.loggedInUser=!1)},n.loadFirstData=function(){n.data=c.app,angular.forEach(n.data.objects,function(a,b){getNestedPath(a,"slug")&&"status"==a.slug&&6!=a.fieldId&&(a.slug="field_"+a.fieldId)}),n.setUpAppVariables(),n.resetJoins()},n.loadFirstData(),n}]),angular.module("app").filter("unsafe",["$sce",function(a){return a.trustAsHtml}]),angular.module("app").filter("joinBy",function(){return function(a,b){return(a||[]).join(angular.isDefined(b)?"_br_"==b?"<br/>":b:", ")}}),angular.module("app").filter("ifJoin",function(){return function(a,b){return angular.isArray(a)?(a||[]).join(angular.isDefined(b)?"_br_"==b?"<br/>":b:", "):a}}),angular.module("app").filter("ellipsis",function(a){return function(b,c){return angular.isString(b)?a("limitTo")(b,c)+(b.length>c?"...":""):b}}),angular.module("app").filter("shortDate",["$filter","Config",function(a,b){return function(c){var d=new Date(c);return c?a("date")(d,b.Date.format["default"].angular):""}}]),angular.module("app").filter("monthDate",["$filter","Config",function(a,b){return function(b){var c=new Date(b);return b?a("date")(c,"MMMM dd, yyyy"):""}}]),angular.module("app").filter("xShortDate",["$filter","Config",function(a,b){return function(b){var c=new Date(b);return b?a("date")(c,"dd-MMM-yy"):""}}]),angular.module("app").filter("shortTime",["$filter","Config",function(a,b){return function(b){var c=new Date(b);return b?a("date")(c,"h:mm a"):""}}]),angular.module("app").filter("shortDateTime",["$filter","Config",function(a,b){return function(c){var d=new Date(c);return c?a("date")(d,b.Date.format["default"].angular+" h:mm a"):""}}]),angular.module("app").filter("hourMinuteFromSec",["$filter","Config",function(a,b){return function(a){return a?moment().startOf("day").seconds(a).format("HH:mm"):""}}]),angular.module("app").filter("hourMinuteSecondFromSec",["$filter","Config",function(a,b){return function(a){return a?moment().startOf("day").seconds(a).format("HH:mm:ss"):""}}]),angular.module("app").filter("newlines",function(){return function(a){return angular.isDefined(a)&&angular.isString(a)?a.toString().replace(/\n/g,"<br/>"):a}}),angular.module("app").filter("ago",["$rootScope","$filter","Config",function(a,b,c){return function(b){var c=(a.currentUser.settings.time,moment(a.currentUser.settings.date)),d=moment(new Date(b)),e="";return b&&(e=d.from(c)),e}}]),angular.module("app").filter("dateToISO",function(){return function(a){return new Date(a).toISOString()}}),angular.module("app").filter("toFixed",function(){return function(a,b){return angular.isDefined(a)&&(a=parseFloat(a),a=a.toFixed(b)),a}}),angular.module("app").directive("filteredData",["$filter",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){e.$formatters.unshift(function(b){return d.filteredData&&""!=b&&"undefined"!=typeof b?a(d.filteredData)(b):b}),e.$parsers.unshift(function(a){return jQuery.inArray(d.filteredData,["shortDate","longDate"])>-1&&""!=a&&"undefined"!=typeof a?a:a})}}}]),angular.module("app").filter("recordValue",["$filter","Config","AppURL",function(a,b,c){return function(d,e,f,g){switch(e=void 0==e?"":e){case"Date":var h=new Date(d);return d?a("date")(h,b.Date.format["default"].angular):"";case"Time":var h=new Date(d);return d?a("date")(h,"h:mm a"):"";case"Date/Time":var h=new Date(d);return d?a("date")(h,"MM/dd/yyyy   h:mm a"):"";case"Image":return"null"!=d&&null!=d&&""!=d&&d?'<img src="'+c.Upload+d+'" class="img-thumb-sm"/>':'<img src="/images/default-img.png" class="img-thumb-sm"/>';case"Signature":return"null"!=d&&null!=d&&""!=d&&d?'<img src="'+c.Upload+d+'" class="img-thumb-sm"/>':"";case"File":return"null"!=d&&null!=d&&""!=d&&d?'<a href="'+c.Upload+d+'" target="_blank">'+d+"</a>":"";case"TableLink":return angular.isDefined(f)?'<a href="javascript:void(0)" data-new-window="Yes" data-type="Link" data-menu-item="" data-page-id=MXQJdrZ6v" data-link="http://google.com">'+f.title+"</a>":"";case"Currency":return d=parseFloat(0+d).toFixed(2),checkNested(f,"options","currencyFormat")&&checkNested(f,"options","currencySymbol")?"Prefix"==f.options.currencyFormat?f.options.currencySymbol+d:d+f.options.currencySymbol:d;case"Name":var i=[];return checkNested(f,"options","formFieldDisplay")&&angular.forEach(f.options.formFieldDisplay,function(a){checkNested(d,a.key)&&i.push(d[a.key])}),i.join(" ");case"Link":var j="";return checkNested(d,"link")&&(j+='<a href="'+d.link+'" ',checkNested(f,"options","openInNewWindow")&&"Yes"==f.options.openInNewWindow&&(j+='target="_blank"'),j+=">",j+=checkNested(f,"options","linkFormat")?"same_text"===f.options.linkFormat&&checkNested(f,"options","linkText")?f.options.linkText:"unique"===f.options.linkFormat?d.text:d.link:d.link,j+="</a>"),j;case"Rating":for(var k='<div class="ngrateit"><div class="ngrateit-rating">',l=.5;l<=f.options.numberOfStar;l+=.5)k+='<span class="ngrateit-star ngrateit-bg-star ngrateit-static '+(l<=d?"ngrateit-selected":"")+" "+(l%1===0?"right-star":"")+'"></span>';return k+="</div></div>"}if(angular.isArray(d))return d.join(", ");if(angular.isObject(d)){var m,n=[];for(m in d)angular.isString(d[m])&&n.push(d[m]);return n.join(", ")}return d}}]),angular.module("ui.mask").filter("mask",function(){function a(a){return"_"}function b(b){if(d[b])return d[b];var c=0,f=[],g=[],h="",i=0;if(angular.isString(b)){var j=!1,k=0,l=b.split("");angular.forEach(l,function(b,d){e[b]?(f.push(c),h+=a(d-k),g.push(e[b]),c++,j||i++,j=!1):"?"===b?(j=!0,k++):(h+=b,c++)})}return f.push(f.slice().pop()+1),d[b]={maskCaretMap:f,maskPlaceholder:h}}function c(a,b){a=a||"";var c="",d=b.maskCaretMap.slice();return angular.forEach(b.maskPlaceholder.split(""),function(b,e){a.length&&e===d[0]?(c+=a.charAt(0)||"_",a=a.substr(1),d.shift()):c+=b}),c}var d={},e={9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/};return function(a,d){var e=b(d),f=c(a,e);return f}}),angular.module("ui.jq",["ui.load"]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","JQ_CONFIG","uiLoad","$timeout",function(a,b,c,d){return{restrict:"A",compile:function(e,f){if(!angular.isFunction(e[f.uiJq])&&!b[f.uiJq])throw new Error('ui-jq: The "'+f.uiJq+'" function does not exist');var g=a&&a[f.uiJq];return function(a,e,f){function h(){var b=[];return f.uiOptions?(b=a.$eval("["+f.uiOptions+"]"),angular.isObject(g)&&angular.isObject(b[0])&&(b[0]=angular.extend({},g,b[0]))):g&&(b=[g]),b}function i(){d(function(){void 0!=f.uiOptions?e[f.uiJq].apply(e,h()):void 0!=f.noOption&&1==f.noOption||e[f.uiJq].apply(e)},0,!1)}function j(){f.uiRefresh&&a.$watch(f.uiRefresh,function(){i()})}f.ngModel&&e.is("select,input,textarea")&&e.bind("change",function(){e.trigger("input")}),b[f.uiJq]?c.load(b[f.uiJq]).then(function(){i(),j()})["catch"](function(){}):(i(),j())}}}}]),angular.module("app").component("xctrlFileCloudinary",{bindings:{element:"=",client:"=",allowBrowse:"<",onImgSelect:"&"},template:'<div class="xctrl-file-cloudinary"><img ng-src="{{$ctrl.element.src}}" ng-if="$ctrl.element.src" class="img-responsive" ><button class="btn btn-block btn-primary" ng-click="$ctrl.uploadImg()">Upload</button><button type="button" class="btn btn-block btn-default m-t" ng-click="$ctrl.browseImgs()" ng-if="$ctrl.allowBrowse">My Images</button></div>',controller:["$scope","$element","$attrs","$compile","AppURL","CSRF_TOKEN","DataAPI","$stateParams","cloudinary","MsgBox","Pagination","$uibModal",function(a,b,c,d,e,f,g,h,i,j,k,l){var m=function(a,b){jQuery.ajax({url:e.SITE+"/get_cloudinary_signature",type:"POST",dataType:"text",headers:{"X-CSRF-TOKEN":f},data:{data:b},complete:function(){console.log("complete")},success:function(b,c,d){a(b)},error:function(a,b,c){console.log(a,b,c)}})},n=this;n.$onInit=function(){n.allowSources=["local","url","camera","google_photos","facebook","instagram","dropbox","image_search"],n.allowSources=["local","url","camera"]},n.uploadImg=function(){i.openUploadWidget({upload_preset:i.config().upload_preset,cloud_name:i.config().cloud_name,api_key:i.config().api_key,multiple:!1,folder:"client/"+n.client,upload_signature:m,sources:n.allowSources},function(a,b){if(checkNested(a,"message"));else{angular.isObject(n.element)||(n.element={});var c=b[0];g.addNewUploads(c,function(){},function(){}),n.element.publicId=c.public_id,n.element.src=c.url.split("http:").join(""),n.element.width=c.width,n.element.height=c.height,n.element.obj=c}})},n.browseImgs=function(){var a=l.open({animation:!0,keyboard:!1,backdrop:"static",size:"full",windowClass:"right tb-modal",template:'<div class="modal-header"><h3 class="modal-title">Choose Image</h3><button type="button" class="btn btn-danger btn-circle model-close" ng-click="cancel()" data-dismiss="modal" aria-label="Close"><i class="far fa-times"></i></button></div><div class="modal-body"><div ng-show="loadingStatus != 2" class="loading-block"><i class="fa fa-spin fa-3x fa-circle-o-notch"></i> Loading Files...</div><div ng-show="items.length" class="file-manager"><ul class="all-files"><li ng-repeat="item in items" ng-click="selectFile($index)" ng-class="{\'selected\': activeIndex == $index}"><div class="thumb"><div class="centered"><img ng-src="{{item.url}}" class="img-responsive"/></div></div></li></ul><div class="file-sidebar"><div class="selected-item text-left" ng-if="selectedItem"><h4>Image Details</h4><div class="thumbnail"><img ng-src="{{selectedItem.url}}" class="img-responsive"/></div><div class="metas">{{selectedItem.createdAt | shortDateTime}}<br/>{{selectedItem.size}}<br/>{{selectedItem.metas.width}} &times; {{selectedItem.metas.height}}<br/></div></div></div><div class="clearfix"></div><hit-pagination val="pagination"></hit-pagination></div></div><div class="modal-footer"><button class="btn btn-three" type="button" ng-click="cancel()">Cancel</button><button class="btn btn-two" ng-disabled="activeIndex < 0" type="button" ng-click="ok()">Choose</button></div>',controller:["$scope","$uibModalInstance","DataAPI","element","AppURL",function(a,b,c,d,e){a.query={filters:{k:""},page:1,limit:12,order:"id",orderBy:"desc"};var f=!1;a.loadingStatus=0,a.items=[],a.onceLoad=!1,a.refresh=function(){setTimeout(function(){0!=a.loadingStatus&&(a.loadingStatus=1),f&&(a.query.page=1),angular.isDefined(h.appId)&&c.search("apps."+h.appId+".uploads",a.query,function(b){a.loadingStatus=2,"error"==b.type?(j.show(b.msg,"error","File Browser"),a.items=[]):(a.items=b.items,a.pagination=new k(b.totalItems,{limit:a.query.limit,page:a.query.page},a.refresh),a.$$phase||a.$apply()),a.items.length>0&&(a.onceLoad=!0),f=!1},function(b,d){a.loadingStatus=2,c.handleErrors(d,!0)})},100)},a.refresh(),a.$watch("pagination",function(b,c){b!==c&&void 0!==c&&a.query.page!=b.options.page&&(a.query.page=b.options.page,a.refresh())},!0),a.activeIndex=-1,a.selectedItem=!1,a.selectFile=function(b){a.activeIndex=b,a.selectedItem=a.items[b]},a.ok=function(){b.close(a.selectedItem)},a.cancel=function(){b.dismiss("cancel")}}],resolve:{element:{}}});a.result.then(function(a){checkNested(a,"publicId")&&(n.element.publicId=a.publicId,n.element.src=a.url,n.element.width=a.width,n.element.height=a.height,n.element.obj=a)},function(){})}}]}),angular.module("app").component("xctrlFileCloudinary2",{bindings:{element:"=",client:"=",onImgSelect:"&",ngDisabled:"<"},template:'<div class="xctrl-file-cloudinary"><div class="thumb-wrap xl"><img ng-src="{{$ctrl.element.src}}" class="img-responsive" ng-if="$ctrl.element.src"></div><button class="btn btn-block1 btn-primary" ng-click="$ctrl.uploadImg()" ng-if="!$ctrl.ngDisabled">Upload</button><button class="btn btn-danger" ng-if="$ctrl.element.src && !$ctrl.ngDisabled" ng-click="$ctrl.removeImg()">Remove</button></div>',controller:["$scope","$element","$attrs","$compile","AppURL","CSRF_TOKEN","Http","$stateParams","cloudinary","MsgBox",function(a,b,c,d,e,f,g,h,i,j){var k=function(a,b){jQuery.ajax({url:e.SITE+"/get_cloudinary_signature",type:"POST",dataType:"text",headers:{"X-CSRF-TOKEN":f},data:{data:b},complete:function(){console.log("complete")},success:function(b,c,d){a(b)},error:function(a,b,c){console.log(a,b,c)}})},l=this;l.$onInit=function(){l.ngDisabled=!!checkNested(l,"ngDisabled")&&l.ngDisabled,l.allowSources=["local","url","camera","google_photos","facebook","instagram","dropbox","image_search"],l.allowSources=["local","url","camera"],angular.isUndefined(l.element)&&(l.element={})},l.removeImg=function(){l.element={}},l.uploadImg=function(){l.ngDisabled||i.openUploadWidget({upload_preset:i.config().upload_preset,cloud_name:i.config().cloud_name,api_key:i.config().api_key,multiple:!1,folder:"client/"+l.client,upload_signature:k,sources:l.allowSources},function(a,b){if(checkNested(a,"message"));else{angular.isObject(l.element)||(l.element={});var c=b[0];g.addNewUploads(c,function(){},function(){}),l.element={},l.element.publicId=c.public_id,l.element.src=c.url.split("http:").join(""),l.element.width=c.width,l.element.height=c.height,l.element.obj=c}})}}]}),angular.module("app").component("xctrlFileCloudinary3",{bindings:{element:"=",client:"=",onImgSelect:"&"},template:'<div class="xctrl-file-cloudinary"><div class="thumb-wrap xl"><img ng-src="{{$ctrl.element.src}}" class="img-responsive" ></div><button class="btn btn-block1 btn-primary" ng-click="$ctrl.uploadImg()">Upload</button><button class="btn btn-danger" ng-if="$ctrl.element.src" ng-click="$ctrl.removeImg()">Remove</button></div>',controller:["$scope","$element","$attrs","$compile","AppURL","CSRF_TOKEN","DataAPI","$stateParams","cloudinary","MsgBox",function(a,b,c,d,e,f,g,h,i,j){var k=function(a,b){jQuery.ajax({url:e.SITE+"/get_cloudinary_signature",type:"POST",dataType:"text",headers:{"X-CSRF-TOKEN":f},data:{data:b},complete:function(){console.log("complete")},success:function(b,c,d){a(b)},error:function(a,b,c){console.log(a,b,c)}})},l=this;l.$onInit=function(){l.allowSources=["local","url","camera","google_photos","facebook","instagram","dropbox","image_search"],angular.isUndefined(l.element)&&(l.element={})},l.removeImg=function(){l.element={}},l.uploadImg=function(){console.log(l.allowSources),i.openUploadWidget({upload_preset:i.config().upload_preset,cloud_name:i.config().cloud_name,api_key:i.config().api_key,multiple:!1,folder:"client/"+l.client,upload_signature:k,sources:l.allowSources},function(a,b){if(checkNested(a,"message"));else{angular.isObject(l.element)||(l.element={});var c=b[0];g.addNewUploads(c,function(){},function(){}),l.element.publicId=c.public_id,l.element.src=c.url.split("http:").join(""),l.element.width=c.width,l.element.height=c.height,l.element.obj=c}})}}]}),angular.module("app").component("hitOnlyFileUpload",{template:'<div class="hit-only-file-upload"><div ng-show="$ctrl.file != null  && $ctrl.file != \'\'"> <a href="{{$ctrl.file.url}}">{{$ctrl.file.name || $ctrl.file.file_name}}</a> <a href="javascript:void(0)" ng-click="$ctrl.removeFile()" uib-tooltip="Remove File"><i class="far fa-times-square font-dark"></i></a></div><div class="btn btn-upload btn-primary" ngf-select="$ctrl.readyFile($file)"  ng-model="$ctrl.file" ng-hide1="$ctrl.file != null" required=""  ngf-validate-fn="$ctrl.validateFile($file)" ng-required="$ctrl.isRequired" ng-disabled="$ctrl.ngDisabled">Browse</div><div class="alert alert-danger alert-sm m-t-s" ng-if="$ctrl.tempMsg">{{$ctrl.tempMsg}}</div></div>',bindings:{file:"=",ngDisabled:"<"},controller:["$scope","$element","$attrs",function(a,b,c){var d=this;d.isRequired=!1,d.tempMsg=!1,d.extension=["exe"],d.$onChanges=function(a){checkNested(d.file,"url")&&!checkNested(d.file,"file_name")&&(d.file.file_name=d.file.url.substr(d.file.url.lastIndexOf("/")+1))},d.$onInit=function(){d.isRequired=void 0!==c.required,_tb.is("null",d.file)?d.file=null:angular.isString(d.file)&&checkNested(c,"pathPrefix")&&(d.file=c.pathPrefix+d.file),d.ngDisabled=!!checkNested(d,"ngDisabled")&&d.ngDisabled,checkNested(d.file,"url")&&!checkNested(d.file,"file_name")&&(d.file.file_name=d.file.url.substr(d.file.url.lastIndexOf("/")+1))},d.readyFile=function(a){angular.isObject(a)&&(a._type="file")},d.removeFile=function(){d.tempMsg=!1,d.file=null},d.validateFile=function(a){if(d.tempMsg=!1,window.File&&window.FileReader&&window.FileList&&window.Blob&&"object"==typeof a){var b=a.name,c=b.split(".")[b.split(".").length-1].toLowerCase(),e=a.size;if(jQuery.inArray(c,d.extension)>-1)return d.tempMsg="Invalid file, Please select valid file.","invalid extension";if(e>1024*d.maxSize*1024)return d.tempMsg="The File size should be less than "+d.maxSize+"MB","exceed file size "+d.maxSize+"MB";a._type="file"}else d.tempMsg="Your browser is not support."}}]}),angular.module("app").component("pageNavs",{bindings:{pageParent:"=",currentPage:"=",layoutId:"=",filters:"=",onDelete:"&",onCopy:"&"},template:'<div class="page-navs" ng-if1="$ctrl.visible"><div class="nav-item" data-page-nav="{{page.id}}" ng-repeat="page in $ctrl.pages" ng-hide="$ctrl.filterBy(page)" ng-click="$ctrl.open(page, $event)" ng-class="{\'open\': $ctrl.childShow(page), \'active\': $ctrl.isActivePage(page)}" ng-if="$ctrl.layoutId == page.layoutId || page.parent != \'\'"><a ui-sref="{{$ctrl.getSref(page)}}" class="text-e"><span class="tree-branch" ng-if="page.parent != \'\'"></span><i class="nav-indicator fa fa-caret-right" ng-if="$ctrl.hasChildPage(page) && page.parent == \'\'" ng-click="$ctrl.toggle(page, $event)"></i>{{page.name}}<div class="page-slug" ng-hide="!$ctrl.filters.showGlobe"><i class="fa fa-globe" uib-tooltip="URL/Slug"></i> {{page.slug}}</div></a><div class="actions"><i class="fa fa-lock grey" uib-tooltip="Login Enable" tooltip-placement="top" ng-if="page.metas.restrictLogin == \'1\' || page.metas.restrictLogin == \'2\'"></i><i class="fa fa-star  text-warning" uib-tooltip="Home Page" tooltip-placement="top" ng-if="page.isIndex == \'Yes\'"></i><i class="fa fa-circle " uib-tooltip="{{page.status}}" tooltip-placement="top" ng-class="{\'text-success hide\':page.status==\'Active\', \'text-danger\':page.status==\'Inactive\'}"></i><button type="button" class="btn-only-icon btn btn-xs" ng-show1="page.id == $ctrl.currentPage.id" uib-dropdown dropdown-append-to-body><i class="fas fa-caret-down" uib-dropdown-toggle></i><ul class="dropdown-menu small-drop-down" uib-dropdown-menu><li ng-repeat="nav in $ctrl.pageMenus" ng-class1="{\'active\': nav.slug == activeStateTab}" ui-sref-active1="active" ng-hide="App.is(\'alpha\', {isAlpha: nav.isAlpha})"><a ui-sref="{{$ctrl.getSref(page, nav.slug)}}">{{nav.name}} <span uib-tooltip="{{nav.iTagToolTip}}" class="is-alpha" ng-if="nav.iTag" tooltip-placement1="top">{{nav.iTag}}</span> </a></li><li><a href="javascript:void(0)" ng-click="$ctrl.onCopy({type: \'page\'})" ng-if="!page.parent"><i class="far fa-copy"></i> Copy</a></li><li><a href="javascript:void(0)" ng-click="$ctrl.onDelete({type: \'page\'})"><i class="far fa-trash"></i> Delete</a></li></ul></button></div><page-navs page-parent="page" filters="$ctrl.filters" current-page="$ctrl.currentPage" ng-if="$ctrl.hasChildPage(page)" ng-show1="$ctrl.childShow(page)" on-delete="$ctrl.onDelete({type: \'page\'})"></page-navs></div></div>',controller:["$scope","$element","$attrs","$compile","DataAPI","$stateParams","$state","$rootScope","$timeout",function(a,b,c,d,e,f,g,h,i){var j=this;j.pages={},j.visible=!0,j.childShowItem={},j.refresh=function(){checkNested(j,"currentPage","id")&&(j.childShowItem[j.currentPage.id]=!0,angular.element("[data-page-nav="+j.currentPage.id+"]").addClass("open"),i(function(){angular.element("[data-page-nav="+j.currentPage.id+"]").parents(".detail-item",".detail-list").addClass("open")},0)),angular.isDefined(j.pageParent)?j.pages=checkNested(j.pageParent,"childPages")?j.pageParent.childPages:{}:j.pages=h.App.get("pages")},j.open=function(a,b){j.childShowItem[a.id]=!0},j.toggle=function(a,b){checkNested(j,"currentPage","id")&&j.currentPage.id==a.id&&(j.childShowItem[a.id]=!j.childShowItem[a.id],b.stopPropagation())},j.childShow=function(a){return!(checkNested(j.childShowItem,a.id)||!checkNested(f,"typeId")||f.typeId!=a.id)||!!checkNested(j.childShowItem,a.id)&&j.childShowItem[a.id]},j.isActivePage=function(a){return checkNested(j,"currentPage","id")&&j.currentPage.id==a.id&&"pages"==j.currentPage.type},j.getSref=function(a,b){if(angular.isUndefined(b)&&(b="content"),checkNested(a,"parent")&&""!=a.parent){var c=h.App.get("pageParentPath",a.id),d=c[0];return c.splice(0,1),"app.appsManage.typeEdit.tabs.childPage({'type': 'pages', tab: '"+b+"', typeId: '"+d+"', child: '"+c.join(".")+"'})"}return"app.appsManage.typeEdit.tabs({'type': 'pages', typeId: '"+a.id+"', tab: '"+b+"'})"},j.filterBy=function(a){return!(!checkNested(a,"metas","defaultPage")||""==a.metas.defaultPage)||(!!(checkNested(a,"name")&&checkNested(j.filters,"text")&&""!=j.filters.text&&""==a.parent&&a.name.toLowerCase().indexOf(j.filters.text.toLowerCase())==-1&&checkNested(a,"slug")&&a.slug.indexOf(j.filters.text.toLowerCase())==-1)||(!(!checkNested(j.filters,"layout","id")||a.layoutId==j.filters.layout.id)||(!(!checkNested(j.filters,"role","id")||checkNested(a,"metas","allowRoles")&&!(jQuery.inArray(j.filters.role.id,a.metas.allowRoles)<0))||void 0)))},j.$onChanges=function(){angular.isDefined(j.pageParent)?j.refresh():h.App.checkOnceCallBack("app_loaded")===!1?h.App.registerCallBack("app_loaded",function(a){j.refresh()}):j.refresh()},j.hasChildPage=function(a){return checkNested(a,"childPages")&&Object.keys(a.childPages).length},j.pageMenus=[{slug:"content",name:"Content"},{slug:"pdf",name:"PDF",isAlpha:!0,iTag:"alpha"},{slug:"css",name:"CSS"},{slug:"js",name:"JavaScript"},{slug:"settings",name:"Settings"},{slug:"seo",name:"SEO",isAlpha:!0,iTag:"alpha"}]}]}),angular.module("app").component("childPages",{bindings:{page:"="},template:'<div class="detail-child-items" ng-if="$ctrl.visible"><div class="detail-item" ng-repeat="page in $ctrl.page.childPages"><a ui-sref="app.appsManage.typeEdit.tabs.childPage({\'type\': \'pages\', tab: \'content\', \'typeId\': $ctrl.page.id,\'child\': page.id})" ng-click1="$ctrl.reload()"><span class="tree-branch"></span>{{page.name}}<i class="fa fa-circle right" uib-tooltip="{{page.status}}" tooltip-placement="top" ng-class="{\'text-success\':page.status==\'Active\', \'text-danger\':page.status==\'Inactive\'}"></i><i class="fa fa-lock right m-r" uib-tooltip="Login Enable" tooltip-placement="top" ng-if="page.metas.restrictLogin == \'1\' || page.metas.restrictLogin == \'2\'"></i></a></div></div>',controller:["$scope","$element","$attrs","$compile","DataAPI","$stateParams","$state",function(a,b,c,d,e,f,g){var h=this;h.visible=!1,h.$onInit=function(){h.visible=checkNested(h.page,"childPages")&&Object.keys(h.page.childPages).length},h.reload=function(){}}]}),angular.module("app").component("showJoinStructure",{bindings:{tableId:"<",tableId2:"<",type:"<",fieldId:"<"},replace:!0,template:'<i class="sub-info" ng-bind-html="$ctrl.name | unsafe"></i>',controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onInit=function(){"join"==e.type?e.name=d.App.get("dataTableName",e.tableId)+" ("+d.App.get("fieldName",e.fieldId)+") &gt; "+d.App.get("dataTableName",e.tableId2):"joinTo"==e.type&&(e.name=d.App.get("dataTableName",e.tableId)+" &gt; "+d.App.get("dataTableName",e.tableId2)+" ("+d.App.get("fieldName",e.fieldId)+")");
}}]}),angular.module("app").component("showJoinStructure2",{bindings:{tableId:"<",tableId2:"<",type:"<",fieldId:"<"},replace:!0,template:'<i class="sub-info" ng-bind-html="$ctrl.name | unsafe"></i>',controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onInit=function(){"join"==e.type?e.name='Connected using "'+d.App.get("fieldName",e.fieldId)+'" field in the "'+d.App.get("dataTableName",e.tableId)+'" table':"joinTo"==e.type&&(e.name='Connected using "'+d.App.get("fieldName",e.fieldId)+'" field in the "'+d.App.get("dataTableName",e.tableId2)+'" table')}}]}),angular.module("app").component("showJoinStructure3",{bindings:{fieldId:"<",tableId:"<",nbsp:"<"},replace:!0,template:'<i class="sub-info" ng-bind-html="$ctrl.name | unsafe"></i>',controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.$onInit=function(){e.name="","1"==e.nbsp&&(e.name="&nbsp;"),e.name+='Connected using "'+d.App.get("fieldName",e.fieldId)+'" field in the "'+d.App.get("dataTableName",e.tableId)+'" table'}}]}),angular.module("app").component("showDataTableName",{bindings:{tableId:"<",fieldJoinTableId:"<",showIcon:"<"},replace:!0,template:'<span ng-bind-html="$ctrl.name"></span>',controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onChanges=function(a){e.name="",angular.isDefined(e.fieldJoinTableId)&&(e.tableId=d.App.get("joinDataTableIdFromFieldId",e.fieldJoinTableId)),"1"==e.showIcon&&(e.name+=d.App.get("dataTableIcon",e.tableId,{html:1})+"&nbsp;"),e.name+=d.App.get("dataTableName",e.tableId)}}]}),angular.module("app").component("showDataTableSingularName",{bindings:{tableId:"<",showIcon:"<"},replace:!0,template:'<span ng-bind-html="$ctrl.name"></span>',controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onChanges=function(a){e.name="","1"==e.showIcon&&(e.name+=d.App.get("dataTableIcon",e.tableId,{html:1})+"&nbsp;"),e.name+=d.App.get("dataTableIfSingularName",e.tableId)}}]}),angular.module("app").component("showLayoutName",{bindings:{id:"<"},replace:!0,template:"{{$ctrl.name}}",controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onInit=function(){e.name=d.App.get("layoutName",e.id)}}]}),angular.module("app").component("showPageName",{bindings:{id:"<"},replace:!0,template:"{{$ctrl.name}}",controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onInit=function(){e.name=d.App.get("pageName",e.id)}}]}),angular.module("app").component("showFieldName",{bindings:{id:"<",slug:"<"},replace:!0,template:"{{$ctrl.name}}",controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onInit=function(){angular.isDefined(e.id)?e.name=d.App.get("fieldName",e.id):angular.isDefined(e.slug)&&(e.name=d.App.get("fieldNameFromFieldSlug",e.slug))}}]}),angular.module("app").component("showFieldType",{bindings:{id:"<",slug:"<"},replace:!0,template:"{{$ctrl.name}}",controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onInit=function(){angular.isDefined(e.id)?e.name=d.App.get("fieldType",e.id):angular.isDefined(e.slug)&&(e.name=d.App.get("fieldTypeFromFieldSlug",e.slug))}}]}),angular.module("app").component("showObjectName",{bindings:{type:"<",id:"<",slug:"<"},replace:!0,template:"{{$ctrl.name}}",controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.name="",e.$onInit=function(){angular.isDefined(e.id)?e.name=d.App.get("anyObjectName",e.id,{type:e.type}):angular.isDefined(e.slug)&&(e.name=d.App.get("fieldNameFromFieldSlug",e.slug))}}]}),angular.module("app").component("dbFieldIcon",{bindings:{field:"=?",type:"=?",size:"="},replace:!0,template:'<i class="{{$ctrl.iconClass}}"></i>',controller:["$scope","$element","$attrs","$rootScope",function(a,b,c,d){var e=this;e.iconClass="",e.$onChanges=function(){checkNested(e.field,"type")&&angular.isDefined(e.field.type)&&""!=e.field.type?e.iconClass=d.App.getFieldIcon(e.field.type):angular.isDefined(e.type)&&""!=e.type&&(e.iconClass=d.App.getFieldIcon(e.type)),angular.isDefined(e.size)&&""!=e.size&&(e.iconClass+="fa-"+e.size)}}]}),angular.module("app").directive("numberToString",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){return""+a}),d.$formatters.push(function(a){return a+""})}}}),angular.module("app").component("fieldFiltersForApp",{bindings:{options:"=",fields:"=",subType:"<",subTypeId:"<",onDelete:"&",onlyAllow:"="},template:'<div class="filters-box" ng-show="$ctrl.options.items.length > 0" ng-class="[{\'close-box\': $ctrl.close},$ctrl.filterTypeClass]"><div class="filter-header" ng-if="$ctrl.isHeader()"><div class="filter-tab-name"><div class="input-group input-group-xs" ng-show="$ctrl.type == \'dataTableTabFilter\'"><span class="input-group-addon">Tab Name</span><input type="text" ng-model="$ctrl.options.title" class="form-control"/></div></div><div class="btn-group"><button type="button"  class="btn btn-default btn-xs" uib-dropdown><span uib-dropdown-toggle>Match {{$ctrl.options.condition || \'All\'}} <span class="caret"></span></span><ul class="dropdown-menu"><li><a ng-click="$ctrl.options.condition = \'All\'">Match All</a></li><li><a ng-click="$ctrl.options.condition = \'Any\'">Match Any</a></li></ul></button><button type="button" class="btn btn-default btn-xs" ng-click="$ctrl.addChildFilterGroup()" ng-show="$ctrl.type == \'dataTableFilter\' && $ctrl.allowChildFilter">Add Child Filter Group</button><button type="button" class="btn btn-default btn-xs" ng-click="$ctrl.onDelete()">Delete</button><button type="button" class="btn btn-default btn-xs" ng-click="$ctrl.toggleBox()"><i class="fa" ng-class="{\'fa-chevron-up\': $ctrl.close, \'fa-chevron-down\': !$ctrl.close}"></i></button></div></div><div class="filter-items" ng-class="{\'filter-match-any\': $ctrl.options.condition == \'Any\'}"><div class="filter-item" ng-repeat="(itemIndex, item) in $ctrl.options.items"><div class="col-md-3"><select ng-model="item.fieldId" class="form-control input-sm" ng-change="$ctrl.changeFieldId(item)"><option value="" class="blank-option">-- Select any option --</option><option ng-repeat="field in $ctrl.fields" value="{{field.slug}}" ng-if="!$ctrl.onlyAllow.fieldName && field.hidden != 1">{{field.name}}</option><option ng-repeat="field in $ctrl.fields" value="{{field.name}}" ng-if="$ctrl.onlyAllow.fieldName">{{field.name}}</option></select></div><div class="col-md-3"><select ng-model="item.operator" class="form-control input-sm"><option value="" class="blank-option">-- Select any option --</option><option ng-repeat="op in $ctrl.opType(item.fieldId)" value="{{op}}">{{op}}</option></select></div><div class="col-md-3"><input ng-model="item.val" ng-if="$ctrl.showText(item)" class="form-control input-sm"><select ng-model="item.val" ng-if="$ctrl.showSelect(item)" class="form-control input-sm"><option ng-repeat="opt in $ctrl.fieldItems[item.fieldId].options" value="{{opt.text}}">{{opt.text}}</option></select><select ng-model="item.val" ng-if="$ctrl.showSelect2(item)" class="form-control input-sm " ng-change="$ctrl.updateTextVal(item, $ctrl.fieldItems[item.fieldId].options)"><option value="" class="blank-option">-- Select any option --</option><option ng-repeat="opt in $ctrl.fieldItems[item.fieldId].options" value="{{opt.val}}">{{opt.text}}</option></select><div ng-if="$ctrl.getFieldType(item) == \'Date\'"><hit-date-time-picker ng-if="$ctrl.showDateText(item)" date-time="item.val" options=\'{"enableTime":false}\' type="\'Date\'"></hit-date-time-picker><select ng-if="$ctrl.showDateSelect(item)" ng-model="item.val2" class="form-control input-sm"><option value="week">week</option><option value="month">month</option><option value="quarter">quarter</option><option value="year">year</option></select><div ng-if="$ctrl.showDateSelect2(item)"><input type="number" ng-model="item.val2" class="form-control d-i-b input-sm m-r" style="width:75px" placeholder="Enter"><select ng-model="item.val3" class="form-control d-i-b input-sm" style="width:100px"><option value="days">days</option><option value="weeks">weeks</option><option value="months">months</option><option value="years">years</option></select></div></div><div ng-if="$ctrl.getFieldType(item) == \'Time\'"><hit-date-time-picker ng-if="$ctrl.showTimeText(item)" date-time="item.val" options=\'{"enableDate":false}\' type="\'Time\'"></hit-date-time-picker></div><div ng-if="$ctrl.getFieldType(item) == \'Date/Time\' || $ctrl.getFieldType(item) == \'Calendar\'"><hit-date-time-picker ng-if="$ctrl.showDateText(item)" date-time="item.val" options=\'{}\' type="\'Date/Time\'"></hit-date-time-picker><select ng-if="$ctrl.showDateSelect(item)" ng-model="item.val" class="form-control input-sm"><option value="week">week</option><option value="month">month</option><option value="quarter">quarter</option><option value="year">year</option></select><div ng-if="$ctrl.showDateSelect2(item)"><input type="number" ng-model="item.val2" class="form-control d-i-b input-sm m-r" style="width:75px" placeholder="Enter"><select ng-model="item.val3" class="form-control d-i-b input-sm" style="width:100px"><option value="days">days</option><option value="weeks">weeks</option><option value="months">months</option><option value="years">years</option></select></div></div></div><div class="col-md-3 text-right"><button type="button" class="btn btn-sm btn-default m-r-sm" ng-click="$ctrl.addNewConditionItem()"><i class="fa fa-plus"></i></button><button type="button" class="btn btn-sm btn-default" ng-click="$ctrl.deleteConditionItem(itemIndex)"><i class="far fa-trash"></i></button></div><div class="clearfix"></div></div></div><field-filters-for-app only-allow="$ctrl.onlyAllow" options="childFilter" fields="$ctrl.fields" ng-repeat="childFilter in $ctrl.options.child" on-delete="$ctrl.removeChildFilterGroup($index)"></field-filters-for-app><div class="filter-footer form-inline" ng-if="$ctrl.isFooter()"><div ng-if="$ctrl.type == \'dataTableFieldDisplayRules\'"><strong class="m-r  m-r v-top">Action</strong><div class="d-i-b"><div class="m-b-2x" ng-repeat="(ruleIndex, rule) in $ctrl.options.displayRules"><select ng-model="rule.action" class="form-control input-sm m-r"><option value="" class="blank-option">-- Select any option --</option><option value="textColor">Set Text Color</option><option value="textStyle">Set Text Style</option><option value="bkColor">Set Background Color</option><option value="icon">Display Icon</option><option value="hideValue">Hide Value</option></select><div class="btn-group" ng-show="rule.action == \'textStyle\'"><button type="button"  class="btn btn-default btn-sm" ng-click="rule.textBold = !rule.textBold" ng-class="{\'btn-primary active\': rule.textBold}"><i class="fa fa-bold"></i></button><button type="button"  class="btn btn-default btn-sm" ng-click="rule.textItalic = !rule.textItalic" ng-class="{\'btn-primary active\': rule.textItalic}"><i class="fa fa-italic"></i></button><button type="button"  class="btn btn-default btn-sm" ng-click="rule.textStrikethrough = !rule.textStrikethrough" ng-class="{\'btn-primary active\': rule.textStrikethrough}"><i class="fa fa-strikethrough"></i></button></div><div class="input-group m-r" ng-if="rule.action == \'icon\'"><ctrl-icon-picker2 ng-model="rule.iconClass" class="m-t-xs"></ctrl-icon-picker2></div><spectrum-colorpicker ng-model="rule.color" options="{showInput: true, preferredFormat: \'hex\', allowEmpty: true}" format="\'hex\'" ng-show="rule.action == \'textColor\' || rule.action == \'icon\' || rule.action == \'bkColor\'"></spectrum-colorpicker><button type="button" class="btn btn-sm btn-default m-r-sm" ng-click="$ctrl.addItem(\'displayRule\')"><i class="fa fa-plus"></i></button><button type="button" class="btn btn-sm btn-default" ng-click="$ctrl.deleteItem(\'displayRule\', ruleIndex)"><i class="far fa-trash"></i></button></div></div></div><div ng-if="$ctrl.type == \'formDisplayRules\'"><div class="d-i-b m-r v-top"><strong>Then</strong></div><div class="d-i-b"><div class="m-b-2x" ng-repeat="(ruleIndex, rule) in $ctrl.options.displayRules"><select ng-model="rule.action" class="form-control input-sm m-r"><option value="" class="blank-option">-- Select any option --</option><option value="Show">Show</option><option value="Hide">Hide</option><option value="Rename">Rename Label</option></select><select ng-model="rule.fieldId" class="form-control input-sm m-r"><option value="" class="blank-option">-- Select any option --</option><option ng-repeat="field in $ctrl.fields" value="{{field.slug}}">{{field.name}}</option></select><div class="d-i-b m-r" ng-if="rule.action != \'Rename\'"><strong>Otherwise</strong></div><select ng-model="rule.action2" class="form-control input-sm m-r" ng-if="rule.action != \'Rename\'" ><option value="" class="blank-option">-- Select any option --</option><option value="Show" ng-if="rule.action==\'Hide\'">Show</option><option value="Hide" ng-if="rule.action==\'Show\'">Hide</option><option value="Nothing">Do Nothing</option></select><div class="d-i-b m-r" ng-if="rule.action == \'Rename\'"><strong>To</strong></div><input type="text" class="form-control input-sm m-r" ng-if="rule.action == \'Rename\'" ng-model="rule.renameLabel" placeholder="New Label"><button type="button" class="btn btn-sm btn-default m-r-sm" ng-click="$ctrl.addItem(\'displayRule\')"><i class="fa fa-plus"></i></button><button type="button" class="btn btn-sm btn-default" ng-click="$ctrl.deleteItem(\'displayRule\', ruleIndex)"><i class="far fa-trash"></i></button></div></div></div><div ng-if="$ctrl.type == \'formValidationRules\'"><strong class="m-r">Message</strong><textarea type="text" class="form-control input-sm input-xlarge m-r" ng-model="$ctrl.options.errMsg" placeholder="Enter your message"></textarea><button type="button"  class="btn btn-default btn-sm h200" uib-dropdown><span uib-dropdown-toggle>Add Field <span class="caret"></span></span><ul class="dropdown-menu"><li ng-repeat="field in $ctrl.fields" ng-if="field.hidden != 1"><a ng-click="$ctrl.addFieldToErrMsg(field)">{{field.name}}</a></li></ul></button></div></div></div>',controller:["$scope","$element","$attrs","$compile","Http","$stateParams","$rootScope",function(a,b,c,d,e,f,g){var h=this;h.filterTypeClass="",h.fieldItems={},h.allowTab=!1,h.type="dataTableFilter";var i=function(a){var b=checkNested(a,"fieldId")?a.fieldId.split("-"):[""];return b[0]},j=function(a){var b="",c=i(a);return checkNested(h.fieldItems,c,"type")&&(b=h.fieldItems[c].type,"Equation"==b&&(b="Text",checkNested(h.fieldItems[c],"outPutType")&&("Number"==h.fieldItems[c].outPutType?b="Number":"Date"==h.fieldItems[c].outPutType&&(b="Date")))),b};h.getFieldType=function(a){return j(a)};var k={fieldName:!1,operator:!1};h.$onInit=function(){h.close=!1,h.options.items.length<1&&h.options.items.push({}),checkNested(c,"allowTab")&&(h.allowTab="true"==c.allowTab),h.allowChildFilter=!checkNested(c,"allowChildFilter")||"true"==c.allowTab,angular.isDefined(h.onlyAllow)&&(checkNested(h,"onlyAllow","fieldName")&&angular.isDefined(h.onlyAllow.fieldName)&&(k.fieldName=h.onlyAllow.fieldName),checkNested(h,"onlyAllow","operator")&&angular.isDefined(h.onlyAllow.operator)&&(k.operator=h.onlyAllow.operator)),checkNested(c,"type")&&(h.type=jQuery.inArray(c.type,["dataTableFilter","dataTableFieldDisplayRules","formDisplayRules","formValidationRules","dataTableTabFilter","none"])>-1?c.type:"dataTableFilter"),h.filterTypeClass="filters-"+h.type,jQuery.inArray(h.type,["formDisplayRules","dataTableFieldDisplayRules"])>-1&&!checkNested(h.options,"displayRules")&&(h.options.displayRules=[{}]),angular.forEach(h.fields,function(a){h.fieldItems[a.slug]=a,"Join"==a.type&&h.loadJoinData(h.fieldItems[a.slug])}),checkNested(h,"options","items")&&angular.forEach(h.options.items,function(a){if(checkNested(h.fieldItems,a.fieldId,"type"))switch(h.getFieldType(a)){case"Time":case"Date":case"Date/Time":a.val=moment(a.val).isValid()?moment(a.val).toDate():""}})},h.changeFieldId=function(a){a.val="",checkNested(a,"_text")&&(a._text="")},h.updateTextVal=function(a,b){angular.forEach(b,function(b){b.val==a.val&&(a._text=b.text)})},h.opType=function(a){if(angular.isUndefined(a))return[];var b=[],c=a.split("-");if(k.operator)b=["is","is not","higher than","lower than","starts with","ends with","contains","does not contain"];else if(checkNested(h.fieldItems,a,"type")){var d=h.fieldItems[c[0]].type;switch("Equation"==d&&(d="Text",checkNested(h.fieldItems[c[0]],"outPutType")&&("Number"==h.fieldItems[c[0]].outPutType?d="Number":"Date"==h.fieldItems[c[0]].outPutType&&(d="Date"))),d){case"Text":case"Rich Text":case"Long Text":case"Name":case"Address":case"Email":case"Phone":b=["contains","does not contain","is","is not","starts with","ends with","is blank","is not blank"];break;case"Number":case"Currency":case"Slider":case"Rating":case"Basic Formula":b=["is","is not","higher than","lower than","is blank","is not blank"];break;case"File":case"Image":case"Signature":b=["is blank","is not blank"];break;case"Date":b=["is","is not","is during the current","is during the previous","is during the next","is before the previous","is after the next","is before","is after","is today","is today or before","is today or after","is before today","is after today","is blank","is not blank"];break;case"Time":b=["is","is not","is before","is after","is before current time","is after current time","is blank","is not blank"];break;case"Calendar":case"Date/Time":b=["is","is not","is during the current","is during the previous","is during the next","is before the previous","is after the next","is before","is after","is today","is today or before","is today or after","is before today","is after today","is before current time","is after current time","is blank","is not blank"];break;case"Join":if(b=["is","is not","contains","does not contain","is blank","is not blank"],b=["is","is not","is blank","is not blank"],"editField"==h.subType){var e=g.App.get("objects",h.subTypeId);checkNested(e,"joinTableId")&&checkNested(h.fieldItems[a],"dataTableId")&&e.joinTableId==h.fieldItems[a].dataTableId&&b.push("is connected with current record")}"_users"==h.fieldItems[a].joinTableSlug.substr(-6)&&b.push("is logged in user");break;case"Decision Box":b=["is blank","is not blank"],b=["is unchecked","is checked","is not unchecked","is not checked"];break;case"Multi-Select":b=["is","is not","contains","does not contain","is blank","is not blank"];break;default:b=["is","is not","is blank","is not blank"]}}return b},h.showText=function(a){return k.operator||jQuery.inArray(h.getFieldType(a),["Date","Time","Date/Time","Calendar","Radio","Checkbox","Select","Multi-Select","Join","Decision Box"])===-1&&angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["","is blank","is not blank"])===-1};h.showSelect=function(a){return jQuery.inArray(h.getFieldType(a),["Radio","Checkbox","Select","Multi-Select"])>-1&&angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["","is blank","is not blank"])===-1},h.showSelect2=function(a){return checkNested(h.fieldItems,a.fieldId,"type")&&jQuery.inArray(h.getFieldType(a),["Join"])>-1&&angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["","is blank","is not blank","is logged in user","is connected with current record"])===-1},h.showUserSelect=function(a){return checkNested(a,"operator")&&jQuery.inArray(a.operator,["is connected to logged in user"])>-1},h.loadJoinOtherField=function(a){"Join"==a.type&&(a.userOptions=g.App.get("userDataTableFieldsWithSameJoinField",a.id))},h.loadJoinData=function(a){"Join"==a.type&&e.post("joinTableOptions",{field:a},function(b){a.options=b.items},function(b,c){DataAPI.handleErrors(c,!0),a.options=[]})},h.showDateText=function(a){return jQuery.inArray(a.operator,["is","is not","is before","is after"])>-1},h.showDateSelect=function(a){return angular.isDefined(a.operator)&&"is during the current"===a.operator},h.showDateSelect2=function(a){return angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["is during the previous","is during the next","is before the previous","is after the next"])>-1},h.showTimeText=function(a){return angular.isDefined(a.operator)&&jQuery.inArray(a.operator,["is","is not","is before","is after"])>-1},h.deleteConditionItem=function(a){h.options.items.splice(a,1),0===h.options.items.length&&h.onDelete()},h.addNewConditionItem=function(){h.options.items.push({})},h.addItem=function(a){switch(a){case"displayRule":h.options.displayRules.push({})}},h.deleteItem=function(a,b){switch(a){case"displayRule":h.options.displayRules.length>1&&h.options.displayRules.splice(b,1)}},h.addChildFilterGroup=function(){h.options.child.push({items:[],child:[]})},h.removeChildFilterGroup=function(a){h.options.child.splice(a,1)},h.toggleBox=function(){h.close=!h.close},h.isHeader=function(){return jQuery.inArray(h.type,["dataTableFilter","dataTableTabFilter"])>-1},h.isFooter=function(){return jQuery.inArray(h.type,["dataTableFieldDisplayRules","formDisplayRules","formValidationRules"])>-1},h.addFieldToErrMsg=function(a){checkNested(h.options,"errMsg")&&!angular.isUndefined(h.options.errMsg)||(h.options.errMsg=""),h.options.errMsg+="{"+a.name+"}"}}]}),angular.module("app").component("fieldFiltersForAppDisplay",{bindings:{options:"=",onDelete:"&"},template:'<div class="filters-box-display" ng-show="$ctrl.options.items.length > 0" ng-class="[{\'close-box\': $ctrl.close},$ctrl.filterTypeClass]"><div class="filter-items" ng-class="{\'filter-match-any\': $ctrl.options.condition == \'Any\'}"><div class="filter-item" ng-repeat="(itemIndex, item) in $ctrl.options.items"><show-field-name slug="item.fieldId"></show-field-name> <strong>{{$ctrl.getOpertor(item.operator)}}</strong> {{item._text || item.val}} <i class="far fa-times" ng-click="$ctrl.onDelete({index: itemIndex})"></i><span class="filter-match" ng-if="$ctrl.options.condition != \'Any\'" uib-tooltip="AND">&&</span><span class="filter-match" ng-if="$ctrl.options.condition == \'Any\'" uib-tooltip="OR">||</span></div></div></div>',controller:["$scope","$element","$attrs","$compile","Http","$stateParams","$rootScope",function(a,b,c,d,e,f,g){var h=this;h.fieldItems={};h.getOpertor=function(a){switch(a){case"is":return"=";case"is not":return"<>";case"higher than":return">";case"lower than":return"<";default:return a}},h.$onInit=function(){}}]}),angular.module("app").component("fieldControl",{bindings:{field:"=",item:"=ngModel"},controller:["$scope","$element","$attrs","$compile",function(a,b,c,d){var e=this;e.$onInit=function(){angular.forEach(e.field,function(a,b){});var c='<div class="field-control field-type-{{$ctrl.field.type}}">';switch(e.field.type){case"Name":checkNested(e,"field","options","formFieldDisplay")&&angular.forEach(e.field.options.formFieldDisplay,function(a){switch(a.key){case"title":c+='<select class="form-control" ng-model="$ctrl.item.title">',c+="<option>None</option>",c+='<option value="Ms.">Ms.</option>',c+='<option value="Miss">Miss</option>',c+='<option value="Mr.">Mr.</option>',c+='<option value="Mrs.">Mrs.</option>',c+='<option value="Dr.">Dr.</option>',c+='<option value="Prof.">Prof.</option>',c+="</select>"}})}c+="</div>";var f=d(c)(a);b.append(f)}}]}),angular.module("app").component("rootLoading",{controller:["$rootScope",function(a){$ctrl=this,$ctrl.show=a.rootLoadingCounter,$ctrl.$onInit=function(){}}],template:'<div id="root-loading-icon" ng-if="$ctrl.show"><div></div></div>'}),angular.module("app").component("afBreadcrumb1",{controller:["$rootScope",function(a){$ctrl=this,$ctrl.$onInit=function(){}}],template:'<div class="breadcrumb-wrap"><ul class="breadcrumb"><li ng-repeat="breadcrumb in getAfBreadCrumbs"><a>{{breadcrumb.names}}</a></li></ul></div>'}),angular.module("app").directive("afBreadcrumb",function(){return{restrict:"AE",template:'<div class="breadcrumb-wrap"><ul class="breadcrumb"><li ng-repeat="breadcrumb in afBreadCrumbs"><a af-menu-item data-page-id="{{breadcrumb.id}}" data-type="Page">{{breadcrumb.name}}</a></li></ul></div>',link:function(a,b,c){}}}),angular.module("app").component("afDataTableField",{bindings:{columnSlug:"=",column:"=?",item:"=",itemVal:"=",blankVal:"=",onAction:"&",columns:"<",rowSummary:"<",inDisplayMode:"<",allowInlineEditing:"<",updateVal:"<",params:"=",loggedInItem:"="},controller:["$scope","$element","$attrs","$compile","$filter","Config","AppURL","App","$rootScope","CommonFactory","$uibModal",function(a,b,c,d,e,f,g,h,i,j,k){var l=this,m="",n=function(){"image-popup"==m&&jQuery("img",b).click(function(a){a.preventDefault(),a.stopPropagation();var b=jQuery(this).attr("src");k.open({animation:!0,templateUrl:"img-modal.html",controller:["$scope","$uibModalInstance","imageUrl",function(a,b,c){a.imageUrl=c,a.close=function(){b.close()}}],openedClass:"modal-open tb-full-popup-1",resolve:{imageUrl:function(){return b}}})})},o=function(){checkNested(l,"rowSummary")&&!angular.isUndefined(l.rowSummary)||(l.rowSummary=0),checkNested(l,"columns")&&!angular.isUndefined(l.columns)||(l.columns={}),checkNested(l,"columnSlug")&&angular.isDefined(l.columnSlug)&&(l.column={},angular.forEach(l.columns,function(a){checkNested(a,"slug")&&a.slug==l.columnSlug&&(l.column=a)})),checkNested(l,"inDisplayMode")&&!angular.isUndefined(l.inDisplayMode)||(l.inDisplayMode="dataTable");var a=checkNested(l.column,"slug")&&checkNested(l.item,l.column.slug)?l.item[l.column.slug]:"";angular.isDefined(l.itemVal)&&(a=l.itemVal),checkNested(l.column,"outputFormat")&&(l.column.stopWatch="No","Stop Watch"==l.column.outputFormat&&(l.column.stopWatch="Yes"));var c=p(l.column,a);checkNested(l,"inDisplayMode")&&"detail"==l.inDisplayMode&&""===c&&(c="&nbsp;"),!c&&angular.isDefined(l.blankVal)&&(c=l.blankVal),b.html(angular.isString(c)?"<span>"+c+"</span>":c),checkNested(l.column,"stopWatch")&&"Yes"==l.column.stopWatch&&jQuery(b).hitStopWatchParent(),checkNested(l.column,"displayRules")&&l.column.displayRules&&angular.forEach(l.column.displayRules,function(a){if(checkNested(a,"items")&&a.items.length>0){var c=0;angular.forEach(a.items,function(a){c+=q(a,l.item)}),c&&c==a.items.length&&checkNested(a,"displayRules")&&angular.isArray(a.displayRules)&&angular.forEach(a.displayRules,function(a){switch(a.action){case"textColor":b.css("color",a.color);break;case"textStyle":checkNested(a,"textBold")&&a.textBold&&b.css("font-weight","bold"),checkNested(a,"textItalic")&&a.textItalic&&b.css("font-style","italic"),checkNested(a,"textStrikethrough")&&a.textStrikethrough&&b.css("text-decoration","line-through");break;case"bkColor":b.parent().css("background-color",a.color);break;case"hideValue":b.hide();break;case"hideText":b.find(" > span").hide();break;case"icon":b.find("a").length?b.find("a").prepend('<i class="'+a.iconClass+'" style="color: '+a.color+'"></i> '):b.prepend('<i class="'+a.iconClass+'" style="color: '+a.color+'"></i> ')}})}}),n()},p=function(b,c,f,j){var k=angular.copy(c),n=!(angular.isUndefined(j)||!checkNested(j,"rawValue"))&&j.rawValue;if(checkNested(b,"join")&&(angular.isUndefined(f)||!f)&&"form"!=l.inDisplayMode){angular.isString(k)&&(k=[k]);var o=[];return angular.forEach(k,function(a){a&&o.push(p(b,a,!0))}),o.join("<br/>")}("null"==k||null==k||""===k||angular.isUndefined(k))&&(k="");var q=checkNested(b,"type")?b.type:"";1==l.rowSummary&&(jQuery.inArray(q,["Number","Currency","Basic Formula","Complex Formula"])==-1?q="RowSummeryLabel":checkNested(b,"showSummery")&&"No"==b.showSummery&&(k=""));var r,s,c,t,u,v,w=", ";if(checkNested(b,"ftype"))switch(b.ftype){case"html":k=i.App.get("processVariables",b.text,{loggedInItem:l.loggedInItem}),angular.forEach(l.item,function(a,b){var c=!1;angular.forEach(l.columns,function(a){a.slug==b&&(c=a)}),c!==!1&&(valueStr1=p(c,a,{},{rawValue:!0}),k=k.split("{"+b+"}").join(valueStr1)),angular.isObject(a)?(angular.forEach(a,function(a,c){k=k.split("{!!"+b+"."+c+"!!}").join(a)}),k=k.split("{!!"+b+"!!}").join(_tb.joinBy(a,", "))):k=k.split("{!!"+b+"!!}").join(a)}),angular.isDefined(l.loggedInItem)&&angular.forEach(l.loggedInItem,function(a,b){var c=!1;angular.forEach(l.columns,function(a){a.slug==b&&(c=a)}),c!==!1?(valueStr1=p(c,a,{}),k=k.split("{loggedInUser."+b+"}").join(valueStr1)):k=k.split("{loggedInUser."+b+"}").join(a)})}else switch(q){case"RowSummeryLabel":var x=angular.copy(l.item.lbl);return l.item.lbl="",x;case"Name":return c=[],checkNested(b,"options","formFieldDisplay")&&angular.forEach(b.options.formFieldDisplay,function(a){c.push(_tb.escapeHTML(k[a.key]))}),c.join(" ");case"Address":c={},checkNested(b,"options","formFieldDisplay")&&angular.forEach(b.options.formFieldDisplay,function(a){c[a.key]=angular.isDefined(k[a.key])?_tb.escapeHTML(k[a.key]):""}),s=[];var y=[];return checkNested(c,"address")&&c.address&&s.push(c.address),checkNested(c,"address2")&&c.address2&&s.push(c.address2),s.length&&(s=[s.join("<br/>")]),y=[],checkNested(c,"city")&&c.city&&y.push(c.city),checkNested(c,"state")&&checkNested(c,"zip")&&c.state&&c.zip?y.push(jQuery.trim(c.state+"##"+c.zip)):(checkNested(c,"state")&&c.state&&y.push(c.state),checkNested(c,"zip")&&c.zip&&y.push(c.zip)),y.length&&s.push(y.join(", ")),checkNested(c,"country")&&c.country&&s.push(c.country),y=[],checkNested(c,"lat")&&c.lat&&y.push(c.lat),checkNested(c,"lng")&&c.lng&&y.push(c.lng),y.length&&s.push(y.join(", ")),s=s.join("<br/>"),checkNested(b,"mapLink")&&"Yes"==b.mapLink&&""!=s?(mapQueryStr=s.split("<br/>").join(",").split(", ").join(",").split("##").join(","),s=s.split("##").join(" "),'<a target="_blank" href="https://maps.google.com/?q='+mapQueryStr+'">'+s+"</a>"):s=s.split("##").join(" ");case"Calendar":var z=checkNested(k,"all_day")&&"1"==k.all_day?h.getSetting("dateFormat"):h.getSetting("dateFormat")+" "+h.getSetting("timeFormat");if(checkNested(l.column,"stopWatch")&&"Yes"==l.column.stopWatch)return checkNested(l.column,"stopWatchCountBy")&&"Start Date"==l.column.stopWatchCountBy?k.start?'<span d1="'+k.start+'" hit-start-watch class="hsw-stopwatch"></span>':"":k.end?'<span d1="'+k.end+'" hit-start-watch class="hsw-stopwatch"></span>':"";if(checkNested(l.params,"show"))return c="","stopWatch"==l.params.show?c='<span start="'+k.start+'" end="'+k.end+'" hit-start-watch class="hsw-stopwatch"></span>':"onlyEndDate"==l.params.show&&(z=h.getSetting("dateFormat")+" "+h.getSetting("timeFormat"),checkNested(k,"end")&&k.end&&(r=new Date(k.end.split("-").join("/")),c=i.App.apply("filterDate",{date:r,format:z}))),c;if(checkNested(l.column,"outputFormat")&&"Age"==l.column.outputFormat){if(angular.isString(k)||""==jQuery.trim(k))return"";var r="";return checkNested(l.column,"stopWatchCountBy")&&"Start Date"==l.column.stopWatchCountBy?checkNested(k,"start")&&""!=jQuery.trim(k.start)&&(r=new Date(k.start.split("-").join("/"))):checkNested(k,"end")&&""!=jQuery.trim(k.end)&&(r=new Date(k.end.split("-").join("/"))),moment(r).isValid()?(r=_tb.countAge(r),k=r.y+" Year",r.y>1&&(k+="s"),checkNested(l.column,"ageIncludeMonth")&&"Yes"==l.column.ageIncludeMonth&&(k=k+" "+r.m+" Month",r.m>1&&(k+="s")),checkNested(l.column,"ageIncludeDay")&&"Yes"==l.column.ageIncludeDay&&(k=k+" "+r.d+" Day",r.d>1&&(k+="s")),jQuery.trim(k)):""}return c=[],checkNested(k,"start")&&k.start&&(r=new Date(k.start.split("-").join("/")),c.push(i.App.apply("filterDate",{date:r,format:z}))),checkNested(b,"options","rangeDate")&&checkNested(k,"end")&&k.end&&(r=new Date(k.end.split("-").join("/")),c.push(i.App.apply("filterDate",{date:r,format:z}))),c.length?c.join(" to "):"";case"Email":if(checkNested(b,"displayAs")&&"Link"===b.displayAs&&k)return'<a href="mailto:'+k+'">'+_tb.escapeHTML(k)+"</a>";break;case"Link":if((!checkNested(b,"displayAs")||"Link"===b.displayAs)&&k){var A=checkNested(k,"link")?k.link:k;if(""!=A){var B='<a href="'+_tb.fix("url",A)+'" ';return checkNested(b,"options","openInNewWindow")&&"Yes"==b.options.openInNewWindow&&(B+='target="_blank"'),B+=">",B+=checkNested(b,"options","linkFormat")?"same_text"===b.options.linkFormat&&checkNested(b,"options","linkText")?b.options.linkText:"unique"===b.options.linkFormat?checkNested(k,"text")?_tb.escapeHTML(k.text):"":_tb.escapeHTML(A):A,
B+="</a>"}return""}break;case"Phone":return P=checkNested(b.options,"phoneFormat")&&""!=b.options.phoneFormat&&""!=k&&k?e("mask")(k.toString(),b.options.phoneFormat):k,checkNested(b,"displayAs")&&"Link"===b.displayAs&&k?'<a href="tel:'+k+'">'+_tb.escapeHTML(P)+"</a>":P;case"Date1":return k?moment(k).format(h.getSetting("dateFormat")):"";case"Date":if(checkNested(l.column,"stopWatch")&&"Yes"==l.column.stopWatch)return k?'<span d1="'+k+'" hit-start-watch class="hsw-stopwatch"></span>':"";var C="";return checkNested(l.column,"defaultFormatDate")&&""!=l.column.defaultFormatDate?"--no-val--"!=l.column.defaultFormatDate&&(C=l.column.defaultFormatDate):C=h.getSetting("dateFormat"),r=new Date(k.split("-").join("/")),checkNested(l.column,"outputFormat")&&"Age"==l.column.outputFormat?""==jQuery.trim(k)?"":(r=_tb.countAge(r),k=r.y+" Year",r.y>1&&(k+="s"),checkNested(l.column,"ageIncludeMonth")&&"Yes"==l.column.ageIncludeMonth&&(k=k+" "+r.m+" Month",r.m>1&&(k+="s")),checkNested(l.column,"ageIncludeDay")&&"Yes"==l.column.ageIncludeDay&&(k=k+" "+r.d+" Day",r.d>1&&(k+="s")),jQuery.trim(k)):k?i.App.apply("filterDate",{date:r,format:C}):"";case"Time":r=new Date(moment().format("Y/MM/D")+" "+k);var C="";return checkNested(l.column,"defaultFormatTime")&&""!=l.column.defaultFormatTime?"--no-val--"!=l.column.defaultFormatTime&&(C=l.column.defaultFormatTime):C=h.getSetting("timeFormat"),k?i.App.apply("filterDate",{date:r,format:C}):"";case"Date/Time":if(checkNested(l.column,"stopWatch")&&"Yes"==l.column.stopWatch)return k?'<span d1="'+k+'" hit-start-watch class="hsw-stopwatch"></span>':"";if(r=new Date(k.split("-").join("/")),checkNested(l.column,"outputFormat")&&"Age"==l.column.outputFormat)return""==jQuery.trim(k)?"":(r=_tb.countAge(r),k=r.y+" Year",r.y>1&&(k+="s"),checkNested(l.column,"ageIncludeMonth")&&"Yes"==l.column.ageIncludeMonth&&(k=k+" "+r.m+" Month",r.m>1&&(k+="s")),checkNested(l.column,"ageIncludeDay")&&"Yes"==l.column.ageIncludeDay&&(k=k+" "+r.d+" Day",r.d>1&&(k+="s")),jQuery.trim(k));var C=[];return checkNested(l.column,"defaultFormatDate")&&""!=l.column.defaultFormatDate?"--no-val--"!=l.column.defaultFormatDate&&C.push(l.column.defaultFormatDate):C.push(h.getSetting("dateFormat")),checkNested(l.column,"defaultFormatTime")&&""!=l.column.defaultFormatTime?"--no-val--"!=l.column.defaultFormatTime&&C.push(l.column.defaultFormatTime):C.push(h.getSetting("timeFormat")),C=C.join(" "),k?i.App.apply("filterDate",{date:r,format:C}):"";case"Currency":if(checkNested(b,"options","decimalPoints")&&""!=k&&(k=_tb.roundNum(k,b.options.decimalPoints)),checkNested(b,"options","currencySymbol")&&k)return checkNested(b,"options","kmark")&&""!=b.options.kmark&&(k=_tb.kMark(k,b.options.kmark)),checkNested(b,"options","currencyFormat")&&"Suffix"==b.options.currencyFormat?_tb.escapeHTML(k)+b.options.currencySymbol:b.options.currencySymbol+_tb.escapeHTML(k);break;case"Number":checkNested(b,"options","decimalPoints")&&""!=k&&(k=_tb.roundNum(k,b.options.decimalPoints)),checkNested(b,"options","kmark")&&""!=b.options.kmark&&(k=_tb.kMark(k,b.options.kmark)),k||(k=0);break;case"Basic Formula":case"Complex Formula":if(checkNested(b,"options","decimalPoints")&&""!=k&&(k=_tb.roundNum(k,b.options.decimalPoints)),k||(k=0),checkNested(b,"options","kmark")&&""!=b.options.kmark&&(k=_tb.kMark(k,b.options.kmark)),checkNested(b,"options","currencyType")&&""!=b.options.currencyType&&""!==k){var D=checkNested(b,"options","currencySymbol")?b.options.currencySymbol:_tb.currencySymbol(b.options.currencyType);return checkNested(b,"options","currencyFormat")&&"Suffix"==b.options.currencyFormat?_tb.escapeHTML(k)+D:D+_tb.escapeHTML(k)}return _tb.escapeHTML(k);case"File":if(!isNullValue(k)){u=k,angular.isObject(u)&&(u=checkNested(u,"dlUrl")?u.dlUrl:checkNested(u,"url")?u.url:""),u=u.indexOf("https://")==-1||u.indexOf("http://")==-1?u:g.SITE+"uploads/"+k;var E='target="_blank"';return checkNested(k,"secured")&&"Yes"==k.secured&&checkNested(k,"key")&&(u="javascript:void(0)",E="onclick=\"signedUrl('"+g.SITE+"secured/"+k.key+"')\""),'<a href="'+u+'" '+E+">Download</a>"}break;case"Image":if(n)return checkNested(k,"src")?k.src:"";var F="";if(checkNested(b,"sizeType")&&"custom"==b.sizeType&&(checkNested(b,"width")&&(F+=" width: "+b.width+"px;"),checkNested(b,"height")&&(F+=" height:"+b.height+"px;")),"null"==k||null==k||""==k||!k||!checkNested(k,"src"))return"";var G=k.src;if(checkNested(b,"options","thumb","width")||checkNested(b,"options","thumb","height")){var H=[];checkNested(b,"options","thumb","width")&&H.push("w_"+b.options.thumb.width),checkNested(b,"options","thumb","height")&&H.push("h_"+b.options.thumb.height),H.length&&(G=G.split("/tadabase/image/upload/").join("/tadabase/image/upload/"+H.join(",")+"/"))}var I=[];"detail"!=l.inDisplayMode&&(I=["thumb-wrap"]),checkNested(b,"modalPopup")&&"Yes"==b.modalPopup&&(m="image-popup"),checkNested(b,"imageSizeType")&&"custom"==b.imageSizeType&&(I.push("thumb-auto-wrap"),checkNested(b,"imageWidth")&&(F+=" width: "+b.imageWidth+"px;max-width: "+b.imageWidth+"px;"),checkNested(b,"imageHeight")&&(F+=" height:"+b.imageHeight+"px; max-height:"+b.imageHeight+"px;"));var J=["img-responsive"];if(checkNested(b,"options","isResponsive")&&"No"==b.options.isResponsive&&(J=[]),checkNested(b,"showAs")){if("Link"==b.showAs)return'<a href="'+G+'" target="_blank">'+G+"</a>";if("Text Link"==b.showAs)return'<a href="'+G+'" target="_blank">'+(checkNested(b,"showAsTextLink")?b.showAsTextLink:"Click Here")+"</a>"}return'<div class="'+I.join(" ")+'"><img src="'+G+'" class="'+J.join(" ")+'" style="'+F+'"/></div>';case"Signature":return"null"!=k&&null!=k&&""!=k&&k?(u=k,angular.isObject(u)&&(u=checkNested(u,"url")?u.url:""),u=u.indexOf("https://")==-1||u.indexOf("http://")==-1?u:g.SITE+"uploads/"+k,'<a href="'+u+'" target="_blank"><img src="'+u+'" class="img-thumb-sm"/></a>'):"";case"Radio":case"Checkbox":case"Select":case"Multi-Select":k=_tb.decode3(k);var K=checkNested(b,"options","allowDiffVal")&&1==b.options.allowDiffVal;checkNested(b,"options","options")&&angular.forEach(b.options.options,function(a){angular.isArray(k)?angular.forEach(k,function(c,d){(K&&c==a.val||!K&&c==a.text)&&(c=K?a.text:c,checkNested(b,"options","allowColorBadge")&&1==b.options.allowColorBadge?k[d]='<span class="badge '+(checkNested(a,"badgeClass")?a.badgeClass:"badge-wh-10")+'">'+c+"</span>":k[d]=c)}):""!=k&&(K&&k==a.val||!K&&k==a.text)&&(k=K?a.text:k,checkNested(b,"options","allowColorBadge")&&1==b.options.allowColorBadge&&(k='<span class="badge '+(checkNested(a,"badgeClass")?a.badgeClass:"badge-wh-10")+'">'+k+"</span>"))}),checkNested(b,"displayAs")&&"Inline"==b.displayAs||(w="<br>");break;case"Decision Box":var L=["Off","On"];return checkNested(b,"options","inputType")&&"Checkbox"!=b.options.inputType&&checkNested(b,"options","labels")&&(L=b.options.labels.split("/").reverse()),checkNested(L,k)?L[k]:L[0];case"Date Formula":if(k){t=checkNested(b,"options","displayOutputAs")?b.options.displayOutputAs:"Day",t=checkNested(b,"outputAs")?b.outputAs:t;var M=_tb.countHourDaySeconds(k);switch(t){case"Date":r=new Date(1e3*k),k=k?i.App.apply("filterDate",{date:r,format:h.getSetting("dateFormat")}):"",P="";break;case"Hour":var N=checkNested(b,"options","displayOutputTimeFormat")?b.options.displayOutputTimeFormat:"";switch(N=checkNested(b,"outputTimeFormat")?b.outputTimeFormat:N,P="",N){case"HH:mm":M=_tb.countHourMinSecFromSeconds(k),k=M.h+":"+M.m;break;case"HH:mm:ss":M=_tb.countHourMinSecFromSeconds(k),k=M.h+":"+M.m+":"+M.s;break;default:k=M.h,P="Hour"}break;case"Second":k=M.s,P="Second";break;case"Month":k=M.m1,P="Month";break;case"Year":k=M.y,P="Year";break;case"Value":P="";break;default:k=M.d,P="Day"}k+=""!=P?" "+P+(k>1?"s":""):""}return k;case"Slider":return k&&(t=checkNested(b,"outputAs")?b.outputAs:"Number","Progress Bar"==t&&(width=Math.round(100*(k-(b.options.min||0))/((b.options.max||100)-(b.options.min||0))),xClass="",color="#337ab7",checkNested(b,"pBar")&&(checkNested(b.pBar,"defaultColor")&&""!=b.pBar.defaultColor&&(color=b.pBar.defaultColor),checkNested(b.pBar,"type")&&"Stripe"==b.pBar.type&&(xClass="progress-bar-striped"),checkNested(b.pBar,"colors")&&angular.isArray(b.pBar.colors)&&angular.forEach(b.pBar.colors,function(a){if(checkNested(a,"op"))switch(a.op){case"higher than":k>a.val&&(color=a.color);break;case"lower than":k<a.val&&(color=a.color);break;case"equal to":k==a.val&&(color=a.color);break;case"not equal to":k!=a.val&&(color=a.color)}})),k='<div class="progress progress-border" uib-tooltip="'+k+'" title="'+k+'"><div class="progress-bar '+xClass+'" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: '+width+"%;background-color: "+color+'">'+k+"</div></div>")),k;case"Rating":if(k&&(t=checkNested(b,"outputAs")?b.outputAs:"Icon","Number"!=t)){var O=checkNested(b.options,"numberOfStar")?b.options.numberOfStar:5,P='<div class="star-rating" uib-tooltip="'+k+'">',J="fa fa-star",Q=checkNested(b.options,"iconDefaultColor")?b.options.iconDefaultColor:"#000000";if(checkNested(b.options,"rateIcon"))switch(b.options.rateIcon){case"Heart":J="fa fa-heart";break;case"Heart1":J="far fa-heart";break;case"Star1":J="far fa-star";break;case"Flag":J="fa fa-flag";break;case"Flag1":J="far fa-flag";break;case"ThumbUp":J="fa fa-thumbs-up";break;case"ThumbUp1":J="far fa-thumbs-up";break;case"Custom":J=checkNested(b.options,"customRateIcon")?b.options.customRateIcon:""}for(checkNested(b.options,"iconColors")&&angular.isArray(b.options.iconColors)&&angular.forEach(b.options.iconColors,function(a){if(checkNested(a,"op"))switch(a.op){case"higher than":k>a.val&&(Q=a.color,J=a.icon);break;case"lower than":k<a.val&&(Q=a.color,J=a.icon);break;case"equal to":k==a.val&&(Q=a.color,J=a.icon);break;case"not equal to":k!=a.val&&(Q=a.color,J=a.icon)}}),v=1;v<=O;v++)v<=k?P+='<i class="'+J+'" style="color: '+Q+'"></i>':v==Math.ceil(k)&&(P+="Star"==t||"Star1"==t?'<i class="'+J+'-half" style="color: '+Q+'"></i>':'<i class="'+J+'" style="color: '+Q+'"></i>');k=P+"</div>"}return k;case"TableLink":var R="";if(0==l.rowSummary){var S=l.column.title,T=[];if(checkNested(l.column,"linkType")&&"Button"==l.column.linkType)if(T.push("btn"),checkNested(l.column,"buttonStyle")&&"Outline"==l.column.buttonStyle&&T.push("btn-outline"),checkNested(l.column,"buttonFill")&&"Block"==l.column.buttonFill&&T.push("btn-block"),checkNested(l.column,"buttonSize")&&("Small"==l.column.buttonSize?T.push("btn-sm"):"Large"==l.column.buttonSize&&T.push("btn-lg")),checkNested(l.column,"buttonColor"))switch(l.column.buttonColor){case"Success":T.push("btn-success");break;case"Info":T.push("btn-info");break;case"Danger":T.push("btn-danger");break;case"Warning":T.push("btn-warning");break;case"Default":T.push("btn-default");break;default:T.push("btn-primary")}else T.push("btn-primary");else T.push("td-link");if(T.push("td-data-link"),checkNested(l,"column","lblIcon")&&(S=checkNested(l,"column","lblIconAlign")&&"Right"==l.column.lblIconAlign?S+' <i class="fa fa-'+l.column.lblIcon+'"></i>':'<i class="fa fa-'+l.column.lblIcon+'"></i> '+S),T=T.length?'class="'+T.join(" ")+'"':"",checkNested(l.column,"titleFieldId")&&""!=l.column.titleFieldId&&(S="",checkNested(l.item,l.column.titleFieldId)&&(angular.isObject(l.item[l.column.titleFieldId])?(S=[],angular.forEach(l.item[l.column.titleFieldId],function(a){S.push(a)}),S=S.join(" ")):S=l.item[l.column.titleFieldId])),"Action"!=l.column.name&&"Delete"!=l.column.name){var U=l.item.id;if(checkNested(l.column,"fieldSlug")&&(U=!1,checkNested(l.item,l.column.fieldSlug)&&angular.isObject(l.item[l.column.fieldSlug]))){var V=Object.keys(l.item[l.column.fieldSlug]);angular.isArray(V)&&V.length>0&&(U=V[0])}if(checkNested(l.item,"slug")&&(U=l.item.slug+"-"+U),U)if(checkNested(l.column,"openInPopup")&&"Yes"==l.column.openInPopup){var W=_tb.escapeAttrs(checkNested(l.column,"popupTitle")&&""!=l.column.popupTitle?l.column.popupTitle:l.column.name),X=l.item.id;R=d('<a href="javascript:void(0)" '+T+' data-new-window="No" data-stop-click="1" data-open-in-popup="1" data-popup-title="'+W+'" data-popup-rid="'+X+'" popup-item="$ctrl.item" data-type="Page" af-menu-item="" data-item-id="'+U+'" data-page-id="'+l.column.page.id+'" data-link="http://" ng-click="$ctrl.onAction()">'+S+"</a>")(a)}else R=d('<a href="javascript:void(0)" '+T+' data-new-window="No" data-type="Page" af-menu-item="" data-item-id="'+U+'" data-page-id="'+l.column.page.id+'" data-link="http://" ng-click="$ctrl.onAction()">'+S+"</a>")(a)}else R=d('<a href="javascript:void(0)" '+T+' ng-click1="$ctrl.doAction({column: column, itemIndex: itemIndex, event: $event, colIndex: colIndex})">'+S+"</a>")(a.$parent)}return R;case"Text":case"Long Text":angular.isArray(k)||angular.isObject(k)?angular.forEach(k,function(a,b){k[b]=_tb.escapeHTML(a)}):k=_tb.escapeHTML(k)}var Y=!1;if(checkNested(b,"valueSeparator")&&"New Line"==b.valueSeparator?w="<br>":checkNested(b,"displayAs")&&"Inline"==b.displayAs||(w="<br>"),checkNested(b,"valueLink")&&(angular.isArray(k)||angular.isObject(k))&&(angular.forEach(k,function(a,c){k[c]='<a href="javascript:void(0)" data-new-window="No" data-type="Page" af-menu-item="" data-item-id="'+c+'" data-page-id="'+b.valueLink+'" data-link="http://" >'+a+"</a>"}),Y=!0),angular.isArray(k))return k.join(w);if(angular.isObject(k)){s=[];var Z;for(Z in k)angular.isArray(k[Z])?s.push(k[Z].join(",")):angular.isObject(k[Z])||s.push(k[Z]);k=s.join(w)}return Y?d(k)(a):k},q=function(b,c){var d=!1;angular.forEach(l.columns,function(a){checkNested(b,"fieldId")&&b.fieldId==a.slug&&(d=a)}),isTrue=0;var e,f;switch(b.operator){case"is unchecked":case"is not checked":(!checkNested(c,b.fieldId)||"1"!=c[b.fieldId])&&isTrue++;break;case"is checked":case"is not unchecked":checkNested(c,b.fieldId)&&!/^\s*$/.test(c[b.fieldId])&&null!=c[b.fieldId]&&isTrue++;break;case"contains":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)&&(angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())>-1&&isTrue++:angular.isObject(c[b.fieldId])&&_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++);break;case"does not contain":checkNested(c,b.fieldId)&&!_tb.is("null",b.val)?angular.isString(c[b.fieldId])?c[b.fieldId].toLowerCase().indexOf(b.val.toLowerCase())==-1&&isTrue++:angular.isObject(c[b.fieldId])&&!_tb.is("contains",b.val.toLowerCase(),c[b.fieldId])&&isTrue++:isTrue++;break;case"is":if(checkNested(d,"type")&&"Date"==d.type)checkNested(c,b.fieldId)&&moment(b.val).isSame(c[b.fieldId],"day")&&isTrue++;else if(checkNested(d,"type")&&"Join"==d.type){var g=[];angular.isObject(c[b.fieldId])&&angular.forEach(c[b.fieldId],function(a,b){g.push(b)}),checkNested(c,b.fieldId)&&g.indexOf(b.val)>-1&&isTrue++}else checkNested(c,b.fieldId)&&c[b.fieldId]==b.val&&isTrue++;break;case"is not":if(checkNested(a.fieldType,b.fieldId)&&"Date"==a.fieldType[b.fieldId])(!checkNested(c,b.fieldId)||!moment(b.val).isSame(c[b.fieldId],"day"))&&isTrue++;else if(checkNested(d,"type")&&"Join"==d.type){var g=[];angular.isObject(c[b.fieldId])&&angular.forEach(c[b.fieldId],function(a,b){g.push(b)}),checkNested(c,b.fieldId)&&g.indexOf(b.val)==-1&&isTrue++}else(!checkNested(c,b.fieldId)||c[b.fieldId]!=b.val)&&isTrue++;break;case"starts with":checkNested(c,b.fieldId)&&new RegExp("^"+b.val).test(c[b.fieldId])&&isTrue++;break;case"ends with":checkNested(c,b.fieldId)&&new RegExp(b.val+"$").test(c[b.fieldId])&&isTrue++;break;case"is blank":(!checkNested(c,b.fieldId)||/^\s*$/.test(c[b.fieldId])||null==c[b.fieldId]||angular.isString(c[b.fieldId])&&_tb.is("null",c[b.fieldId])||angular.isObject(c[b.fieldId])&&_tb.is("objNull",c[b.fieldId]))&&isTrue++;break;case"is not blank":checkNested(c,b.fieldId)&&!/^\s*$/.test(c[b.fieldId])&&null!=c[b.fieldId]&&isTrue++;break;case"higher than":checkNested(c,b.fieldId)&&c[b.fieldId]>parseInt(b.val)&&isTrue++;break;case"lower than":checkNested(c,b.fieldId)&&c[b.fieldId]<parseInt(b.val)&&isTrue++;break;case"is during the current":switch(e=checkNested(b,"val2")?b.val2:"week"){case"month":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"month")&&isTrue++;break;case"quarter":checkNested(c,b.fieldId)&&moment().format("YY-Q")==moment(c[b.fieldId]).format("YY-Q")&&isTrue++;break;case"year":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"year")&&isTrue++;break;default:checkNested(c,b.fieldId)&&moment().week()==moment(c[b.fieldId]).week()&&isTrue++}break;case"is during the previous":e=checkNested(b,"val3")?b.val3:"days",f=parseInt(checkNested(b,"val2")?b.val2:0),checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().subtract(f,e).startOf(e),moment().endOf(e),null,"[]")&&isTrue++;break;case"is during the next":e=checkNested(b,"val3")?b.val3:"days",f=parseInt(checkNested(b,"val2")?b.val2:0),checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBetween(moment().startOf(e),moment().add(f,e).endOf(e),null,"[]")&&isTrue++;break;case"is before the previous":e=checkNested(b,"val3")?b.val3:"days",f=parseInt(checkNested(b,"val2")?b.val2:0),checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(f,e).endOf(e),null,"[]")&&isTrue++;break;case"is before the next":e=checkNested(b,"val3")?b.val3:"days",f=parseInt(checkNested(b,"val2")?b.val2:0),checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().subtract(f,e).endOf(e),null,"[]")&&isTrue++;break;case"is before":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isBefore(moment(b.val).startOf("day"))&&isTrue++;break;case"is after":checkNested(c,b.fieldId)&&checkNested(b,"val")&&moment(c[b.fieldId]).isAfter(moment(b.val).endOf("day"))&&isTrue++;break;case"is today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isSame(moment(),"day")&&isTrue++;break;case"is today or before":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().endOf("day"))&&isTrue++;break;case"is today or after":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().startOf("day"))&&isTrue++;break;case"is before today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isBefore(moment().startOf("day"))&&isTrue++;break;case"is after today":checkNested(c,b.fieldId)&&moment(c[b.fieldId]).isAfter(moment().endOf("day"))&&isTrue++}return isTrue};l.$onChanges=function(a){checkNested(a,"updateVal")&&o()}}]});